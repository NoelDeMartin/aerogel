var HE=Object.defineProperty;var Zm=t=>{throw TypeError(t)};var KE=(t,e,n)=>e in t?HE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Se=(t,e,n)=>KE(t,typeof e!="symbol"?e+"":e,n),WE=(t,e,n)=>e.has(t)||Zm("Cannot "+n);var No=(t,e,n)=>(WE(t,e,"read from private field"),n?n.call(t):e.get(t)),eg=(t,e,n)=>e.has(t)?Zm("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const GE="modulepreload",JE=function(t){return"/playground/"+t},tg={},to=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let o=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=o(n.map(c=>{if(c=JE(c),c in tg)return;tg[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":GE,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},XE=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),YE=(t,e)=>e.some(n=>t instanceof n);let ng,rg;function QE(){return ng||(ng=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZE(){return rg||(rg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dw=new WeakMap,Ef=new WeakMap,fw=new WeakMap,Pu=new WeakMap,zh=new WeakMap;function eS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Hs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&dw.set(n,t)}).catch(()=>{}),zh.set(e,t),e}function tS(t){if(Ef.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Ef.set(t,e)}let Sf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ef.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nS(t){Sf=t(Sf)}function rS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Lu(this),e,...n);return fw.set(r,e.sort?e.sort():[e]),Hs(r)}:ZE().includes(t)?function(...e){return t.apply(Lu(this),e),Hs(dw.get(this))}:function(...e){return Hs(t.apply(Lu(this),e))}}function sS(t){return typeof t=="function"?rS(t):(t instanceof IDBTransaction&&tS(t),YE(t,QE())?new Proxy(t,Sf):t)}function Hs(t){if(t instanceof IDBRequest)return eS(t);if(Pu.has(t))return Pu.get(t);const e=sS(t);return e!==t&&(Pu.set(t,e),zh.set(e,t)),e}const Lu=t=>zh.get(t);function iS(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Hs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Hs(o.result),l.oldVersion,l.newVersion,Hs(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",()=>s())}).catch(()=>{}),a}const oS=["get","getKey","getAll","getAllKeys","count"],aS=["put","add","delete","clear"],Mu=new Map;function sg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Mu.get(e))return Mu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=aS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||oS.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;r&&(c=c.index(a.shift()));const u=await c[n](...a);return s&&await l.done,u};return Mu.set(e,i),i}nS(t=>({...t,get:(e,n,r)=>sg(e,n)||t.get(e,n,r),has:(e,n)=>!!sg(e,n)||t.has(e,n)}));var hw={},lS=Object.defineProperty,cS=(t,e,n)=>e in t?lS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tn=(t,e,n)=>cS(t,typeof e!="symbol"?e+"":e,n);function uS(t){return typeof t=="function"?t():t}function dS(t,e,...n){uS(t)||Xe(e,...n)}function Xe(t="Something went wrong",...e){const n=typeof t=="string"?Error:t;throw new n(...typeof t=="string"?[t]:e)}const yi="items";let fS=class{constructor(e){Tn(this,"db",null),Tn(this,"namespace"),this.namespace=e}async has(e){return await(await this.getConnection()).get(yi,e)!==void 0}async get(e){return(await this.getConnection()).get(yi,e)}async require(e){return await this.get(e)??Xe(`Missing required '${e}' IndexedDBMap value`)}async set(e,n){await(await this.getConnection()).put(yi,n,e)}async delete(e){await(await this.getConnection()).delete(yi,e)}async clear(){await(await this.getConnection()).clear(yi)}close(){this.db&&(this.db.close(),this.db=null)}async getConnection(){return this.db=this.db??await this.connect(),this.db}async connect(){const e=`${this.namespace}-map`;return await iS(e,1,{upgrade(n){n.objectStoreNames.contains(yi)||n.createObjectStore(yi)},blocked:()=>Xe(`Could not open '${e}' IndexedDB`)})}};function hS(){return typeof global<"u"?global:typeof globalThis<"u"?globalThis:window}const pS=hS().Error;class Yn extends pS{constructor(e,n){super(e,n),this.name=new.target.name==="JSError"?"Error":new.target.name,Object.setPrototypeOf(this,new.target.prototype)}}function mS(t,e){return t==null&&e==null?[t===null?1:0,e===null?1:0]:[t??null,e??null]}function Nu(t,e){const[n,r]=mS(t,e);return n>r?1:r>n?-1:0}function Vh(t,e){return t===e?!0:!yt(t)||!yt(e)?!1:t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():Object.keys(t).length!==Object.keys(e).length?!1:!Object.keys(t).some(n=>!Vh(t[n],e[n]))}function gS(t){return Object.entries(t).reduce((e,[n,r])=>(e[r]=n,e),{})}const pw=Array.isArray.bind(Array);function aa(t){return t==null?!0:Array.isArray(t)||typeof t=="string"?t.length===0:typeof t=="object"?Object.keys(t).length===0:!1}function cn(t,e){return t instanceof e}function yS(t){return typeof(t==null?void 0:t[Symbol.iterator])=="function"}function yt(t){return typeof t=="object"&&t!==null}function bS(t){return typeof t=="string"||t instanceof String}function Af(t){return typeof t>"u"||t===null}function Er(t){t={...t};for(const e in t)vS(t,e)&&(t[e]=Er(t[e]));return t}function dl(t,e){let n=t;const r=e.split(".");for(const s of r){if(!yt(n))return;n=n[s]}return n}Object.entries.bind(Object);function nc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function mw(t,e){return t.reduce((n,r)=>(n[r[e]]=r,n),{})}function Us(t,e){const n={},r=Array.isArray(e)?e:[e];for(const s of r)s in t&&(n[s]=t[s]);return n}function vS(t,e){let n;return nc(t,e)&&yt(n=t[e])&&n.constructor===Object}function vs(t,e){if(typeof e=="function"){const s=e,i={};for(const[o,a]of Object.entries(t))s(a)||(i[o]=a);return i}const n={...t},r=Array.isArray(e)?e:[e];for(const s of r)delete n[s];return n}function kn(t){return vs(t,e=>e==null)}function gw(t,e,n){t.prototype[e]=n}function Tt(t){return String(t)}function wS(t){return t instanceof Error?t:new Error(Tt(t))}function _S(t){t.splice(0,t.length)}function Ro(t,e,n){const r=t.slice(0),s=[],i=n?(o,a)=>a.findIndex(l=>n(o,l)):(o,a)=>a.indexOf(o);for(const o of e){const a=i(o,r);a!==-1?r.splice(a,1):s.push(o)}return{added:s,removed:r}}function xS(t,e){const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}function ES(t,e){return t.length!==e.length?!1:!t.some((n,r)=>e[r]!==n)}function en(t,e){return e?t.filter(e):t.filter(n=>!!n)}function SS(t,e){for(const n of t)if(e(n))return n;return null}function AS(t,e){return[...t.entries()].flatMap(([n,r])=>e(r,n))}function IS(t,e){const n=typeof e=="string"?r=>Tt(r[e]):e;return t.reduce((r,s)=>{var i;return(r[i=n(s)]??(r[i]=[])).push(s),r},{})}function CS(t){return t.length===0}function RS(t,e){return t.map(n=>n[e])}function TS(t){return t.length===0?null:t[Math.floor(Math.random()*t.length)]}function kS(t,e){const n=t.slice(0),r=[];for(;n.length>0&&r.length<e;){const s=Math.floor(Math.random()*n.length);r.push(n[s]),n.splice(s,1)}return r}function jn(t,e){const n=t.indexOf(e);return n===-1?!1:(t.splice(n,1),!0)}function $S(t,e){return t.splice(Number(e),1).length>0}function yw(t,e,n){const r=t.indexOf(e);return r===-1?!1:(t[r]=n,!0)}function la(t,e,n){n=e==="asc"||e==="desc"?e:n;const r={},s=a=>{switch(typeof a){case"string":return"";case"number":return Number.MIN_SAFE_INTEGER;case"boolean":return!1;default:return null}},i=(a,l)=>{if(!(l in r)){const c=dl(t.find(u=>dl(u,l)!==void 0&&dl(u,l)!==null),l);r[l]=s(c)}return dl(a,l)??r[l]},o=()=>{const a=n==="desc"?l=>(c,u)=>Nu(i(u,l),i(c,l)):l=>(c,u)=>Nu(i(c,l),i(u,l));switch(typeof e){case"function":return e;case"string":return e==="asc"?void 0:e==="desc"?(l,c)=>Nu(c,l):a(e);case"object":{const l=e.map(c=>a(c));return(c,u)=>{for(const d of l){const f=d(c,u);if(f!==0)return f}return 0}}}};return t.slice(0).sort(o())}function Vn(t,e){return e?Object.values(t.reduce((n,r)=>{const s=e(r);return n[s]=n[s]??r,n},{})):[...new Set(t)]}function DS(t,e,n){return t.filter(r=>{const s=r[e],i=typeof s=="function"?s.call(r):s;return n?i===n:!!i})}function Xn(t,e){return Array.isArray(e)?en(t,n=>e.indexOf(n)===-1):OS(t,t.indexOf(e))}function OS(t,e){return Hh(t,[e])}function Hh(t,e){return t.map((n,r)=>[n,r]).filter(([n,r])=>!e.includes(r)).map(([n])=>n)}function un(t,e=!1){return Array.isArray(t)||yS(t)&&!bS(t)?Array.from(t):e&&t==null?[]:[t]}class bw{constructor(){Tn(this,"listeners",[])}add(e){return this.listeners.push(e),()=>this.remove(e)}remove(e){jn(this.listeners,e)}async emit(e,...n){for(const r of this.listeners){const s=r[e];typeof s=="function"&&await(s==null?void 0:s.call(r,...n))}}}let rc=class{static isConjuring(){return this.__conjuring}static isMagicReady(){return this.__reservedProperties.has(this)}static prepareMagic(){this.__conjuring=!0,this.__reservedProperties.set(this,new Set(Object.getOwnPropertyNames(new this))),this.__conjuring=!1}static isReservedProperty(e){var n;return!!((n=this.__reservedProperties.get(this))!=null&&n.has(e))}constructor(...e){if(!this.static().isConjuring())return this.static().isMagicReady()||this.static().prepareMagic(),this._proxy=this.createProxy(),this.initialize(...e),this._proxy.instance}static(e){const n=this.constructor;return e?n[e]:n}reserveProperty(e){Object.assign(this,{[e]:null})}initialize(...e){}__get(e){return Reflect.get(this._proxy.target,e)}__set(e,n){Reflect.set(this._proxy.target,e,n)}__delete(e){Reflect.deleteProperty(this._proxy.target,e)}createProxy(){const e=this.static();return{target:this,instance:new Proxy(this,{get(n,r,s){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.get(n,r,s):n.__get(r)},set(n,r,s,i){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.set(n,r,s,i):(n.__set(r,s),!0)},deleteProperty(n,r){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.deleteProperty(n,r):(n.__delete(r),!0)}})}}};Tn(rc,"__conjuring"),Tn(rc,"__reservedProperties",new WeakMap);let PS=class vw{constructor(e){Tn(this,"keysToItems"),Tn(this,"itemsToKeys"),Tn(this,"getKey"),this.keysToItems=new Map,this.itemsToKeys=new WeakMap,this.getKey=e??(n=>Tt(n))}static createFromArray(e,n){const r=typeof n=="string"?i=>i[n]:n,s=new vw(r);for(const i of e)s.add(i);return s}*[Symbol.iterator](){yield*this.keysToItems}get size(){return this.keysToItems.size}items(){return this.keysToItems.values()}keys(){return this.keysToItems.keys()}entries(){return this.keysToItems.entries()}add(e){const n=this.getKey(e);this.keysToItems.set(n,e),this.itemsToKeys.set(e,n)}require(e){return this.keysToItems.get(e)??Xe(`Couldn't find item with '${e}' key`)}get(e){return this.keysToItems.get(e)}getKeys(){return[...this.keysToItems.keys()]}getItems(){return[...this.keysToItems.values()]}hasKey(e){return this.keysToItems.has(e)}hasItem(e){return this.itemsToKeys.has(e)}delete(e){const n=this.itemsToKeys.get(e);n&&(this.itemsToKeys.delete(e),this.keysToItems.delete(n))}filter(e){const n=this.constructor.createFromArray([],this.getKey);for(const[r,s]of this.entries())e(s,r)&&n.add(s);return n}clear(){this.itemsToKeys=new WeakMap,this.keysToItems.clear()}clone(){const e=this.constructor,n=new e(this.getKey);n.keysToItems=new Map(this.keysToItems),n.itemsToKeys=new WeakMap;for(const[r,s]of n.keysToItems.entries())n.itemsToKeys.set(s,r);return n}},Ir=class ww{constructor(){Tn(this,"resolveListeners",[]),Tn(this,"rejectListeners",[]),Tn(this,"resetListeners",[]),this.setPromiseValues()}static from(e){const n=new ww;return e.then(n.resolve.bind(n)).catch(n.reject.bind(n)),n}get value(){return this._value||null}isResolved(){return"_value"in this}then(e,n){return this.promise.then(e,n)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}resolve(e){this.isResolved()&&this.reset(),this._value=e,this._resolve(e),this.resolveListeners.forEach(n=>n(e))}reject(e){this.isResolved()&&this.reset(),delete this._value,this._reject(e),this.rejectListeners.forEach(n=>n(e))}onResolve(e){return this.resolveListeners.push(e),()=>jn(this.resolveListeners,e)}onReject(e){return this.rejectListeners.push(e),()=>jn(this.rejectListeners,e)}onReset(e){return this.resetListeners.push(e),()=>jn(this.resetListeners,e)}reset(){this.setPromiseValues(),this.rejectListeners.forEach(e=>e())}setPromiseValues(){this.promise=new Promise((e,n)=>{this._resolve=e,this._reject=n})}};class Kh{constructor(e=1){Tn(this,"count"),Tn(this,"listeners"),this.count=e,this.listeners=new Set}acquire(){return this.count===0?this.waitAvailable().then(()=>this.acquire()):(this.count=Math.max(this.count-1,0),Promise.resolve())}release(){this.count++,this.notifyAvailable()}isAvailable(){return this.count!==0}async run(e){await this.acquire();try{return await e()}finally{this.release()}}async waitAvailable(){for(;!this.isAvailable();)await new Promise(e=>{const n=()=>{this.listeners.delete(n),e(null)};this.listeners.add(n)})}notifyAvailable(){this.listeners.forEach(e=>e())}}const ig={},_w=class xw{static get instance(){return this._instance=this._instance??new xw}constructor(){}set(e,n){typeof n>"u"&&(n="__undefined__"),localStorage.setItem(e,JSON.stringify(n))}get(e,n=null){const r=localStorage.getItem(e);if(r===null)return n;if(r!=="__undefined__")return JSON.parse(r)}require(e){const n=this.get(e,ig);if(n===ig)throw new Error(`Failed getting required key from local storage: '${e}'`);return n}has(e){return localStorage.getItem(e)!==null}remove(e){localStorage.removeItem(e)}pull(e,n=null){if(!this.has(e))return n;const r=this.get(e);return this.remove(e),r}};Tn(_w,"_instance");let LS=_w;const sr=LS.instance;function sc(t){return!(!t||["0","false"].includes(t))}const Fu={},Ks={},yo={};function og(t,e){return Ks[t]=Ks[t]??Ir.from(e()),Ks[t]}function Nl(t,e){return Fu[t]=Fu[t]??e(),Fu[t]}function MS(t){const e={};return(...n)=>"result"in e?e.result:e.result=t(...n)}function ag(t,e,n){var r,s;return(r=yo[t])!=null&&r.has(e)||Ew(t,e,n()),((s=yo[t])==null?void 0:s.get(e))??Xe()}function lg(t,e){var n;return((n=yo[t])==null?void 0:n.get(e))??null}function cg(t){un(t??Object.keys(Ks)).forEach(e=>delete Ks[e])}function ug(t,e){var n;(n=yo[t])==null||n.delete(e)}function dg(t,e){var n;Ks[t]=Ks[t]??new Ir,(n=Ks[t])==null||n.resolve(e)}function Ew(t,e,n){(yo[t]??(yo[t]=new WeakMap)).set(e,n)}function ju(t){if(!t)return null;try{const e=new Date(t),n=e.getTime();return isNaN(n)||n===0?null:e}catch{return null}}function Sw(){return typeof globalThis=="object"&&("Cypress"in globalThis||typeof globalThis.top=="object"&&globalThis.top&&"Cypress"in globalThis.top)?"e2e":typeof process=="object"&&hw.VITEST?"unit":null}function Mc(){var t;if(Sw())return"testing";if(typeof process=="object"&&(t=hw)!=null&&t.NODE_ENV)return"production";try{return"production"}catch{return null}}function ei(){return Mc()==="development"}function Ia(t){return Mc()!=="testing"?!1:!t||t===Sw()}function NS(){const t=Mc();return t==="development"||t==="testing"}function FS(t){return zS(t)}function Uu(t,e){let n=t[0],r=t[1],s=t[2],i=t[3];n=pn(n,r,s,i,e[0],7,-680876936),i=pn(i,n,r,s,e[1],12,-389564586),s=pn(s,i,n,r,e[2],17,606105819),r=pn(r,s,i,n,e[3],22,-1044525330),n=pn(n,r,s,i,e[4],7,-176418897),i=pn(i,n,r,s,e[5],12,1200080426),s=pn(s,i,n,r,e[6],17,-1473231341),r=pn(r,s,i,n,e[7],22,-45705983),n=pn(n,r,s,i,e[8],7,1770035416),i=pn(i,n,r,s,e[9],12,-1958414417),s=pn(s,i,n,r,e[10],17,-42063),r=pn(r,s,i,n,e[11],22,-1990404162),n=pn(n,r,s,i,e[12],7,1804603682),i=pn(i,n,r,s,e[13],12,-40341101),s=pn(s,i,n,r,e[14],17,-1502002290),r=pn(r,s,i,n,e[15],22,1236535329),n=mn(n,r,s,i,e[1],5,-165796510),i=mn(i,n,r,s,e[6],9,-1069501632),s=mn(s,i,n,r,e[11],14,643717713),r=mn(r,s,i,n,e[0],20,-373897302),n=mn(n,r,s,i,e[5],5,-701558691),i=mn(i,n,r,s,e[10],9,38016083),s=mn(s,i,n,r,e[15],14,-660478335),r=mn(r,s,i,n,e[4],20,-405537848),n=mn(n,r,s,i,e[9],5,568446438),i=mn(i,n,r,s,e[14],9,-1019803690),s=mn(s,i,n,r,e[3],14,-187363961),r=mn(r,s,i,n,e[8],20,1163531501),n=mn(n,r,s,i,e[13],5,-1444681467),i=mn(i,n,r,s,e[2],9,-51403784),s=mn(s,i,n,r,e[7],14,1735328473),r=mn(r,s,i,n,e[12],20,-1926607734),n=gn(n,r,s,i,e[5],4,-378558),i=gn(i,n,r,s,e[8],11,-2022574463),s=gn(s,i,n,r,e[11],16,1839030562),r=gn(r,s,i,n,e[14],23,-35309556),n=gn(n,r,s,i,e[1],4,-1530992060),i=gn(i,n,r,s,e[4],11,1272893353),s=gn(s,i,n,r,e[7],16,-155497632),r=gn(r,s,i,n,e[10],23,-1094730640),n=gn(n,r,s,i,e[13],4,681279174),i=gn(i,n,r,s,e[0],11,-358537222),s=gn(s,i,n,r,e[3],16,-722521979),r=gn(r,s,i,n,e[6],23,76029189),n=gn(n,r,s,i,e[9],4,-640364487),i=gn(i,n,r,s,e[12],11,-421815835),s=gn(s,i,n,r,e[15],16,530742520),r=gn(r,s,i,n,e[2],23,-995338651),n=yn(n,r,s,i,e[0],6,-198630844),i=yn(i,n,r,s,e[7],10,1126891415),s=yn(s,i,n,r,e[14],15,-1416354905),r=yn(r,s,i,n,e[5],21,-57434055),n=yn(n,r,s,i,e[12],6,1700485571),i=yn(i,n,r,s,e[3],10,-1894986606),s=yn(s,i,n,r,e[10],15,-1051523),r=yn(r,s,i,n,e[1],21,-2054922799),n=yn(n,r,s,i,e[8],6,1873313359),i=yn(i,n,r,s,e[15],10,-30611744),s=yn(s,i,n,r,e[6],15,-1560198380),r=yn(r,s,i,n,e[13],21,1309151649),n=yn(n,r,s,i,e[4],6,-145523070),i=yn(i,n,r,s,e[11],10,-1120210379),s=yn(s,i,n,r,e[2],15,718787259),r=yn(r,s,i,n,e[9],21,-343485551),t[0]=Bs(n,t[0]),t[1]=Bs(r,t[1]),t[2]=Bs(s,t[2]),t[3]=Bs(i,t[3])}function Nc(t,e,n,r,s,i){return e=Bs(Bs(e,t),Bs(r,i)),Bs(e<<s|e>>>32-s,n)}function pn(t,e,n,r,s,i,o){return Nc(e&n|~e&r,t,e,s,i,o)}function mn(t,e,n,r,s,i,o){return Nc(e&r|n&~r,t,e,s,i,o)}function gn(t,e,n,r,s,i,o){return Nc(e^n^r,t,e,s,i,o)}function yn(t,e,n,r,s,i,o){return Nc(n^(e|~r),t,e,s,i,o)}function jS(t){const e=t.length,n=[1732584193,-271733879,-1732584194,271733878];let r;for(r=64;r<=t.length;r+=64)Uu(n,US(t.substring(r-64,r)));t=t.substring(r-64);const s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<t.length;r++)s[r>>2]|=t.charCodeAt(r)<<(r%4<<3);if(s[r>>2]|=128<<(r%4<<3),r>55)for(Uu(n,s),r=0;r<16;r++)s[r]=0;return s[14]=e*8,Uu(n,s),n}function US(t){let e;const n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}const fg="0123456789abcdef".split("");function BS(t){let e="",n=0;for(;n<4;n++)e+=fg[t>>n*8+4&15]+fg[t>>n*8&15];return e}function qS(t){for(let e=0;e<t.length;e++)t[e]=BS(t[e]);return t.join("")}function Bs(t,e){return t+e&4294967295}function zS(t){return qS(jS(t))}function Aw(t){const e=t;return(e^Math.random()*16>>e/4).toString(16)}function Iw(t=9){return(10**(t-1)).toString().replace(/[01]/g,Aw)}function $n(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,Aw)}function ln(t={}){const e=typeof t=="number"?t:(t.milliseconds||t.ms||0)+(t.seconds||0)*1e3;return new Promise(n=>setTimeout(n,e))}async function VS(){await new Promise(()=>{})}async function HS(t){for(;location.href!==t;)await ln({ms:1})}function ca(t){return KS()[t]}function KS(){const t=new URL(location.href),e={};return t.searchParams.forEach((n,r)=>e[r]=n),e}function Si(t){return new URL(location.href).searchParams.has(t)}async function WS(t){const e=Object.entries(t).reduce((n,[r,s])=>(s?n.searchParams.set(r,s):n.searchParams.delete(r),n),new URL(location.href));history.pushState(null,document.title,e.href),await HS(e.href)}function Cw(t,e=0){const n=10**e;return Math.round(t*n)/n}const GS=Object.getPrototypeOf(Object);function JS(t,e){class n extends t{constructor(...s){super(...s);for(const i of e){const o=new i(...s);Object.assign(this,o)}return this}}return Tn(n,"__mixins",e),YS(n,e),n}function XS(t,e){if(e===Object)return;let n=e;do{const r=vs(Object.getOwnPropertyDescriptors(n.prototype),["constructor"]);for(const[s,i]of Object.entries(r))Object.defineProperty(t.prototype,s,i);n=Object.getPrototypeOf(n)}while(n!==GS)}function YS(t,e=[]){for(const n of e)XS(t,n)}function Fc(t,e=[]){const n=Array.isArray(t)?Object:t,r=Array.isArray(t)?t:e;return JS(n,r)}function jc(...t){return Fc(...t)}function Uc(t,e){var n,r;return((t==null?void 0:t.__mixins)??((r=(n=t==null?void 0:t.__proto__)==null?void 0:n.constructor)==null?void 0:r.__mixins)??[]).includes(e)}async function QS(t,e){for(const n of t){const r=await e(n);if(r)return r}return null}function ZS(t){return"then"in t}function Rw(t,e=null){return typeof t!="function"?t.catch(()=>e):async(...n)=>{try{return await t(...n)}catch{return e??null}}}function eA(t,e=300,n="..."){return t.length<e?t:t.substring(0,e-n.length)+n}function Tw(t,e){return t.match(e)}function kw(t,e){return t.matchAll(e)}function tA(t){return t.split("").reverse().join("")}function Wh(t){return t.split(/_|-|\s|(?=[A-Z])/)}function Ai(t){const[e,...n]=Wh(t);return(e??"").toLowerCase()+n.map(r=>r.slice(0,1).toUpperCase()+r.slice(1).toLowerCase()).join("")}function Ba(t,e="-"){return t=t.normalize("NFD").replace(/[֊־᐀‐‑‒–—―⸗⸚⸺⸻~〜〰゠︱︲﹘﹣－(){}><[\]]/g," ").replace(/[\u0300-\u036f]/g,"").replace(/[\u3000-\u303f]/g,"").replace(/['".,#!$%/\\^&*;:=`@+?]/g,"").toLowerCase().trim().replace(/\s+/g,e),e.length>0&&(t=t.replace(new RegExp(`${e}+`,"g"),e)),t}function nA(t){return Wh(t).map(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()).join("")}function rA(t){return Wh(t).map(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function Kt(t){return ar(t)??Xe(`Failed getting parent directory from '${t}'`)}function sA(t){return $w(t)??Xe(`Failed getting directory name from '${t}'`)}function iA(t){return qa(t)??Xe(`Failed parsing url from '${t}'`)}function bo(...t){let e=t.shift();for(;t.length>0;){const n=t.shift();n.startsWith("/")?e=Yr(e)+n:n.match(/^[\w-]+:\/\//)?e=n:e.endsWith("/")?e+=n:e+="/"+n}return e}function ic(...t){const e=bo(...t);return e.endsWith("/")?e:e+"/"}function Yr(t){const e=t.indexOf("://")+3,n=t.substr(e).indexOf("/");return n!==-1?t.substring(0,e+n):t}function ar(t){if(t.endsWith("/")&&(t=t.substring(0,t.length-1)),Yr(t)===t)return null;const e=t.lastIndexOf("/");return e!==-1?t.substr(0,e+1):null}function $w(t){t.endsWith("/")||(t=ar(t)??t+"/");const e=t.slice(0,-1);return Yr(t)===e?null:Dw(e)}function Dw(t){const e=t.lastIndexOf("/");return(e!==-1?t.slice(e+1):"").replace(/#.*$/,"").replace(/\?.*$/,"")}function qa(t){const e=t.trim().match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/);if(!e)return null;const n=e[4]||"",[r,s]=n.indexOf(":")===-1?[n]:n.split(":");return{protocol:e[2]||void 0,domain:r||void 0,port:s||void 0,path:e[5]||void 0,query:e[7]||void 0,fragment:e[9]||void 0}}function Ow(t,e){const n=qa(t);if(!n)return t;for(const[r,s]of Object.entries(n))n[r]=e[r]!==!1&&s||"";return[n.protocol?`${n.protocol}://`:"",n.domain??"",n.port?`:${n.port}`:"",n.path??"",n.query?`?${n.query}`:"",n.fragment?`#${n.fragment}`:""].join("")}function lr(t){return Ow(t,{protocol:!0,domain:!0,port:!0,path:!0,query:!1,fragment:!1})}function Pw(t,e){const n=t.prototype;for(const[r,s]of Object.entries(e))n[r]=function(...i){var o;const a=s(this.value,...i);return(o=this.chain)==null?void 0:o.call(this,a)}}function Lw(t,e){const n=t.prototype,r=Object.getOwnPropertyDescriptors(e.prototype);for(const[s,i]of Object.entries(r))if(!(s in n)){if(typeof i.value!="function"){Object.defineProperty(n,s,{get(){return this.chain(this.value[s])}});continue}n[s]=function(...o){var a;const l=i.value.call(this.value,...o);return(a=this.chain)==null?void 0:a.call(this,l)}}}let Mw=class{constructor(e){this.value=e}static isPrimitive(e){return this.prototype.isPrimitive(e)}create(e){const n=this.constructor;return new n(e)}chain(e){return this.isPrimitive(e)?this.create(e):e}};const oA={clear:_S,diff:Ro,filter:en,first:SS,flatMap:AS,groupBy:IS,isEmpty:CS,project:RS,randomItem:TS,randomItems:kS,remove:jn,removeIndex:$S,replace:yw,sorted:la,unique:Vn,where:DS,without:Xn,withoutIndexes:Hh};let Gh=class extends Mw{static create(e=[]){const{prototype:n}=this;return n.create(e)}*[Symbol.iterator](){yield*this.value}get(e){return this.value[e]}toArray(){return this.value.slice(0)}isPrimitive(e){return Array.isArray(e)}};Pw(Gh,oA);Lw(Gh,Array);const aA={reverse:tA,toCamelCase:Ai,toSlug:Ba,toStudlyCase:nA,toTitleCase:rA};let Nw=class extends Mw{static create(e=""){const{prototype:n}=this;return n.create(e)}toString(){return this.value}isPrimitive(e){return typeof e=="string"}};Pw(Nw,aA);Lw(Nw,String);const lA=[];function Qn(t){let e=null;function n(){try{return t()}catch{return new t}}function r(i){return e=i,i}const s={setInstance:r,newInstance:n,requireInstance:()=>e??r(n()),reset:()=>r(n())};return lA.forEach(i=>i(s)),new Proxy(s,{get:(i,o,a)=>{const l=o!=="constructor"&&o in s?s:s.requireInstance();return Reflect.get(l,o,a)},set:(i,o,a)=>Reflect.set(s.requireInstance(),o,a)})}function cA(t){const e=new Proxy(t,{get(n,r,s){const i=Reflect.get(n,r,s);return typeof i!="function"?i:(...o)=>(i.call(n,...o),e)}});return e}function je(t,e){if(!e)return cA(t);const n=e(t);return n instanceof Promise?n.then(()=>t):t}function uA(){}class dA{constructor(e,n){this.errorMessage=e,this.getValue=n}get(e,n,r){const s=this.getValue()??Xe(this.errorMessage),i=Reflect.get(s,n,r);return typeof i=="function"?i.bind(s):i}set(e,n,r,s){const i=this.getValue()??Xe(this.errorMessage);return Reflect.set(i,n,r,s)}getPrototypeOf(){const e=this.getValue()??Xe(this.errorMessage);return Object.getPrototypeOf(e)}}function Nn(t,e){return e??(e="Required value is missing"),typeof t=="function"?new Proxy({},new dA(e,t)):t??Xe(e)}function fA(t){return typeof t=="function"?t():t}function If(t,e){const n=typeof e=="function"?e(t):!!e;return new Proxy(t,{get(r,s,i){return n?Reflect.get(r,s,i):()=>{}}})}function Fw(t=[]){return Gh.create(un(t))}function Vt(t=[],e){if(!Array.isArray(t)||typeof t[0]!="string")return PS.createFromArray(t,e);const n=e;return t.reduce((r,s)=>(r[s]=n(s),r),{})}var hA=Object.defineProperty,pA=(t,e,n)=>e in t?hA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ut=(t,e,n)=>pA(t,typeof e!="symbol"?e+"":e,n);let qe=class extends Error{constructor(e,n){super(...n?[e,n]:[e]),this.name=new.target.name,Object.setPrototypeOf(this,new.target.prototype)}};class Jh extends qe{constructor(e){super(`Could not create document with id ${e} because it is already in use.`),Ut(this,"id"),this.id=e}}class zr extends qe{constructor(e,n){super(n?`Couldn't find document with id '${e}' in '${n}' Collection.`:`Couldn't find document with id '${e}'`),Ut(this,"id"),Ut(this,"collection"),this.id=e,this.collection=n}}function mA(t){return t instanceof gA||"getProxySubject"in t}let gA=class{constructor(e,n={}){Ut(this,"subject"),Ut(this,"overrides"),this.subject=e,this.overrides={create:(...r)=>e.create(...r),readOne:(...r)=>e.readOne(...r),readMany:(...r)=>e.readMany(...r),update:(...r)=>e.update(...r),delete:(...r)=>e.delete(...r),...n}}getProxySubject(){return this.subject}async create(e,n,r){return this.overrides.create(e,n,r)}async readOne(e,n){return this.overrides.readOne(e,n)}async readMany(e,n){return this.overrides.readMany(e,n)}async update(e,n,r){return this.overrides.update(e,n,r)}async delete(e,n){return this.overrides.delete(e,n)}},Bc=class{constructor(){Ut(this,"rootFilters"),Ut(this,"rootUpdates"),Ut(this,"attributeFilters"),Ut(this,"attributeUpdates"),Ut(this,"documentsIn",(e,n,r)=>r.includes(e)),Ut(this,"documentOverwrite",(e,n)=>{for(const r of Object.getOwnPropertyNames(e))delete e[r];Object.assign(e,n)}),Ut(this,"attributeEq",(e,n,r)=>Vh(e[n],r)),Ut(this,"attributeContains",(e,n,r)=>{Array.isArray(r)||(r=[r]);const s=e&&e[n];return Array.isArray(s)?!r.find(i=>!s.find(o=>this.filterValue(o,i))):!1}),Ut(this,"attributeOr",(e,n,r)=>!!r.find(s=>!!this.filterValue(e,{[n]:s}))),Ut(this,"attributeIn",(e,n,r)=>r.includes(e[n])),Ut(this,"attributeUpdate",(e,n,r)=>{if(Array.isArray(r)||!yt(r)){e[n]=r;return}if(this.isOperation(r,this.attributeUpdates)){this.runOperation(r,this.attributeUpdates,e,n);return}if(!yt(e[n])){e[n]=r;return}this.updateAttributes(e[n],r)}),Ut(this,"attributeUpdateItems",(e,n,r)=>{Array.isArray(r)||(r=[r]);for(const{$where:s,$update:i,$override:o,$unset:a}of r){s&&s.$in&&(s.$in=s.$in.map(u=>u.toString()));const l=this.requireArrayProperty("$updateItems",e,n),c=this.filterDocuments(l.reduce((u,d,f)=>({...u,[f]:yt(d)?d:{}}),{}),s||{});i&&Object.keys(c).forEach(u=>{this.updateAttributes(c,{[u]:i}),l[parseInt(u)]=c[u]}),o&&Object.keys(c).forEach(u=>{l[parseInt(u)]=o}),a&&(e[n]=Hh(l,Object.keys(c).map(parseInt)))}}),Ut(this,"attributePush",(e,n,r)=>{this.requireArrayProperty("$push",e,n).push(r)}),Ut(this,"attributeUnset",(e,n,r)=>{if(r===!0){delete e[n];return}const s=e[n];if(yt(s)){r=Array.isArray(r)?r:[r];for(const i of r)delete s[i]}}),Ut(this,"attributeApply",(e,n,r)=>{for(const s of r)this.runOperation(s,this.attributeUpdates,e,n)}),Ut(this,"attributeOverwrite",(e,n,r)=>{e[n]=r}),this.rootFilters={$in:this.documentsIn},this.rootUpdates={$overwrite:this.documentOverwrite},this.attributeFilters={$eq:this.attributeEq,$contains:this.attributeContains,$or:this.attributeOr,$in:this.attributeIn},this.attributeUpdates={$update:this.attributeUpdate,$updateItems:this.attributeUpdateItems,$push:this.attributePush,$unset:this.attributeUnset,$apply:this.attributeApply,$overwrite:this.attributeOverwrite}}filterDocuments(e,n={}){return Object.entries(e).reduce((r,[s,i])=>(this.filterDocument(s,i,n)&&(r[s]=i),r),{})}updateAttributes(e,n){if(this.isOperation(n,{$unset:this.attributeUnset})){const r=n.$unset,s=Array.isArray(r)?r:[r];for(const i of s)this.attributeUnset(e,i,!0);return}if(this.isOperation(n,this.rootUpdates)){const[[r,s]]=Object.entries(n);this.rootUpdates[r](e,s);return}for(const[r,s]of Object.entries(n))this.attributeUpdate(e,r,s)}obtainDocumentId(e){return e??$n()}filterDocument(e,n,r={}){r={...r};for(const[s,i]of Object.entries(this.rootFilters))if(s in r){if(!i(e,n,r[s]))return!1;delete r[s]}return this.filterValue(n,r)}filterValue(e,n={}){return yt(n)?this.isOperation(n,this.attributeFilters)?this.runOperation(n,this.attributeFilters,{value:e},"value"):yt(e)?!Object.entries(n).find(([r,s])=>!(this.isOperation(s,this.attributeFilters)?this.runOperation(s,this.attributeFilters,e,r):this.attributeEq(e,r,s))):!1:this.attributeEq({value:e},"value",n)}isOperation(e,n){if(!yt(e))return!1;const[r,...s]=Object.keys(e);return!!(r&&s.length===0&&r in n)}runOperation(e,n,...r){const[s,i]=Object.entries(e)[0];return n[s](...r,i)}requireArrayProperty(e,n,r){if(!n||!yt(n)||!Array.isArray(n[r]))throw new Error(`${e} operator can only be applied to array attributes`);return n[r]}},oc;function fl(t){for(;t&&mA(t);)t=t.getProxySubject();return t}function yA(){return oc}function Xh(){return oc||Xe(qe,"Engine must be initialized before performing any operations. Learn more at https://soukai.js.org/guide/core-concepts/engines.html")}function jw(t){if(!t){oc=void 0;return}oc=t}const Cf=(t,e)=>e.some(n=>t instanceof n);let hg,pg;function bA(){return hg||(hg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vA(){return pg||(pg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Rf=new WeakMap,Bu=new WeakMap,qc=new WeakMap;function wA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ws(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return qc.set(e,t),e}function _A(t){if(Rf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Rf.set(t,e)}let Tf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rf.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ws(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Uw(t){Tf=t(Tf)}function xA(t){return vA().includes(t)?function(...e){return t.apply(kf(this),e),Ws(this.request)}:function(...e){return Ws(t.apply(kf(this),e))}}function EA(t){return typeof t=="function"?xA(t):(t instanceof IDBTransaction&&_A(t),Cf(t,bA())?new Proxy(t,Tf):t)}function Ws(t){if(t instanceof IDBRequest)return wA(t);if(Bu.has(t))return Bu.get(t);const e=EA(t);return e!==t&&(Bu.set(t,e),qc.set(e,t)),e}const kf=t=>qc.get(t);function mg(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ws(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ws(o.result),l.oldVersion,l.newVersion,Ws(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function gg(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Ws(n).then(()=>{})}const SA=["get","getKey","getAll","getAllKeys","count"],AA=["put","add","delete","clear"],qu=new Map;function yg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(qu.get(e))return qu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=AA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||SA.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return qu.set(e,i),i}Uw(t=>({...t,get:(e,n,r)=>yg(e,n)||t.get(e,n,r),has:(e,n)=>!!yg(e,n)||t.has(e,n)}));const IA=["continue","continuePrimaryKey","advance"],bg={},$f=new WeakMap,Bw=new WeakMap,CA={get(t,e){if(!IA.includes(e))return t[e];let n=bg[e];return n||(n=bg[e]=function(...r){$f.set(this,Bw.get(this)[e](...r))}),n}};async function*RA(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,CA);for(Bw.set(n,e),qc.set(n,kf(e));e;)yield n,e=await($f.get(n)||e.continue()),$f.delete(n)}function vg(t,e){return e===Symbol.asyncIterator&&Cf(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&Cf(t,[IDBIndex,IDBObjectStore])}Uw(t=>({...t,get(e,n,r){return vg(e,n)?RA:t.get(e,n,r)},has(e,n){return vg(e,n)||t.has(e,n)}}));var TA=Object.defineProperty,kA=(t,e,n)=>e in t?TA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nt=(t,e,n)=>kA(t,typeof e!="symbol"?e+"":e,n);let qw=class extends qe{constructor(e,n,r){super(`Model ${e}: Invalid attributes (${JSON.stringify(n)}).`,r),nt(this,"modelName"),nt(this,"attributes"),this.modelName=e,this.attributes=n}},qs=class extends qe{constructor(e,n){super(`Model ${e}: ${n}. Learn more at https://soukai.js.org/guide/core-concepts/models.html`),nt(this,"modelName"),this.modelName=e}};class $A{constructor(e=null){nt(this,"database"),nt(this,"helper"),nt(this,"lock"),nt(this,"_metadata"),nt(this,"_metadataConnection"),nt(this,"_documentsConnection"),this.database=e?"soukai-"+e:"soukai",this.helper=new Bc,this.lock=Nl(`idb-${this.database}`,()=>new Kh)}async getCollections(){const e=await this.getMetadata();return Object.values(e).filter(({dropped:n})=>!n).map(({name:n})=>n.toString())}async dropCollections(e){await this.lock.run(async()=>{await this.withMetadataTransaction("readwrite",n=>(e.forEach(r=>{var s;n.store.put({name:r,dropped:!0,updates:(((s=this._metadata)==null?void 0:s[r].updates)??1)+1})}),n.done)),this.closeConnections(),await this.getDocumentsConnection()})}async purgeDatabase(){this.closeConnections(),await Promise.all([gg(`${this.database}-meta`,{blocked:()=>this.throwDatabaseBlockedError()}),gg(this.database,{blocked:()=>this.throwDatabaseBlockedError()})]),delete this._metadata}async closeConnections(){this._metadataConnection&&this._metadataConnection.close(),this._documentsConnection&&this._documentsConnection.close(),delete this._metadata,delete this._metadataConnection,delete this._documentsConnection}create(e,n,r){return this.lock.run(async()=>{const s=this.helper.obtainDocumentId(r);if(await this.documentExists(e,s))throw new Jh(s);return await this.createDocument(e,s,n),s})}async readOne(e,n){if(!await this.collectionExists(e))throw new zr(n,e);const r=await this.getDocument(e,n);if(!r)throw new zr(n,e);return r}async readMany(e,n){const r={};return(await this.getCollections()).indexOf(e)===-1?r:(await this.withDocumentsTransaction(e,"readonly",s=>{const i=async o=>{if(o)return r[o.key]=o.value,o.continue().then(i)};return s.store.openCursor().then(i)}),this.helper.filterDocuments(r,n))}async update(e,n,r){await this.lock.run(async()=>{const s=await this.getDocument(e,n);if(!s)throw new zr(n,e);this.helper.updateAttributes(s,r),await this.updateDocument(e,n,s)})}async delete(e,n){await this.lock.run(async()=>{if(!await this.documentExists(e,n))throw new zr(n,e);await this.deleteDocument(e,n)})}async collectionExists(e){return(await this.getCollections()).indexOf(e)!==-1}async documentExists(e,n){return!!await this.getDocument(e,n)}async getDocument(e,n){try{return(await this.getCollections()).indexOf(e)===-1?null:await this.withDocumentsTransaction(e,"readonly",r=>r.store.get(n))||null}catch{return null}}async createDocument(e,n,r){const s=await this.getCollections();return s.indexOf(e)===-1&&(await this.createCollection(e),s.push(e)),this.withDocumentsTransaction(e,"readwrite",i=>(i.store.add(r,n),i.done))}async updateDocument(e,n,r){if((await this.getCollections()).indexOf(e)!==-1)return this.withDocumentsTransaction(e,"readwrite",s=>(s.store.put(r,n),s.done))}async deleteDocument(e,n){if((await this.getCollections()).indexOf(e)!==-1)return this.withDocumentsTransaction(e,"readwrite",r=>(r.store.delete(n),r.done))}async withMetadataTransaction(e,n){const r=this._metadataConnection=this._metadataConnection||await mg(`${this.database}-meta`,1,{upgrade(s){s.objectStoreNames.contains("collections")||s.createObjectStore("collections",{keyPath:"name"})},blocked:()=>this.throwDatabaseBlockedError()});return this.retryingOnTransactionInactive(()=>{const s=r.transaction("collections",e);return n(s)})}async withDocumentsTransaction(e,n,r){const s=await this.getDocumentsConnection();return this.retryingOnTransactionInactive(()=>{const i=s.transaction(e,n);return r(i)})}async getDocumentsConnection(){const e=await this.getMetadata(),n=Object.values(e).reduce((r,{updates:s})=>r+(s??1),0);return this._documentsConnection=this._documentsConnection||await mg(this.database,n,{upgrade(r){for(const{name:s,dropped:i}of Object.values(e))r.objectStoreNames.contains(s)&&!i||!r.objectStoreNames.contains(s)&&i||(i?r.deleteObjectStore(s):r.createObjectStore(s))},blocked:()=>this.throwDatabaseBlockedError()})}async getMetadata(){return this._metadata??(this._metadata=await this.initializeMetadata())}async initializeMetadata(){return(await this.withMetadataTransaction("readonly",e=>e.store.getAll())).reduce((e,n)=>(e[n.name]=n,e),{})}retryingOnTransactionInactive(e){try{return e()}catch(n){if(!(n instanceof Error)||!n.name.toLowerCase().includes("inactive")&&!n.message.toLowerCase().includes("inactive"))throw n;return e()}}async createCollection(e){await this.withMetadataTransaction("readwrite",n=>(n.store.add({name:e}),n.done)),delete this._metadata,this._documentsConnection&&(this._documentsConnection.close(),delete this._documentsConnection)}throwDatabaseBlockedError(){throw new qe("An attempt to open an IndexedDB connection has been blocked, remember to call IndexedDBEngine.closeConnections when necessary. Learn more at https://developer.mozilla.org/en-US/docs/Web/API/IDBOpenDBRequest/blocked_event")}}let Hn=class Df{constructor(e){nt(this,"value"),this.value=String(e)}static from(e){return e instanceof Df?e:new Df(e)}equals(e){return this.value===e.value}toString(){return this.value}};const DA={},OA={},zu=new WeakMap;let Fl=new WeakMap;function wg(t){if(t==null)return DA;switch(typeof t){case"string":return Nl(`listeners-string-key-${t}`,()=>new String(t));case"number":return Nl(`listeners-number-key-${t}`,()=>new Number(t));case"boolean":return Nl(`listeners-boolean-key-${t}`,()=>new Boolean(t));case"object":return t;default:return OA}}function PA(t,e,n){Fl.has(t)||Fl.set(t,{});const r=Fl.get(t),s=r[e]??(r[e]=[]);return s.push(n),()=>jn(s,n)}async function _g(...t){var e;const n="__attributeGetters"in t[0]?t[0]:t[0].static(),r="__attributeGetters"in t[0]?null:t[0],s=t[1],i=t[2],o=r??n,a=(e=Fl.get(n))==null?void 0:e[s],l=wg(s),c=wg(i),u=zu.has(l)?zu.get(l):je(new WeakMap,f=>zu.set(l,f)),d=u.has(c)?u.get(c):je(new WeakSet,f=>u.set(c,f));!a||d.has(o)||(d.add(o),await Promise.all(a.map(f=>r?f(r,i):f(i))),d.delete(o))}const Fo=new WeakMap;function xg(t){const e=t.target,[n,r]=Fo.get(e)??[t.getTargetEngine(),0],s=()=>{const[o,a]=Fo.get(e);if(a>1){Fo.set(e,[o,a-1]);return}Fo.delete(e),e.setEngine(o)},i=o=>{const a=o();return a instanceof Promise?a.then(()=>je(a,()=>s())):je(a,()=>s())};return Fo.set(e,[n,r+1]),e.setEngine(t.engine),t.operation?i(t.operation):new Proxy(e,{get(o,a,l){const c=Reflect.get(o,a,l);return typeof c!="function"?(s(),c):(...u)=>i(()=>c.call(o,...u))}})}function Eg(t,e){let n=t;for(;n;){if(n!==e){n=Object.getPrototypeOf(n);continue}return!0}return!1}let ac=class{constructor(e,n,r,s){nt(this,"name"),nt(this,"parent"),nt(this,"relatedClass"),nt(this,"foreignKeyName"),nt(this,"localKeyName"),nt(this,"enabled",!0),nt(this,"deleteStrategy",null),nt(this,"_related"),this.parent=e,this.relatedClass=n,this.foreignKeyName=r,this.localKeyName=s||n.primaryKey}get loaded(){return this.related!==void 0}get related(){return this._related}set related(e){const n=this._related;this._related=e,this.onRelatedUpdated(n,e)}static(){return this.constructor}enable(){this.enabled=!0}disable(){this.enabled=!1}resolve(){return this.load()}isEmpty(){return null}async getModels(){return this.loaded||await this.load(),this.getLoadedModels()}getLoadedModels(){return this.related?un(this.related):[]}unload(){this.related=void 0}onDelete(e){return this.deleteStrategy=e,this}clone(e={}){const n=e.clones??new WeakMap,r=e.constructors??new WeakMap,s=Object.create(Object.getPrototypeOf(this));return s.name=this.name,s.parent=this.parent,s.foreignKeyName=this.foreignKeyName,s.localKeyName=this.localKeyName,s.deleteStrategy=this.deleteStrategy,s.enabled=this.enabled,s.relatedClass=r.get(this.relatedClass)??this.relatedClass,this.related===null?s.related=null:Array.isArray(this.related)?s.related=this.related.map(i=>i.clone({clones:n,constructors:r})):this.related&&(s.related=this.related.clone({clones:n,constructors:r})),s}initializeInverseRelations(e){for(const n of this.relatedClass.relations){const r=e.requireRelation(n);!r.enabled||!r.isInverseOf(this)||(r.setForeignAttributes(this.parent),r.addRelated(this.parent))}}clearInverseRelations(e){for(const n of this.relatedClass.relations){const r=e.requireRelation(n);!r.enabled||!r.isInverseOf(this)||(r.clearForeignAttributes(this.parent),r.removeRelated(this.parent))}}isInverseOf(e){const n=r=>e instanceof r;return this.static().inverseBelongsToRelationClasses.some(n)?Eg(this.parent.constructor,e.relatedClass)&&e.foreignKeyName===this.foreignKeyName&&e.localKeyName===this.localKeyName:this.static().inverseHasRelationClasses.some(n)?Eg(e.parent.constructor,this.relatedClass)&&this.foreignKeyName===e.foreignKeyName&&this.localKeyName===e.localKeyName:!1}onRelatedUpdated(e,n){}};nt(ac,"inverseHasRelationClasses",[]),nt(ac,"inverseBelongsToRelationClasses",[]);let Gs=class extends ac{constructor(e,n,r,s){super(e,n,r||Ai(n.modelName+"_"+n.primaryKey+"s"),s)}get related(){return this._related}set related(e){const n=this.related;this._related=e,this.onRelatedUpdated(n,e)}attach(e={}){const n=e instanceof this.relatedClass?e:this.relatedClass.newInstance(e);return je(n,()=>{!this.assertLoaded("attach")||this.isRelated(n)||(this.addRelated(n),this.initializeInverseRelations(n),this.setForeignAttributes(n))})}async create(e={}){const n=this.attach(e);return await n.save(),n}addRelated(e){var n;(n=this.related)!=null&&n.includes(e)||(this.related=(this.related??[]).concat(e))}removeRelated(e){var n;(n=this.related)!=null&&n.includes(e)&&(this.related=Xn(this.related,e))}isRelated(e){var n;return!!((n=this.related)!=null&&n.includes(e))}onRelatedUpdated(e,n){}assertLoaded(e){if(this.loaded)return!0;if(!this.parent.exists())return this.related=[],!0;throw new qe(`The "${e}" method can't be called before loading the relationship`)}};class no extends Gs{isEmpty(){return this.parent.getAttribute(this.foreignKeyName).length===0}async load(){const e=this.parent.getAttribute(this.foreignKeyName);return this.related=this.isEmpty()?[]:this.localKeyName===this.relatedClass.primaryKey?await this.relatedClass.all({$in:e}):await this.relatedClass.all({[this.localKeyName]:{$or:[...e.map(n=>({$eq:n})),...e.map(n=>({$contains:n}))]}}),this.related}setForeignAttributes(e){const n=e.getAttribute(this.localKeyName);if(!n)return;const r=this.parent.getAttribute(this.foreignKeyName);r.includes(n)||this.parent.setAttribute(this.foreignKeyName,r.concat([n]))}clearForeignAttributes(e){const n=e.getAttribute(this.localKeyName);if(!n)return;const r=this.parent.getAttribute(this.foreignKeyName);r.includes(n)&&this.parent.setAttribute(this.foreignKeyName,Xn(r,n))}}let To=class extends ac{constructor(e,n,r,s){super(e,n,r||Ai(n.modelName+"_"+n.primaryKey),s)}get related(){return this._related}set related(e){const n=this.related;this._related=e,this.onRelatedUpdated(n,e)}attach(e={}){const n=e instanceof this.relatedClass?e:this.relatedClass.newInstance(e);return je(n,()=>{if(this.loaded&&this.related&&!this.isRelated(n))throw new qe(`The "attach" method can't be called because a related model already exists, use a hasMany relationship if you want to support multiple related models.`);this.addRelated(n),this.initializeInverseRelations(n),this.setForeignAttributes(n)})}addRelated(e){e!==this.related&&(this.related=e)}removeRelated(e){e===this.related&&(this.related=null)}isRelated(e){return e===this.related}onRelatedUpdated(e,n){}},ua=class extends To{isEmpty(){return!this.parent.getAttribute(this.foreignKeyName)}async load(){const e=this.parent.getAttribute(this.foreignKeyName);return this.related=this.isEmpty()?null:this.localKeyName===this.relatedClass.primaryKey?await this.relatedClass.find(e):await this.relatedClass.first({[this.localKeyName]:e}),this.related}setForeignAttributes(e){const n=e.getAttribute(this.localKeyName);n&&this.parent.setAttribute(this.foreignKeyName,n)}clearForeignAttributes(e){e.getAttribute(this.localKeyName)===this.parent.getAttribute(this.foreignKeyName)&&this.parent.setAttribute(this.foreignKeyName,null)}},ro=class extends Gs{async load(){const e=this.parent.getAttribute(this.localKeyName);return this.related=await this.relatedClass.all({[this.foreignKeyName]:{$or:[{$eq:e},{$contains:e}]}}),this.related}setForeignAttributes(e){const n=this.parent.getAttribute(this.localKeyName);if(!n)return;const r=e.getAttribute(this.foreignKeyName);if(!Array.isArray(r)){e.setAttribute(this.foreignKeyName,n);return}r.includes(n)||e.setAttribute(this.foreignKeyName,r.concat([n]))}clearForeignAttributes(e){const n=this.parent.getAttribute(this.localKeyName);if(!n)return;const r=e.getAttribute(this.foreignKeyName);if(!Array.isArray(r)){e.getAttribute(this.foreignKeyName)===n&&e.setAttribute(this.foreignKeyName,null);return}r.includes(n)&&e.setAttribute(this.foreignKeyName,Xn(r,n))}},Ii=class extends To{async load(){const e=this.parent.getAttribute(this.localKeyName);return this.related=await this.relatedClass.first({[this.foreignKeyName]:{$or:[{$eq:e},{$contains:e}]}}),this.related}setForeignAttributes(e){const n=this.parent.getAttribute(this.localKeyName);if(!n)return;const r=e.getAttribute(this.foreignKeyName);if(!Array.isArray(r)){e.setAttribute(this.foreignKeyName,n);return}r.includes(n)||e.setAttribute(this.foreignKeyName,r.concat([n]))}clearForeignAttributes(e){const n=this.parent.getAttribute(this.localKeyName);if(!n)return;const r=e.getAttribute(this.foreignKeyName);if(!Array.isArray(r)){e.getAttribute(this.foreignKeyName)===n&&e.setAttribute(this.foreignKeyName,null);return}r.includes(n)&&e.setAttribute(this.foreignKeyName,Xn(r,n))}};const ke={Number:"number",String:"string",Boolean:"boolean",Array:"array",Object:"object",Date:"date",Key:"key",Any:"any"},Sg=Object.values(ke);function Of(t,e,n,r=!1){let s={};if(typeof n=="string"&&Sg.indexOf(n)!==-1)s.type=n;else if(typeof n=="object")s=n;else throw new qs(t,`Invalid field definition ${e}`);if(typeof s.type>"u")s={type:ke.Object,fields:s};else if(Sg.indexOf(s.type)===-1)throw new qs(t,`Invalid field definition ${e}`);switch(r||(s.required=!!s.required),s.type){case ke.Object:if(typeof s.fields>"u")throw new qs(t,`Field definition of type object requires fields attribute ${e}`);for(const i in s.fields)nc(s.fields,i)&&(s.fields[i]=Of(t,i,s.fields[i]));break;case ke.Array:if(typeof s.items>"u")throw new qs(t,`Field definition of type array requires items attribute. Field: '${e}'`);s.items=Of(t,"items",s.items,!0);break}return s}function zw(t){return t.type===ke.Array}function Vw(t,e){for(const[n,r]of Object.entries(e)){if(!(n in t))switch(r.type){case ke.Object:t[n]={};break;case ke.Array:t[n]=[];break;default:t[n]=void 0;break}if(r.type===ke.Object){const s=t[n];if(!yt(s))throw new qe(`Invalid value for field ${n}`);t[n]=Vw(s,r.fields)}}return t}function Pf(t,e){for(const[n,r]of Object.entries(e)){if(r.required&&(!(n in t)||Af(t[n])))throw new qe(`The ${n} attribute is required.`);if(n in t&&!Af(t[n])&&r.type===ke.Object){const s=t[n];if(!yt(s))throw new qe(`Invalid value for field ${n}`);Pf(s,r.fields)}}}function jl(t,e){t=Er(t);for(const n in t){const r=e[n];if(typeof t[n]>"u")delete t[n];else if(n in e&&r.type===ke.Object){const s=jl(t[n],r.fields);aa(s)?delete t[n]:t[n]=s}}return t}const At={CreatedAt:"createdAt",UpdatedAt:"updatedAt"},Ag=Object.values(At);function LA(){Ii.inverseBelongsToRelationClasses.length>0||(Ii.inverseBelongsToRelationClasses=[ua,no],ro.inverseBelongsToRelationClasses=[ua,no],ua.inverseHasRelationClasses=[Ii,ro],no.inverseHasRelationClasses=[Ii,ro])}const Ig=new WeakSet,on=class Ul{static boot(e){LA();const n={};this.bootedModels.set(this,!0),this.modelName=this.bootModelName(e),this.collection=this.bootCollection(),this.timestamps=this.bootTimestamps(this.timestamps,n);const{fields:r,fieldAliases:s}=this.bootFields(this.fields,this.primaryKey,this.timestamps,n);this.fields=r,this.fieldAliases=s;const{classFields:i,relations:o,attributeGetters:a,attributeSetters:l}=this.bootClassDefinitions();this.classFields=i,this.relations=o,this.__attributeGetters=a,this.__attributeSetters=l;const c=this.bootHooks(this.hooks);this.hooks=c}static ensureBooted(){this.bootedModels.has(this)||this.boot()}static async updateSchema(e){await this.performSchemaUpdate(e),await _g(this,"schema-updated",e)}static create(e={}){return new this(e).save()}static createFromEngineDocument(e,n){return this.instance().createFromEngineDocument(e,n)}static createManyFromEngineDocuments(e){return this.instance().createManyFromEngineDocuments(e)}static async findOrFail(e){return await this.find(e)??Xe(`Failed getting required model ${e}`)}static async find(e){this.ensureBooted();try{const n=await this.requireEngine().readOne(this.collection,this.instance().serializeKey(e));return await this.createFromEngineDocument(e,n)}catch{return null}}static async all(e){this.ensureBooted();const n=await this.requireEngine().readMany(this.collection,e);return await this.createManyFromEngineDocuments(n)}static async first(e){const[n]=await this.all(e);return n||null}static newInstance(...e){return this.instance().newInstance(...e)}static on(e,n){return PA(this,e,n)}static instance(){return this.instances.has(this)||this.instances.set(this,new this),this.instances.get(this)}static hasAutomaticTimestamp(e){return this.timestamps.indexOf(e)!==-1}static hasAutomaticTimestamps(){return this.timestamps.length>0}static getEngine(){return this.engines.get(this)??yA()}static getFinalEngine(){const e=this.getEngine();return e&&fl(e)}static requireEngine(){return this.engines.get(this)??Xh()}static requireFinalEngine(){return fl(this.requireEngine())}static setEngine(e){if(!e){this.engines.delete(this);return}this.engines.set(this,e)}static withEngine(e,n){return xg({target:this,getTargetEngine:()=>this.engines.get(this),engine:e,operation:n})}static async withCollection(e="",n){const r=this.collection;if(typeof e!="string"&&(n=e,e=""),!n)throw new qe("Invalid method given to withCollection (this is an internal error, please report this bug)");this.collection=e||r;try{return await n()}finally{this.collection=r}}static async withoutTimestamps(e){return this.ignoringTimestamps.set(this,!0),je(await e(),()=>this.ignoringTimestamps.delete(this))}static pureInstance(){return this.pureInstances.has(this)||this.pureInstances.set(this,new this({__pureInstance:!0})),this.pureInstances.get(this)}static bootModelName(e){const n=Object.getOwnPropertyDescriptor(this,"modelName");return(n==null?void 0:n.value)??e??this.name}static bootCollection(){let e=this;for(;e!==Ul&&(!e.hasOwnProperty("collection")||Ig.has(e));)e=Object.getPrototypeOf(e);return e===Ul&&Ig.add(this),e.collection??this.pureInstance().getDefaultCollection()}static bootTimestamps(e,n){if(typeof e!="boolean"&&typeof e<"u"&&!Array.isArray(e))throw new qs(this.modelName,"Invalid timestamps definition");if(e===!1)return[];Array.isArray(e)||(e=Ag);const r=e.find(s=>!Ag.includes(s));if(r)throw new qs(this.modelName,`Invalid timestamp field defined (${r})`);for(const s of e)n[s]={type:ke.Date,required:!1};return e}static bootFields(e,n,r,s){if(typeof e>"u")return s[n]={type:ke.Key,required:!1},{fields:s,fieldAliases:{}};const i={};for(const[o,a]of Object.entries(e)){if(!nc(e,o))continue;const l=s[o]=Of(this.modelName,o,a);if(l.alias&&(i[o]=l.alias,i[l.alias]=o),r.includes(o)&&(l.type!==ke.Date||l.required))throw new qs(this.modelName,`Field ${o} definition must be type Date and not required because it is used an automatic timestamp. Learn more at https://soukai.js.org/guide/core-concepts/models.html#automatic-timestamps`)}return n in s||(s[n]={type:ke.Key,required:!1}),{fields:s,fieldAliases:i}}static bootClassDefinitions(){const e=this.pureInstance(),n=["_engine","_recentlyDeletedPrimaryKey"],r=Object.getOwnPropertyNames(e).concat(n),s=[],i=new Map,o=new Map;let a=Object.getPrototypeOf(e);for(;a!==Ul.prototype;){a.constructor.classFields&&r.push(...a.constructor.classFields);for(const[l,c]of Object.entries(Object.getOwnPropertyDescriptors(a))){const u=l;typeof c.value=="function"&&(u.endsWith("Relationship")?s.push(u.slice(0,-12)):u.match(/get.+Attribute/)?i.set(Ai(u.slice(3,-9)),e[u]):u.match(/set.+Attribute/)&&o.set(Ai(u.slice(3,-9)),e[u]))}a=Object.getPrototypeOf(a)}return{classFields:Vn(r),relations:Vn(s),attributeGetters:i,attributeSetters:o}}static bootHooks(e){return e??{}}static async performSchemaUpdate(e){const n=e.primaryKey??"id",r={},s=this.bootTimestamps(e.timestamps,r),i=this.bootHooks(e.hooks),{fields:o,fieldAliases:a}=this.bootFields(e.fields,n,s,r);this.primaryKey=n,this.timestamps=s,this.hooks=i,this.fields=o,this.fieldAliases=a}constructor(e={},n=!1){var r;if(!("__pureInstance"in e))return this.static().ensureBooted(),this.initializeProxy(),this.initialize(e,n),(r=this.static("hooks").afterInitialize)==null||r.call(this._proxy),this._proxy}static(e){const n=this.constructor;return e?n[e]:n}newInstance(...e){const n=this.constructor;return new n(...e)}async fresh(){const e=this.getPrimaryKey(),n=e?await this.static().find(e):null;if(!n)throw new qe(`Couldn't get fresh instance for ${this.static("modelName")} with id '${e}'`);return n}update(e={}){e=this.castAttributes(e,this.static("fields"));for(const n in e)this.setAttribute(n,e[n]);return this.save()}hasRelation(e){return this.static("relations").indexOf(e)!==-1}getRelation(e){return this._relations[e]||null}requireRelation(e){return this._relations[e]??Xe(qe,`Attempting to use undefined ${e} relation.`)}getEngine(){return this._engine??this.static().getEngine()}getFinalEngine(){const e=this.getEngine();return e&&fl(e)}requireEngine(){return this._engine??this.static().requireEngine()}requireFinalEngine(){return fl(this.requireEngine())}async loadRelation(e){const n=this.requireRelation(e),r=await n.relatedClass.withEngine(this.requireEngine(),()=>n.load());return this.emit("relation-loaded",n),r}async loadRelationIfUnloaded(e){const n=this.requireRelation(e);return n.loaded?n.getLoadedModels():this.loadRelation(e)}unloadRelation(e){this.requireRelation(e).unload()}getRelationModel(e){var n;const r=this.requireRelation(e);return r instanceof Gs?(console.warn(`You're getting a single model from the multi-model '${e}' relation in the '${this.static("modelName")}' model.`),((n=r.related)==null?void 0:n[0])??null):r.related??null}getRelationModels(e){const n=this.requireRelation(e);return n instanceof To?n.related?[n.related]:null:n.related??null}setRelationModel(e,n){const r=this.requireRelation(e);if(r instanceof Gs){console.warn(`You're setting a single model for the multi-model '${e}' relation in the '${this.static("modelName")}' model.`),r.related=[n];return}r.related=n}setRelationModels(e,n){const r=this.requireRelation(e),s=()=>{if(n===null||r instanceof Gs)return n;if(n.length>0)throw new qe("Can't set multiple models for SingleModelRelation, use setRelationModel instead");return n[0]??null};r.related=s()}isRelationLoaded(e){return this.requireRelation(e).loaded}hasAttribute(e){const n=e.split(".");let r=jl(this._attributes,this.static("fields"));for(const s of n){if(!yt(r)||!(s in r))return!1;r=r[s]}return r!==void 0}setAttribute(e,n){const r=this.static().fieldAliases[e],s=this.getAttribute(e);this.hasAttributeSetter(e)?this.callAttributeSetter(e,n):this.setAttributeValue(e,n),r&&this.attributeValueChanged(this.getAttribute(r),n)&&this.setAttribute(r,n),this.attributeValueChanged(s,n)&&this.emit("modified",e)}setAttributeValue(e,n){this._attributes[e]=n=this.castAttribute(n,{definition:this.static("fields")[e]}),this.markAttributeDirty(e,this._originalAttributes[e],n)?this._dirtyAttributes[e]=n:delete this._dirtyAttributes[e]}hasAttributeSetter(e){var n;return this.static("__attributeSetters").has(e)||!!((n=this.static("fields")[e])!=null&&n.set)}callAttributeSetter(e,n){var r;const s=this.static("__attributeSetters").get(e)??((r=this.static("fields")[e])==null?void 0:r.set);return s==null?void 0:s.call(this,n)}getOriginalAttribute(e){return this._originalAttributes[e]}getDeletedPrimaryKey(){return this._recentlyDeletedPrimaryKey??null}setOriginalAttribute(e,n){n=this.castAttribute(n,{definition:this.static("fields")[e]}),this._originalAttributes[e]=n,this._attributes[e]=n,delete this._dirtyAttributes[e]}setAttributes(e){for(const[n,r]of Object.entries(e))this.setAttribute(n,r)}getMalformedDocumentAttributes(){return this._malformedDocumentAttributes}setMalformedDocumentAttributes(e){this._malformedDocumentAttributes=e}setEngine(e){if(!e){delete this._engine;return}this._engine=e}withEngine(e,n){return xg({target:this,getTargetEngine:()=>this._engine,operation:n&&(()=>n(this)),engine:e})}async withoutTimestamps(e){return this.static().ignoringTimestamps.set(this,!0),je(await e(),()=>this.static().ignoringTimestamps.delete(this))}getAttribute(e,n=!1){return this.hasAttributeGetter(e)?this.callAttributeGetter(e):this.getAttributeValue(e,n)}getAttributeValue(e,n=!1){const r=e.split(".");let s=this.getAttributes(n);for(;r.length>0;){const i=s[r.shift()];if(!yt(i))return i;s=i}return s}getAttributes(e=!1){return e?Er(this._attributes):jl(this._attributes,this.static("fields"))}hasAttributeGetter(e){var n;return this.static("__attributeGetters").has(e)||!!((n=this.static("fields")[e])!=null&&n.get)}callAttributeGetter(e){var n;const r=this.static("__attributeGetters").get(e)??((n=this.static("fields")[e])==null?void 0:n.get);return r==null?void 0:r.call(this)}unsetAttribute(e){nc(this._attributes,e)&&(e in this.static("fields")?this._attributes[e]=void 0:delete this._attributes[e],this.markAttributeDirty(e,this._originalAttributes[e],void 0)?this._dirtyAttributes[e]=void 0:delete this._dirtyAttributes[e])}hasIncompleteAttributes(){try{return Pf(this._attributes,this.static("fields")),!1}catch{return!0}}is(e){return this.getPrimaryKey()===e.getPrimaryKey()}isDirty(e){return e?e in this._dirtyAttributes:Object.values(this._dirtyAttributes).length>0}cleanDirty(){this._originalAttributes=Er(this._attributes),this._dirtyAttributes={},this._exists=!0}reset(){delete this._attributes[this.static("primaryKey")],this._exists=!1,this._dirtyAttributes=Er(this._attributes)}getPrimaryKey(){return this._attributes[this.static("primaryKey")]??null}getSerializedPrimaryKey(){const e=this.getPrimaryKey();return e?this.serializeKey(e):null}async delete(){return this._exists?(await this.performDelete(),await this.emit("deleted"),this):this}async save(){var e,n;Pf(this._attributes,this.static("fields"));const r=this.exists();return r&&!this.isDirty()?this:(await((e=this.static("hooks").beforeSave)==null?void 0:e.call(this)),await this.beforeSave(),await this.performSave(),await((n=this.static("hooks").afterSave)==null?void 0:n.call(this)),await this.afterSave(),await this.emit(r?"updated":"created"),this)}fixMalformedAttributes(){this.performMalformedAttributeFixes(),this._malformedDocumentAttributes={}}touch(){this.setAttribute(At.UpdatedAt,new Date)}setExists(e){this._exists=e}exists(){return this._exists}wasRecentlyCreated(){return this._wasRecentlyCreated}wasRecentlyDeleted(){return!!this._recentlyDeletedPrimaryKey}clone(e={}){const n=e.clones??new WeakMap;if(n.has(this))return n.get(this);const r=e.constructors,s=Array.isArray(r)?je(new WeakMap,a=>{r.forEach(([l,c])=>a.set(l,c))}):r??new WeakMap,i=s.get(this.static())??this.static(),o=new i(this.getAttributes());n.set(this,o);for(const[a,l]of Object.entries(this._relations))o._relations[a]=je(l.clone({clones:n,constructors:s}),c=>c.parent=o);return e.clean&&o.cleanDirty(),o}initialize(e,n){this._exists=n,this._wasRecentlyCreated=!1,this.initializeAttributes(e,n),this.initializeRelations()}initializeProxy(){this._proxy=new Proxy(this,{get(e,n,r){if(typeof n!="string"||n in e||e.static("classFields").indexOf(n)!==-1)return Reflect.get(e,n,r);if(e.hasRelation(n))return e._proxy.isRelationLoaded(n)?e._proxy.requireRelation(n).related:void 0;if(n.startsWith("related")){const s=Ai(n.substr(7));if(e._proxy.hasRelation(s))return e._relations[s]}return e._proxy.getAttribute(n)},set(e,n,r,s){return typeof n!="string"||n in e||e.static("classFields").indexOf(n)!==-1?Reflect.set(e,n,r,s):e._proxy.hasRelation(n)?(e._proxy.requireRelation(n).related=r,!0):(e._proxy.setAttribute(n,r),!0)},deleteProperty(e,n){return typeof n!="string"||n in e?Reflect.deleteProperty(e,n):e._proxy.hasRelation(n)?(e._proxy.unloadRelation(n),!0):!(n in e._attributes)||e.static("classFields").indexOf(n)!==-1?Reflect.deleteProperty(e,n):(e._proxy.unsetAttribute(n),!0)}})}initializeAttributes(e,n){try{const r=this.static("fields");this._malformedDocumentAttributes={},this._attributes=Er(e),this._attributes=this.castAttributes(Vw(this._attributes,r),r,this._malformedDocumentAttributes);for(const[s,i]of Object.entries(this.static().fieldAliases)){const o=this._attributes[s]??this._attributes[i];this._attributes[s]=o,this._attributes[i]=o}this._originalAttributes=n?Er(this._attributes):{},this._dirtyAttributes=n?{}:Er(this._attributes),delete this._malformedDocumentAttributes[this.static("primaryKey")]}catch(r){throw new qw(this.static("modelName"),e,{cause:r})}}initializeRelations(){this._relations=this.static("relations").reduce((e,n)=>{var r;const s=this._proxy,i=(r=s[Ai(n)+"Relationship"])==null?void 0:r.call(s);return i.name=n,e[n]=i,e},{})}getDefaultCollection(){return this.static("modelName").toLowerCase()+"s"}async createFromEngineDocument(e,n){const r=await this.parseEngineDocumentAttributes(e,n);r[this.static("primaryKey")]=e;for(const[s,i]of Object.entries(this.static("fields")))i.deserialize&&(r[s]=i.deserialize(r[s]));return this.newInstance(r,!0)}async createManyFromEngineDocuments(e){return Promise.all(Object.entries(e).map(([n,r])=>this.createFromEngineDocument(this.parseKey(n),r)))}async beforeSave(){const e=new Date,n=this.static().ignoringTimestamps;if(!n.has(this)&&!n.has(this.static())&&(this.static().hasAutomaticTimestamp(At.CreatedAt)&&this.setAttribute(At.CreatedAt,this.getAttribute(At.CreatedAt)??e),this.static().hasAutomaticTimestamp(At.UpdatedAt))){const r=this.isDirty(At.UpdatedAt)?this.getAttribute(At.UpdatedAt):e;this.setAttribute(At.UpdatedAt,r??e)}}async performSave(){const e=this.exists(),n=await this.syncDirty();this._wasRecentlyCreated=this._wasRecentlyCreated||!e,this._attributes[this.static("primaryKey")]=this.parseKey(n)}async afterSave(){this.cleanDirty(),await this.loadEmptyRelations()}async performDelete(){const e=this.getPrimaryKey(),n=await this.getCascadeModels();await this.deleteModelsFromEngine(n),n.forEach(r=>r.reset()),this._recentlyDeletedPrimaryKey=e}performMalformedAttributeFixes(){const e=Object.keys(this._malformedDocumentAttributes),n=(r,s)=>s.type===ke.Array?e.some(i=>i.startsWith(`${r}.`)):r in this._malformedDocumentAttributes;for(const[r,s]of Object.entries(this.static("fields")))n(r,s)&&(this._dirtyAttributes[r]=this._attributes[r])}async emit(...e){return _g(this,...e)}async syncDirty(){if(!this.exists())return this.requireEngine().create(this.static("collection"),this.toEngineDocument(),this.getSerializedPrimaryKey()||void 0);const e=this.getDirtyEngineDocumentUpdates(),n=this.getSerializedPrimaryKey();return await this.requireEngine().update(this.static("collection"),n,e),n}async getCascadeModels(){const e=this.static("relations").map(r=>this.requireRelation(r)).filter(r=>r.enabled&&r.deleteStrategy==="cascade").map(async r=>(await r.getModels()).map(s=>s.getCascadeModels())),n=await Promise.all(e);return(await Promise.all(n.flat())).flat().concat([this]).filter(r=>r.exists())}async deleteModelsFromEngine(e){const n=e.map(r=>[r.static("collection"),r.getSerializedPrimaryKey()]);await Promise.all(n.map(([r,s])=>this.requireEngine().delete(r,s)))}resetEngineData(){this.reset()}hasOne(e,n,r){return new Ii(this,e,n,r)}belongsToOne(e,n,r){return new ua(this,e,n,r)}hasMany(e,n,r){return new ro(this,e,n,r)}belongsToMany(e,n,r){return new no(this,e,n,r)}async loadEmptyRelations(){const e=this.wasRecentlyCreated();for(const n of Object.values(this._relations))if(!(!n.enabled||n.loaded)){if(e&&n instanceof ro){n.related=[];continue}if(e&&n instanceof Ii){n.related=null;continue}n.isEmpty()&&await n.load()}}attributeValueChanged(e,n){return e instanceof Hn?Tt(e)!==Tt(n):!Vh(e,n)}markAttributeDirty(e,n,r){return this.attributeValueChanged(n,r)}castAttributes(e,n,r,s=""){const i={};for(const o in e)i[o]=this.castAttribute(e[o],{field:s+o,malformedAttributes:r,definition:n[o]});return i}castAttribute(e,{field:n,definition:r,malformedAttributes:s}={}){if(Af(e))return e;if(r!=null&&r.cast)return r.cast(e);if(typeof r>"u")switch(typeof e){case"object":return Array.isArray(e)?e.map((i,o)=>this.castAttribute(i,{field:n&&`${n}.${o}`,malformedAttributes:s})):e instanceof Date||e instanceof Hn?e:Tt(e);case"symbol":case"function":case"undefined":return;default:return e}switch(r.type){case ke.Date:if(!["string","number"].includes(typeof e)&&!(e instanceof Date))throw new qe(`Invalid Date value (${e}) found in ${this.static("modelName")} ${this.getPrimaryKey()}.`);return new Date(e);case ke.Object:if(!yt(e))throw new qe(`Invalid Object value (${e}) found in ${this.static("modelName")} ${this.getPrimaryKey()}.`);return this.castAttributes(e,r.fields,s,n&&`${n}.`);case ke.Array:if(!Array.isArray(e))throw new qe(`Invalid Array value (${e}) found in ${this.static("modelName")} ${this.getPrimaryKey()}.`);return e.map((i,o)=>this.castAttribute(i,{field:n&&`${n}.${o}`,definition:r.items,malformedAttributes:s}));case ke.Boolean:return!!e;case ke.Number:{const i=parseFloat(e);if(isNaN(i))throw new qe(`Invalid Number value (${e}) found in ${this.static("modelName")} ${this.getPrimaryKey()}.`);return i}case ke.String:return Tt(e);case ke.Key:{if(e instanceof Hn)return Tt(e);if(n&&s){const i=s[n]??[];s[n]=i.concat(["malformed-key"])}return e}default:return e}}toEngineDocument(){const e=this.static("fields"),n=jl(this._attributes,e);for(const[r,s]of Object.entries(e))s.serialize&&(n[r]=s.serialize(n[r]));return n}getDirtyEngineDocumentUpdates(){const e=Er(this._dirtyAttributes);for(const n in e)e[n]===void 0&&(e[n]={$unset:!0});return e}async parseEngineDocumentAttributes(e,n){return{...n}}serializeKey(e){return Tt(e)}parseKey(e){return e}};nt(on,"collection"),nt(on,"primaryKey","id"),nt(on,"timestamps"),nt(on,"fields"),nt(on,"modelName"),nt(on,"classFields",[]),nt(on,"relations",[]),nt(on,"hooks",{}),nt(on,"__attributeGetters",new Map),nt(on,"__attributeSetters",new Map),nt(on,"instances",new WeakMap),nt(on,"pureInstances",new WeakMap),nt(on,"bootedModels",new WeakMap),nt(on,"engines",new WeakMap),nt(on,"ignoringTimestamps",new WeakMap),nt(on,"fieldAliases",{});let Ci=on;function Hw(t,e){const n=e?t:Ci;return je(class extends n{},r=>{Object.assign(r,e??t)})}const Yh=new Map;function Kw(){return new Map(Yh)}function zt(t){return Yh.get(t)??Xe(qe,`Could not find Model with name '${t}', are you sure it's booted?`)}function Qh(t){for(const[e,n]of Object.entries(t))n.boot(e),Yh.set(e,n)}function MA(t){let e=Object.getPrototypeOf(t);for(;e;){if(e!==Ci){e=Object.getPrototypeOf(e);continue}return!0}return!1}function NA(t,e=[".schema",".test"]){const n={};for(const[r,s]of Object.entries(t)){const i=(r.match(/^(.*\/)?(.+)\.(j|t)s$/)||[])[2];if(typeof i>"u"||e.some(a=>i.endsWith(a)))continue;const o=s.default??s[Object.keys(s)[0]];!o||!MA(o)||(n[i]=o)}return n}function FA(t,e=[".schema"]){const n=NA(t,e);Qh(n)}var Cg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function UA(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Vu={},Hu,Rg;function Zh(){return Rg||(Rg=1,Hu=class Ww{constructor(e,n=new Map,r=0){this.prefix=e,this._existing=n,this.counter=r}clone(){const{prefix:e,_existing:n,counter:r}=this;return new Ww(e,new Map(n),r)}getId(e){const n=e&&this._existing.get(e);if(n)return n;const r=this.prefix+this.counter;return this.counter++,e&&this._existing.set(e,r),r}hasId(e){return this._existing.has(e)}getOldIds(){return[...this._existing.keys()]}}),Hu}var Ku={},Tg;function BA(){return Tg||(Tg=1,function(t,e){if(t.setImmediate)return;var n=1,r={},s=!1,i=t.document,o;function a(x){typeof x!="function"&&(x=new Function(""+x));for(var w=new Array(arguments.length-1),p=0;p<w.length;p++)w[p]=arguments[p+1];var b={callback:x,args:w};return r[n]=b,o(n),n++}function l(x){delete r[x]}function c(x){var w=x.callback,p=x.args;switch(p.length){case 0:w();break;case 1:w(p[0]);break;case 2:w(p[0],p[1]);break;case 3:w(p[0],p[1],p[2]);break;default:w.apply(e,p);break}}function u(x){if(s)setTimeout(u,0,x);else{var w=r[x];if(w){s=!0;try{c(w)}finally{l(x),s=!1}}}}function d(){o=function(x){process.nextTick(function(){u(x)})}}function f(){if(t.postMessage&&!t.importScripts){var x=!0,w=t.onmessage;return t.onmessage=function(){x=!1},t.postMessage("","*"),t.onmessage=w,x}}function h(){var x="setImmediate$"+Math.random()+"$",w=function(p){p.source===t&&typeof p.data=="string"&&p.data.indexOf(x)===0&&u(+p.data.slice(x.length))};t.addEventListener?t.addEventListener("message",w,!1):t.attachEvent("onmessage",w),o=function(p){t.postMessage(x+p,"*")}}function m(){var x=new MessageChannel;x.port1.onmessage=function(w){var p=w.data;u(p)},o=function(w){x.port2.postMessage(w)}}function y(){var x=i.documentElement;o=function(w){var p=i.createElement("script");p.onreadystatechange=function(){u(w),p.onreadystatechange=null,x.removeChild(p),p=null},x.appendChild(p)}}function S(){o=function(x){setTimeout(u,0,x)}}var _=Object.getPrototypeOf&&Object.getPrototypeOf(t);_=_&&_.setTimeout?_:t,{}.toString.call(t.process)==="[object process]"?d():f()?h():t.MessageChannel?m():i&&"onreadystatechange"in i.createElement("script")?y():S(),_.setImmediate=a,_.clearImmediate=l}(typeof self>"u"?typeof Cg>"u"?Ku:Cg:self)),Ku}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Wu,kg;function zc(){if(kg)return Wu;kg=1,BA();const t=self.crypto||self.msCrypto;return Wu=class{constructor(n){if(!(t&&t.subtle))throw new Error("crypto.subtle not found.");if(n==="sha256")this.algorithm={name:"SHA-256"};else if(n==="sha1")this.algorithm={name:"SHA-1"};else throw new Error(`Unsupported algorithm "${n}".`);this._content=""}update(n){this._content+=n}async digest(){const n=new TextEncoder().encode(this._content),r=new Uint8Array(await t.subtle.digest(this.algorithm,n));let s="";for(let i=0;i<r.length;++i)s+=r[i].toString(16).padStart(2,"0");return s}},Wu}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Gu,$g;function Gw(){return $g||($g=1,Gu=class{constructor(e){this.current=e.sort(),this.done=!1,this.dir=new Map;for(let n=0;n<e.length;++n)this.dir.set(e[n],!0)}hasNext(){return!this.done}next(){const{current:e,dir:n}=this,r=e.slice();let s=null,i=0;const o=e.length;for(let a=0;a<o;++a){const l=e[a],c=n.get(l);(s===null||l>s)&&(c&&a>0&&l>e[a-1]||!c&&a<o-1&&l>e[a+1])&&(s=l,i=a)}if(s===null)this.done=!0;else{const a=n.get(s)?i-1:i+1;e[i]=e[a],e[a]=s;for(const l of e)l>s&&n.set(l,!n.get(l))}return r}}),Gu}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Ju,Dg;function ep(){if(Dg)return Ju;Dg=1;const e="http://www.w3.org/1999/02/22-rdf-syntax-ns#"+"langString",n="http://www.w3.org/2001/XMLSchema#string",r="NamedNode",s="BlankNode",i="Literal",o="DefaultGraph",a={};(()=>{const h="(?:<([^:]+:[^>]*)>)",y="A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�"+"_",S=y+"0-9-·̀-ͯ‿-⁀",x="(_:(?:["+y+"0-9])(?:(?:["+S+".])*(?:["+S+"]))?)",w='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',p="(?:\\^\\^"+h+")",A="(?:"+w+"(?:"+p+"|"+"(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))"+")?)",R="[ \\t]+",I="[ \\t]*",T="(?:"+h+"|"+x+")"+R,D=h+R,U="(?:"+h+"|"+x+"|"+A+")"+I,J="(?:\\.|(?:(?:"+h+"|"+x+")"+I+"\\.))";a.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,a.empty=new RegExp("^"+I+"$"),a.quad=new RegExp("^"+I+T+D+U+J+I+"$")})(),Ju=class Bl{static parse(m){const y=[],S={},_=m.split(a.eoln);let x=0;for(const w of _){if(x++,a.empty.test(w))continue;const p=w.match(a.quad);if(p===null)throw new Error("N-Quads parse error on line "+x+".");const b={subject:null,predicate:null,object:null,graph:null};if(p[1]!==void 0?b.subject={termType:r,value:p[1]}:b.subject={termType:s,value:p[2]},b.predicate={termType:r,value:p[3]},p[4]!==void 0?b.object={termType:r,value:p[4]}:p[5]!==void 0?b.object={termType:s,value:p[5]}:(b.object={termType:i,value:void 0,datatype:{termType:r}},p[7]!==void 0?b.object.datatype.value=p[7]:p[8]!==void 0?(b.object.datatype.value=e,b.object.language=p[8]):b.object.datatype.value=n,b.object.value=f(p[6])),p[9]!==void 0?b.graph={termType:r,value:p[9]}:p[10]!==void 0?b.graph={termType:s,value:p[10]}:b.graph={termType:o,value:""},!(b.graph.value in S))S[b.graph.value]=[b],y.push(b);else{let A=!0;const R=S[b.graph.value];for(const I of R)if(l(I,b)){A=!1;break}A&&(R.push(b),y.push(b))}}return y}static serialize(m){Array.isArray(m)||(m=Bl.legacyDatasetToQuads(m));const y=[];for(const S of m)y.push(Bl.serializeQuad(S));return y.sort().join("")}static serializeQuadComponents(m,y,S,_){let x="";return m.termType===r?x+=`<${m.value}>`:x+=`${m.value}`,x+=` <${y.value}> `,S.termType===r?x+=`<${S.value}>`:S.termType===s?x+=S.value:(x+=`"${u(S.value)}"`,S.datatype.value===e?S.language&&(x+=`@${S.language}`):S.datatype.value!==n&&(x+=`^^<${S.datatype.value}>`)),_.termType===r?x+=` <${_.value}>`:_.termType===s&&(x+=` ${_.value}`),x+=` .
`,x}static serializeQuad(m){return Bl.serializeQuadComponents(m.subject,m.predicate,m.object,m.graph)}static legacyDatasetToQuads(m){const y=[],S={"blank node":s,IRI:r,literal:i};for(const _ in m)m[_].forEach(w=>{const p={};for(const b in w){const A=w[b],R={termType:S[A.type],value:A.value};R.termType===i&&(R.datatype={termType:r},"datatype"in A&&(R.datatype.value=A.datatype),"language"in A?("datatype"in A||(R.datatype.value=e),R.language=A.language):"datatype"in A||(R.datatype.value=n)),p[b]=R}_==="@default"?p.graph={termType:o,value:""}:p.graph={termType:_.startsWith("_:")?s:r,value:_},y.push(p)});return y}};function l(h,m){return!(h.subject.termType===m.subject.termType&&h.object.termType===m.object.termType)||!(h.subject.value===m.subject.value&&h.predicate.value===m.predicate.value&&h.object.value===m.object.value)?!1:h.object.termType!==i?!0:h.object.datatype.termType===m.object.datatype.termType&&h.object.language===m.object.language&&h.object.datatype.value===m.object.datatype.value}const c=/["\\\n\r]/g;function u(h){return h.replace(c,function(m){switch(m){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r"}})}const d=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function f(h){return h.replace(d,function(m,y,S,_){if(y)switch(y){case"t":return"	";case"b":return"\b";case"n":return`
`;case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(S)return String.fromCharCode(parseInt(S,16));if(_)throw new Error("Unsupported U escape")})}return Ju}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Xu,Og;function Jw(){if(Og)return Xu;Og=1;const t=Zh(),e=zc(),n=Gw(),r=ep();Xu=class{constructor({createMessageDigest:o=()=>new e("sha256"),canonicalIdMap:a=new Map,maxDeepIterations:l=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new t("_:c14n",a),this.createMessageDigest=o,this.maxDeepIterations=l,this.quads=null,this.deepIterations=null}async main(o){this.deepIterations=new Map,this.quads=o;for(const h of o)this._addBlankNodeQuadInfo({quad:h,component:h.subject}),this._addBlankNodeQuadInfo({quad:h,component:h.object}),this._addBlankNodeQuadInfo({quad:h,component:h.graph});const a=new Map,l=[...this.blankNodeInfo.keys()];let c=0;for(const h of l)++c%100===0&&await this._yield(),await this._hashAndTrackBlankNode({id:h,hashToBlankNodes:a});const u=[...a.keys()].sort(),d=[];for(const h of u){const m=a.get(h);if(m.length>1){d.push(m);continue}const y=m[0];this.canonicalIssuer.getId(y)}for(const h of d){const m=[];for(const y of h){if(this.canonicalIssuer.hasId(y))continue;const S=new t("_:b");S.getId(y);const _=await this.hashNDegreeQuads(y,S);m.push(_)}m.sort(s);for(const y of m){const S=y.issuer.getOldIds();for(const _ of S)this.canonicalIssuer.getId(_)}}const f=[];for(const h of this.quads){const m=r.serializeQuadComponents(this._componentWithCanonicalId(h.subject),h.predicate,this._componentWithCanonicalId(h.object),this._componentWithCanonicalId(h.graph));f.push(m)}return f.sort(),f.join("")}async hashFirstDegreeQuads(o){const a=[],l=this.blankNodeInfo.get(o),c=l.quads;for(const d of c){const f={subject:null,predicate:d.predicate,object:null,graph:null};f.subject=this.modifyFirstDegreeComponent(o,d.subject,"subject"),f.object=this.modifyFirstDegreeComponent(o,d.object,"object"),f.graph=this.modifyFirstDegreeComponent(o,d.graph,"graph"),a.push(r.serializeQuad(f))}a.sort();const u=this.createMessageDigest();for(const d of a)u.update(d);return l.hash=await u.digest(),l.hash}async hashRelatedBlankNode(o,a,l,c){let u;this.canonicalIssuer.hasId(o)?u=this.canonicalIssuer.getId(o):l.hasId(o)?u=l.getId(o):u=this.blankNodeInfo.get(o).hash;const d=this.createMessageDigest();return d.update(c),c!=="g"&&d.update(this.getRelatedPredicate(a)),d.update(u),d.digest()}async hashNDegreeQuads(o,a){const l=this.deepIterations.get(o)||0;if(l>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(o,l+1);const c=this.createMessageDigest(),u=await this.createHashToRelated(o,a),d=[...u.keys()].sort();for(const f of d){c.update(f);let h="",m;const y=new n(u.get(f));let S=0;for(;y.hasNext();){const _=y.next();++S%3===0&&await this._yield();let x=a.clone(),w="";const p=[];let b=!1;for(const A of _)if(this.canonicalIssuer.hasId(A)?w+=this.canonicalIssuer.getId(A):(x.hasId(A)||p.push(A),w+=x.getId(A)),h.length!==0&&w>h){b=!0;break}if(!b){for(const A of p){const R=await this.hashNDegreeQuads(A,x);if(w+=x.getId(A),w+=`<${R.hash}>`,x=R.issuer,h.length!==0&&w>h){b=!0;break}}b||(h.length===0||w<h)&&(h=w,m=x)}}c.update(h),a=m}return{hash:await c.digest(),issuer:a}}modifyFirstDegreeComponent(o,a){return a.termType!=="BlankNode"?a:{termType:"BlankNode",value:a.value===o?"_:a":"_:z"}}getRelatedPredicate(o){return`<${o.predicate.value}>`}async createHashToRelated(o,a){const l=new Map,c=this.blankNodeInfo.get(o).quads;let u=0;for(const d of c)++u%100===0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:d,component:d.subject,position:"s",id:o,issuer:a,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:d,component:d.object,position:"o",id:o,issuer:a,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:d,component:d.graph,position:"g",id:o,issuer:a,hashToRelated:l})]);return l}async _hashAndTrackBlankNode({id:o,hashToBlankNodes:a}){const l=await this.hashFirstDegreeQuads(o),c=a.get(l);c?c.push(o):a.set(l,[o])}_addBlankNodeQuadInfo({quad:o,component:a}){if(a.termType!=="BlankNode")return;const l=a.value,c=this.blankNodeInfo.get(l);c?c.quads.add(o):this.blankNodeInfo.set(l,{quads:new Set([o]),hash:null})}async _addRelatedBlankNodeHash({quad:o,component:a,position:l,id:c,issuer:u,hashToRelated:d}){if(!(a.termType==="BlankNode"&&a.value!==c))return;const f=a.value,h=await this.hashRelatedBlankNode(f,o,u,l),m=d.get(h);m?m.push(f):d.set(h,[f])}_componentWithCanonicalId(o){return o.termType==="BlankNode"&&!o.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(o.value)}:o}async _yield(){return new Promise(o=>setImmediate(o))}};function s(i,o){return i.hash<o.hash?-1:i.hash>o.hash?1:0}return Xu}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Yu,Pg;function qA(){if(Pg)return Yu;Pg=1;const t=zc(),e=Jw();return Yu=class extends e{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new t("sha1")}modifyFirstDegreeComponent(r,s,i){return s.termType!=="BlankNode"?s:i==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:s.value===r?"_:a":"_:z"}}getRelatedPredicate(r){return r.predicate.value}async createHashToRelated(r,s){const i=new Map,o=this.blankNodeInfo.get(r).quads;let a=0;for(const l of o){let c,u;if(l.subject.termType==="BlankNode"&&l.subject.value!==r)u=l.subject.value,c="p";else if(l.object.termType==="BlankNode"&&l.object.value!==r)u=l.object.value,c="r";else continue;++a%100===0&&await this._yield();const d=await this.hashRelatedBlankNode(u,l,s,c),f=i.get(d);f?f.push(u):i.set(d,[u])}return i}},Yu}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Qu,Lg;function Xw(){if(Lg)return Qu;Lg=1;const t=Zh(),e=zc(),n=Gw(),r=ep();Qu=class{constructor({createMessageDigest:o=()=>new e("sha256"),canonicalIdMap:a=new Map,maxDeepIterations:l=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new t("_:c14n",a),this.createMessageDigest=o,this.maxDeepIterations=l,this.quads=null,this.deepIterations=null}main(o){this.deepIterations=new Map,this.quads=o;for(const f of o)this._addBlankNodeQuadInfo({quad:f,component:f.subject}),this._addBlankNodeQuadInfo({quad:f,component:f.object}),this._addBlankNodeQuadInfo({quad:f,component:f.graph});const a=new Map,l=[...this.blankNodeInfo.keys()];for(const f of l)this._hashAndTrackBlankNode({id:f,hashToBlankNodes:a});const c=[...a.keys()].sort(),u=[];for(const f of c){const h=a.get(f);if(h.length>1){u.push(h);continue}const m=h[0];this.canonicalIssuer.getId(m)}for(const f of u){const h=[];for(const m of f){if(this.canonicalIssuer.hasId(m))continue;const y=new t("_:b");y.getId(m);const S=this.hashNDegreeQuads(m,y);h.push(S)}h.sort(s);for(const m of h){const y=m.issuer.getOldIds();for(const S of y)this.canonicalIssuer.getId(S)}}const d=[];for(const f of this.quads){const h=r.serializeQuadComponents(this._componentWithCanonicalId({component:f.subject}),f.predicate,this._componentWithCanonicalId({component:f.object}),this._componentWithCanonicalId({component:f.graph}));d.push(h)}return d.sort(),d.join("")}hashFirstDegreeQuads(o){const a=[],l=this.blankNodeInfo.get(o),c=l.quads;for(const d of c){const f={subject:null,predicate:d.predicate,object:null,graph:null};f.subject=this.modifyFirstDegreeComponent(o,d.subject,"subject"),f.object=this.modifyFirstDegreeComponent(o,d.object,"object"),f.graph=this.modifyFirstDegreeComponent(o,d.graph,"graph"),a.push(r.serializeQuad(f))}a.sort();const u=this.createMessageDigest();for(const d of a)u.update(d);return l.hash=u.digest(),l.hash}hashRelatedBlankNode(o,a,l,c){let u;this.canonicalIssuer.hasId(o)?u=this.canonicalIssuer.getId(o):l.hasId(o)?u=l.getId(o):u=this.blankNodeInfo.get(o).hash;const d=this.createMessageDigest();return d.update(c),c!=="g"&&d.update(this.getRelatedPredicate(a)),d.update(u),d.digest()}hashNDegreeQuads(o,a){const l=this.deepIterations.get(o)||0;if(l>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(o,l+1);const c=this.createMessageDigest(),u=this.createHashToRelated(o,a),d=[...u.keys()].sort();for(const f of d){c.update(f);let h="",m;const y=new n(u.get(f));for(;y.hasNext();){const S=y.next();let _=a.clone(),x="";const w=[];let p=!1;for(const b of S)if(this.canonicalIssuer.hasId(b)?x+=this.canonicalIssuer.getId(b):(_.hasId(b)||w.push(b),x+=_.getId(b)),h.length!==0&&x>h){p=!0;break}if(!p){for(const b of w){const A=this.hashNDegreeQuads(b,_);if(x+=_.getId(b),x+=`<${A.hash}>`,_=A.issuer,h.length!==0&&x>h){p=!0;break}}p||(h.length===0||x<h)&&(h=x,m=_)}}c.update(h),a=m}return{hash:c.digest(),issuer:a}}modifyFirstDegreeComponent(o,a){return a.termType!=="BlankNode"?a:{termType:"BlankNode",value:a.value===o?"_:a":"_:z"}}getRelatedPredicate(o){return`<${o.predicate.value}>`}createHashToRelated(o,a){const l=new Map,c=this.blankNodeInfo.get(o).quads;for(const u of c)this._addRelatedBlankNodeHash({quad:u,component:u.subject,position:"s",id:o,issuer:a,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:u,component:u.object,position:"o",id:o,issuer:a,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:u,component:u.graph,position:"g",id:o,issuer:a,hashToRelated:l});return l}_hashAndTrackBlankNode({id:o,hashToBlankNodes:a}){const l=this.hashFirstDegreeQuads(o),c=a.get(l);c?c.push(o):a.set(l,[o])}_addBlankNodeQuadInfo({quad:o,component:a}){if(a.termType!=="BlankNode")return;const l=a.value,c=this.blankNodeInfo.get(l);c?c.quads.add(o):this.blankNodeInfo.set(l,{quads:new Set([o]),hash:null})}_addRelatedBlankNodeHash({quad:o,component:a,position:l,id:c,issuer:u,hashToRelated:d}){if(!(a.termType==="BlankNode"&&a.value!==c))return;const f=a.value,h=this.hashRelatedBlankNode(f,o,u,l),m=d.get(h);m?m.push(f):d.set(h,[f])}_componentWithCanonicalId({component:o}){return o.termType==="BlankNode"&&!o.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(o.value)}:o}};function s(i,o){return i.hash<o.hash?-1:i.hash>o.hash?1:0}return Qu}/*!
 * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
 */var Zu,Mg;function zA(){if(Mg)return Zu;Mg=1;const t=zc(),e=Xw();return Zu=class extends e{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new t("sha1")}modifyFirstDegreeComponent(r,s,i){return s.termType!=="BlankNode"?s:i==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:s.value===r?"_:a":"_:z"}}getRelatedPredicate(r){return r.predicate.value}createHashToRelated(r,s){const i=new Map,o=this.blankNodeInfo.get(r).quads;for(const a of o){let l,c;if(a.subject.termType==="BlankNode"&&a.subject.value!==r)c=a.subject.value,l="p";else if(a.object.termType==="BlankNode"&&a.object.value!==r)c=a.object.value,l="r";else continue;const u=this.hashRelatedBlankNode(c,a,s,l),d=i.get(u);d?d.push(c):i.set(u,[c])}return i}},Zu}const VA={},HA=Object.freeze(Object.defineProperty({__proto__:null,default:VA},Symbol.toStringTag,{value:"Module"})),KA=UA(HA);var Ng;function WA(){return Ng||(Ng=1,function(t){const e=Jw(),n=qA(),r=Xw(),s=zA();let i;try{i=KA}catch{}function o(a){return Array.isArray(a)?a:t.NQuads.legacyDatasetToQuads(a)}t.NQuads=ep(),t.IdentifierIssuer=Zh(),t._rdfCanonizeNative=function(a){return a&&(i=a),i},t.canonize=async function(a,l){const c=o(a);if(l.useNative){if(!i)throw new Error("rdf-canonize-native not available");if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((u,d)=>i.canonize(c,l,(f,h)=>f?d(f):u(h)))}if(l.algorithm==="URDNA2015")return new e(l).main(c);if(l.algorithm==="URGNA2012"){if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new n(l).main(c)}throw"algorithm"in l?new Error("Invalid RDF Dataset Canonicalization algorithm: "+l.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")},t._canonizeSync=function(a,l){const c=o(a);if(l.useNative){if(!i)throw new Error("rdf-canonize-native not available");if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return i.canonizeSync(c,l)}if(l.algorithm==="URDNA2015")return new r(l).main(c);if(l.algorithm==="URGNA2012"){if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new s(l).main(c)}throw"algorithm"in l?new Error("Invalid RDF Dataset Canonicalization algorithm: "+l.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}}(Vu)),Vu}var ed,Fg;function tp(){return Fg||(Fg=1,ed=WA()),ed}var td,jg;function Zn(){if(jg)return td;jg=1;const t={};return td=t,t.isArray=Array.isArray,t.isBoolean=e=>typeof e=="boolean"||Object.prototype.toString.call(e)==="[object Boolean]",t.isDouble=e=>t.isNumber(e)&&(String(e).indexOf(".")!==-1||Math.abs(e)>=1e21),t.isEmptyObject=e=>t.isObject(e)&&Object.keys(e).length===0,t.isNumber=e=>typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]",t.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e),t.isObject=e=>Object.prototype.toString.call(e)==="[object Object]",t.isString=e=>typeof e=="string"||Object.prototype.toString.call(e)==="[object String]",t.isUndefined=e=>typeof e>"u",td}var nd,Ug;function As(){if(Ug)return nd;Ug=1;const t=Zn(),e={};return nd=e,e.isSubject=n=>t.isObject(n)&&!("@value"in n||"@set"in n||"@list"in n)?Object.keys(n).length>1||!("@id"in n):!1,e.isSubjectReference=n=>t.isObject(n)&&Object.keys(n).length===1&&"@id"in n,e.isValue=n=>t.isObject(n)&&"@value"in n,e.isList=n=>t.isObject(n)&&"@list"in n,e.isGraph=n=>t.isObject(n)&&"@graph"in n&&Object.keys(n).filter(r=>r!=="@id"&&r!=="@index").length===1,e.isSimpleGraph=n=>e.isGraph(n)&&!("@id"in n),e.isBlankNode=n=>{if(t.isObject(n)){if("@id"in n){const r=n["@id"];return!t.isString(r)||r.indexOf("_:")===0}return Object.keys(n).length===0||!("@value"in n||"@set"in n||"@list"in n)}return!1},nd}var rd,Bg;function br(){return Bg||(Bg=1,rd=class extends Error{constructor(e="An unspecified JSON-LD error occurred.",n="jsonld.Error",r={}){super(e),this.name=n,this.message=e,this.details=r}}),rd}var sd,qg;function hr(){if(qg)return sd;qg=1;const t=As(),e=Zn(),n=tp().IdentifierIssuer,r=br(),s=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,i=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,o=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,a=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,l=/^@[a-zA-Z]+$/,c={headers:{accept:"application/ld+json, application/json"}},u={};sd=u,u.IdentifierIssuer=n,u.REGEX_BCP47=s,u.REGEX_KEYWORD=l,u.clone=function(f){if(f&&typeof f=="object"){let h;if(e.isArray(f)){h=[];for(let m=0;m<f.length;++m)h[m]=u.clone(f[m])}else if(f instanceof Map){h=new Map;for(const[m,y]of f)h.set(m,u.clone(y))}else if(f instanceof Set){h=new Set;for(const m of f)h.add(u.clone(m))}else if(e.isObject(f)){h={};for(const m in f)h[m]=u.clone(f[m])}else h=f.toString();return h}return f},u.asArray=function(f){return Array.isArray(f)?f:[f]},u.buildHeaders=(f={})=>{if(Object.keys(f).some(m=>m.toLowerCase()==="accept"))throw new RangeError('Accept header may not be specified; only "'+c.headers.accept+'" is supported.');return Object.assign({Accept:c.headers.accept},f)},u.parseLinkHeader=f=>{const h={},m=f.match(i);for(let y=0;y<m.length;++y){let S=m[y].match(o);if(!S)continue;const _={target:S[1]},x=S[2];for(;S=a.exec(x);)_[S[1]]=S[2]===void 0?S[3]:S[2];const w=_.rel||"";Array.isArray(h[w])?h[w].push(_):h.hasOwnProperty(w)?h[w]=[h[w],_]:h[w]=_}return h},u.validateTypeValue=(f,h)=>{if(!e.isString(f)&&!(e.isArray(f)&&f.every(m=>e.isString(m)))){if(h&&e.isObject(f))switch(Object.keys(f).length){case 0:return;case 1:if("@default"in f&&u.asArray(f["@default"]).every(m=>e.isString(m)))return}throw new r('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:f})}},u.hasProperty=(f,h)=>{if(f.hasOwnProperty(h)){const m=f[h];return!e.isArray(m)||m.length>0}return!1},u.hasValue=(f,h,m)=>{if(u.hasProperty(f,h)){let y=f[h];const S=t.isList(y);if(e.isArray(y)||S){S&&(y=y["@list"]);for(let _=0;_<y.length;++_)if(u.compareValues(m,y[_]))return!0}else if(!e.isArray(m))return u.compareValues(m,y)}return!1},u.addValue=(f,h,m,y)=>{if(y=y||{},"propertyIsArray"in y||(y.propertyIsArray=!1),"valueIsArray"in y||(y.valueIsArray=!1),"allowDuplicate"in y||(y.allowDuplicate=!0),"prependValue"in y||(y.prependValue=!1),y.valueIsArray)f[h]=m;else if(e.isArray(m)){m.length===0&&y.propertyIsArray&&!f.hasOwnProperty(h)&&(f[h]=[]),y.prependValue&&(m=m.concat(f[h]),f[h]=[]);for(let S=0;S<m.length;++S)u.addValue(f,h,m[S],y)}else if(f.hasOwnProperty(h)){const S=!y.allowDuplicate&&u.hasValue(f,h,m);!e.isArray(f[h])&&(!S||y.propertyIsArray)&&(f[h]=[f[h]]),S||(y.prependValue?f[h].unshift(m):f[h].push(m))}else f[h]=y.propertyIsArray?[m]:m},u.getValues=(f,h)=>[].concat(f[h]||[]),u.removeProperty=(f,h)=>{delete f[h]},u.removeValue=(f,h,m,y)=>{y=y||{},"propertyIsArray"in y||(y.propertyIsArray=!1);const S=u.getValues(f,h).filter(_=>!u.compareValues(_,m));S.length===0?u.removeProperty(f,h):S.length===1&&!y.propertyIsArray?f[h]=S[0]:f[h]=S},u.relabelBlankNodes=(f,h)=>{h=h||{};const m=h.issuer||new n("_:b");return d(m,f)},u.compareValues=(f,h)=>f===h||t.isValue(f)&&t.isValue(h)&&f["@value"]===h["@value"]&&f["@type"]===h["@type"]&&f["@language"]===h["@language"]&&f["@index"]===h["@index"]?!0:e.isObject(f)&&"@id"in f&&e.isObject(h)&&"@id"in h?f["@id"]===h["@id"]:!1,u.compareShortestLeast=(f,h)=>f.length<h.length?-1:h.length<f.length?1:f===h?0:f<h?-1:1;function d(f,h){if(e.isArray(h))for(let m=0;m<h.length;++m)h[m]=d(f,h[m]);else if(t.isList(h))h["@list"]=d(f,h["@list"]);else if(e.isObject(h)){t.isBlankNode(h)&&(h["@id"]=f.getId(h["@id"]));const m=Object.keys(h).sort();for(let y=0;y<m.length;++y){const S=m[y];S!=="@id"&&(h[S]=d(f,h[S]))}}return h}return sd}var id,zg;function np(){if(zg)return id;zg=1;const t="http://www.w3.org/1999/02/22-rdf-syntax-ns#",e="http://www.w3.org/2001/XMLSchema#";return id={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:t,RDF_LIST:t+"List",RDF_FIRST:t+"first",RDF_REST:t+"rest",RDF_NIL:t+"nil",RDF_TYPE:t+"type",RDF_PLAIN_LITERAL:t+"PlainLiteral",RDF_XML_LITERAL:t+"XMLLiteral",RDF_JSON_LITERAL:t+"JSON",RDF_OBJECT:t+"object",RDF_LANGSTRING:t+"langString",XSD:e,XSD_BOOLEAN:e+"boolean",XSD_DOUBLE:e+"double",XSD_INTEGER:e+"integer",XSD_STRING:e+"string"},id}var od,Vg;function Yw(){return Vg||(Vg=1,od=class{constructor(){this._requests={}}wrapLoader(e){const n=this;return n._loader=e,function(){return n.add.apply(n,arguments)}}async add(e){let n=this._requests[e];if(n)return Promise.resolve(n);n=this._requests[e]=this._loader(e);try{return await n}finally{delete this._requests[e]}}}),od}var ad,Hg;function ai(){if(Hg)return ad;Hg=1;const t=Zn(),e={};ad=e,e.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},e.parse=(r,s)=>{const i={},o=e.parsers[s||"full"],a=o.regex.exec(r);let l=o.keys.length;for(;l--;)i[o.keys[l]]=a[l]===void 0?null:a[l];return(i.scheme==="https"&&i.port==="443"||i.scheme==="http"&&i.port==="80")&&(i.href=i.href.replace(":"+i.port,""),i.authority=i.authority.replace(":"+i.port,""),i.port=null),i.normalizedPath=e.removeDotSegments(i.path),i},e.prependBase=(r,s)=>{if(r===null||e.isAbsolute(s))return s;(!r||t.isString(r))&&(r=e.parse(r||""));const i=e.parse(s),o={protocol:r.protocol||""};if(i.authority!==null)o.authority=i.authority,o.path=i.path,o.query=i.query;else if(o.authority=r.authority,i.path==="")o.path=r.path,i.query!==null?o.query=i.query:o.query=r.query;else{if(i.path.indexOf("/")===0)o.path=i.path;else{let l=r.path;l=l.substr(0,l.lastIndexOf("/")+1),(l.length>0||r.authority)&&l.substr(-1)!=="/"&&(l+="/"),l+=i.path,o.path=l}o.query=i.query}i.path!==""&&(o.path=e.removeDotSegments(o.path));let a=o.protocol;return o.authority!==null&&(a+="//"+o.authority),a+=o.path,o.query!==null&&(a+="?"+o.query),i.fragment!==null&&(a+="#"+i.fragment),a===""&&(a="./"),a},e.removeBase=(r,s)=>{if(r===null)return s;(!r||t.isString(r))&&(r=e.parse(r||""));let i="";if(r.href!==""?i+=(r.protocol||"")+"//"+(r.authority||""):s.indexOf("//")&&(i+="//"),s.indexOf(i)!==0)return s;const o=e.parse(s.substr(i.length)),a=r.normalizedPath.split("/"),l=o.normalizedPath.split("/"),c=o.fragment||o.query?0:1;for(;a.length>0&&l.length>c&&a[0]===l[0];)a.shift(),l.shift();let u="";if(a.length>0){a.pop();for(let d=0;d<a.length;++d)u+="../"}return u+=l.join("/"),o.query!==null&&(u+="?"+o.query),o.fragment!==null&&(u+="#"+o.fragment),u===""&&(u="./"),u},e.removeDotSegments=r=>{if(r.length===0)return"";const s=r.split("/"),i=[];for(;s.length>0;){const o=s.shift(),a=s.length===0;if(o==="."){a&&i.push("");continue}if(o===".."){i.pop(),a&&i.push("");continue}i.push(o)}return r[0]==="/"&&i.length>0&&i[0]!==""&&i.unshift(""),i.length===1&&i[0]===""?"/":i.join("/")};const n=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;return e.isAbsolute=r=>t.isString(r)&&n.test(r),e.isRelative=r=>t.isString(r),ad}var ld,Kg;function GA(){if(Kg)return ld;Kg=1;const{parseLinkHeader:t,buildHeaders:e}=hr(),{LINK_HEADER_CONTEXT:n}=np(),r=br(),s=Yw(),{prependBase:i}=ai(),o=/(^|(\r\n))link:/i;ld=({secure:l,headers:c={},xhr:u}={headers:{}})=>{return c=e(c),new s().wrapLoader(f);async function f(h){if(h.indexOf("http:")!==0&&h.indexOf("https:")!==0)throw new r('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:h});if(l&&h.indexOf("https")!==0)throw new r(`URL could not be dereferenced; secure mode is enabled and the URL's scheme is not "https".`,"jsonld.InvalidUrl",{code:"loading document failed",url:h});let m;try{m=await a(u,h,c)}catch(w){throw new r("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:h,cause:w})}if(m.status>=400)throw new r("URL could not be dereferenced: "+m.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:h,httpStatusCode:m.status});let y={contextUrl:null,documentUrl:h,document:m.response},S=null;const _=m.getResponseHeader("Content-Type");let x;if(o.test(m.getAllResponseHeaders())&&(x=m.getResponseHeader("Link")),x&&_!=="application/ld+json"){const w=t(x),p=w[n];if(Array.isArray(p))throw new r("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:h});p&&(y.contextUrl=p.target),S=w.alternate,S&&S.type=="application/ld+json"&&!(_||"").match(/^application\/(\w*\+)?json$/)&&(y=await f(i(h,S.target)))}return y}};function a(l,c,u){l=l||XMLHttpRequest;const d=new l;return new Promise((f,h)=>{d.onload=()=>f(d),d.onerror=m=>h(m),d.open("GET",c,!0);for(const m in u)d.setRequestHeader(m,u[m]);d.send()})}return ld}var cd,Wg;function JA(){if(Wg)return cd;Wg=1;const t=GA(),e={};return cd=e,e.setupDocumentLoaders=function(n){typeof XMLHttpRequest<"u"&&(n.documentLoaders.xhr=t,n.useDocumentLoader("xhr"))},e.setupGlobals=function(n){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:n.JsonLdProcessor})},cd}var ud,Gg;function XA(){return Gg||(Gg=1,ud=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),ud}var dd,Jg;function YA(){if(Jg)return dd;Jg=1,dd=t,t.Node=s,t.create=t;function t(i){var o=this;if(o instanceof t||(o=new t),o.tail=null,o.head=null,o.length=0,i&&typeof i.forEach=="function")i.forEach(function(c){o.push(c)});else if(arguments.length>0)for(var a=0,l=arguments.length;a<l;a++)o.push(arguments[a]);return o}t.prototype.removeNode=function(i){if(i.list!==this)throw new Error("removing node which does not belong to this list");var o=i.next,a=i.prev;return o&&(o.prev=a),a&&(a.next=o),i===this.head&&(this.head=o),i===this.tail&&(this.tail=a),i.list.length--,i.next=null,i.prev=null,i.list=null,o},t.prototype.unshiftNode=function(i){if(i!==this.head){i.list&&i.list.removeNode(i);var o=this.head;i.list=this,i.next=o,o&&(o.prev=i),this.head=i,this.tail||(this.tail=i),this.length++}},t.prototype.pushNode=function(i){if(i!==this.tail){i.list&&i.list.removeNode(i);var o=this.tail;i.list=this,i.prev=o,o&&(o.next=i),this.tail=i,this.head||(this.head=i),this.length++}},t.prototype.push=function(){for(var i=0,o=arguments.length;i<o;i++)n(this,arguments[i]);return this.length},t.prototype.unshift=function(){for(var i=0,o=arguments.length;i<o;i++)r(this,arguments[i]);return this.length},t.prototype.pop=function(){if(this.tail){var i=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,i}},t.prototype.shift=function(){if(this.head){var i=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,i}},t.prototype.forEach=function(i,o){o=o||this;for(var a=this.head,l=0;a!==null;l++)i.call(o,a.value,l,this),a=a.next},t.prototype.forEachReverse=function(i,o){o=o||this;for(var a=this.tail,l=this.length-1;a!==null;l--)i.call(o,a.value,l,this),a=a.prev},t.prototype.get=function(i){for(var o=0,a=this.head;a!==null&&o<i;o++)a=a.next;if(o===i&&a!==null)return a.value},t.prototype.getReverse=function(i){for(var o=0,a=this.tail;a!==null&&o<i;o++)a=a.prev;if(o===i&&a!==null)return a.value},t.prototype.map=function(i,o){o=o||this;for(var a=new t,l=this.head;l!==null;)a.push(i.call(o,l.value,this)),l=l.next;return a},t.prototype.mapReverse=function(i,o){o=o||this;for(var a=new t,l=this.tail;l!==null;)a.push(i.call(o,l.value,this)),l=l.prev;return a},t.prototype.reduce=function(i,o){var a,l=this.head;if(arguments.length>1)a=o;else if(this.head)l=this.head.next,a=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var c=0;l!==null;c++)a=i(a,l.value,c),l=l.next;return a},t.prototype.reduceReverse=function(i,o){var a,l=this.tail;if(arguments.length>1)a=o;else if(this.tail)l=this.tail.prev,a=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var c=this.length-1;l!==null;c--)a=i(a,l.value,c),l=l.prev;return a},t.prototype.toArray=function(){for(var i=new Array(this.length),o=0,a=this.head;a!==null;o++)i[o]=a.value,a=a.next;return i},t.prototype.toArrayReverse=function(){for(var i=new Array(this.length),o=0,a=this.tail;a!==null;o++)i[o]=a.value,a=a.prev;return i},t.prototype.slice=function(i,o){o=o||this.length,o<0&&(o+=this.length),i=i||0,i<0&&(i+=this.length);var a=new t;if(o<i||o<0)return a;i<0&&(i=0),o>this.length&&(o=this.length);for(var l=0,c=this.head;c!==null&&l<i;l++)c=c.next;for(;c!==null&&l<o;l++,c=c.next)a.push(c.value);return a},t.prototype.sliceReverse=function(i,o){o=o||this.length,o<0&&(o+=this.length),i=i||0,i<0&&(i+=this.length);var a=new t;if(o<i||o<0)return a;i<0&&(i=0),o>this.length&&(o=this.length);for(var l=this.length,c=this.tail;c!==null&&l>o;l--)c=c.prev;for(;c!==null&&l>i;l--,c=c.prev)a.push(c.value);return a},t.prototype.splice=function(i,o,...a){i>this.length&&(i=this.length-1),i<0&&(i=this.length+i);for(var l=0,c=this.head;c!==null&&l<i;l++)c=c.next;for(var u=[],l=0;c&&l<o;l++)u.push(c.value),c=this.removeNode(c);c===null&&(c=this.tail),c!==this.head&&c!==this.tail&&(c=c.prev);for(var l=0;l<a.length;l++)c=e(this,c,a[l]);return u},t.prototype.reverse=function(){for(var i=this.head,o=this.tail,a=i;a!==null;a=a.prev){var l=a.prev;a.prev=a.next,a.next=l}return this.head=o,this.tail=i,this};function e(i,o,a){var l=o===i.head?new s(a,null,o,i):new s(a,o,o.next,i);return l.next===null&&(i.tail=l),l.prev===null&&(i.head=l),i.length++,l}function n(i,o){i.tail=new s(o,i.tail,null,i),i.head||(i.head=i.tail),i.length++}function r(i,o){i.head=new s(o,null,i.head,i),i.tail||(i.tail=i.head),i.length++}function s(i,o,a,l){if(!(this instanceof s))return new s(i,o,a,l);this.list=l,this.value=i,o?(o.next=this,this.prev=o):this.prev=null,a?(a.prev=this,this.next=a):this.next=null}try{XA()(t)}catch{}return dd}var fd,Xg;function Qw(){if(Xg)return fd;Xg=1;const t=YA(),e=Symbol("max"),n=Symbol("length"),r=Symbol("lengthCalculator"),s=Symbol("allowStale"),i=Symbol("maxAge"),o=Symbol("dispose"),a=Symbol("noDisposeOnSet"),l=Symbol("lruList"),c=Symbol("cache"),u=Symbol("updateAgeOnGet"),d=()=>1;class f{constructor(p){if(typeof p=="number"&&(p={max:p}),p||(p={}),p.max&&(typeof p.max!="number"||p.max<0))throw new TypeError("max must be a non-negative number");this[e]=p.max||1/0;const b=p.length||d;if(this[r]=typeof b!="function"?d:b,this[s]=p.stale||!1,p.maxAge&&typeof p.maxAge!="number")throw new TypeError("maxAge must be a number");this[i]=p.maxAge||0,this[o]=p.dispose,this[a]=p.noDisposeOnSet||!1,this[u]=p.updateAgeOnGet||!1,this.reset()}set max(p){if(typeof p!="number"||p<0)throw new TypeError("max must be a non-negative number");this[e]=p||1/0,y(this)}get max(){return this[e]}set allowStale(p){this[s]=!!p}get allowStale(){return this[s]}set maxAge(p){if(typeof p!="number")throw new TypeError("maxAge must be a non-negative number");this[i]=p,y(this)}get maxAge(){return this[i]}set lengthCalculator(p){typeof p!="function"&&(p=d),p!==this[r]&&(this[r]=p,this[n]=0,this[l].forEach(b=>{b.length=this[r](b.value,b.key),this[n]+=b.length})),y(this)}get lengthCalculator(){return this[r]}get length(){return this[n]}get itemCount(){return this[l].length}rforEach(p,b){b=b||this;for(let A=this[l].tail;A!==null;){const R=A.prev;x(this,p,A,b),A=R}}forEach(p,b){b=b||this;for(let A=this[l].head;A!==null;){const R=A.next;x(this,p,A,b),A=R}}keys(){return this[l].toArray().map(p=>p.key)}values(){return this[l].toArray().map(p=>p.value)}reset(){this[o]&&this[l]&&this[l].length&&this[l].forEach(p=>this[o](p.key,p.value)),this[c]=new Map,this[l]=new t,this[n]=0}dump(){return this[l].map(p=>m(this,p)?!1:{k:p.key,v:p.value,e:p.now+(p.maxAge||0)}).toArray().filter(p=>p)}dumpLru(){return this[l]}set(p,b,A){if(A=A||this[i],A&&typeof A!="number")throw new TypeError("maxAge must be a number");const R=A?Date.now():0,I=this[r](b,p);if(this[c].has(p)){if(I>this[e])return S(this,this[c].get(p)),!1;const U=this[c].get(p).value;return this[o]&&(this[a]||this[o](p,U.value)),U.now=R,U.maxAge=A,U.value=b,this[n]+=I-U.length,U.length=I,this.get(p),y(this),!0}const T=new _(p,b,I,R,A);return T.length>this[e]?(this[o]&&this[o](p,b),!1):(this[n]+=T.length,this[l].unshift(T),this[c].set(p,this[l].head),y(this),!0)}has(p){if(!this[c].has(p))return!1;const b=this[c].get(p).value;return!m(this,b)}get(p){return h(this,p,!0)}peek(p){return h(this,p,!1)}pop(){const p=this[l].tail;return p?(S(this,p),p.value):null}del(p){S(this,this[c].get(p))}load(p){this.reset();const b=Date.now();for(let A=p.length-1;A>=0;A--){const R=p[A],I=R.e||0;if(I===0)this.set(R.k,R.v);else{const T=I-b;T>0&&this.set(R.k,R.v,T)}}}prune(){this[c].forEach((p,b)=>h(this,b,!1))}}const h=(w,p,b)=>{const A=w[c].get(p);if(A){const R=A.value;if(m(w,R)){if(S(w,A),!w[s])return}else b&&(w[u]&&(A.value.now=Date.now()),w[l].unshiftNode(A));return R.value}},m=(w,p)=>{if(!p||!p.maxAge&&!w[i])return!1;const b=Date.now()-p.now;return p.maxAge?b>p.maxAge:w[i]&&b>w[i]},y=w=>{if(w[n]>w[e])for(let p=w[l].tail;w[n]>w[e]&&p!==null;){const b=p.prev;S(w,p),p=b}},S=(w,p)=>{if(p){const b=p.value;w[o]&&w[o](b.key,b.value),w[n]-=b.length,w[c].delete(b.key),w[l].removeNode(p)}};class _{constructor(p,b,A,R,I){this.key=p,this.value=b,this.length=A,this.now=R,this.maxAge=I||0}}const x=(w,p,b,A)=>{let R=b.value;m(w,R)&&(S(w,b),w[s]||(R=void 0)),R&&p.call(A,R.value,R.key,w)};return fd=f,fd}var hd,Yg;function QA(){if(Yg)return hd;Yg=1;const t=Qw(),e=10;return hd=class{constructor({document:r}){this.document=r,this.cache=new t({max:e})}getProcessed(r){return this.cache.get(r)}setProcessed(r,s){this.cache.set(r,s)}},hd}var pd,Qg;function ZA(){if(Qg)return pd;Qg=1;const{isArray:t,isObject:e,isString:n}=Zn(),{asArray:r}=hr(),{prependBase:s}=ai(),i=br(),o=QA(),a=10;pd=class{constructor({sharedCache:d}){this.perOpCache=new Map,this.sharedCache=d}async resolve({activeCtx:d,context:f,documentLoader:h,base:m,cycles:y=new Set}){f&&e(f)&&f["@context"]&&(f=f["@context"]),f=r(f);const S=[];for(const _ of f){if(n(_)){let p=this._get(_);p||(p=await this._resolveRemoteContext({activeCtx:d,url:_,documentLoader:h,base:m,cycles:y})),t(p)?S.push(...p):S.push(p);continue}if(_===null){S.push(new o({document:null}));continue}e(_)||l(f);const x=JSON.stringify(_);let w=this._get(x);w||(w=new o({document:_}),this._cacheResolvedContext({key:x,resolved:w,tag:"static"})),S.push(w)}return S}_get(d){let f=this.perOpCache.get(d);if(!f){const h=this.sharedCache.get(d);h&&(f=h.get("static"),f&&this.perOpCache.set(d,f))}return f}_cacheResolvedContext({key:d,resolved:f,tag:h}){if(this.perOpCache.set(d,f),h!==void 0){let m=this.sharedCache.get(d);m||(m=new Map,this.sharedCache.set(d,m)),m.set(h,f)}return f}async _resolveRemoteContext({activeCtx:d,url:f,documentLoader:h,base:m,cycles:y}){f=s(m,f);const{context:S,remoteDoc:_}=await this._fetchContext({activeCtx:d,url:f,documentLoader:h,cycles:y});m=_.documentUrl||f,c({context:S,base:m});const x=await this.resolve({activeCtx:d,context:S,documentLoader:h,base:m,cycles:y});return this._cacheResolvedContext({key:f,resolved:x,tag:_.tag}),x}async _fetchContext({activeCtx:d,url:f,documentLoader:h,cycles:m}){if(m.size>a)throw new i("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:d.processingMode==="json-ld-1.0"?"loading remote context failed":"context overflow",max:a});if(m.has(f))throw new i("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:d.processingMode==="json-ld-1.0"?"recursive context inclusion":"context overflow",url:f});m.add(f);let y,S;try{S=await h(f),y=S.document||null,n(y)&&(y=JSON.parse(y))}catch(_){throw new i(`Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context. URL: "${f}".`,"jsonld.InvalidUrl",{code:"loading remote context failed",url:f,cause:_})}if(!e(y))throw new i(`Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object. URL: "${f}".`,"jsonld.InvalidUrl",{code:"invalid remote context",url:f});return"@context"in y?y={"@context":y["@context"]}:y={"@context":{}},S.contextUrl&&(t(y["@context"])||(y["@context"]=[y["@context"]]),y["@context"].push(S.contextUrl)),{context:y,remoteDoc:S}}};function l(u){throw new i("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:u})}function c({context:u,base:d}){if(!u)return;const f=u["@context"];if(n(f)){u["@context"]=s(d,f);return}if(t(f)){for(let h=0;h<f.length;++h){const m=f[h];if(n(m)){f[h]=s(d,m);continue}e(m)&&c({context:{"@context":m},base:d})}return}if(e(f))for(const h in f)c({context:f[h],base:d})}return pd}var md,Zg;function eI(){return Zg||(Zg=1,md=tp().NQuads),md}var gd,ey;function za(){if(ey)return gd;ey=1;const t=br(),{isArray:e}=Zn(),{asArray:n}=hr(),r={};gd=r,r.defaultEventHandler=null,r.setupEventHandler=({options:o={}})=>{const a=[].concat(o.safe?r.safeEventHandler:[],o.eventHandler?n(o.eventHandler):[],r.defaultEventHandler?r.defaultEventHandler:[]);return a.length===0?null:a},r.handleEvent=({event:o,options:a})=>{s({event:o,handlers:a.eventHandler})};function s({event:o,handlers:a}){let l=!0;for(let c=0;l&&c<a.length;++c){l=!1;const u=a[c];if(e(u))l=s({event:o,handlers:u});else if(typeof u=="function")u({event:o,next:()=>{l=!0}});else if(typeof u=="object")o.code in u?u[o.code]({event:o,next:()=>{l=!0}}):l=!0;else throw new t("Invalid event handler.","jsonld.InvalidEventHandler",{event:o})}return l}const i=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);return r.safeEventHandler=function({event:a,next:l}){if(a.level==="warning"&&i.has(a.code))throw new t("Safe mode validation error.","jsonld.ValidationError",{event:a});l()},r.logEventHandler=function({event:a,next:l}){console.log(`EVENT: ${a.message}`,{event:a}),l()},r.logWarningEventHandler=function({event:a,next:l}){a.level==="warning"&&console.warn(`WARNING: ${a.message}`,{event:a}),l()},r.unhandledEventHandler=function({event:a}){throw new t("No handler for event.","jsonld.UnhandledEvent",{event:a})},r.setDefaultEventHandler=function({eventHandler:o}={}){r.defaultEventHandler=o?n(o):null},gd}var yd,ty;function Oi(){if(ty)return yd;ty=1;const t=hr(),e=br(),{isArray:n,isObject:r,isString:s,isUndefined:i}=Zn(),{isAbsolute:o,isRelative:a,prependBase:l}=ai(),{handleEvent:c}=za(),{REGEX_BCP47:u,REGEX_KEYWORD:d,asArray:f,compareShortestLeast:h}=hr(),m=new Map,y=1e4,S={};yd=S,S.process=async({activeCtx:w,localCtx:p,options:b,propagate:A=!0,overrideProtected:R=!1,cycles:I=new Set})=>{if(r(p)&&"@context"in p&&n(p["@context"])&&(p=p["@context"]),f(p).length===0)return w;const D=[],U=[({event:se,next:$})=>{D.push(se),$()}];b.eventHandler&&U.push(b.eventHandler);const J=b;b={...b,eventHandler:U};const H=await b.contextResolver.resolve({activeCtx:w,context:p,documentLoader:b.documentLoader,base:b.base});r(H[0].document)&&typeof H[0].document["@propagate"]=="boolean"&&(A=H[0].document["@propagate"]);let j=w;!A&&!j.previousContext&&(j=j.clone(),j.previousContext=w);for(const se of H){let{document:$}=se;if(w=j,$===null){if(!R&&Object.keys(w.protected).length!==0)throw new e("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});j=w=S.getInitialContext(b).clone();continue}const W=se.getProcessed(w);if(W){if(J.eventHandler)for(const oe of W.events)c({event:oe,options:J});j=w=W.context;continue}if(r($)&&"@context"in $&&($=$["@context"]),!r($))throw new e("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:$});j=j.clone();const B=new Map;if("@version"in $){if($["@version"]!==1.1)throw new e("Unsupported JSON-LD version: "+$["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:$});if(w.processingMode&&w.processingMode==="json-ld-1.0")throw new e("@version: "+$["@version"]+" not compatible with "+w.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:$});j.processingMode="json-ld-1.1",j["@version"]=$["@version"],B.set("@version",!0)}if(j.processingMode=j.processingMode||w.processingMode,"@base"in $){let oe=$["@base"];if(!(oe===null||o(oe)))if(a(oe))oe=l(j["@base"],oe);else throw new e('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:$});j["@base"]=oe,B.set("@base",!0)}if("@vocab"in $){const oe=$["@vocab"];if(oe===null)delete j["@vocab"];else if(s(oe)){if(!o(oe)&&S.processingMode(j,1))throw new e('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:$});{const q=_(j,oe,{vocab:!0,base:!0},void 0,void 0,b);o(q)||b.eventHandler&&c({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:q}},options:b}),j["@vocab"]=q}}else throw new e('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:$});B.set("@vocab",!0)}if("@language"in $){const oe=$["@language"];if(oe===null)delete j["@language"];else if(s(oe))oe.match(u)||b.eventHandler&&c({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:oe}},options:b}),j["@language"]=oe.toLowerCase();else throw new e('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:$});B.set("@language",!0)}if("@direction"in $){const oe=$["@direction"];if(w.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @direction not compatible with "+w.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:$});if(oe===null)delete j["@direction"];else{if(oe!=="ltr"&&oe!=="rtl")throw new e('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:$});j["@direction"]=oe}B.set("@direction",!0)}if("@propagate"in $){const oe=$["@propagate"];if(w.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @propagate not compatible with "+w.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:$});if(typeof oe!="boolean")throw new e("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:p});B.set("@propagate",!0)}if("@import"in $){const oe=$["@import"];if(w.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @import not compatible with "+w.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:$});if(!s(oe))throw new e("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:p});const q=await b.contextResolver.resolve({activeCtx:w,context:oe,documentLoader:b.documentLoader,base:b.base});if(q.length!==1)throw new e("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:p});const le=q[0].getProcessed(w);if(le)$=le;else{const de=q[0].document;if("@import"in de)throw new e("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:p});for(const ye in de)$.hasOwnProperty(ye)||($[ye]=de[ye]);q[0].setProcessed(w,$)}B.set("@import",!0)}B.set("@protected",$["@protected"]||!1);for(const oe in $)if(S.createTermDefinition({activeCtx:j,localCtx:$,term:oe,defined:B,options:b,overrideProtected:R}),r($[oe])&&"@context"in $[oe]){const q=$[oe]["@context"];let le=!0;if(s(q)){const de=l(b.base,q);I.has(de)?le=!1:I.add(de)}if(le)try{await S.process({activeCtx:j.clone(),localCtx:$[oe]["@context"],overrideProtected:!0,options:b,cycles:I})}catch{throw new e("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:$[oe]["@context"],term:oe})}}se.setProcessed(w,{context:j,events:D})}return j},S.createTermDefinition=({activeCtx:w,localCtx:p,term:b,defined:A,options:R,overrideProtected:I=!1})=>{if(A.has(b)){if(A.get(b))return;throw new e("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:p,term:b})}A.set(b,!1);let T;if(p.hasOwnProperty(b)&&(T=p[b]),b==="@type"&&r(T)&&(T["@container"]||"@set")==="@set"&&S.processingMode(w,1.1)){const $=["@container","@id","@protected"],W=Object.keys(T);if(W.length===0||W.some(B=>!$.includes(B)))throw new e("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:p,term:b})}else{if(S.isKeyword(b))throw new e("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:p,term:b});if(b.match(d)){R.eventHandler&&c({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:b}},options:R});return}else if(b==="")throw new e("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:p})}const D=w.mappings.get(b);w.mappings.has(b)&&w.mappings.delete(b);let U=!1;if((s(T)||T===null)&&(U=!0,T={"@id":T}),!r(T))throw new e("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:p});const J={};w.mappings.set(b,J),J.reverse=!1;const H=["@container","@id","@language","@reverse","@type"];S.processingMode(w,1.1)&&H.push("@context","@direction","@index","@nest","@prefix","@protected");for(const $ in T)if(!H.includes($))throw new e("Invalid JSON-LD syntax; a term definition must not contain "+$,"jsonld.SyntaxError",{code:"invalid term definition",context:p});const j=b.indexOf(":");if(J._termHasColon=j>0,"@reverse"in T){if("@id"in T)throw new e("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:p});if("@nest"in T)throw new e("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:p});const $=T["@reverse"];if(!s($))throw new e("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p});if($.match(d)){R.eventHandler&&c({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:$}},options:R}),D?w.mappings.set(b,D):w.mappings.delete(b);return}const W=_(w,$,{vocab:!0,base:!1},p,A,R);if(!o(W))throw new e("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p});J["@id"]=W,J.reverse=!0}else if("@id"in T){let $=T["@id"];if($&&!s($))throw new e("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p});if($===null)J["@id"]=null;else if(!S.isKeyword($)&&$.match(d)){R.eventHandler&&c({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:$}},options:R}),D?w.mappings.set(b,D):w.mappings.delete(b);return}else if($!==b){if($=_(w,$,{vocab:!0,base:!1},p,A,R),!o($)&&!S.isKeyword($))throw new e("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p});if(b.match(/(?::[^:])|\//)){const W=new Map(A).set(b,!0);if(_(w,b,{vocab:!0,base:!1},p,W,R)!==$)throw new e("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p})}J["@id"]=$,J._prefix=U&&!J._termHasColon&&$.match(/[:\/\?#\[\]@]$/)!==null}}if(!("@id"in J))if(J._termHasColon){const $=b.substr(0,j);if(p.hasOwnProperty($)&&S.createTermDefinition({activeCtx:w,localCtx:p,term:$,defined:A,options:R}),w.mappings.has($)){const W=b.substr(j+1);J["@id"]=w.mappings.get($)["@id"]+W}else J["@id"]=b}else if(b==="@type")J["@id"]=b;else{if(!("@vocab"in w))throw new e("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p,term:b});J["@id"]=w["@vocab"]+b}if((T["@protected"]===!0||A.get("@protected")===!0&&T["@protected"]!==!1)&&(w.protected[b]=!0,J.protected=!0),A.set(b,!0),"@type"in T){let $=T["@type"];if(!s($))throw new e("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:p});if($==="@json"||$==="@none"){if(S.processingMode(w,1))throw new e(`Invalid JSON-LD syntax; an @context @type value must not be "${$}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:p})}else if($!=="@id"&&$!=="@vocab"){if($=_(w,$,{vocab:!0,base:!1},p,A,R),!o($))throw new e("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:p});if($.indexOf("_:")===0)throw new e("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:p})}J["@type"]=$}if("@container"in T){const $=s(T["@container"])?[T["@container"]]:T["@container"]||[],W=["@list","@set","@index","@language"];let B=!0;const oe=$.includes("@set");if(S.processingMode(w,1.1)){if(W.push("@graph","@id","@type"),$.includes("@list")){if($.length!==1)throw new e("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:p})}else if($.includes("@graph")){if($.some(q=>q!=="@graph"&&q!=="@id"&&q!=="@index"&&q!=="@set"))throw new e("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:p})}else B&=$.length<=(oe?2:1);if($.includes("@type")&&(J["@type"]=J["@type"]||"@id",!["@id","@vocab"].includes(J["@type"])))throw new e("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:p})}else B&=!n(T["@container"]),B&=$.length<=1;if(B&=$.every(q=>W.includes(q)),B&=!(oe&&$.includes("@list")),!B)throw new e("Invalid JSON-LD syntax; @context @container value must be one of the following: "+W.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:p});if(J.reverse&&!$.every(q=>["@index","@set"].includes(q)))throw new e("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:p});J["@container"]=$}if("@index"in T){if(!("@container"in T)||!J["@container"].includes("@index"))throw new e(`Invalid JSON-LD syntax; @index without @index in @container: "${T["@index"]}" on term "${b}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:p});if(!s(T["@index"])||T["@index"].indexOf("@")===0)throw new e(`Invalid JSON-LD syntax; @index must expand to an IRI: "${T["@index"]}" on term "${b}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:p});J["@index"]=T["@index"]}if("@context"in T&&(J["@context"]=T["@context"]),"@language"in T&&!("@type"in T)){let $=T["@language"];if($!==null&&!s($))throw new e("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:p});$!==null&&($=$.toLowerCase()),J["@language"]=$}if("@prefix"in T){if(b.match(/:|\//))throw new e("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:p});if(S.isKeyword(J["@id"]))throw new e("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:p});if(typeof T["@prefix"]=="boolean")J._prefix=T["@prefix"]===!0;else throw new e("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:p})}if("@direction"in T){const $=T["@direction"];if($!==null&&$!=="ltr"&&$!=="rtl")throw new e('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:p});J["@direction"]=$}if("@nest"in T){const $=T["@nest"];if(!s($)||$!=="@nest"&&$.indexOf("@")===0)throw new e("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:p});J["@nest"]=$}// disallow aliasing @context and @preserve
const se=J["@id"];if(se==="@context"||se==="@preserve")throw new e("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:p});if(D&&D.protected&&!I&&(w.protected[b]=!0,J.protected=!0,!x(D,J)))throw new e("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:p,term:b})},S.expandIri=(w,p,b,A)=>_(w,p,b,void 0,void 0,A);function _(w,p,b,A,R,I){if(p===null||!s(p)||S.isKeyword(p))return p;if(p.match(d))return null;if(A&&A.hasOwnProperty(p)&&R.get(p)!==!0&&S.createTermDefinition({activeCtx:w,localCtx:A,term:p,defined:R,options:I}),b=b||{},b.vocab){const D=w.mappings.get(p);if(D===null)return null;if(r(D)&&"@id"in D)return D["@id"]}const T=p.indexOf(":");if(T>0){const D=p.substr(0,T),U=p.substr(T+1);if(D==="_"||U.indexOf("//")===0)return p;A&&A.hasOwnProperty(D)&&S.createTermDefinition({activeCtx:w,localCtx:A,term:D,defined:R,options:I});const J=w.mappings.get(D);if(J&&J._prefix)return J["@id"]+U;if(o(p))return p}if(b.vocab&&"@vocab"in w)p=w["@vocab"]+p;else if(b.base){let D,U;"@base"in w?w["@base"]?(U=l(I.base,w["@base"]),D=l(U,p)):(U=w["@base"],D=p):(U=I.base,D=l(I.base,p)),p=D}return p}S.getInitialContext=w=>{const p=JSON.stringify({processingMode:w.processingMode}),b=m.get(p);if(b)return b;const A={processingMode:w.processingMode,mappings:new Map,inverse:null,getInverse:R,clone:D,revertToPreviousContext:U,protected:{}};return m.size===y&&m.clear(),m.set(p,A),A;function R(){const J=this;if(J.inverse)return J.inverse;const H=J.inverse={},j=J.fastCurieMap={},se={},$=(J["@language"]||"@none").toLowerCase(),W=J["@direction"],B=J.mappings,oe=[...B.keys()].sort(h);for(const q of oe){const le=B.get(q);if(le===null)continue;let de=le["@container"]||"@none";if(de=[].concat(de).sort().join(""),le["@id"]===null)continue;const ye=f(le["@id"]);for(const Ce of ye){let X=H[Ce];const G=S.isKeyword(Ce);if(X)!G&&!le._termHasColon&&se[Ce].push(q);else if(H[Ce]=X={},!G&&!le._termHasColon){se[Ce]=[q];const O={iri:Ce,terms:se[Ce]};Ce[0]in j?j[Ce[0]].push(O):j[Ce[0]]=[O]}if(X[de]||(X[de]={"@language":{},"@type":{},"@any":{}}),X=X[de],T(q,X["@any"],"@none"),le.reverse)T(q,X["@type"],"@reverse");else if(le["@type"]==="@none")T(q,X["@any"],"@none"),T(q,X["@language"],"@none"),T(q,X["@type"],"@none");else if("@type"in le)T(q,X["@type"],le["@type"]);else if("@language"in le&&"@direction"in le){const O=le["@language"],Q=le["@direction"];O&&Q?T(q,X["@language"],`${O}_${Q}`.toLowerCase()):O?T(q,X["@language"],O.toLowerCase()):Q?T(q,X["@language"],`_${Q}`):T(q,X["@language"],"@null")}else"@language"in le?T(q,X["@language"],(le["@language"]||"@null").toLowerCase()):"@direction"in le?le["@direction"]?T(q,X["@language"],`_${le["@direction"]}`):T(q,X["@language"],"@none"):W?(T(q,X["@language"],`_${W}`),T(q,X["@language"],"@none"),T(q,X["@type"],"@none")):(T(q,X["@language"],$),T(q,X["@language"],"@none"),T(q,X["@type"],"@none"))}}for(const q in j)I(j,q,1);return H}function I(J,H,j){const se=J[H],$=J[H]={};let W,B;for(const oe of se)W=oe.iri,j>=W.length?B="":B=W[j],B in $?$[B].push(oe):$[B]=[oe];for(const oe in $)oe!==""&&I($,oe,j+1)}function T(J,H,j){H.hasOwnProperty(j)||(H[j]=J)}function D(){const J={};return J.mappings=t.clone(this.mappings),J.clone=this.clone,J.inverse=null,J.getInverse=this.getInverse,J.protected=t.clone(this.protected),this.previousContext&&(J.previousContext=this.previousContext.clone()),J.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(J["@base"]=this["@base"]),"@language"in this&&(J["@language"]=this["@language"]),"@vocab"in this&&(J["@vocab"]=this["@vocab"]),J}function U(){return this.previousContext?this.previousContext.clone():this}},S.getContextValue=(w,p,b)=>{if(p===null)return b==="@context"?void 0:null;if(w.mappings.has(p)){const A=w.mappings.get(p);if(i(b))return A;if(A.hasOwnProperty(b))return A[b]}if(b==="@language"&&b in w||b==="@direction"&&b in w)return w[b];if(b!=="@context")return null},S.processingMode=(w,p)=>p.toString()>="1.1"?!w.processingMode||w.processingMode>="json-ld-"+p.toString():w.processingMode==="json-ld-1.0",S.isKeyword=w=>{if(!s(w)||w[0]!=="@")return!1;switch(w){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};function x(w,p){if(!(w&&typeof w=="object")||!(p&&typeof p=="object"))return w===p;const b=Array.isArray(w);if(b!==Array.isArray(p))return!1;if(b){if(w.length!==p.length)return!1;for(let I=0;I<w.length;++I)if(!x(w[I],p[I]))return!1;return!0}const A=Object.keys(w),R=Object.keys(p);if(A.length!==R.length)return!1;for(const I in w){let T=w[I],D=p[I];if(I==="@container"&&Array.isArray(T)&&Array.isArray(D)&&(T=T.slice().sort(),D=D.slice().sort()),!x(T,D))return!1}return!0}return yd}var bd,ny;function tI(){if(ny)return bd;ny=1;const t=br(),{isArray:e,isObject:n,isEmptyObject:r,isString:s,isUndefined:i}=Zn(),{isList:o,isValue:a,isGraph:l,isSubject:c}=As(),{expandIri:u,getContextValue:d,isKeyword:f,process:h,processingMode:m}=Oi(),{isAbsolute:y}=ai(),{REGEX_BCP47:S,REGEX_KEYWORD:_,addValue:x,asArray:w,getValues:p,validateTypeValue:b}=hr(),{handleEvent:A}=za(),R={};bd=R,R.expand=async({activeCtx:H,activeProperty:j=null,element:se,options:$={},insideList:W=!1,insideIndex:B=!1,typeScopedContext:oe=null})=>{if(se==null)return null;if(j==="@default"&&($=Object.assign({},$,{isFrame:!1})),!e(se)&&!n(se))return!W&&(j===null||u(H,j,{vocab:!0},$)==="@graph")?($.eventHandler&&A({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:se}},options:$}),null):D({activeCtx:H,activeProperty:j,value:se,options:$});if(e(se)){let O=[];const Q=d(H,j,"@container")||[];W=W||Q.includes("@list");for(let ie=0;ie<se.length;++ie){let ne=await R.expand({activeCtx:H,activeProperty:j,element:se[ie],options:$,insideIndex:B,typeScopedContext:oe});W&&e(ne)&&(ne={"@list":ne}),ne!==null&&(e(ne)?O=O.concat(ne):O.push(ne))}return O}const q=u(H,j,{vocab:!0},$),le=d(H,j,"@context");oe=oe||(H.previousContext?H:null);let de=Object.keys(se).sort(),ye=!B;if(ye&&oe&&de.length<=2&&!de.includes("@context"))for(const O of de){const Q=u(oe,O,{vocab:!0},$);if(Q==="@value"){ye=!1,H=oe;break}if(Q==="@id"&&de.length===1){ye=!1;break}}ye&&(H=H.revertToPreviousContext()),i(le)||(H=await h({activeCtx:H,localCtx:le,propagate:!0,overrideProtected:!0,options:$})),"@context"in se&&(H=await h({activeCtx:H,localCtx:se["@context"],options:$})),oe=H;let Ce=null;for(const O of de)if(u(H,O,{vocab:!0},$)==="@type"){Ce=Ce||O;const ie=se[O],ne=Array.isArray(ie)?ie.length>1?ie.slice().sort():ie:[ie];for(const Ie of ne){const P=d(oe,Ie,"@context");i(P)||(H=await h({activeCtx:H,localCtx:P,options:$,propagate:!1}))}}let X={};await T({activeCtx:H,activeProperty:j,expandedActiveProperty:q,element:se,expandedParent:X,options:$,insideList:W,typeKey:Ce,typeScopedContext:oe}),de=Object.keys(X);let G=de.length;if("@value"in X){if("@type"in X&&("@language"in X||"@direction"in X))throw new t('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:X});let O=G-1;if("@type"in X&&(O-=1),"@index"in X&&(O-=1),"@language"in X&&(O-=1),"@direction"in X&&(O-=1),O!==0)throw new t('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:X});const Q=X["@value"]===null?[]:w(X["@value"]),ie=p(X,"@type");if(!(m(H,1.1)&&ie.includes("@json")&&ie.length===1))if(Q.length===0)$.eventHandler&&A({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:X}},options:$}),X=null;else{if(!Q.every(ne=>s(ne)||r(ne))&&"@language"in X)throw new t("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:X});if(!ie.every(ne=>y(ne)&&!(s(ne)&&ne.indexOf("_:")===0)||r(ne)))throw new t('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:X})}}else if("@type"in X&&!e(X["@type"]))X["@type"]=[X["@type"]];else if("@set"in X||"@list"in X){if(G>1&&!(G===2&&"@index"in X))throw new t('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:X});"@set"in X&&(X=X["@set"],de=Object.keys(X),G=de.length)}else G===1&&"@language"in X&&($.eventHandler&&A({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:X}},options:$}),X=null);return n(X)&&!$.keepFreeFloatingNodes&&!W&&(j===null||q==="@graph"||(d(H,j,"@container")||[]).includes("@graph"))&&(X=I({value:X,count:G,options:$})),X};function I({value:H,count:j,options:se}){if(j===0||"@value"in H||"@list"in H||j===1&&"@id"in H){if(se.eventHandler){let $,W;j===0?($="empty object",W="Dropping empty object."):"@value"in H?($="object with only @value",W="Dropping object with only @value."):"@list"in H?($="object with only @list",W="Dropping object with only @list."):j===1&&"@id"in H&&($="object with only @id",W="Dropping object with only @id."),A({event:{type:["JsonLdEvent"],code:$,level:"warning",message:W,details:{value:H}},options:se})}return null}return H}async function T({activeCtx:H,activeProperty:j,expandedActiveProperty:se,element:$,expandedParent:W,options:B={},insideList:oe,typeKey:q,typeScopedContext:le}){const de=Object.keys($).sort(),ye=[];let Ce;const X=$[q]&&u(H,e($[q])?$[q][0]:$[q],{vocab:!0},{...B,typeExpansion:!0})==="@json";for(const G of de){let O=$[G],Q;if(G==="@context")continue;const ie=u(H,G,{vocab:!0},B);if(ie===null||!(y(ie)||f(ie))){B.eventHandler&&A({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:G,expandedProperty:ie}},options:B});continue}if(f(ie)){if(se==="@reverse")throw new t("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:O});if(ie in W&&ie!=="@included"&&ie!=="@type")throw new t("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:ie})}if(ie==="@id"){if(!s(O)){if(!B.isFrame)throw new t('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:O});if(n(O)){if(!r(O))throw new t('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:O})}else if(e(O)){if(!O.every(k=>s(k)))throw new t('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:O})}else throw new t('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:O})}x(W,"@id",w(O).map(k=>{if(s(k)){const V=u(H,k,{base:!0},B);return B.eventHandler&&(V===null?A(k===null?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:k}},options:B}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:k}},options:B}):y(V)||A({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:k,expandedId:V}},options:B})),V}return k}),{propertyIsArray:B.isFrame});continue}if(ie==="@type"){n(O)&&(O=Object.fromEntries(Object.entries(O).map(([k,V])=>[u(le,k,{vocab:!0}),w(V).map(pe=>u(le,pe,{base:!0,vocab:!0},{...B,typeExpansion:!0}))]))),b(O,B.isFrame),x(W,"@type",w(O).map(k=>{if(s(k)){const V=u(le,k,{base:!0,vocab:!0},{...B,typeExpansion:!0});return V!=="@json"&&!y(V)&&B.eventHandler&&A({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:k}},options:B}),V}return k}),{propertyIsArray:!!B.isFrame});continue}if(ie==="@included"&&m(H,1.1)){const k=w(await R.expand({activeCtx:H,activeProperty:j,element:O,options:B}));if(!k.every(V=>c(V)))throw new t("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:O});x(W,"@included",k,{propertyIsArray:!0});continue}if(ie==="@graph"&&!(n(O)||e(O)))throw new t('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:O});if(ie==="@value"){Ce=O,X&&m(H,1.1)?W["@value"]=O:x(W,"@value",O,{propertyIsArray:B.isFrame});continue}if(ie==="@language"){if(O===null)continue;if(!s(O)&&!B.isFrame)throw new t('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:O});O=w(O).map(k=>s(k)?k.toLowerCase():k);for(const k of O)s(k)&&!k.match(S)&&B.eventHandler&&A({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:k}},options:B});x(W,"@language",O,{propertyIsArray:B.isFrame});continue}if(ie==="@direction"){if(!s(O)&&!B.isFrame)throw new t('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:O});O=w(O);for(const k of O)if(s(k)&&k!=="ltr"&&k!=="rtl")throw new t('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:O});x(W,"@direction",O,{propertyIsArray:B.isFrame});continue}if(ie==="@index"){if(!s(O))throw new t('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:O});x(W,"@index",O);continue}if(ie==="@reverse"){if(!n(O))throw new t('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:O});if(Q=await R.expand({activeCtx:H,activeProperty:"@reverse",element:O,options:B}),"@reverse"in Q)for(const V in Q["@reverse"])x(W,V,Q["@reverse"][V],{propertyIsArray:!0});let k=W["@reverse"]||null;for(const V in Q){if(V==="@reverse")continue;k===null&&(k=W["@reverse"]={}),x(k,V,[],{propertyIsArray:!0});const pe=Q[V];for(let be=0;be<pe.length;++be){const ge=pe[be];if(a(ge)||o(ge))throw new t('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Q});x(k,V,ge,{propertyIsArray:!0})}}continue}if(ie==="@nest"){ye.push(G);continue}let ne=H;const Ie=d(H,G,"@context");i(Ie)||(ne=await h({activeCtx:H,localCtx:Ie,propagate:!0,overrideProtected:!0,options:B}));const P=d(H,G,"@container")||[];if(P.includes("@language")&&n(O)){const k=d(ne,G,"@direction");Q=U(ne,O,k,B)}else if(P.includes("@index")&&n(O)){const k=P.includes("@graph"),V=d(ne,G,"@index")||"@index",pe=V!=="@index"&&u(H,V,{vocab:!0},B);Q=await J({activeCtx:ne,options:B,activeProperty:G,value:O,asGraph:k,indexKey:V,propertyIndex:pe})}else if(P.includes("@id")&&n(O)){const k=P.includes("@graph");Q=await J({activeCtx:ne,options:B,activeProperty:G,value:O,asGraph:k,indexKey:"@id"})}else if(P.includes("@type")&&n(O))Q=await J({activeCtx:ne.revertToPreviousContext(),options:B,activeProperty:G,value:O,asGraph:!1,indexKey:"@type"});else{const k=ie==="@list";if(k||ie==="@set"){let V=j;k&&se==="@graph"&&(V=null),Q=await R.expand({activeCtx:ne,activeProperty:V,element:O,options:B,insideList:k})}else d(H,G,"@type")==="@json"?Q={"@type":"@json","@value":O}:Q=await R.expand({activeCtx:ne,activeProperty:G,element:O,options:B,insideList:!1})}if(!(Q===null&&ie!=="@value")){if(ie!=="@list"&&!o(Q)&&P.includes("@list")&&(Q={"@list":w(Q)}),P.includes("@graph")&&!P.some(k=>k==="@id"||k==="@index")){if(Q=w(Q),B.isFrame||(Q=Q.filter(k=>{const V=Object.keys(k).length;return I({value:k,count:V,options:B})!==null})),Q.length===0)continue;Q=Q.map(k=>({"@graph":w(k)}))}if(ne.mappings.has(G)&&ne.mappings.get(G).reverse){const k=W["@reverse"]=W["@reverse"]||{};Q=w(Q);for(let V=0;V<Q.length;++V){const pe=Q[V];if(a(pe)||o(pe))throw new t('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Q});x(k,ie,pe,{propertyIsArray:!0})}continue}x(W,ie,Q,{propertyIsArray:!0})}}if("@value"in W&&!(W["@type"]==="@json"&&m(H,1.1))){if((n(Ce)||e(Ce))&&!B.isFrame)throw new t('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:Ce})}for(const G of ye){const O=e($[G])?$[G]:[$[G]];for(const Q of O){if(!n(Q)||Object.keys(Q).some(ie=>u(H,ie,{vocab:!0},B)==="@value"))throw new t("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:Q});await T({activeCtx:H,activeProperty:j,expandedActiveProperty:se,element:Q,expandedParent:W,options:B,insideList:oe,typeScopedContext:le,typeKey:q})}}}function D({activeCtx:H,activeProperty:j,value:se,options:$}){if(se==null)return null;const W=u(H,j,{vocab:!0},$);if(W==="@id")return u(H,se,{base:!0},$);if(W==="@type")return u(H,se,{vocab:!0,base:!0},{...$,typeExpansion:!0});const B=d(H,j,"@type");if((B==="@id"||W==="@graph")&&s(se)){const q=u(H,se,{base:!0},$);return q===null&&se.match(_)&&$.eventHandler&&A({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:j}},options:$}),{"@id":q}}if(B==="@vocab"&&s(se))return{"@id":u(H,se,{vocab:!0,base:!0},$)};if(f(W))return se;const oe={};if(B&&!["@id","@vocab","@none"].includes(B))oe["@type"]=B;else if(s(se)){const q=d(H,j,"@language");q!==null&&(oe["@language"]=q);const le=d(H,j,"@direction");le!==null&&(oe["@direction"]=le)}return["boolean","number","string"].includes(typeof se)||(se=se.toString()),oe["@value"]=se,oe}function U(H,j,se,$){const W=[],B=Object.keys(j).sort();for(const oe of B){const q=u(H,oe,{vocab:!0},$);let le=j[oe];e(le)||(le=[le]);for(const de of le){if(de===null)continue;if(!s(de))throw new t("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:j});const ye={"@value":de};q!=="@none"&&(oe.match(S)||$.eventHandler&&A({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:oe}},options:$}),ye["@language"]=oe.toLowerCase()),se&&(ye["@direction"]=se),W.push(ye)}}return W}async function J({activeCtx:H,options:j,activeProperty:se,value:$,asGraph:W,indexKey:B,propertyIndex:oe}){const q=[],le=Object.keys($).sort(),de=B==="@type";for(let ye of le){if(de){const G=d(H,ye,"@context");i(G)||(H=await h({activeCtx:H,localCtx:G,propagate:!1,options:j}))}let Ce=$[ye];e(Ce)||(Ce=[Ce]),Ce=await R.expand({activeCtx:H,activeProperty:se,element:Ce,options:j,insideList:!1,insideIndex:!0});let X;oe?ye==="@none"?X="@none":X=D({activeCtx:H,activeProperty:B,value:ye,options:j}):X=u(H,ye,{vocab:!0},j),B==="@id"?ye=u(H,ye,{base:!0},j):de&&(ye=X);for(let G of Ce){if(W&&!l(G)&&(G={"@graph":[G]}),B==="@type")X==="@none"||(G["@type"]?G["@type"]=[ye].concat(G["@type"]):G["@type"]=[ye]);else{if(a(G)&&!["@language","@type","@index"].includes(B))throw new t(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${B}".`,"jsonld.SyntaxError",{code:"invalid value object",value:G});oe?X!=="@none"&&x(G,oe,X,{propertyIsArray:!0,prependValue:!0}):X!=="@none"&&!(B in G)&&(G[B]=ye)}q.push(G)}}return q}return bd}var vd,ry;function Vc(){if(ry)return vd;ry=1;const{isKeyword:t}=Oi(),e=As(),n=Zn(),r=hr(),s=br(),i={};return vd=i,i.createMergedNodeMap=(o,a)=>{a=a||{};const l=a.issuer||new r.IdentifierIssuer("_:b"),c={"@default":{}};return i.createNodeMap(o,c,"@default",l),i.mergeNodeMaps(c)},i.createNodeMap=(o,a,l,c,u,d)=>{if(n.isArray(o)){for(const y of o)i.createNodeMap(y,a,l,c,void 0,d);return}if(!n.isObject(o)){d&&d.push(o);return}if(e.isValue(o)){if("@type"in o){let y=o["@type"];y.indexOf("_:")===0&&(o["@type"]=y=c.getId(y))}d&&d.push(o);return}else if(d&&e.isList(o)){const y=[];i.createNodeMap(o["@list"],a,l,c,u,y),d.push({"@list":y});return}if("@type"in o){const y=o["@type"];for(const S of y)S.indexOf("_:")===0&&c.getId(S)}n.isUndefined(u)&&(u=e.isBlankNode(o)?c.getId(o["@id"]):o["@id"]),d&&d.push({"@id":u});const f=a[l],h=f[u]=f[u]||{};h["@id"]=u;const m=Object.keys(o).sort();for(let y of m){if(y==="@id")continue;if(y==="@reverse"){const _={"@id":u},x=o["@reverse"];for(const w in x){const p=x[w];for(const b of p){let A=b["@id"];e.isBlankNode(b)&&(A=c.getId(A)),i.createNodeMap(b,a,l,c,A),r.addValue(f[A],w,_,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if(y==="@graph"){u in a||(a[u]={}),i.createNodeMap(o[y],a,u,c);continue}if(y==="@included"){i.createNodeMap(o[y],a,l,c);continue}if(y!=="@type"&&t(y)){if(y==="@index"&&y in h&&(o[y]!==h[y]||o[y]["@id"]!==h[y]["@id"]))throw new s("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:h});h[y]=o[y];continue}const S=o[y];if(y.indexOf("_:")===0&&(y=c.getId(y)),S.length===0){r.addValue(h,y,[],{propertyIsArray:!0});continue}for(let _ of S)if(y==="@type"&&(_=_.indexOf("_:")===0?c.getId(_):_),e.isSubject(_)||e.isSubjectReference(_)){if("@id"in _&&!_["@id"])continue;const x=e.isBlankNode(_)?c.getId(_["@id"]):_["@id"];r.addValue(h,y,{"@id":x},{propertyIsArray:!0,allowDuplicate:!1}),i.createNodeMap(_,a,l,c,x)}else if(e.isValue(_))r.addValue(h,y,_,{propertyIsArray:!0,allowDuplicate:!1});else if(e.isList(_)){const x=[];i.createNodeMap(_["@list"],a,l,c,u,x),_={"@list":x},r.addValue(h,y,_,{propertyIsArray:!0,allowDuplicate:!1})}else i.createNodeMap(_,a,l,c,u),r.addValue(h,y,_,{propertyIsArray:!0,allowDuplicate:!1})}},i.mergeNodeMapGraphs=o=>{const a={};for(const l of Object.keys(o).sort())for(const c of Object.keys(o[l]).sort()){const u=o[l][c];c in a||(a[c]={"@id":c});const d=a[c];for(const f of Object.keys(u).sort())if(t(f)&&f!=="@type")d[f]=r.clone(u[f]);else for(const h of u[f])r.addValue(d,f,r.clone(h),{propertyIsArray:!0,allowDuplicate:!1})}return a},i.mergeNodeMaps=o=>{const a=o["@default"],l=Object.keys(o).sort();for(const c of l){if(c==="@default")continue;const u=o[c];let d=a[c];d?"@graph"in d||(d["@graph"]=[]):a[c]=d={"@id":c,"@graph":[]};const f=d["@graph"];for(const h of Object.keys(u).sort()){const m=u[h];e.isSubjectReference(m)||f.push(m)}}return a},vd}var wd,sy;function nI(){if(sy)return wd;sy=1;const{isSubjectReference:t}=As(),{createMergedNodeMap:e}=Vc(),n={};return wd=n,n.flatten=r=>{const s=e(r),i=[],o=Object.keys(s).sort();for(let a=0;a<o.length;++a){const l=s[o[a]];t(l)||i.push(l)}return i},wd}var _d,iy;function rI(){if(iy)return _d;iy=1;const t=br(),e=As(),n=Zn(),{REGEX_BCP47:r,addValue:s}=hr(),{handleEvent:i}=za(),{RDF_LIST:o,RDF_FIRST:a,RDF_REST:l,RDF_NIL:c,RDF_TYPE:u,RDF_JSON_LITERAL:d,XSD_BOOLEAN:f,XSD_DOUBLE:h,XSD_INTEGER:m,XSD_STRING:y}=np(),S={};_d=S,S.fromRDF=async(x,w)=>{const{useRdfType:p=!1,useNativeTypes:b=!1,rdfDirection:A=null}=w,R={},I={"@default":R},T={};if(A){if(A==="compound-literal")throw new t("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:A});if(A!=="i18n-datatype")throw new t("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:A})}for(const J of x){const H=J.graph.termType==="DefaultGraph"?"@default":J.graph.value;H in I||(I[H]={}),H!=="@default"&&!(H in R)&&(R[H]={"@id":H});const j=I[H],se=J.subject.value,$=J.predicate.value,W=J.object;se in j||(j[se]={"@id":se});const B=j[se],oe=W.termType.endsWith("Node");if(oe&&!(W.value in j)&&(j[W.value]={"@id":W.value}),$===u&&!p&&oe){s(B,"@type",W.value,{propertyIsArray:!0});continue}const q=_(W,b,A,w);if(s(B,$,q,{propertyIsArray:!0}),oe)if(W.value===c){const le=j[W.value];"usages"in le||(le.usages=[]),le.usages.push({node:B,property:$,value:q})}else W.value in T?T[W.value]=!1:T[W.value]={node:B,property:$,value:q}}for(const J in I){const H=I[J];if(!(c in H))continue;const j=H[c];if(j.usages){for(let se of j.usages){let $=se.node,W=se.property,B=se.value;const oe=[],q=[];let le=Object.keys($).length;for(;W===l&&n.isObject(T[$["@id"]])&&n.isArray($[a])&&$[a].length===1&&n.isArray($[l])&&$[l].length===1&&(le===3||le===4&&n.isArray($["@type"])&&$["@type"].length===1&&$["@type"][0]===o)&&(oe.push($[a][0]),q.push($["@id"]),se=T[$["@id"]],$=se.node,W=se.property,B=se.value,le=Object.keys($).length,!!e.isBlankNode($)););delete B["@id"],B["@list"]=oe.reverse();for(const de of q)delete H[de]}delete j.usages}}const D=[],U=Object.keys(R).sort();for(const J of U){const H=R[J];if(J in I){const j=H["@graph"]=[],se=I[J],$=Object.keys(se).sort();for(const W of $){const B=se[W];e.isSubjectReference(B)||j.push(B)}}e.isSubjectReference(H)||D.push(H)}return D};function _(x,w,p,b){if(x.termType.endsWith("Node"))return{"@id":x.value};const A={"@value":x.value};if(x.language)x.language.match(r)||b.eventHandler&&i({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:x.language}},options:b}),A["@language"]=x.language;else{let R=x.datatype.value;if(R||(R=y),R===d){R="@json";try{A["@value"]=JSON.parse(A["@value"])}catch(I){throw new t("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:A["@value"],cause:I})}}if(w){if(R===f)A["@value"]==="true"?A["@value"]=!0:A["@value"]==="false"&&(A["@value"]=!1);else if(n.isNumeric(A["@value"]))if(R===m){const I=parseInt(A["@value"],10);I.toFixed(0)===A["@value"]&&(A["@value"]=I)}else R===h&&(A["@value"]=parseFloat(A["@value"]));[f,m,h,y].includes(R)||(A["@type"]=R)}else if(p==="i18n-datatype"&&R.startsWith("https://www.w3.org/ns/i18n#")){const[,I,T]=R.split(/[#_]/);I.length>0&&(A["@language"]=I,I.match(r)||b.eventHandler&&i({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:I}},options:b})),A["@direction"]=T}else R!==y&&(A["@type"]=R)}return A}return _d}var xd,oy;function sI(){return oy||(oy=1,xd=function t(e){return e===null||typeof e!="object"||e.toJSON!=null?JSON.stringify(e):Array.isArray(e)?"["+e.reduce((n,r,s)=>{const i=s===0?"":",",o=r===void 0||typeof r=="symbol"?null:r;return n+i+t(o)},"")+"]":"{"+Object.keys(e).sort().reduce((n,r,s)=>{if(e[r]===void 0||typeof e[r]=="symbol")return n;const i=n.length===0?"":",";return n+i+t(r)+":"+t(e[r])},"")+"}"}),xd}var Ed,ay;function iI(){if(ay)return Ed;ay=1;const{createNodeMap:t}=Vc(),{isKeyword:e}=Oi(),n=As(),r=sI(),s=br(),i=Zn(),o=hr(),{handleEvent:a}=za(),{RDF_FIRST:l,RDF_REST:c,RDF_NIL:u,RDF_TYPE:d,RDF_JSON_LITERAL:f,RDF_LANGSTRING:h,XSD_BOOLEAN:m,XSD_DOUBLE:y,XSD_INTEGER:S,XSD_STRING:_}=np(),{isAbsolute:x}=ai(),w={};Ed=w,w.toRDF=(R,I)=>{const T=new o.IdentifierIssuer("_:b"),D={"@default":{}};t(R,D,"@default",T);const U=[],J=Object.keys(D).sort();for(const H of J){let j;if(H==="@default")j={termType:"DefaultGraph",value:""};else if(x(H))H.startsWith("_:")?j={termType:"BlankNode"}:j={termType:"NamedNode"},j.value=H;else{I.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:H}},options:I});continue}p(U,D[H],j,T,I)}return U};function p(R,I,T,D,U){const J=Object.keys(I).sort();for(const H of J){const j=I[H],se=Object.keys(j).sort();for(let $ of se){const W=j[$];if($==="@type")$=d;else if(e($))continue;for(const B of W){const oe={termType:H.startsWith("_:")?"BlankNode":"NamedNode",value:H};if(!x(H)){U.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:H}},options:U});continue}const q={termType:$.startsWith("_:")?"BlankNode":"NamedNode",value:$};if(!x($)){U.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:$}},options:U});continue}if(q.termType==="BlankNode"&&!U.produceGeneralizedRdf){U.eventHandler&&a({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:D.getOldIds().find(de=>D.getId(de)===$)}},options:U});continue}const le=A(B,D,R,T,U.rdfDirection,U);le&&R.push({subject:oe,predicate:q,object:le,graph:T})}}}}function b(R,I,T,D,U,J){const H={termType:"NamedNode",value:l},j={termType:"NamedNode",value:c},se={termType:"NamedNode",value:u},$=R.pop(),W=$?{termType:"BlankNode",value:I.getId()}:se;let B=W;for(const oe of R){const q=A(oe,I,T,D,U,J),le={termType:"BlankNode",value:I.getId()};T.push({subject:B,predicate:H,object:q,graph:D}),T.push({subject:B,predicate:j,object:le,graph:D}),B=le}if($){const oe=A($,I,T,D,U,J);T.push({subject:B,predicate:H,object:oe,graph:D}),T.push({subject:B,predicate:j,object:se,graph:D})}return W}function A(R,I,T,D,U,J){const H={};if(n.isValue(R)){H.termType="Literal",H.value=void 0,H.datatype={termType:"NamedNode"};let j=R["@value"];const se=R["@type"]||null;if(se==="@json")H.value=r(j),H.datatype.value=f;else if(i.isBoolean(j))H.value=j.toString(),H.datatype.value=se||m;else if(i.isDouble(j)||se===y)i.isDouble(j)||(j=parseFloat(j)),H.value=j.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),H.datatype.value=se||y;else if(i.isNumber(j))H.value=j.toFixed(0),H.datatype.value=se||S;else if("@direction"in R&&U==="i18n-datatype"){const $=(R["@language"]||"").toLowerCase(),W=R["@direction"],B=`https://www.w3.org/ns/i18n#${$}_${W}`;H.datatype.value=B,H.value=j}else{if("@direction"in R&&U==="compound-literal")throw new s("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:U});if("@direction"in R&&U)throw new s("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:U});"@language"in R?("@direction"in R&&!U&&J.eventHandler&&a({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:H.value}},options:J}),H.value=j,H.datatype.value=se||h,H.language=R["@language"]):("@direction"in R&&!U&&J.eventHandler&&a({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:H.value}},options:J}),H.value=j,H.datatype.value=se||_)}}else if(n.isList(R)){const j=b(R["@list"],I,T,D,U,J);H.termType=j.termType,H.value=j.value}else{const j=i.isObject(R)?R["@id"]:R;H.termType=j.startsWith("_:")?"BlankNode":"NamedNode",H.value=j}return H.termType==="NamedNode"&&!x(H.value)?(J.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:H.value}},options:J}),null):H}return Ed}var Sd,ly;function oI(){if(ly)return Sd;ly=1;const{isKeyword:t}=Oi(),e=As(),n=Zn(),r=hr(),s=ai(),i=br(),{createNodeMap:o,mergeNodeMapGraphs:a}=Vc(),l={};Sd=l,l.frameMergedOrDefault=(p,b,A)=>{const R={options:A,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},I=new r.IdentifierIssuer("_:b");o(p,R.graphMap,"@default",I),A.merged&&(R.graphMap["@merged"]=a(R.graphMap),R.graph="@merged"),R.subjects=R.graphMap[R.graph];const T=[];l.frame(R,Object.keys(R.subjects).sort(),b,T),A.pruneBlankNodeIdentifiers&&(A.bnodesToClear=Object.keys(R.bnodeMap).filter(D=>R.bnodeMap[D].length===1));// remove @preserve from results
return A.link={},S(T,A)},l.frame=(p,b,A,R,I=null)=>{f(A),A=A[0];const T=p.options,D={embed:d(A,T,"embed"),explicit:d(A,T,"explicit"),requireAll:d(A,T,"requireAll")};p.link.hasOwnProperty(p.graph)||(p.link[p.graph]={});const U=p.link[p.graph],J=h(p,b,A,D),H=Object.keys(J).sort();for(const j of H){const se=J[j];if(I===null?p.uniqueEmbeds={[p.graph]:{}}:p.uniqueEmbeds[p.graph]=p.uniqueEmbeds[p.graph]||{},D.embed==="@link"&&j in U){_(R,I,U[j]);continue}const $={"@id":j};if(j.indexOf("_:")===0&&r.addValue(p.bnodeMap,j,$,{propertyIsArray:!0}),U[j]=$,(D.embed==="@first"||D.embed==="@last")&&p.is11)throw new i("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:A});if(!(!p.embedded&&p.uniqueEmbeds[p.graph].hasOwnProperty(j))){if(p.embedded&&(D.embed==="@never"||u(se,p.graph,p.subjectStack))){_(R,I,$);continue}if(p.embedded&&(D.embed=="@first"||D.embed=="@once")&&p.uniqueEmbeds[p.graph].hasOwnProperty(j)){_(R,I,$);continue}if(D.embed==="@last"&&j in p.uniqueEmbeds[p.graph]&&y(p,j),p.uniqueEmbeds[p.graph][j]={parent:R,property:I},p.subjectStack.push({subject:se,graph:p.graph}),j in p.graphMap){let W=!1,B=null;"@graph"in A?(B=A["@graph"][0],W=!(j==="@merged"||j==="@default"),n.isObject(B)||(B={})):(W=p.graph!=="@merged",B={}),W&&l.frame({...p,graph:j,embedded:!1},Object.keys(p.graphMap[j]).sort(),[B],$,"@graph")}"@included"in A&&l.frame({...p,embedded:!1},b,A["@included"],$,"@included");for(const W of Object.keys(se).sort()){if(t(W)){if($[W]=r.clone(se[W]),W==="@type")for(const B of se["@type"])B.indexOf("_:")===0&&r.addValue(p.bnodeMap,B,$,{propertyIsArray:!0});continue}if(!(D.explicit&&!(W in A)))for(const B of se[W]){const oe=W in A?A[W]:c(D);if(e.isList(B)){const q=A[W]&&A[W][0]&&A[W][0]["@list"]?A[W][0]["@list"]:c(D),le={"@list":[]};_($,W,le);const de=B["@list"];for(const ye of de)e.isSubjectReference(ye)?l.frame({...p,embedded:!0},[ye["@id"]],q,le,"@list"):_(le,"@list",r.clone(ye))}else e.isSubjectReference(B)?l.frame({...p,embedded:!0},[B["@id"]],oe,$,W):w(oe[0],B)&&_($,W,r.clone(B))}}for(const W of Object.keys(A).sort()){if(W==="@type"){if(!n.isObject(A[W][0])||!("@default"in A[W][0]))continue}else if(t(W))continue;const B=A[W][0]||{};if(!d(B,T,"omitDefault")&&!(W in $)){let q="@null";"@default"in B&&(q=r.clone(B["@default"])),n.isArray(q)||(q=[q]),$[W]=[{"@preserve":q}]}}for(const W of Object.keys(A["@reverse"]||{}).sort()){const B=A["@reverse"][W];for(const oe of Object.keys(p.subjects))r.getValues(p.subjects[oe],W).some(le=>le["@id"]===j)&&($["@reverse"]=$["@reverse"]||{},r.addValue($["@reverse"],W,[],{propertyIsArray:!0}),l.frame({...p,embedded:!0},[oe],B,$["@reverse"][W],I))}_(R,I,$),p.subjectStack.pop()}}},l.cleanupNull=(p,b)=>{if(n.isArray(p))return p.map(R=>l.cleanupNull(R,b)).filter(R=>R);if(p==="@null")return null;if(n.isObject(p)){if("@id"in p){const A=p["@id"];if(b.link.hasOwnProperty(A)){const R=b.link[A].indexOf(p);if(R!==-1)return b.link[A][R];b.link[A].push(p)}else b.link[A]=[p]}for(const A in p)p[A]=l.cleanupNull(p[A],b)}return p};function c(p){const b={};for(const A in p)p[A]!==void 0&&(b["@"+A]=[p[A]]);return[b]}function u(p,b,A){for(let R=A.length-1;R>=0;--R){const I=A[R];if(I.graph===b&&I.subject["@id"]===p["@id"])return!0}return!1}function d(p,b,A){const R="@"+A;let I=R in p?p[R][0]:b[A];if(A==="embed"){if(I===!0)I="@once";else if(I===!1)I="@never";else if(I!=="@always"&&I!=="@never"&&I!=="@link"&&I!=="@first"&&I!=="@last"&&I!=="@once")throw new i("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:p})}return I}function f(p){if(!n.isArray(p)||p.length!==1||!n.isObject(p[0]))throw new i("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:p});if("@id"in p[0]){for(const b of r.asArray(p[0]["@id"]))if(!(n.isObject(b)||s.isAbsolute(b))||n.isString(b)&&b.indexOf("_:")===0)throw new i("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:p})}if("@type"in p[0]){for(const b of r.asArray(p[0]["@type"]))if(!(n.isObject(b)||s.isAbsolute(b)||b==="@json")||n.isString(b)&&b.indexOf("_:")===0)throw new i("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:p})}}function h(p,b,A,R){const I={};for(const T of b){const D=p.graphMap[p.graph][T];m(p,D,A,R)&&(I[T]=D)}return I}function m(p,b,A,R){let I=!0,T=!1;for(const D in A){let U=!1;const J=r.getValues(b,D),H=r.getValues(A,D).length===0;if(D==="@id"){if(n.isEmptyObject(A["@id"][0]||{})?U=!0:A["@id"].length>=0&&(U=A["@id"].includes(J[0])),!R.requireAll)return U}else if(D==="@type"){if(I=!1,H){if(J.length>0)return!1;U=!0}else if(A["@type"].length===1&&n.isEmptyObject(A["@type"][0]))U=J.length>0;else for(const j of A["@type"])n.isObject(j)&&"@default"in j?U=!0:U=U||J.some(se=>se===j);if(!R.requireAll)return U}else{if(t(D))continue;{const j=r.getValues(A,D)[0];let se=!1;if(j&&(f([j]),se="@default"in j),I=!1,J.length===0&&se)continue;if(J.length>0&&H)return!1;if(j===void 0){if(J.length>0)return!1;U=!0}else if(e.isList(j)){const $=j["@list"][0];if(e.isList(J[0])){const W=J[0]["@list"];e.isValue($)?U=W.some(B=>w($,B)):(e.isSubject($)||e.isSubjectReference($))&&(U=W.some(B=>x(p,$,B,R)))}}else e.isValue(j)?U=J.some($=>w(j,$)):e.isSubjectReference(j)?U=J.some($=>x(p,j,$,R)):n.isObject(j)?U=J.length>0:U=!1}}if(!U&&R.requireAll)return!1;T=T||U}return I||T}function y(p,b){const A=p.uniqueEmbeds[p.graph],R=A[b],I=R.parent,T=R.property,D={"@id":b};if(n.isArray(I)){for(let J=0;J<I.length;++J)if(r.compareValues(I[J],D)){I[J]=D;break}}else{const J=n.isArray(I[T]);r.removeValue(I,T,D,{propertyIsArray:J}),r.addValue(I,T,D,{propertyIsArray:J})}const U=J=>{const H=Object.keys(A);for(const j of H)j in A&&n.isObject(A[j].parent)&&A[j].parent["@id"]===J&&(delete A[j],U(j))};U(b)}/**
 * Removes the @preserve keywords from expanded result of framing.
 *
 * @param input the framed, framed output.
 * @param options the framing options used.
 *
 * @return the resulting output.
 */function S(p,b){if(n.isArray(p))return p.map(A=>S(A,b));if(n.isObject(p)){// remove @preserve
if("@preserve"in p)return p["@preserve"][0];if(e.isValue(p))return p;if(e.isList(p))return p["@list"]=S(p["@list"],b),p;if("@id"in p){const A=p["@id"];if(b.link.hasOwnProperty(A)){const R=b.link[A].indexOf(p);if(R!==-1)return b.link[A][R];b.link[A].push(p)}else b.link[A]=[p]}for(const A in p){if(A==="@id"&&b.bnodesToClear.includes(p[A])){delete p["@id"];continue}p[A]=S(p[A],b)}}return p}function _(p,b,A){n.isObject(p)?r.addValue(p,b,A,{propertyIsArray:!0}):p.push(A)}function x(p,b,A,R){if(!("@id"in A))return!1;const I=p.subjects[A["@id"]];return I&&m(p,I,b,R)}function w(p,b){const A=b["@value"],R=b["@type"],I=b["@language"],T=p["@value"]?n.isArray(p["@value"])?p["@value"]:[p["@value"]]:[],D=p["@type"]?n.isArray(p["@type"])?p["@type"]:[p["@type"]]:[],U=p["@language"]?n.isArray(p["@language"])?p["@language"]:[p["@language"]]:[];return T.length===0&&D.length===0&&U.length===0?!0:!(!(T.includes(A)||n.isEmptyObject(T[0]))||!(!R&&D.length===0||D.includes(R)||R&&n.isEmptyObject(D[0]))||!(!I&&U.length===0||U.includes(I)||I&&n.isEmptyObject(U[0])))}return Sd}var Ad,cy;function aI(){if(cy)return Ad;cy=1;const t=br(),{isArray:e,isObject:n,isString:r,isUndefined:s}=Zn(),{isList:i,isValue:o,isGraph:a,isSimpleGraph:l,isSubjectReference:c}=As(),{expandIri:u,getContextValue:d,isKeyword:f,process:h,processingMode:m}=Oi(),{removeBase:y,prependBase:S}=ai(),{REGEX_KEYWORD:_,addValue:x,asArray:w,compareShortestLeast:p}=hr(),b={};Ad=b,b.compact=async({activeCtx:I,activeProperty:T=null,element:D,options:U={}})=>{if(e(D)){let H=[];for(let j=0;j<D.length;++j){const se=await b.compact({activeCtx:I,activeProperty:T,element:D[j],options:U});se!==null&&H.push(se)}return U.compactArrays&&H.length===1&&(d(I,T,"@container")||[]).length===0&&(H=H[0]),H}const J=d(I,T,"@context");if(s(J)||(I=await h({activeCtx:I,localCtx:J,propagate:!0,overrideProtected:!0,options:U})),n(D)){if(U.link&&"@id"in D&&U.link.hasOwnProperty(D["@id"])){const q=U.link[D["@id"]];for(let le=0;le<q.length;++le)if(q[le].expanded===D)return q[le].compacted}if(o(D)||c(D)){const q=b.compactValue({activeCtx:I,activeProperty:T,value:D,options:U});return U.link&&c(D)&&(U.link.hasOwnProperty(D["@id"])||(U.link[D["@id"]]=[]),U.link[D["@id"]].push({expanded:D,compacted:q})),q}if(i(D)&&(d(I,T,"@container")||[]).includes("@list"))return b.compact({activeCtx:I,activeProperty:T,element:D["@list"],options:U});const H=T==="@reverse",j={},se=I;!o(D)&&!c(D)&&(I=I.revertToPreviousContext());const $=d(se,T,"@context");s($)||(I=await h({activeCtx:I,localCtx:$,propagate:!0,overrideProtected:!0,options:U})),U.link&&"@id"in D&&(U.link.hasOwnProperty(D["@id"])||(U.link[D["@id"]]=[]),U.link[D["@id"]].push({expanded:D,compacted:j}));let W=D["@type"]||[];W.length>1&&(W=Array.from(W).sort());const B=I;for(const q of W){const le=b.compactIri({activeCtx:B,iri:q,relativeTo:{vocab:!0}}),de=d(se,le,"@context");s(de)||(I=await h({activeCtx:I,localCtx:de,options:U,propagate:!1}))}const oe=Object.keys(D).sort();for(const q of oe){const le=D[q];if(q==="@id"){let de=w(le).map(Ce=>b.compactIri({activeCtx:I,iri:Ce,relativeTo:{vocab:!1},base:U.base}));de.length===1&&(de=de[0]);const ye=b.compactIri({activeCtx:I,iri:"@id",relativeTo:{vocab:!0}});j[ye]=de;continue}if(q==="@type"){let de=w(le).map(O=>b.compactIri({activeCtx:se,iri:O,relativeTo:{vocab:!0}}));de.length===1&&(de=de[0]);const ye=b.compactIri({activeCtx:I,iri:"@type",relativeTo:{vocab:!0}}),G=(d(I,ye,"@container")||[]).includes("@set")&&m(I,1.1)||e(de)&&le.length===0;x(j,ye,de,{propertyIsArray:G});continue}if(q==="@reverse"){const de=await b.compact({activeCtx:I,activeProperty:"@reverse",element:le,options:U});for(const ye in de)if(I.mappings.has(ye)&&I.mappings.get(ye).reverse){const Ce=de[ye],G=(d(I,ye,"@container")||[]).includes("@set")||!U.compactArrays;x(j,ye,Ce,{propertyIsArray:G}),delete de[ye]}if(Object.keys(de).length>0){const ye=b.compactIri({activeCtx:I,iri:q,relativeTo:{vocab:!0}});x(j,ye,de)}continue}if(q==="@preserve"){const de=await b.compact({activeCtx:I,activeProperty:T,element:le,options:U});e(de)&&de.length===0||x(j,q,de);continue}if(q==="@index"){if((d(I,T,"@container")||[]).includes("@index"))continue;const ye=b.compactIri({activeCtx:I,iri:q,relativeTo:{vocab:!0}});x(j,ye,le);continue}if(q!=="@graph"&&q!=="@list"&&q!=="@included"&&f(q)){const de=b.compactIri({activeCtx:I,iri:q,relativeTo:{vocab:!0}});x(j,de,le);continue}if(!e(le))throw new t("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(le.length===0){const de=b.compactIri({activeCtx:I,iri:q,value:le,relativeTo:{vocab:!0},reverse:H}),ye=I.mappings.has(de)?I.mappings.get(de)["@nest"]:null;let Ce=j;ye&&(R(I,ye,U),n(j[ye])||(j[ye]={}),Ce=j[ye]),x(Ce,de,le,{propertyIsArray:!0})}for(const de of le){const ye=b.compactIri({activeCtx:I,iri:q,value:de,relativeTo:{vocab:!0},reverse:H}),Ce=I.mappings.has(ye)?I.mappings.get(ye)["@nest"]:null;let X=j;Ce&&(R(I,Ce,U),n(j[Ce])||(j[Ce]={}),X=j[Ce]);const G=d(I,ye,"@container")||[],O=a(de),Q=i(de);let ie;Q?ie=de["@list"]:O&&(ie=de["@graph"]);let ne=await b.compact({activeCtx:I,activeProperty:ye,element:Q||O?ie:de,options:U});if(Q)if(e(ne)||(ne=[ne]),!G.includes("@list"))ne={[b.compactIri({activeCtx:I,iri:"@list",relativeTo:{vocab:!0}})]:ne},"@index"in de&&(ne[b.compactIri({activeCtx:I,iri:"@index",relativeTo:{vocab:!0}})]=de["@index"]);else{x(X,ye,ne,{valueIsArray:!0,allowDuplicate:!0});continue}if(O)if(G.includes("@graph")&&(G.includes("@id")||G.includes("@index")&&l(de))){let Ie;X.hasOwnProperty(ye)?Ie=X[ye]:X[ye]=Ie={};const P=(G.includes("@id")?de["@id"]:de["@index"])||b.compactIri({activeCtx:I,iri:"@none",relativeTo:{vocab:!0}});x(Ie,P,ne,{propertyIsArray:!U.compactArrays||G.includes("@set")})}else G.includes("@graph")&&l(de)?(e(ne)&&ne.length>1&&(ne={"@included":ne}),x(X,ye,ne,{propertyIsArray:!U.compactArrays||G.includes("@set")})):(e(ne)&&ne.length===1&&U.compactArrays&&(ne=ne[0]),ne={[b.compactIri({activeCtx:I,iri:"@graph",relativeTo:{vocab:!0}})]:ne},"@id"in de&&(ne[b.compactIri({activeCtx:I,iri:"@id",relativeTo:{vocab:!0}})]=de["@id"]),"@index"in de&&(ne[b.compactIri({activeCtx:I,iri:"@index",relativeTo:{vocab:!0}})]=de["@index"]),x(X,ye,ne,{propertyIsArray:!U.compactArrays||G.includes("@set")}));else if(G.includes("@language")||G.includes("@index")||G.includes("@id")||G.includes("@type")){let Ie;X.hasOwnProperty(ye)?Ie=X[ye]:X[ye]=Ie={};let P;if(G.includes("@language"))o(ne)&&(ne=ne["@value"]),P=de["@language"];else if(G.includes("@index")){const k=d(I,ye,"@index")||"@index",V=b.compactIri({activeCtx:I,iri:k,relativeTo:{vocab:!0}});if(k==="@index")P=de["@index"],delete ne[V];else{let pe;if([P,...pe]=w(ne[k]||[]),!r(P))P=null;else switch(pe.length){case 0:delete ne[k];break;case 1:ne[k]=pe[0];break;default:ne[k]=pe;break}}}else if(G.includes("@id")){const k=b.compactIri({activeCtx:I,iri:"@id",relativeTo:{vocab:!0}});P=ne[k],delete ne[k]}else if(G.includes("@type")){const k=b.compactIri({activeCtx:I,iri:"@type",relativeTo:{vocab:!0}});let V;switch([P,...V]=w(ne[k]||[]),V.length){case 0:delete ne[k];break;case 1:ne[k]=V[0];break;default:ne[k]=V;break}Object.keys(ne).length===1&&"@id"in de&&(ne=await b.compact({activeCtx:I,activeProperty:ye,element:{"@id":de["@id"]},options:U}))}P||(P=b.compactIri({activeCtx:I,iri:"@none",relativeTo:{vocab:!0}})),x(Ie,P,ne,{propertyIsArray:G.includes("@set")})}else{const Ie=!U.compactArrays||G.includes("@set")||G.includes("@list")||e(ne)&&ne.length===0||q==="@list"||q==="@graph";x(X,ye,ne,{propertyIsArray:Ie})}}}return j}return D},b.compactIri=({activeCtx:I,iri:T,value:D=null,relativeTo:U={vocab:!1},reverse:J=!1,base:H=null})=>{if(T===null)return T;I.isPropertyTermScoped&&I.previousContext&&(I=I.previousContext);const j=I.getInverse();if(f(T)&&T in j&&"@none"in j[T]&&"@type"in j[T]["@none"]&&"@none"in j[T]["@none"]["@type"])return j[T]["@none"]["@type"]["@none"];if(U.vocab&&T in j){const oe=I["@language"]||"@none",q=[];n(D)&&"@index"in D&&!("@graph"in D)&&q.push("@index","@index@set"),n(D)&&"@preserve"in D&&(D=D["@preserve"][0]),a(D)?("@index"in D&&q.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in D&&q.push("@graph@id","@graph@id@set"),q.push("@graph","@graph@set","@set"),"@index"in D||q.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in D||q.push("@graph@id","@graph@id@set")):n(D)&&!o(D)&&q.push("@id","@id@set","@type","@set@type");let le="@language",de="@null";if(J)le="@type",de="@reverse",q.push("@set");else if(i(D)){"@index"in D||q.push("@list");const Ce=D["@list"];if(Ce.length===0)le="@any",de="@none";else{let X=Ce.length===0?oe:null,G=null;for(let O=0;O<Ce.length;++O){const Q=Ce[O];let ie="@none",ne="@none";if(o(Q))if("@direction"in Q){const Ie=(Q["@language"]||"").toLowerCase(),P=Q["@direction"];ie=`${Ie}_${P}`}else"@language"in Q?ie=Q["@language"].toLowerCase():"@type"in Q?ne=Q["@type"]:ie="@null";else ne="@id";if(X===null?X=ie:ie!==X&&o(Q)&&(X="@none"),G===null?G=ne:ne!==G&&(G="@none"),X==="@none"&&G==="@none")break}X=X||"@none",G=G||"@none",G!=="@none"?(le="@type",de=G):de=X}}else{if(o(D))if("@language"in D&&!("@index"in D)){q.push("@language","@language@set"),de=D["@language"];const Ce=D["@direction"];Ce&&(de=`${de}_${Ce}`)}else"@direction"in D&&!("@index"in D)?de=`_${D["@direction"]}`:"@type"in D&&(le="@type",de=D["@type"]);else le="@type",de="@id";q.push("@set")}q.push("@none"),n(D)&&!("@index"in D)&&q.push("@index","@index@set"),o(D)&&Object.keys(D).length===1&&q.push("@language","@language@set");const ye=A(I,T,D,q,le,de);if(ye!==null)return ye}if(U.vocab&&"@vocab"in I){const oe=I["@vocab"];if(T.indexOf(oe)===0&&T!==oe){const q=T.substr(oe.length);if(!I.mappings.has(q))return q}}let se=null;const $=[];let W=I.fastCurieMap;const B=T.length-1;for(let oe=0;oe<B&&T[oe]in W;++oe)W=W[T[oe]],""in W&&$.push(W[""][0]);for(let oe=$.length-1;oe>=0;--oe){const q=$[oe],le=q.terms;for(const de of le){const ye=de+":"+T.substr(q.iri.length);I.mappings.get(de)._prefix&&(!I.mappings.has(ye)||D===null&&I.mappings.get(ye)["@id"]===T)&&(se===null||p(ye,se)<0)&&(se=ye)}}if(se!==null)return se;for(const[oe,q]of I.mappings)if(q&&q._prefix&&T.startsWith(oe+":"))throw new t(`Absolute IRI "${T}" confused with prefix "${oe}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:I});if(!U.vocab)if("@base"in I)if(I["@base"]){const oe=y(S(H,I["@base"]),T);return _.test(oe)?`./${oe}`:oe}else return T;else return y(H,T);return T},b.compactValue=({activeCtx:I,activeProperty:T,value:D,options:U})=>{if(o(D)){const se=d(I,T,"@type"),$=d(I,T,"@language"),W=d(I,T,"@direction"),B=d(I,T,"@container")||[],oe="@index"in D&&!B.includes("@index");if(!oe&&se!=="@none"&&(D["@type"]===se||"@language"in D&&D["@language"]===$&&"@direction"in D&&D["@direction"]===W||"@language"in D&&D["@language"]===$||"@direction"in D&&D["@direction"]===W))return D["@value"];const q=Object.keys(D).length,le=q===1||q===2&&"@index"in D&&!oe,de="@language"in I,ye=r(D["@value"]),Ce=I.mappings.has(T)&&I.mappings.get(T)["@language"]===null;if(le&&se!=="@none"&&(!de||!ye||Ce))return D["@value"];const X={};return oe&&(X[b.compactIri({activeCtx:I,iri:"@index",relativeTo:{vocab:!0}})]=D["@index"]),"@type"in D?X[b.compactIri({activeCtx:I,iri:"@type",relativeTo:{vocab:!0}})]=b.compactIri({activeCtx:I,iri:D["@type"],relativeTo:{vocab:!0}}):"@language"in D&&(X[b.compactIri({activeCtx:I,iri:"@language",relativeTo:{vocab:!0}})]=D["@language"]),"@direction"in D&&(X[b.compactIri({activeCtx:I,iri:"@direction",relativeTo:{vocab:!0}})]=D["@direction"]),X[b.compactIri({activeCtx:I,iri:"@value",relativeTo:{vocab:!0}})]=D["@value"],X}const J=u(I,T,{vocab:!0},U),H=d(I,T,"@type"),j=b.compactIri({activeCtx:I,iri:D["@id"],relativeTo:{vocab:H==="@vocab"},base:U.base});return H==="@id"||H==="@vocab"||J==="@graph"?j:{[b.compactIri({activeCtx:I,iri:"@id",relativeTo:{vocab:!0}})]:j}};function A(I,T,D,U,J,H){H===null&&(H="@null");const j=[];if((H==="@id"||H==="@reverse")&&n(D)&&"@id"in D){H==="@reverse"&&j.push("@reverse");const $=b.compactIri({activeCtx:I,iri:D["@id"],relativeTo:{vocab:!0}});I.mappings.has($)&&I.mappings.get($)&&I.mappings.get($)["@id"]===D["@id"]?j.push.apply(j,["@vocab","@id"]):j.push.apply(j,["@id","@vocab"])}else{j.push(H);const $=j.find(W=>W.includes("_"));$&&j.push($.replace(/^[^_]+_/,"_"))}j.push("@none");const se=I.inverse[T];for(const $ of U){if(!($ in se))continue;const W=se[$][J];for(const B of j)if(B in W)return W[B]}return null}function R(I,T,D){if(u(I,T,{vocab:!0},D)!=="@nest")throw new t("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}return Ad}var Id,uy;function lI(){return uy||(uy=1,Id=t=>{class e{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(e,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(e.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:e}),e.compact=function(n,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):t.compact(n,r)},e.expand=function(n){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):t.expand(n)},e.flatten=function(n){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):t.flatten(n)},e}),Id}/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2022 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */var Cd,dy;function cI(){if(dy)return Cd;dy=1;const t=tp(),e=JA(),n=hr(),r=ZA(),s=n.IdentifierIssuer,i=br(),o=Qw(),a=eI(),{expand:l}=tI(),{flatten:c}=nI(),{fromRDF:u}=rI(),{toRDF:d}=iI(),{frameMergedOrDefault:f,cleanupNull:h}=oI(),{isArray:m,isObject:y,isString:S}=Zn(),{isSubjectReference:_}=As(),{expandIri:x,getInitialContext:w,process:p,processingMode:b}=Oi(),{compact:A,compactIri:R}=aI(),{createNodeMap:I,createMergedNodeMap:T,mergeNodeMaps:D}=Vc(),{logEventHandler:U,logWarningEventHandler:J,safeEventHandler:H,setDefaultEventHandler:j,setupEventHandler:se,strictEventHandler:$,unhandledEventHandler:W}=za(),B=function(q){const le={},ye=new o({max:100});q.compact=async function(X,G,O){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(G===null)throw new i("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(X===null)return null;O=Ce(O,{base:S(X)?X:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new s("_:b"),contextResolver:new r({sharedCache:ye})}),O.link&&(O.skipExpansion=!0),O.compactToRelative||delete O.base;let Q;O.skipExpansion?Q=X:Q=await q.expand(X,O);const ie=await q.processContext(w(O),G,O);let ne=await A({activeCtx:ie,element:Q,options:O});O.compactArrays&&!O.graph&&m(ne)?ne.length===1?ne=ne[0]:ne.length===0&&(ne={}):O.graph&&y(ne)&&(ne=[ne]),y(G)&&"@context"in G&&(G=G["@context"]),G=n.clone(G),m(G)||(G=[G]);const Ie=G;G=[];for(let k=0;k<Ie.length;++k)(!y(Ie[k])||Object.keys(Ie[k]).length>0)&&G.push(Ie[k]);const P=G.length>0;if(G.length===1&&(G=G[0]),m(ne)){const k=R({activeCtx:ie,iri:"@graph",relativeTo:{vocab:!0}}),V=ne;ne={},P&&(ne["@context"]=G),ne[k]=V}else if(y(ne)&&P){const k=ne;ne={"@context":G};for(const V in k)ne[V]=k[V]}return ne},q.expand=async function(X,G){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");G=Ce(G,{keepFreeFloatingNodes:!1,contextResolver:new r({sharedCache:ye})});const O={},Q=[];if("expandContext"in G){const P=n.clone(G.expandContext);y(P)&&"@context"in P?O.expandContext=P:O.expandContext={"@context":P},Q.push(O.expandContext)}let ie;if(!S(X))O.input=n.clone(X);else{const P=await q.get(X,G);ie=P.documentUrl,O.input=P.document,P.contextUrl&&(O.remoteContext={"@context":P.contextUrl},Q.push(O.remoteContext))}"base"in G||(G.base=ie||"");let ne=w(G);for(const P of Q)ne=await p({activeCtx:ne,localCtx:P,options:G});let Ie=await l({activeCtx:ne,element:O.input,options:G});return y(Ie)&&"@graph"in Ie&&Object.keys(Ie).length===1?Ie=Ie["@graph"]:Ie===null&&(Ie=[]),m(Ie)||(Ie=[Ie]),Ie},q.flatten=async function(X,G,O){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");typeof G=="function"?G=null:G=G||null,O=Ce(O,{base:S(X)?X:"",contextResolver:new r({sharedCache:ye})});const Q=await q.expand(X,O),ie=c(Q);return G===null?ie:(O.graph=!0,O.skipExpansion=!0,await q.compact(ie,G,O))},q.frame=async function(X,G,O){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(O=Ce(O,{base:S(X)?X:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new r({sharedCache:ye})}),S(G)){const be=await q.get(G,O);if(G=be.document,be.contextUrl){let ge=G["@context"];ge?m(ge)?ge.push(be.contextUrl):ge=[ge,be.contextUrl]:ge=be.contextUrl,G["@context"]=ge}}const Q=G?G["@context"]||{}:{},ie=await q.processContext(w(O),Q,O);O.hasOwnProperty("omitGraph")||(O.omitGraph=b(ie,1.1)),O.hasOwnProperty("pruneBlankNodeIdentifiers")||(O.pruneBlankNodeIdentifiers=b(ie,1.1));const ne=await q.expand(X,O),Ie={...O};Ie.isFrame=!0,Ie.keepFreeFloatingNodes=!0;const P=await q.expand(G,Ie),k=Object.keys(G).map(be=>x(ie,be,{vocab:!0}));Ie.merged=!k.includes("@graph"),Ie.is11=b(ie,1.1);const V=f(ne,P,Ie);Ie.graph=!O.omitGraph,Ie.skipExpansion=!0,Ie.link={},Ie.framing=!0;let pe=await q.compact(V,Q,Ie);return Ie.link={},pe=h(pe,Ie),pe},q.link=async function(X,G,O){const Q={};return G&&(Q["@context"]=G),Q["@embed"]="@link",q.frame(X,Q,O)},q.normalize=q.canonize=async function(X,G){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if(G=Ce(G,{base:S(X)?X:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new r({sharedCache:ye})}),"inputFormat"in G){if(G.inputFormat!=="application/n-quads"&&G.inputFormat!=="application/nquads")throw new i("Unknown canonicalization input format.","jsonld.CanonizeError");const ie=a.parse(X);return t.canonize(ie,G)}const O={...G};delete O.format,O.produceGeneralizedRdf=!1;const Q=await q.toRDF(X,O);return t.canonize(Q,G)},q.fromRDF=async function(X,G){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");G=Ce(G,{format:S(X)?"application/n-quads":void 0});const{format:O}=G;let{rdfParser:Q}=G;if(O){if(Q=Q||le[O],!Q)throw new i("Unknown input format.","jsonld.UnknownFormat",{format:O})}else Q=()=>X;const ie=await Q(X);return u(ie,G)},q.toRDF=async function(X,G){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");G=Ce(G,{base:S(X)?X:"",skipExpansion:!1,contextResolver:new r({sharedCache:ye})});let O;G.skipExpansion?O=X:O=await q.expand(X,G);const Q=d(O,G);if(G.format){if(G.format==="application/n-quads"||G.format==="application/nquads")return a.serialize(Q);throw new i("Unknown output format.","jsonld.UnknownFormat",{format:G.format})}return Q},q.createNodeMap=async function(X,G){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");G=Ce(G,{base:S(X)?X:"",contextResolver:new r({sharedCache:ye})});const O=await q.expand(X,G);return T(O,G)},q.merge=async function(X,G,O){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!m(X))throw new TypeError('Could not merge, "docs" must be an array.');typeof G=="function"?G=null:G=G||null,O=Ce(O,{contextResolver:new r({sharedCache:ye})});const Q=await Promise.all(X.map(be=>{const ge={...O};return q.expand(be,ge)}));let ie=!0;"mergeNodes"in O&&(ie=O.mergeNodes);const ne=O.issuer||new s("_:b"),Ie={"@default":{}};for(let be=0;be<Q.length;++be){const ge=n.relabelBlankNodes(Q[be],{issuer:new s("_:b"+be+"-")}),M=ie||be===0?Ie:{"@default":{}};if(I(ge,M,"@default",ne),M!==Ie)for(const F in M){const te=M[F];if(!(F in Ie)){Ie[F]=te;continue}const ue=Ie[F];for(const Re in te)Re in ue||(ue[Re]=te[Re])}}const P=D(Ie),k=[],V=Object.keys(P).sort();for(let be=0;be<V.length;++be){const ge=P[V[be]];_(ge)||k.push(ge)}return G===null?k:(O.graph=!0,O.skipExpansion=!0,await q.compact(k,G,O))},Object.defineProperty(q,"documentLoader",{get:()=>q._documentLoader,set:X=>q._documentLoader=X}),q.documentLoader=async X=>{throw new i("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:X})},q.get=async function(X,G){let O;typeof G.documentLoader=="function"?O=G.documentLoader:O=q.documentLoader;const Q=await O(X);try{if(!Q.document)throw new i("No remote document found at the given URL.","jsonld.NullRemoteDocument");S(Q.document)&&(Q.document=JSON.parse(Q.document))}catch(ie){throw new i("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:ie,remoteDoc:Q})}return Q},q.processContext=async function(X,G,O){return O=Ce(O,{base:"",contextResolver:new r({sharedCache:ye})}),G===null?w(O):(G=n.clone(G),y(G)&&"@context"in G||(G={"@context":G}),p({activeCtx:X,localCtx:G,options:O}))},q.getContextValue=Oi().getContextValue,q.documentLoaders={},q.useDocumentLoader=function(X){if(!(X in q.documentLoaders))throw new i('Unknown document loader type: "'+X+'"',"jsonld.UnknownDocumentLoader",{type:X});q.documentLoader=q.documentLoaders[X].apply(q,Array.prototype.slice.call(arguments,1))},q.registerRDFParser=function(X,G){le[X]=G},q.unregisterRDFParser=function(X){delete le[X]},q.registerRDFParser("application/n-quads",a.parse),q.registerRDFParser("application/nquads",a.parse),q.url=ai(),q.logEventHandler=U,q.logWarningEventHandler=J,q.safeEventHandler=H,q.setDefaultEventHandler=j,q.strictEventHandler=$,q.unhandledEventHandler=W,q.util=n,Object.assign(q,n),q.promises=q,q.RequestQueue=Yw(),q.JsonLdProcessor=lI()(q),e.setupGlobals(q),e.setupDocumentLoaders(q);function Ce(X,{documentLoader:G=q.documentLoader,...O}){if(X&&"compactionMap"in X)throw new i('"compactionMap" not supported.',"jsonld.OptionsError");if(X&&"expansionMap"in X)throw new i('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:G},O,X,{eventHandler:se({options:X})})}return q},oe=function(){return B(function(){return oe()})};return B(oe),Cd=oe,Cd}var uI=cI();const rp=jA(uI);var Rd={exports:{}},Td={exports:{}},fy;function dI(){return fy||(fy=1,function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(n,r){return n<<r|n>>>32-r},rotr:function(n,r){return n<<32-r|n>>>r},endian:function(n){if(n.constructor==Number)return e.rotl(n,8)&16711935|e.rotl(n,24)&4278255360;for(var r=0;r<n.length;r++)n[r]=e.endian(n[r]);return n},randomBytes:function(n){for(var r=[];n>0;n--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(n){for(var r=[],s=0,i=0;s<n.length;s++,i+=8)r[i>>>5]|=n[s]<<24-i%32;return r},wordsToBytes:function(n){for(var r=[],s=0;s<n.length*32;s+=8)r.push(n[s>>>5]>>>24-s%32&255);return r},bytesToHex:function(n){for(var r=[],s=0;s<n.length;s++)r.push((n[s]>>>4).toString(16)),r.push((n[s]&15).toString(16));return r.join("")},hexToBytes:function(n){for(var r=[],s=0;s<n.length;s+=2)r.push(parseInt(n.substr(s,2),16));return r},bytesToBase64:function(n){for(var r=[],s=0;s<n.length;s+=3)for(var i=n[s]<<16|n[s+1]<<8|n[s+2],o=0;o<4;o++)s*8+o*6<=n.length*8?r.push(t.charAt(i>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(n){n=n.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],s=0,i=0;s<n.length;i=++s%4)i!=0&&r.push((t.indexOf(n.charAt(s-1))&Math.pow(2,-2*i+8)-1)<<i*2|t.indexOf(n.charAt(s))>>>6-i*2);return r}};Td.exports=e}()),Td.exports}var kd,hy;function py(){if(hy)return kd;hy=1;var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var n=[],r=0;r<e.length;r++)n.push(e.charCodeAt(r)&255);return n},bytesToString:function(e){for(var n=[],r=0;r<e.length;r++)n.push(String.fromCharCode(e[r]));return n.join("")}}};return kd=t,kd}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var $d,my;function fI(){if(my)return $d;my=1,$d=function(n){return n!=null&&(t(n)||e(n)||!!n._isBuffer)};function t(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function e(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&t(n.slice(0,0))}return $d}var gy;function hI(){return gy||(gy=1,function(){var t=dI(),e=py().utf8,n=fI(),r=py().bin,s=function(i,o){i.constructor==String?o&&o.encoding==="binary"?i=r.stringToBytes(i):i=e.stringToBytes(i):n(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var a=t.bytesToWords(i),l=i.length*8,c=1732584193,u=-271733879,d=-1732584194,f=271733878,h=0;h<a.length;h++)a[h]=(a[h]<<8|a[h]>>>24)&16711935|(a[h]<<24|a[h]>>>8)&4278255360;a[l>>>5]|=128<<l%32,a[(l+64>>>9<<4)+14]=l;for(var m=s._ff,y=s._gg,S=s._hh,_=s._ii,h=0;h<a.length;h+=16){var x=c,w=u,p=d,b=f;c=m(c,u,d,f,a[h+0],7,-680876936),f=m(f,c,u,d,a[h+1],12,-389564586),d=m(d,f,c,u,a[h+2],17,606105819),u=m(u,d,f,c,a[h+3],22,-1044525330),c=m(c,u,d,f,a[h+4],7,-176418897),f=m(f,c,u,d,a[h+5],12,1200080426),d=m(d,f,c,u,a[h+6],17,-1473231341),u=m(u,d,f,c,a[h+7],22,-45705983),c=m(c,u,d,f,a[h+8],7,1770035416),f=m(f,c,u,d,a[h+9],12,-1958414417),d=m(d,f,c,u,a[h+10],17,-42063),u=m(u,d,f,c,a[h+11],22,-1990404162),c=m(c,u,d,f,a[h+12],7,1804603682),f=m(f,c,u,d,a[h+13],12,-40341101),d=m(d,f,c,u,a[h+14],17,-1502002290),u=m(u,d,f,c,a[h+15],22,1236535329),c=y(c,u,d,f,a[h+1],5,-165796510),f=y(f,c,u,d,a[h+6],9,-1069501632),d=y(d,f,c,u,a[h+11],14,643717713),u=y(u,d,f,c,a[h+0],20,-373897302),c=y(c,u,d,f,a[h+5],5,-701558691),f=y(f,c,u,d,a[h+10],9,38016083),d=y(d,f,c,u,a[h+15],14,-660478335),u=y(u,d,f,c,a[h+4],20,-405537848),c=y(c,u,d,f,a[h+9],5,568446438),f=y(f,c,u,d,a[h+14],9,-1019803690),d=y(d,f,c,u,a[h+3],14,-187363961),u=y(u,d,f,c,a[h+8],20,1163531501),c=y(c,u,d,f,a[h+13],5,-1444681467),f=y(f,c,u,d,a[h+2],9,-51403784),d=y(d,f,c,u,a[h+7],14,1735328473),u=y(u,d,f,c,a[h+12],20,-1926607734),c=S(c,u,d,f,a[h+5],4,-378558),f=S(f,c,u,d,a[h+8],11,-2022574463),d=S(d,f,c,u,a[h+11],16,1839030562),u=S(u,d,f,c,a[h+14],23,-35309556),c=S(c,u,d,f,a[h+1],4,-1530992060),f=S(f,c,u,d,a[h+4],11,1272893353),d=S(d,f,c,u,a[h+7],16,-155497632),u=S(u,d,f,c,a[h+10],23,-1094730640),c=S(c,u,d,f,a[h+13],4,681279174),f=S(f,c,u,d,a[h+0],11,-358537222),d=S(d,f,c,u,a[h+3],16,-722521979),u=S(u,d,f,c,a[h+6],23,76029189),c=S(c,u,d,f,a[h+9],4,-640364487),f=S(f,c,u,d,a[h+12],11,-421815835),d=S(d,f,c,u,a[h+15],16,530742520),u=S(u,d,f,c,a[h+2],23,-995338651),c=_(c,u,d,f,a[h+0],6,-198630844),f=_(f,c,u,d,a[h+7],10,1126891415),d=_(d,f,c,u,a[h+14],15,-1416354905),u=_(u,d,f,c,a[h+5],21,-57434055),c=_(c,u,d,f,a[h+12],6,1700485571),f=_(f,c,u,d,a[h+3],10,-1894986606),d=_(d,f,c,u,a[h+10],15,-1051523),u=_(u,d,f,c,a[h+1],21,-2054922799),c=_(c,u,d,f,a[h+8],6,1873313359),f=_(f,c,u,d,a[h+15],10,-30611744),d=_(d,f,c,u,a[h+6],15,-1560198380),u=_(u,d,f,c,a[h+13],21,1309151649),c=_(c,u,d,f,a[h+4],6,-145523070),f=_(f,c,u,d,a[h+11],10,-1120210379),d=_(d,f,c,u,a[h+2],15,718787259),u=_(u,d,f,c,a[h+9],21,-343485551),c=c+x>>>0,u=u+w>>>0,d=d+p>>>0,f=f+b>>>0}return t.endian([c,u,d,f])};s._ff=function(i,o,a,l,c,u,d){var f=i+(o&a|~o&l)+(c>>>0)+d;return(f<<u|f>>>32-u)+o},s._gg=function(i,o,a,l,c,u,d){var f=i+(o&l|a&~l)+(c>>>0)+d;return(f<<u|f>>>32-u)+o},s._hh=function(i,o,a,l,c,u,d){var f=i+(o^a^l)+(c>>>0)+d;return(f<<u|f>>>32-u)+o},s._ii=function(i,o,a,l,c,u,d){var f=i+(a^(o|~l))+(c>>>0)+d;return(f<<u|f>>>32-u)+o},s._blocksize=16,s._digestsize=16,Rd.exports=function(i,o){if(i==null)throw new Error("Illegal argument "+i);var a=t.wordsToBytes(s(i,o));return o&&o.asBytes?a:o&&o.asString?r.bytesToString(a):t.bytesToHex(a)}}()),Rd.exports}hI();var Dd={},jo={},yy;function pI(){if(yy)return jo;yy=1,jo.byteLength=a,jo.toByteArray=c,jo.fromByteArray=f;for(var t=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=r.length;s<i;++s)t[s]=r[s],e[r.charCodeAt(s)]=s;e[45]=62,e[95]=63;function o(h){var m=h.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=h.indexOf("=");y===-1&&(y=m);var S=y===m?0:4-y%4;return[y,S]}function a(h){var m=o(h),y=m[0],S=m[1];return(y+S)*3/4-S}function l(h,m,y){return(m+y)*3/4-y}function c(h){var m,y=o(h),S=y[0],_=y[1],x=new n(l(h,S,_)),w=0,p=_>0?S-4:S,b;for(b=0;b<p;b+=4)m=e[h.charCodeAt(b)]<<18|e[h.charCodeAt(b+1)]<<12|e[h.charCodeAt(b+2)]<<6|e[h.charCodeAt(b+3)],x[w++]=m>>16&255,x[w++]=m>>8&255,x[w++]=m&255;return _===2&&(m=e[h.charCodeAt(b)]<<2|e[h.charCodeAt(b+1)]>>4,x[w++]=m&255),_===1&&(m=e[h.charCodeAt(b)]<<10|e[h.charCodeAt(b+1)]<<4|e[h.charCodeAt(b+2)]>>2,x[w++]=m>>8&255,x[w++]=m&255),x}function u(h){return t[h>>18&63]+t[h>>12&63]+t[h>>6&63]+t[h&63]}function d(h,m,y){for(var S,_=[],x=m;x<y;x+=3)S=(h[x]<<16&16711680)+(h[x+1]<<8&65280)+(h[x+2]&255),_.push(u(S));return _.join("")}function f(h){for(var m,y=h.length,S=y%3,_=[],x=16383,w=0,p=y-S;w<p;w+=x)_.push(d(h,w,w+x>p?p:w+x));return S===1?(m=h[y-1],_.push(t[m>>2]+t[m<<4&63]+"==")):S===2&&(m=(h[y-2]<<8)+h[y-1],_.push(t[m>>10]+t[m>>4&63]+t[m<<2&63]+"=")),_.join("")}return jo}var hl={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var by;function mI(){return by||(by=1,hl.read=function(t,e,n,r,s){var i,o,a=s*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?s-1:0,f=n?-1:1,h=t[e+d];for(d+=f,i=h&(1<<-u)-1,h>>=-u,u+=a;u>0;i=i*256+t[e+d],d+=f,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=r;u>0;o=o*256+t[e+d],d+=f,u-=8);if(i===0)i=1-c;else{if(i===l)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-c}return(h?-1:1)*o*Math.pow(2,i-r)},hl.write=function(t,e,n,r,s,i){var o,a,l,c=i*8-s-1,u=(1<<c)-1,d=u>>1,f=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,m=r?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+d>=1?e+=f/l:e+=f*Math.pow(2,1-d),e*l>=2&&(o++,l/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*l-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[n+h]=a&255,h+=m,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;t[n+h]=o&255,h+=m,o/=256,c-=8);t[n+h-m]|=y*128}),hl}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var vy;function gI(){return vy||(vy=1,function(t){const e=pI(),n=mI(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=x,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const C=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(C,g),C.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(C){if(C>s)throw new RangeError('The value "'+C+'" is invalid for option "size"');const g=new Uint8Array(C);return Object.setPrototypeOf(g,a.prototype),g}function a(C,g,v){if(typeof C=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(C)}return l(C,g,v)}a.poolSize=8192;function l(C,g,v){if(typeof C=="string")return f(C,g);if(ArrayBuffer.isView(C))return m(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(Re(C,ArrayBuffer)||C&&Re(C.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Re(C,SharedArrayBuffer)||C&&Re(C.buffer,SharedArrayBuffer)))return y(C,g,v);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const L=C.valueOf&&C.valueOf();if(L!=null&&L!==C)return a.from(L,g,v);const Y=S(C);if(Y)return Y;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return a.from(C[Symbol.toPrimitive]("string"),g,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}a.from=function(C,g,v){return l(C,g,v)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function u(C,g,v){return c(C),C<=0?o(C):g!==void 0?typeof v=="string"?o(C).fill(g,v):o(C).fill(g):o(C)}a.alloc=function(C,g,v){return u(C,g,v)};function d(C){return c(C),o(C<0?0:_(C)|0)}a.allocUnsafe=function(C){return d(C)},a.allocUnsafeSlow=function(C){return d(C)};function f(C,g){if((typeof g!="string"||g==="")&&(g="utf8"),!a.isEncoding(g))throw new TypeError("Unknown encoding: "+g);const v=w(C,g)|0;let L=o(v);const Y=L.write(C,g);return Y!==v&&(L=L.slice(0,Y)),L}function h(C){const g=C.length<0?0:_(C.length)|0,v=o(g);for(let L=0;L<g;L+=1)v[L]=C[L]&255;return v}function m(C){if(Re(C,Uint8Array)){const g=new Uint8Array(C);return y(g.buffer,g.byteOffset,g.byteLength)}return h(C)}function y(C,g,v){if(g<0||C.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(C.byteLength<g+(v||0))throw new RangeError('"length" is outside of buffer bounds');let L;return g===void 0&&v===void 0?L=new Uint8Array(C):v===void 0?L=new Uint8Array(C,g):L=new Uint8Array(C,g,v),Object.setPrototypeOf(L,a.prototype),L}function S(C){if(a.isBuffer(C)){const g=_(C.length)|0,v=o(g);return v.length===0||C.copy(v,0,0,g),v}if(C.length!==void 0)return typeof C.length!="number"||we(C.length)?o(0):h(C);if(C.type==="Buffer"&&Array.isArray(C.data))return h(C.data)}function _(C){if(C>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return C|0}function x(C){return+C!=C&&(C=0),a.alloc(+C)}a.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==a.prototype},a.compare=function(g,v){if(Re(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),Re(v,Uint8Array)&&(v=a.from(v,v.offset,v.byteLength)),!a.isBuffer(g)||!a.isBuffer(v))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===v)return 0;let L=g.length,Y=v.length;for(let ce=0,ve=Math.min(L,Y);ce<ve;++ce)if(g[ce]!==v[ce]){L=g[ce],Y=v[ce];break}return L<Y?-1:Y<L?1:0},a.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(g,v){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return a.alloc(0);let L;if(v===void 0)for(v=0,L=0;L<g.length;++L)v+=g[L].length;const Y=a.allocUnsafe(v);let ce=0;for(L=0;L<g.length;++L){let ve=g[L];if(Re(ve,Uint8Array))ce+ve.length>Y.length?(a.isBuffer(ve)||(ve=a.from(ve)),ve.copy(Y,ce)):Uint8Array.prototype.set.call(Y,ve,ce);else if(a.isBuffer(ve))ve.copy(Y,ce);else throw new TypeError('"list" argument must be an Array of Buffers');ce+=ve.length}return Y};function w(C,g){if(a.isBuffer(C))return C.length;if(ArrayBuffer.isView(C)||Re(C,ArrayBuffer))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);const v=C.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&v===0)return 0;let Y=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return ge(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v*2;case"hex":return v>>>1;case"base64":return te(C).length;default:if(Y)return L?-1:ge(C).length;g=(""+g).toLowerCase(),Y=!0}}a.byteLength=w;function p(C,g,v){let L=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0,g>>>=0,v<=g))return"";for(C||(C="utf8");;)switch(C){case"hex":return oe(this,g,v);case"utf8":case"utf-8":return j(this,g,v);case"ascii":return W(this,g,v);case"latin1":case"binary":return B(this,g,v);case"base64":return H(this,g,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,g,v);default:if(L)throw new TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),L=!0}}a.prototype._isBuffer=!0;function b(C,g,v){const L=C[g];C[g]=C[v],C[v]=L}a.prototype.swap16=function(){const g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let v=0;v<g;v+=2)b(this,v,v+1);return this},a.prototype.swap32=function(){const g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let v=0;v<g;v+=4)b(this,v,v+3),b(this,v+1,v+2);return this},a.prototype.swap64=function(){const g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let v=0;v<g;v+=8)b(this,v,v+7),b(this,v+1,v+6),b(this,v+2,v+5),b(this,v+3,v+4);return this},a.prototype.toString=function(){const g=this.length;return g===0?"":arguments.length===0?j(this,0,g):p.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(g){if(!a.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:a.compare(this,g)===0},a.prototype.inspect=function(){let g="";const v=t.INSPECT_MAX_BYTES;return g=this.toString("hex",0,v).replace(/(.{2})/g,"$1 ").trim(),this.length>v&&(g+=" ... "),"<Buffer "+g+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(g,v,L,Y,ce){if(Re(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),!a.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(v===void 0&&(v=0),L===void 0&&(L=g?g.length:0),Y===void 0&&(Y=0),ce===void 0&&(ce=this.length),v<0||L>g.length||Y<0||ce>this.length)throw new RangeError("out of range index");if(Y>=ce&&v>=L)return 0;if(Y>=ce)return-1;if(v>=L)return 1;if(v>>>=0,L>>>=0,Y>>>=0,ce>>>=0,this===g)return 0;let ve=ce-Y,Ve=L-v;const Ge=Math.min(ve,Ve),Qe=this.slice(Y,ce),pt=g.slice(v,L);for(let mt=0;mt<Ge;++mt)if(Qe[mt]!==pt[mt]){ve=Qe[mt],Ve=pt[mt];break}return ve<Ve?-1:Ve<ve?1:0};function A(C,g,v,L,Y){if(C.length===0)return-1;if(typeof v=="string"?(L=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),v=+v,we(v)&&(v=Y?0:C.length-1),v<0&&(v=C.length+v),v>=C.length){if(Y)return-1;v=C.length-1}else if(v<0)if(Y)v=0;else return-1;if(typeof g=="string"&&(g=a.from(g,L)),a.isBuffer(g))return g.length===0?-1:R(C,g,v,L,Y);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?Y?Uint8Array.prototype.indexOf.call(C,g,v):Uint8Array.prototype.lastIndexOf.call(C,g,v):R(C,[g],v,L,Y);throw new TypeError("val must be string, number or Buffer")}function R(C,g,v,L,Y){let ce=1,ve=C.length,Ve=g.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(C.length<2||g.length<2)return-1;ce=2,ve/=2,Ve/=2,v/=2}function Ge(pt,mt){return ce===1?pt[mt]:pt.readUInt16BE(mt*ce)}let Qe;if(Y){let pt=-1;for(Qe=v;Qe<ve;Qe++)if(Ge(C,Qe)===Ge(g,pt===-1?0:Qe-pt)){if(pt===-1&&(pt=Qe),Qe-pt+1===Ve)return pt*ce}else pt!==-1&&(Qe-=Qe-pt),pt=-1}else for(v+Ve>ve&&(v=ve-Ve),Qe=v;Qe>=0;Qe--){let pt=!0;for(let mt=0;mt<Ve;mt++)if(Ge(C,Qe+mt)!==Ge(g,mt)){pt=!1;break}if(pt)return Qe}return-1}a.prototype.includes=function(g,v,L){return this.indexOf(g,v,L)!==-1},a.prototype.indexOf=function(g,v,L){return A(this,g,v,L,!0)},a.prototype.lastIndexOf=function(g,v,L){return A(this,g,v,L,!1)};function I(C,g,v,L){v=Number(v)||0;const Y=C.length-v;L?(L=Number(L),L>Y&&(L=Y)):L=Y;const ce=g.length;L>ce/2&&(L=ce/2);let ve;for(ve=0;ve<L;++ve){const Ve=parseInt(g.substr(ve*2,2),16);if(we(Ve))return ve;C[v+ve]=Ve}return ve}function T(C,g,v,L){return ue(ge(g,C.length-v),C,v,L)}function D(C,g,v,L){return ue(M(g),C,v,L)}function U(C,g,v,L){return ue(te(g),C,v,L)}function J(C,g,v,L){return ue(F(g,C.length-v),C,v,L)}a.prototype.write=function(g,v,L,Y){if(v===void 0)Y="utf8",L=this.length,v=0;else if(L===void 0&&typeof v=="string")Y=v,L=this.length,v=0;else if(isFinite(v))v=v>>>0,isFinite(L)?(L=L>>>0,Y===void 0&&(Y="utf8")):(Y=L,L=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ce=this.length-v;if((L===void 0||L>ce)&&(L=ce),g.length>0&&(L<0||v<0)||v>this.length)throw new RangeError("Attempt to write outside buffer bounds");Y||(Y="utf8");let ve=!1;for(;;)switch(Y){case"hex":return I(this,g,v,L);case"utf8":case"utf-8":return T(this,g,v,L);case"ascii":case"latin1":case"binary":return D(this,g,v,L);case"base64":return U(this,g,v,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,g,v,L);default:if(ve)throw new TypeError("Unknown encoding: "+Y);Y=(""+Y).toLowerCase(),ve=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function H(C,g,v){return g===0&&v===C.length?e.fromByteArray(C):e.fromByteArray(C.slice(g,v))}function j(C,g,v){v=Math.min(C.length,v);const L=[];let Y=g;for(;Y<v;){const ce=C[Y];let ve=null,Ve=ce>239?4:ce>223?3:ce>191?2:1;if(Y+Ve<=v){let Ge,Qe,pt,mt;switch(Ve){case 1:ce<128&&(ve=ce);break;case 2:Ge=C[Y+1],(Ge&192)===128&&(mt=(ce&31)<<6|Ge&63,mt>127&&(ve=mt));break;case 3:Ge=C[Y+1],Qe=C[Y+2],(Ge&192)===128&&(Qe&192)===128&&(mt=(ce&15)<<12|(Ge&63)<<6|Qe&63,mt>2047&&(mt<55296||mt>57343)&&(ve=mt));break;case 4:Ge=C[Y+1],Qe=C[Y+2],pt=C[Y+3],(Ge&192)===128&&(Qe&192)===128&&(pt&192)===128&&(mt=(ce&15)<<18|(Ge&63)<<12|(Qe&63)<<6|pt&63,mt>65535&&mt<1114112&&(ve=mt))}}ve===null?(ve=65533,Ve=1):ve>65535&&(ve-=65536,L.push(ve>>>10&1023|55296),ve=56320|ve&1023),L.push(ve),Y+=Ve}return $(L)}const se=4096;function $(C){const g=C.length;if(g<=se)return String.fromCharCode.apply(String,C);let v="",L=0;for(;L<g;)v+=String.fromCharCode.apply(String,C.slice(L,L+=se));return v}function W(C,g,v){let L="";v=Math.min(C.length,v);for(let Y=g;Y<v;++Y)L+=String.fromCharCode(C[Y]&127);return L}function B(C,g,v){let L="";v=Math.min(C.length,v);for(let Y=g;Y<v;++Y)L+=String.fromCharCode(C[Y]);return L}function oe(C,g,v){const L=C.length;(!g||g<0)&&(g=0),(!v||v<0||v>L)&&(v=L);let Y="";for(let ce=g;ce<v;++ce)Y+=ee[C[ce]];return Y}function q(C,g,v){const L=C.slice(g,v);let Y="";for(let ce=0;ce<L.length-1;ce+=2)Y+=String.fromCharCode(L[ce]+L[ce+1]*256);return Y}a.prototype.slice=function(g,v){const L=this.length;g=~~g,v=v===void 0?L:~~v,g<0?(g+=L,g<0&&(g=0)):g>L&&(g=L),v<0?(v+=L,v<0&&(v=0)):v>L&&(v=L),v<g&&(v=g);const Y=this.subarray(g,v);return Object.setPrototypeOf(Y,a.prototype),Y};function le(C,g,v){if(C%1!==0||C<0)throw new RangeError("offset is not uint");if(C+g>v)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(g,v,L){g=g>>>0,v=v>>>0,L||le(g,v,this.length);let Y=this[g],ce=1,ve=0;for(;++ve<v&&(ce*=256);)Y+=this[g+ve]*ce;return Y},a.prototype.readUintBE=a.prototype.readUIntBE=function(g,v,L){g=g>>>0,v=v>>>0,L||le(g,v,this.length);let Y=this[g+--v],ce=1;for(;v>0&&(ce*=256);)Y+=this[g+--v]*ce;return Y},a.prototype.readUint8=a.prototype.readUInt8=function(g,v){return g=g>>>0,v||le(g,1,this.length),this[g]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(g,v){return g=g>>>0,v||le(g,2,this.length),this[g]|this[g+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(g,v){return g=g>>>0,v||le(g,2,this.length),this[g]<<8|this[g+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(g,v){return g=g>>>0,v||le(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(g,v){return g=g>>>0,v||le(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},a.prototype.readBigUInt64LE=he(function(g){g=g>>>0,k(g,"offset");const v=this[g],L=this[g+7];(v===void 0||L===void 0)&&V(g,this.length-8);const Y=v+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,ce=this[++g]+this[++g]*2**8+this[++g]*2**16+L*2**24;return BigInt(Y)+(BigInt(ce)<<BigInt(32))}),a.prototype.readBigUInt64BE=he(function(g){g=g>>>0,k(g,"offset");const v=this[g],L=this[g+7];(v===void 0||L===void 0)&&V(g,this.length-8);const Y=v*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],ce=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+L;return(BigInt(Y)<<BigInt(32))+BigInt(ce)}),a.prototype.readIntLE=function(g,v,L){g=g>>>0,v=v>>>0,L||le(g,v,this.length);let Y=this[g],ce=1,ve=0;for(;++ve<v&&(ce*=256);)Y+=this[g+ve]*ce;return ce*=128,Y>=ce&&(Y-=Math.pow(2,8*v)),Y},a.prototype.readIntBE=function(g,v,L){g=g>>>0,v=v>>>0,L||le(g,v,this.length);let Y=v,ce=1,ve=this[g+--Y];for(;Y>0&&(ce*=256);)ve+=this[g+--Y]*ce;return ce*=128,ve>=ce&&(ve-=Math.pow(2,8*v)),ve},a.prototype.readInt8=function(g,v){return g=g>>>0,v||le(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},a.prototype.readInt16LE=function(g,v){g=g>>>0,v||le(g,2,this.length);const L=this[g]|this[g+1]<<8;return L&32768?L|4294901760:L},a.prototype.readInt16BE=function(g,v){g=g>>>0,v||le(g,2,this.length);const L=this[g+1]|this[g]<<8;return L&32768?L|4294901760:L},a.prototype.readInt32LE=function(g,v){return g=g>>>0,v||le(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},a.prototype.readInt32BE=function(g,v){return g=g>>>0,v||le(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},a.prototype.readBigInt64LE=he(function(g){g=g>>>0,k(g,"offset");const v=this[g],L=this[g+7];(v===void 0||L===void 0)&&V(g,this.length-8);const Y=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(L<<24);return(BigInt(Y)<<BigInt(32))+BigInt(v+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),a.prototype.readBigInt64BE=he(function(g){g=g>>>0,k(g,"offset");const v=this[g],L=this[g+7];(v===void 0||L===void 0)&&V(g,this.length-8);const Y=(v<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(Y)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+L)}),a.prototype.readFloatLE=function(g,v){return g=g>>>0,v||le(g,4,this.length),n.read(this,g,!0,23,4)},a.prototype.readFloatBE=function(g,v){return g=g>>>0,v||le(g,4,this.length),n.read(this,g,!1,23,4)},a.prototype.readDoubleLE=function(g,v){return g=g>>>0,v||le(g,8,this.length),n.read(this,g,!0,52,8)},a.prototype.readDoubleBE=function(g,v){return g=g>>>0,v||le(g,8,this.length),n.read(this,g,!1,52,8)};function de(C,g,v,L,Y,ce){if(!a.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>Y||g<ce)throw new RangeError('"value" argument is out of bounds');if(v+L>C.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(g,v,L,Y){if(g=+g,v=v>>>0,L=L>>>0,!Y){const Ve=Math.pow(2,8*L)-1;de(this,g,v,L,Ve,0)}let ce=1,ve=0;for(this[v]=g&255;++ve<L&&(ce*=256);)this[v+ve]=g/ce&255;return v+L},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(g,v,L,Y){if(g=+g,v=v>>>0,L=L>>>0,!Y){const Ve=Math.pow(2,8*L)-1;de(this,g,v,L,Ve,0)}let ce=L-1,ve=1;for(this[v+ce]=g&255;--ce>=0&&(ve*=256);)this[v+ce]=g/ve&255;return v+L},a.prototype.writeUint8=a.prototype.writeUInt8=function(g,v,L){return g=+g,v=v>>>0,L||de(this,g,v,1,255,0),this[v]=g&255,v+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(g,v,L){return g=+g,v=v>>>0,L||de(this,g,v,2,65535,0),this[v]=g&255,this[v+1]=g>>>8,v+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(g,v,L){return g=+g,v=v>>>0,L||de(this,g,v,2,65535,0),this[v]=g>>>8,this[v+1]=g&255,v+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(g,v,L){return g=+g,v=v>>>0,L||de(this,g,v,4,4294967295,0),this[v+3]=g>>>24,this[v+2]=g>>>16,this[v+1]=g>>>8,this[v]=g&255,v+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(g,v,L){return g=+g,v=v>>>0,L||de(this,g,v,4,4294967295,0),this[v]=g>>>24,this[v+1]=g>>>16,this[v+2]=g>>>8,this[v+3]=g&255,v+4};function ye(C,g,v,L,Y){P(g,L,Y,C,v,7);let ce=Number(g&BigInt(4294967295));C[v++]=ce,ce=ce>>8,C[v++]=ce,ce=ce>>8,C[v++]=ce,ce=ce>>8,C[v++]=ce;let ve=Number(g>>BigInt(32)&BigInt(4294967295));return C[v++]=ve,ve=ve>>8,C[v++]=ve,ve=ve>>8,C[v++]=ve,ve=ve>>8,C[v++]=ve,v}function Ce(C,g,v,L,Y){P(g,L,Y,C,v,7);let ce=Number(g&BigInt(4294967295));C[v+7]=ce,ce=ce>>8,C[v+6]=ce,ce=ce>>8,C[v+5]=ce,ce=ce>>8,C[v+4]=ce;let ve=Number(g>>BigInt(32)&BigInt(4294967295));return C[v+3]=ve,ve=ve>>8,C[v+2]=ve,ve=ve>>8,C[v+1]=ve,ve=ve>>8,C[v]=ve,v+8}a.prototype.writeBigUInt64LE=he(function(g,v=0){return ye(this,g,v,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=he(function(g,v=0){return Ce(this,g,v,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(g,v,L,Y){if(g=+g,v=v>>>0,!Y){const Ge=Math.pow(2,8*L-1);de(this,g,v,L,Ge-1,-Ge)}let ce=0,ve=1,Ve=0;for(this[v]=g&255;++ce<L&&(ve*=256);)g<0&&Ve===0&&this[v+ce-1]!==0&&(Ve=1),this[v+ce]=(g/ve>>0)-Ve&255;return v+L},a.prototype.writeIntBE=function(g,v,L,Y){if(g=+g,v=v>>>0,!Y){const Ge=Math.pow(2,8*L-1);de(this,g,v,L,Ge-1,-Ge)}let ce=L-1,ve=1,Ve=0;for(this[v+ce]=g&255;--ce>=0&&(ve*=256);)g<0&&Ve===0&&this[v+ce+1]!==0&&(Ve=1),this[v+ce]=(g/ve>>0)-Ve&255;return v+L},a.prototype.writeInt8=function(g,v,L){return g=+g,v=v>>>0,L||de(this,g,v,1,127,-128),g<0&&(g=255+g+1),this[v]=g&255,v+1},a.prototype.writeInt16LE=function(g,v,L){return g=+g,v=v>>>0,L||de(this,g,v,2,32767,-32768),this[v]=g&255,this[v+1]=g>>>8,v+2},a.prototype.writeInt16BE=function(g,v,L){return g=+g,v=v>>>0,L||de(this,g,v,2,32767,-32768),this[v]=g>>>8,this[v+1]=g&255,v+2},a.prototype.writeInt32LE=function(g,v,L){return g=+g,v=v>>>0,L||de(this,g,v,4,2147483647,-2147483648),this[v]=g&255,this[v+1]=g>>>8,this[v+2]=g>>>16,this[v+3]=g>>>24,v+4},a.prototype.writeInt32BE=function(g,v,L){return g=+g,v=v>>>0,L||de(this,g,v,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[v]=g>>>24,this[v+1]=g>>>16,this[v+2]=g>>>8,this[v+3]=g&255,v+4},a.prototype.writeBigInt64LE=he(function(g,v=0){return ye(this,g,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=he(function(g,v=0){return Ce(this,g,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function X(C,g,v,L,Y,ce){if(v+L>C.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function G(C,g,v,L,Y){return g=+g,v=v>>>0,Y||X(C,g,v,4),n.write(C,g,v,L,23,4),v+4}a.prototype.writeFloatLE=function(g,v,L){return G(this,g,v,!0,L)},a.prototype.writeFloatBE=function(g,v,L){return G(this,g,v,!1,L)};function O(C,g,v,L,Y){return g=+g,v=v>>>0,Y||X(C,g,v,8),n.write(C,g,v,L,52,8),v+8}a.prototype.writeDoubleLE=function(g,v,L){return O(this,g,v,!0,L)},a.prototype.writeDoubleBE=function(g,v,L){return O(this,g,v,!1,L)},a.prototype.copy=function(g,v,L,Y){if(!a.isBuffer(g))throw new TypeError("argument should be a Buffer");if(L||(L=0),!Y&&Y!==0&&(Y=this.length),v>=g.length&&(v=g.length),v||(v=0),Y>0&&Y<L&&(Y=L),Y===L||g.length===0||this.length===0)return 0;if(v<0)throw new RangeError("targetStart out of bounds");if(L<0||L>=this.length)throw new RangeError("Index out of range");if(Y<0)throw new RangeError("sourceEnd out of bounds");Y>this.length&&(Y=this.length),g.length-v<Y-L&&(Y=g.length-v+L);const ce=Y-L;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(v,L,Y):Uint8Array.prototype.set.call(g,this.subarray(L,Y),v),ce},a.prototype.fill=function(g,v,L,Y){if(typeof g=="string"){if(typeof v=="string"?(Y=v,v=0,L=this.length):typeof L=="string"&&(Y=L,L=this.length),Y!==void 0&&typeof Y!="string")throw new TypeError("encoding must be a string");if(typeof Y=="string"&&!a.isEncoding(Y))throw new TypeError("Unknown encoding: "+Y);if(g.length===1){const ve=g.charCodeAt(0);(Y==="utf8"&&ve<128||Y==="latin1")&&(g=ve)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(v<0||this.length<v||this.length<L)throw new RangeError("Out of range index");if(L<=v)return this;v=v>>>0,L=L===void 0?this.length:L>>>0,g||(g=0);let ce;if(typeof g=="number")for(ce=v;ce<L;++ce)this[ce]=g;else{const ve=a.isBuffer(g)?g:a.from(g,Y),Ve=ve.length;if(Ve===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(ce=0;ce<L-v;++ce)this[ce+v]=ve[ce%Ve]}return this};const Q={};function ie(C,g,v){Q[C]=class extends v{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${C}]`,this.stack,delete this.name}get code(){return C}set code(Y){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Y,writable:!0})}toString(){return`${this.name} [${C}]: ${this.message}`}}}ie("ERR_BUFFER_OUT_OF_BOUNDS",function(C){return C?`${C} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ie("ERR_INVALID_ARG_TYPE",function(C,g){return`The "${C}" argument must be of type number. Received type ${typeof g}`},TypeError),ie("ERR_OUT_OF_RANGE",function(C,g,v){let L=`The value of "${C}" is out of range.`,Y=v;return Number.isInteger(v)&&Math.abs(v)>2**32?Y=ne(String(v)):typeof v=="bigint"&&(Y=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(Y=ne(Y)),Y+="n"),L+=` It must be ${g}. Received ${Y}`,L},RangeError);function ne(C){let g="",v=C.length;const L=C[0]==="-"?1:0;for(;v>=L+4;v-=3)g=`_${C.slice(v-3,v)}${g}`;return`${C.slice(0,v)}${g}`}function Ie(C,g,v){k(g,"offset"),(C[g]===void 0||C[g+v]===void 0)&&V(g,C.length-(v+1))}function P(C,g,v,L,Y,ce){if(C>v||C<g){const ve=typeof g=="bigint"?"n":"";let Ve;throw g===0||g===BigInt(0)?Ve=`>= 0${ve} and < 2${ve} ** ${(ce+1)*8}${ve}`:Ve=`>= -(2${ve} ** ${(ce+1)*8-1}${ve}) and < 2 ** ${(ce+1)*8-1}${ve}`,new Q.ERR_OUT_OF_RANGE("value",Ve,C)}Ie(L,Y,ce)}function k(C,g){if(typeof C!="number")throw new Q.ERR_INVALID_ARG_TYPE(g,"number",C)}function V(C,g,v){throw Math.floor(C)!==C?(k(C,v),new Q.ERR_OUT_OF_RANGE("offset","an integer",C)):g<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${g}`,C)}const pe=/[^+/0-9A-Za-z-_]/g;function be(C){if(C=C.split("=")[0],C=C.trim().replace(pe,""),C.length<2)return"";for(;C.length%4!==0;)C=C+"=";return C}function ge(C,g){g=g||1/0;let v;const L=C.length;let Y=null;const ce=[];for(let ve=0;ve<L;++ve){if(v=C.charCodeAt(ve),v>55295&&v<57344){if(!Y){if(v>56319){(g-=3)>-1&&ce.push(239,191,189);continue}else if(ve+1===L){(g-=3)>-1&&ce.push(239,191,189);continue}Y=v;continue}if(v<56320){(g-=3)>-1&&ce.push(239,191,189),Y=v;continue}v=(Y-55296<<10|v-56320)+65536}else Y&&(g-=3)>-1&&ce.push(239,191,189);if(Y=null,v<128){if((g-=1)<0)break;ce.push(v)}else if(v<2048){if((g-=2)<0)break;ce.push(v>>6|192,v&63|128)}else if(v<65536){if((g-=3)<0)break;ce.push(v>>12|224,v>>6&63|128,v&63|128)}else if(v<1114112){if((g-=4)<0)break;ce.push(v>>18|240,v>>12&63|128,v>>6&63|128,v&63|128)}else throw new Error("Invalid code point")}return ce}function M(C){const g=[];for(let v=0;v<C.length;++v)g.push(C.charCodeAt(v)&255);return g}function F(C,g){let v,L,Y;const ce=[];for(let ve=0;ve<C.length&&!((g-=2)<0);++ve)v=C.charCodeAt(ve),L=v>>8,Y=v%256,ce.push(Y),ce.push(L);return ce}function te(C){return e.toByteArray(be(C))}function ue(C,g,v,L){let Y;for(Y=0;Y<L&&!(Y+v>=g.length||Y>=C.length);++Y)g[Y+v]=C[Y];return Y}function Re(C,g){return C instanceof g||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===g.name}function we(C){return C!==C}const ee=function(){const C="0123456789abcdef",g=new Array(256);for(let v=0;v<16;++v){const L=v*16;for(let Y=0;Y<16;++Y)g[L+Y]=C[v]+C[Y]}return g}();function he(C){return typeof BigInt>"u"?De:C}function De(){throw new Error("BigInt not supported")}}(Dd)),Dd}var yI=gI();const Uo="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Bo="http://www.w3.org/2001/XMLSchema#",pl="http://www.w3.org/2000/10/swap/",rr={xsd:{decimal:`${Bo}decimal`,boolean:`${Bo}boolean`,double:`${Bo}double`,integer:`${Bo}integer`,string:`${Bo}string`},rdf:{type:`${Uo}type`,nil:`${Uo}nil`,first:`${Uo}first`,rest:`${Uo}rest`,langString:`${Uo}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${pl}reify#forSome`,forAll:`${pl}reify#forAll`},log:{implies:`${pl}log#implies`,isImpliedBy:`${pl}log#isImpliedBy`}},{xsd:ml}=rr,bI=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,wy={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},vI=/[\x00-\x20<>\\"\{\}\|\^\`]/,wI={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},_I=/$0^/;class xI{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const n in this)!(n in wI)&&this[n]instanceof RegExp&&(this[n]=_I)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,n){let r=this._input,s=r.length;for(;;){let a,l;for(;a=this._newline.exec(r);)this.comments&&(l=this._comment.exec(a[0]))&&i("comment",l[1],"",this._line,a[0].length),r=r.substr(a[0].length,r.length),s=r.length,this._line++;if(!a&&(a=this._whitespace.exec(r))&&(r=r.substr(a[0].length,r.length)),this._endOfFile.test(r))return n&&(this.comments&&(l=this._comment.exec(r))&&i("comment",l[1],"",this._line,r.length),r=null,i("eof","","",this._line,0)),this._input=r;const c=this._line,u=r[0];let d="",f="",h="",m=null,y=0,S=!1;switch(u){case"^":if(r.length<3)break;if(r[1]==="^"){if(this._previousMarker="^^",r=r.substr(2),r[0]!=="<"){S=!0;break}}else{this._n3Mode&&(y=1,d="^");break}case"<":if(m=this._unescapedIri.exec(r))d="IRI",f=m[1];else if(m=this._iri.exec(r)){if(f=this._unescape(m[1]),f===null||vI.test(f))return o(this);d="IRI"}else r.length>1&&r[1]==="<"?(d="<<",y=2):this._n3Mode&&r.length>1&&r[1]==="="&&(y=2,this._isImpliedBy?(d="abbreviation",f="<"):(d="inverse",f=">"));break;case">":r.length>1&&r[1]===">"&&(d=">>",y=2);break;case"_":((m=this._blank.exec(r))||n&&(m=this._blank.exec(`${r} `)))&&(d="blank",h="_",f=m[1]);break;case'"':if(m=this._simpleQuotedString.exec(r))f=m[1];else if({value:f,matchLength:y}=this._parseLiteral(r),f===null)return o(this);(m!==null||y!==0)&&(d="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(m=this._simpleApostropheString.exec(r))f=m[1];else if({value:f,matchLength:y}=this._parseLiteral(r),f===null)return o(this);(m!==null||y!==0)&&(d="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(m=this._variable.exec(r))&&(d="var",f=m[0]);break;case"@":this._previousMarker==="literal"&&(m=this._langcode.exec(r))?(d="langcode",f=m[1]):(m=this._keyword.exec(r))&&(d=m[0]);break;case".":if(r.length===1?n:r[1]<"0"||r[1]>"9"){d=".",y=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(m=this._number.exec(r)||n&&(m=this._number.exec(`${r} `)))&&(d="literal",f=m[0],h=typeof m[1]=="string"?ml.double:typeof m[2]=="string"?ml.decimal:ml.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(m=this._sparqlKeyword.exec(r))?d=m[0].toUpperCase():S=!0;break;case"f":case"t":(m=this._boolean.exec(r))?(d="literal",f=m[0],h=ml.boolean):S=!0;break;case"a":(m=this._shortPredicates.exec(r))?(d="abbreviation",f="a"):S=!0;break;case"=":this._n3Mode&&r.length>1&&(d="abbreviation",r[1]!==">"?(y=1,f="="):(y=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(y=1,d=u);break;case"{":!this._lineMode&&r.length>=2&&(r[1]==="|"?(d="{|",y=2):(d=u,y=1));break;case"|":r.length>=2&&r[1]==="}"&&(d="|}",y=2);break;default:S=!0}if(S&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(m=this._prefix.exec(r))?(d="prefix",f=m[1]||""):((m=this._prefixed.exec(r))||n&&(m=this._prefixed.exec(`${r} `)))&&(d="prefixed",h=m[1]||"",f=this._unescape(m[2]))),this._previousMarker==="^^")switch(d){case"prefixed":d="type";break;case"IRI":d="typeIRI";break;default:d=""}if(!d)return n||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?o(this):this._input=r;const _=y||m[0].length,x=i(d,f,h,c,_);this.previousToken=x,this._previousMarker=d,r=r.substr(_,r.length)}function i(a,l,c,u,d){const f=r?s-r.length:s,h=f+d,m={type:a,value:l,prefix:c,line:u,start:f,end:h};return e(null,m),m}function o(a){e(a._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(e){let n=!1;const r=e.replace(bI,(s,i,o,a)=>{if(typeof i=="string")return String.fromCharCode(Number.parseInt(i,16));if(typeof o=="string"){let l=Number.parseInt(o,16);return l<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((l-=65536)>>10),56320+(l&1023))}return a in wy?wy[a]:(n=!0,"")});return n?null:r}_parseLiteral(e){if(e.length>=3){const n=e.match(/^(?:"""|"|'''|'|)/)[0],r=n.length;let s=Math.max(this._literalClosingPos,r);for(;(s=e.indexOf(n,s))>0;){let i=0;for(;e[s-i-1]==="\\";)i++;if(i%2===0){const o=e.substring(r,s),a=o.split(/\r\n|\r|\n/).length-1,l=s+r;if(r===1&&a!==0||r===3&&this._lineMode)break;return this._line+=a,{value:this._unescape(o),matchLength:l}}s++}this._literalClosingPos=e.length-r+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const n=new Error(`Unexpected "${e}" on line ${this._line}.`);return n.context={token:void 0,line:this._line,previousToken:this.previousToken},n}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,n){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof n=="function")queueMicrotask(()=>this._tokenizeToEnd(n,!0));else{const r=[];let s;if(this._tokenizeToEnd((i,o)=>i?s=i:r.push(o),!0),s)throw s;return r}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",r=>{this._input!==null&&r.length!==0&&(this._pendingBuffer&&(r=yI.Buffer.concat([this._pendingBuffer,r]),this._pendingBuffer=null),r[r.length-1]&128?this._pendingBuffer=r:(typeof this._input>"u"?this._input=this._readStartingBom(typeof r=="string"?r:r.toString()):this._input+=r,this._tokenizeToEnd(n,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(n,!0)}),e.on("error",n)}}const{rdf:EI,xsd:Xi}=rr;let Va,SI=0;const Zw={namedNode:n0,blankNode:r0,variable:i0,literal:s0,defaultGraph:RI,quad:Lf,triple:Lf,fromTerm:sa,fromQuad:o0};class Qr{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Qr?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class e0 extends Qr{get termType(){return"NamedNode"}}class da extends Qr{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let n=e.lastIndexOf('"')+1;return n<e.length&&e[n++]==="@"?e.substr(n).toLowerCase():""}get datatype(){return new e0(this.datatypeString)}get datatypeString(){const e=this.id,n=e.lastIndexOf('"')+1,r=n<e.length?e[n]:"";return r==="^"?e.substr(n+2):r!=="@"?Xi.string:EI.langString}equals(e){return e instanceof da?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class AI extends Qr{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class II extends Qr{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class CI extends Qr{constructor(){return super(""),Va||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}Va=new CI;class t0 extends Qr{constructor(e,n,r,s){super(""),this._subject=e,this._predicate=n,this._object=r,this._graph=s||Va}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function n0(t){return new e0(t)}function r0(t){return new AI(t||`n3-${SI++}`)}function s0(t,e){if(typeof e=="string")return new da(`"${t}"@${e.toLowerCase()}`);let n=e?e.value:"";return n===""&&(typeof t=="boolean"?n=Xi.boolean:typeof t=="number"&&(Number.isFinite(t)?n=Number.isInteger(t)?Xi.integer:Xi.double:(n=Xi.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),n===""||n===Xi.string?new da(`"${t}"`):new da(`"${t}"^^${n}`)}function i0(t){return new II(t)}function RI(){return Va}function Lf(t,e,n,r){return new t0(t,e,n,r)}function sa(t){if(t instanceof Qr)return t;switch(t.termType){case"NamedNode":return n0(t.value);case"BlankNode":return r0(t.value);case"Variable":return i0(t.value);case"DefaultGraph":return Va;case"Literal":return s0(t.value,t.language||t.datatype);case"Quad":return o0(t);default:throw new Error(`Unexpected termType: ${t.termType}`)}}function o0(t){if(t instanceof t0)return t;if(t.termType!=="Quad")throw new Error(`Unexpected termType: ${t.termType}`);return Lf(sa(t.subject),sa(t.predicate),sa(t.object),sa(t.graph))}let _y=0;class a0{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&l0(this,e.factory);const n=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(n),s=/trig/.test(n),i=/triple/.test(n),o=/quad/.test(n),a=this._n3Mode=/n3/.test(n),l=i||o;(this._supportsNamedGraphs=!(r||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||s||i||a),this._isImpliedBy=e.isImpliedBy,this._supportsRDFStar=n===""||/star|\*$/.test(n),l&&(this._resolveRelativeIRI=c=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new xI({lineMode:l,n3:a,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){_y=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const n=e.indexOf("#");n>=0&&(e=e.substr(0,n)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,n,r,s,i){const o=this._n3Mode;this._contextStack.push({type:e,subject:r,predicate:s,object:i,graph:n,inverse:o?this._inversePredicate:!1,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,n){const r=this._contextStack.pop();if(!r||r.type!==e)return this._error(`Unexpected ${n.type}`,n);this._subject=r.subject,this._predicate=r.predicate,this._object=r.object,this._graph=r.graph,this._n3Mode&&(this._inversePredicate=r.inverse,this._prefixes._=r.blankPrefix,this._quantified=r.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,n){let r;switch(e.type){case"IRI":case"typeIRI":const s=this._resolveIRI(e.value);if(s===null)return this._error("Invalid IRI",e);r=this._factory.namedNode(s);break;case"type":case"prefixed":const i=this._prefixes[e.prefix];if(i===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);r=this._factory.namedNode(i+e.value);break;case"blank":r=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":r=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!n&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const n=e.type;switch(n){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${n}`,e):(this._subject=null,n==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const n=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:n?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let n=null,r=null,s=this._readListItem;const i=this._subject,o=this._contextStack,a=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this._subject=n=this._factory.blankNode()),s=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),o.length!==0&&o[o.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(s=this._readPredicate,this._subject===this.RDF_NIL)return s}else if(s=this._getContextEndReader(),this._object===this.RDF_NIL)return s;r=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,s=this._readListItemDataTypeOrLang):(n=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),s=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((n=this._readEntity(e))===void 0)return}if(r===null&&(this._subject=r=this._factory.blankNode()),i===null?a.predicate===null?a.subject=r:a.object=r:this._emit(i,this.RDF_REST,r,this._graph),n!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,r,this.RDF_FIRST,n),this._subject=n,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,n,this._graph)}return s}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let n=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const r=this._readEntity(e);if(r===void 0)return;n=this._factory.literal(this._literalValue,r),e=null;break;case"langcode":n=this._factory.literal(this._literalValue,e.value),e=null;break}return{token:e,literal:n}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,n){const r=this._completeLiteral(e);if(r)return this._object=r.literal,n&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),r.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let n,r=this._graph;const s=this._subject,i=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,n=this._contextStack.length?this._readSubject:this._readInTopContext,i&&(this._inversePredicate=!1);break;case";":n=this._readPredicate;break;case",":n=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const o=this._predicate,a=this._object;this._subject=this._factory.quad(s,o,a,this.DEFAULTGRAPH),n=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,n=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(r=this._readEntity(e))!==void 0){n=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(s!==null){const o=this._predicate,a=this._object;i?this._emit(a,o,s,r):this._emit(s,o,a,r)}return n}_readBlankNodePunctuation(e){let n;switch(e.type){case";":n=this._readPredicate;break;case",":n=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),n}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const n=this._readEntity(e);return this._prefixes[this._prefix]=n.value,this._prefixCallback(this._prefix,n),this._readDeclarationPunctuation}_readBaseIRI(e){const n=e.type==="IRI"&&this._resolveIRI(e.value);return n?(this._setBase(n),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let n;switch(e.type){case"IRI":case"prefixed":if((n=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,n,this.QUANTIFIERS_GRAPH)):this._quantified[n.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const n=this._contextStack,r=n.length&&n[n.length-1];if(r&&r.type==="item"){const s=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,s,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let n,r;const s=this._factory.blankNode();if((r=this._readEntity(e))!==void 0)return this._predicate===null?(n=this._subject,this._subject=s):(n=this._object,this._object=s),this._emit(n,r,s,this._graph),this._readPath}_readBackwardPath(e){const n=this._factory.blankNode();let r,s;if((r=this._readEntity(e))!==void 0)return this._predicate===null?(s=this._subject,this._subject=n):(s=this._object,this._object=n),this._emit(n,r,s,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const n=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=n,this._readPredicate):(this._object=n,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,n,r,s){this._callback(null,this._factory.quad(e,n,r,s||this.DEFAULTGRAPH))}_error(e,n){const r=new Error(`${e} on line ${n.line}.`);r.context={token:n,line:n.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=gl}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const n=e.length;let r="",s=-1,i=-1,o=0,a="/";for(;s<n;){switch(a){case":":if(i<0&&e[++s]==="/"&&e[++s]==="/")for(;(i=s+1)<n&&e[i]!=="/";)s=i;break;case"?":case"#":s=n;break;case"/":if(e[s+1]===".")switch(a=e[++s+1],a){case"/":r+=e.substring(o,s-1),o=s+1;break;case void 0:case"?":case"#":return r+e.substring(o,s)+e.substr(s+1);case".":if(a=e[++s+1],a===void 0||a==="/"||a==="?"||a==="#"){if(r+=e.substring(o,s-2),(o=r.lastIndexOf("/"))>=i&&(r=r.substr(0,o)),a!=="/")return`${r}/${e.substr(s+1)}`;o=s+1}}}a=e[++s]}return r+e.substring(o)}parse(e,n,r){let s,i,o;if(n&&(n.onQuad||n.onPrefix||n.onComment)?(s=n.onQuad,i=n.onPrefix,o=n.onComment):(s=n,i=r),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${_y++}_`,this._prefixCallback=i||gl,this._inversePredicate=!1,this._quantified=Object.create(null),!s){const l=[];let c;if(this._callback=(u,d)=>{u?c=u:d&&l.push(d)},this._lexer.tokenize(e).every(u=>this._readCallback=this._readCallback(u)),c)throw c;return l}let a=(l,c)=>{l!==null?(this._callback(l),this._callback=gl):this._readCallback&&(this._readCallback=this._readCallback(c))};o&&(this._lexer.comments=!0,a=(l,c)=>{l!==null?(this._callback(l),this._callback=gl):this._readCallback&&(c.type==="comment"?o(c.value):this._readCallback=this._readCallback(c))}),this._callback=s,this._lexer.tokenize(e,a)}}function gl(){}function l0(t,e){t._factory=e,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=e.namedNode(rr.rdf.first),t.RDF_REST=e.namedNode(rr.rdf.rest),t.RDF_NIL=e.namedNode(rr.rdf.nil),t.N3_FORALL=e.namedNode(rr.r.forAll),t.N3_FORSOME=e.namedNode(rr.r.forSome),t.ABBREVIATIONS={a:e.namedNode(rr.rdf.type),"=":e.namedNode(rr.owl.sameAs),">":e.namedNode(rr.log.implies),"<":e.namedNode(rr.log.isImpliedBy)},t.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}l0(a0.prototype,Zw);function TI(t){return!!t&&t.termType==="DefaultGraph"}function ql(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const kI=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,$I=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,xy="./",DI="../",Od="?",Ey="#";class sp{constructor(e){this.base=e,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(e.length+1)}static supports(e){return!kI.test(e)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!sp.supports(this.base))return this._baseMatcher=/.^/;const e=/^[^:]*:\/*/.exec(this.base)[0],n=["^",ql(e)],r=[],s=[],i=/[^/?#]*([/?#])/y;let o,a=0,l=0,c=i.lastIndex=e.length;for(;!a&&!l&&(o=i.exec(this.base));)o[1]===Ey?l=i.lastIndex-1:(n.push(ql(o[0]),"(?:"),r.push(")?"),o[1]!==Od?s.push(c=i.lastIndex):(a=c=i.lastIndex,l=this.base.indexOf(Ey,a),this._pathReplacements[a]=Od));for(let u=0;u<s.length;u++)this._pathReplacements[s[u]]=DI.repeat(s.length-u-1);return this._pathReplacements[s[s.length-1]]=xy,this._baseLength=l>0?l:this.base.length,n.push(ql(this.base.substring(c,this._baseLength)),a?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...n,...r].join(""))}toRelative(e){const n=this._getBaseMatcher().exec(e);if(!n)return e;const r=n[0].length;if(r===this._baseLength&&r===e.length)return"";const s=this._pathReplacements[r];if(s){const i=e.substring(r);return s!==Od&&!$I.test(i)?e:s===xy&&/^[^?#]/.test(i)?i:s+i}return e.substring(r-1)}}const qo=Zw.defaultGraph(),{rdf:OI,xsd:zi}=rr,Sy=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,Ay=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,PI={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class zo extends Qr{equals(e){return e===this}}class LI{constructor(e,n){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(n=e,e=null),n=n||{},this._lists=n.lists,e)this._outputStream=e,this._endStream=n.end===void 0?!0:!!n.end;else{let r="";this._outputStream={write(s,i,o){r+=s,o&&o()},end:s=>{s&&s(null,r)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(n.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=qo,this._prefixIRIs=Object.create(null),n.prefixes&&this.addPrefixes(n.prefixes),n.baseIRI&&(this._baseIri=new sp(n.baseIRI)))}get _inDefaultGraph(){return qo.equals(this._graph)}_write(e,n){this._outputStream.write(e,"utf8",n)}_writeQuad(e,n,r,s,i){try{s.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(qo.equals(s)?"":`${this._encodeIriOrBlank(s)} {
`)),this._graph=s,this._subject=null),e.equals(this._subject)?n.equals(this._predicate)?this._write(`, ${this._encodeObject(r)}`,i):this._write(`;
    ${this._encodePredicate(this._predicate=n)} ${this._encodeObject(r)}`,i):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=n)} ${this._encodeObject(r)}`,i)}catch(o){i&&i(o)}}_writeQuadLine(e,n,r,s,i){delete this._prefixMatch,this._write(this.quadToString(e,n,r,s),i)}quadToString(e,n,r,s){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(n)} ${this._encodeObject(r)}${s&&s.value?` ${this._encodeIriOrBlank(s)} .
`:` .
`}`}quadsToString(e){let n="";for(const r of e)n+=this.quadToString(r.subject,r.predicate,r.object,r.graph);return n}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let n=e.value;this._baseIri&&(n=this._baseIri.toRelative(n)),Sy.test(n)&&(n=n.replace(Ay,Iy));const r=this._prefixRegex.exec(n);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:n:`<${n}>`}_encodeLiteral(e){let n=e.value;if(Sy.test(n)&&(n=n.replace(Ay,Iy)),e.language)return`"${n}"@${e.language}`;if(this._lineMode){if(e.datatype.value===zi.string)return`"${n}"`}else switch(e.datatype.value){case zi.string:return`"${n}"`;case zi.boolean:if(n==="true"||n==="false")return n;break;case zi.integer:if(/^[+-]?\d+$/.test(n))return n;break;case zi.decimal:if(/^[+-]?\d*\.\d+$/.test(n))return n;break;case zi.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(n))return n;break}return`"${n}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===OI.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:n,object:r,graph:s}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(n)} ${this._encodeObject(r)}${TI(s)?"":` ${this._encodeIriOrBlank(s)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,n,r,s,i){r===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,n):typeof s=="function"?this._writeQuad(e,n,r,qo,s):this._writeQuad(e,n,r,s||qo,i)}addQuads(e){for(let n=0;n<e.length;n++)this.addQuad(e[n])}addPrefix(e,n,r){const s={};s[e]=n,this.addPrefixes(s,r)}addPrefixes(e,n){if(!this._prefixIRIs)return n&&n();let r=!1;for(let s in e){let i=e[s];typeof i!="string"&&(i=i.value),r=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[i]=s+=":",this._write(`@prefix ${s} <${i}>.
`)}if(r){let s="",i="";for(const o in this._prefixIRIs)s+=s?`|${o}`:o,i+=(i?"|":"")+this._prefixIRIs[o];s=ql(s),this._prefixRegex=new RegExp(`^(?:${i})[^/]*$|^(${s})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(r?`
`:"",n)}blank(e,n){let r=e,s,i;switch(e===void 0?r=[]:e.termType?r=[{predicate:e,object:n}]:"length"in e||(r=[e]),i=r.length){case 0:return new zo("[]");case 1:if(s=r[0],!(s.object instanceof zo))return new zo(`[ ${this._encodePredicate(s.predicate)} ${this._encodeObject(s.object)} ]`);default:let o="[";for(let a=0;a<i;a++)s=r[a],s.predicate.equals(e)?o+=`, ${this._encodeObject(s.object)}`:(o+=`${(a?`;
  `:`
  `)+this._encodePredicate(s.predicate)} ${this._encodeObject(s.object)}`,e=s.predicate);return new zo(`${o}
]`)}}list(e){const n=e&&e.length||0,r=new Array(n);for(let s=0;s<n;s++)r[s]=this._encodeObject(e[s]);return new zo(`(${r.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let n=e&&((r,s)=>{n=null,e(r,s)});if(this._endStream)try{return this._outputStream.end(n)}catch{}n&&n()}}function Iy(t){let e=PI[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}var MI=Object.defineProperty,NI=(t,e,n)=>e in t?MI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cr=(t,e,n)=>NI(t,typeof e!="symbol"?e+"":e,n);function FI(t,e,n){return t?`Malformed ${e} document found at ${t} - ${n}`:`Malformed ${e} document - ${n}`}var c0=(t=>(t.Turtle="Turtle",t))(c0||{});let u0=class extends Yn{constructor(e,n,r){super(FI(e,n,r)),cr(this,"documentUrl"),cr(this,"documentFormat"),cr(this,"malformationDetails"),this.documentUrl=e,this.documentFormat=n,this.malformationDetails=r}},d0=class extends Yn{constructor(e,n){super(`Request failed trying to fetch ${e}`,n),cr(this,"url"),this.url=e}},Mf=class extends Yn{constructor(e){super(`Document with '${e}' url not found`),cr(this,"url"),this.url=e}};function jI(t,e){return`Unauthorized${e===403?" (Forbidden)":""}: ${t}`}class Nf extends Yn{constructor(e,n){super(jI(e,n)),cr(this,"url"),cr(this,"responseStatus"),this.url=e,this.responseStatus=n}get forbidden(){return typeof this.responseStatus<"u"?this.responseStatus===403:void 0}}const UI={acl:"http://www.w3.org/ns/auth/acl#",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",pim:"http://www.w3.org/ns/pim/space#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",vcard:"http://www.w3.org/2006/vcard/ns#"};function Js(t,e={}){var n;if(t.startsWith("http"))return t;const[r,s]=t.split(":");if(r&&s){const i=UI[r]??((n=e.extraContext)==null?void 0:n[r])??null;if(!i)throw new Error(`Can't expand IRI with unknown prefix: '${t}'`);return i+s}if(!e.defaultPrefix)throw new Error(`Can't expand IRI without a default prefix: '${t}'`);return e.defaultPrefix+r}class BI{constructor(e,n){cr(this,"url"),cr(this,"quads"),this.url=e,this.quads=n}value(e){var n;return(n=this.quads.find(r=>r.predicate.value===Js(e)))==null?void 0:n.object.value}values(e){return this.quads.filter(n=>n.predicate.value===Js(e)).map(n=>n.object.value)}}let f0=class{constructor(e=[]){cr(this,"quads"),this.quads=e}isEmpty(){return this.statements.length===0}getQuads(){return this.quads.slice(0)}addQuads(e){this.quads.push(...e)}statements(e,n,r){return this.quads.filter(s=>(!r||this.termMatches(s.object,r))&&(!e||this.termMatches(s.subject,e))&&(!n||this.termMatches(s.predicate,n)))}statement(e,n,r){return this.quads.find(s=>(!r||this.termMatches(s.object,r))&&(!e||this.termMatches(s.subject,e))&&(!n||this.termMatches(s.predicate,n)))??null}contains(e,n,r){return this.statement(e,n,r)!==null}getThing(e){const n=this.statements(e);return new BI(e,n)}expandIRI(e){return Js(e)}termMatches(e,n){return typeof n=="string"?this.expandIRI(n)===e.value:e.termType===e.termType&&e.value===n.value}};var zs=(t=>(t.Read="read",t.Write="write",t.Append="append",t.Control="control",t))(zs||{});let lc=class extends f0{constructor(e,n,r){super(n),cr(this,"url"),cr(this,"headers"),this.url=e,this.headers=r}isACPResource(){var e;return!!((e=this.headers.get("Link"))!=null&&e.match(/<http:\/\/www\.w3\.org\/ns\/solid\/acp#AccessControlResource>;[^,]+rel="type"/))}isPersonalProfile(){return!!this.statement(this.url,Js("rdf:type"),Js("foaf:PersonalProfileDocument"))}isStorage(){var e;return!!((e=this.headers.get("Link"))!=null&&e.match(/<http:\/\/www\.w3\.org\/ns\/pim\/space#Storage>;[^,]+rel="type"/))}isUserWritable(){return this.getUserPermissions().includes("write")}getUserPermissions(){return this.getPermissionsFromWAC("user")}getPublicPermissions(){return this.getPermissionsFromWAC("public")}getLastModified(){var e;return ju(this.headers.get("last-modified"))??ju((e=this.statement(this.url,"purl:modified"))==null?void 0:e.object.value)??this.getLatestDocumentDate()??null}expandIRI(e){return Js(e,{defaultPrefix:this.url})}getLatestDocumentDate(){const e=[...this.statements(void 0,"purl:modified"),...this.statements(void 0,"purl:created")].map(n=>ju(n.object.value)).filter(n=>n!==null);return e.length>0?e.reduce((n,r)=>n>r?n:r):null}getPermissionsFromWAC(e){var n;const r=this.headers.get("WAC-Allow")??"",s=((n=Tw(r,new RegExp(`${e}="([^"]+)"`)))==null?void 0:n[1])??"";return en([s.includes("read")&&"read",s.includes("write")&&"write",s.includes("append")&&"append",s.includes("control")&&"control"])}};async function qI(t){const e=await rp.compact(t,{});return"@graph"in e?e:"@id"in e?{"@graph":[e]}:{"@graph":[]}}function zI(t){return"@graph"in t}const cc="anonymous://",Cy=cc.length;async function VI(t,e){const n={headers:{Accept:"text/turtle"}};e!=null&&e.cache&&(n.cache=e.cache);try{const r=await((e==null?void 0:e.fetch)??window.fetch)(t,n);if(r.status===404)throw new Mf(t);if([401,403].includes(r.status))throw new Nf(t,r.status);return{body:await r.text(),headers:r.headers}}catch(r){throw r instanceof Nf||r instanceof Mf?r:new d0(t,{cause:r})}}function h0(t){var e;if((e=t["@id"])!=null&&e.startsWith("#")){t["@id"]=cc+t["@id"];for(const[n,r]of Object.entries(t))typeof r!="object"||r===null||!("@id"in r)||h0(t[n])}}function HI(t){for(const e of t)e.subject.value.startsWith(cc)&&(e.subject.value=e.subject.value.slice(Cy)),e.object.value.startsWith(cc)&&(e.object.value=e.object.value.slice(Cy))}async function KI(t,e,n){n=n??window.fetch.bind(window);const r=await op(e);return await n(t,{method:"PUT",headers:{"Content-Type":"text/turtle"},body:e}),new lc(t,r,new Headers({}))}async function vo(t,e){const{body:n,headers:r}=await VI(t,e),s=await op(n,{baseIRI:t});return new lc(t,s,r)}async function WI(t,e){try{return await vo(t,e)}catch(n){if(!(n instanceof Mf))throw n;return null}}async function ip(t,e){if(zI(t))return(await Promise.all(t["@graph"].map(r=>ip(r,e)))).flat();h0(t);const n=await rp.toRDF(t,{base:e});return HI(n),n}function p0(t,e={}){const n=kn({baseIRI:e.baseIRI}),r=new a0(n),s={quads:[],containsRelativeIRIs:!1};return new Promise((i,o)=>{const a=r._resolveRelativeIRI;r._resolveRelativeIRI=(...l)=>(s.containsRelativeIRIs=!0,r._resolveRelativeIRI=a,r._resolveRelativeIRI(...l)),r.parse(t,(l,c)=>{if(l){o(new u0(e.baseIRI??null,c0.Turtle,l.message));return}if(!c){i(s);return}s.quads.push(c)})})}async function Hc(t){return{"@graph":await rp.fromRDF(t)}}function GI(t){return new LI().quadsToString(t)}async function JI(t,e){try{return!(await vo(t,e)).isEmpty()}catch{return!1}}async function op(t,e={}){const{quads:n}=await p0(t,e);return n}async function XI(t,e,n){n=n??window.fetch.bind(window),await n(t,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:e})}var YI=Object.defineProperty,QI=(t,e,n)=>e in t?YI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ff=(t,e,n)=>QI(t,typeof e!="symbol"?e+"":e,n);function ZI(t,e){return e=e??t,typeof t=="string"?`${t} (returned ${e.status} status code)`:`Request to ${e.url} returned ${e.status} status code`}class eC extends Yn{constructor(e,n){super(ZI(e,n)),Ff(this,"response"),this.response=n??e}}let tC=class extends Yn{constructor(e,n,r){super(`The resource at ${e} is using an unsupported authorization protocol (${n})`,r),Ff(this,"url"),Ff(this,"protocol"),this.url=e,this.protocol=n}};async function nC(t,e){var n;const r=new f0(t.getQuads()),s={[t.url]:t},i=a=>{a.statements(void 0,"foaf:isPrimaryTopicOf").map(l=>l.object.value).forEach(l=>s[l]=s[l]??null),a.statements(void 0,"foaf:primaryTopic").map(l=>l.subject.value).forEach(l=>s[l]=s[l]??null)},o=async()=>{for(const[a,l]of Object.entries(s))if(l===null)try{const c=await vo(a,e);s[a]=c,r.addQuads(c.getQuads()),i(c)}catch(c){if(c instanceof Nf){s[a]=!1;continue}throw c}};i(t);do await o();while(Object.values(s).some(a=>a===null));return{store:r,cloaked:Object.values(s).some(a=>a===!1),writableProfileUrl:t.isUserWritable()?t.url:((n=Object.values(s).find(a=>!!a&&a.isUserWritable()))==null?void 0:n.url)??null}}async function Ry(t,e={}){var n,r,s,i,o,a;const l={fetch:e.fetch,cache:"no-store"},c=lr(t),u=await vo(c,l);if(!u.isPersonalProfile()&&!u.contains(t,"solid:oidcIssuer"))throw new Error(`${t} is not a valid webId.`);const{store:d,writableProfileUrl:f,cloaked:h}=await nC(u,e),m=d.statements(t,"pim:storage").map(x=>x.object.value),y=d.statement(t,"solid:publicTypeIndex"),S=d.statement(t,"solid:privateTypeIndex");let _=ar(c);for(;_&&m.length===0;){const x=await Rw(vo(_,l));if(x!=null&&x.isStorage()){m.push(_);break}_=ar(_)}if(m.length===0)throw new Error(`Could not find any storage for ${t}.`);return await((n=e.onLoaded)==null?void 0:n.call(e,d)),{webId:t,cloaked:h,writableProfileUrl:f,storageUrls:Vn(m),...kn({name:((r=d.statement(t,"vcard:fn"))==null?void 0:r.object.value)??((s=d.statement(t,"foaf:name"))==null?void 0:s.object.value),avatarUrl:((i=d.statement(t,"vcard:hasPhoto"))==null?void 0:i.object.value)??((o=d.statement(t,"foaf:img"))==null?void 0:o.object.value),oidcIssuerUrl:(a=d.statement(t,"solid:oidcIssuer"))==null?void 0:a.object.value,publicTypeIndexUrl:y==null?void 0:y.object.value,privateTypeIndexUrl:S==null?void 0:S.object.value})}}async function rC(t,e={}){if(e.required)return Ry(t,e);const n=Rw(r=>Ry(r,e));return await n(t)??await n(t.replace(/\/$/,"").concat("/profile/card#me"))??await n(Yr(t).concat("/profile/card#me"))}function sC(t){return!t.path||!t.path.startsWith("/")?null:t.path.match(/^\/[^/]*$/)?"/":`/${Fw(t.path.split("/")).filter().slice(0,-1).join("/")}/`.replace("//","/")}function iC(t){const e=sC(t);return t.protocol&&t.domain?`${t.protocol}://${t.domain}${e??"/"}`:e}function jf(t){if(!(!("@type"in t)||"@value"in t)){t["@id"]=t["@id"]??$n();for(const e of Object.values(t))yt(e)&&jf(e),pw(e)&&e.forEach(n=>yt(n)&&jf(n))}}function oC(t){return je(Er(t),e=>jf(e))}function aC(t){const e=qa(t);return e?kn({containerUrl:iC(e),documentName:e.path?e.path.split("/").pop():null,resourceHash:e.fragment}):{}}async function lC(t,e,n){n=n??window.fetch.bind(n);const r=t.storageUrls[0],s=`${r}settings/${e}TypeIndex`;return await JI(s,{fetch:n})?`${r}settings/${e}TypeIndex-${$n()}`:s}async function m0(t,e,n){if(t.writableProfileUrl===null)throw new Error("Can't create type index without a writable profile document");n=n??window.fetch.bind(n);const r=await lC(t,e,n),s=e==="public"?"<> a <http://www.w3.org/ns/solid/terms#TypeIndex> .":`
            <> a
                <http://www.w3.org/ns/solid/terms#TypeIndex>,
                <http://www.w3.org/ns/solid/terms#UnlistedDocument> .
        `,i=`
        INSERT DATA {
            <${t.webId}> <http://www.w3.org/ns/solid/terms#${e}TypeIndex> <${r}> .
        }
    `;return await KI(r,s,n),await XI(t.writableProfileUrl,i,n),r}async function g0(t,e,n,r){const s=await vo(t,{fetch:r});return(Array.isArray(e)?e:[e]).map(i=>s.statements(void 0,"rdf:type","solid:TypeRegistration").filter(o=>s.contains(o.subject.value,"solid:forClass",i)).map(o=>s.statements(o.subject.value,n)).flat().map(o=>o.object.value).filter(o=>!!o)).flat()}async function cC(t,e){return m0(t,"public",e)}async function uC(t,e){return m0(t,"private",e)}async function dC(t,e,n){return g0(t,e,"solid:instanceContainer",n)}async function fC(t,e,n){return g0(t,e,"solid:instance",n)}async function y0(t,e){var n;e=e??window.fetch.bind(window);const r=((n=((await e(t,{method:"HEAD"})).headers.get("Link")??"").match(/<([^>]+)>;\s*rel="acl"/))==null?void 0:n[1])??null;if(!r)throw new Error(`Could not find ACL Resource for '${t}'`);return bo(Kt(t),r)}async function b0(t,e,n){n=n??await y0(t,e);const r=await WI(n??"",{fetch:e});if(!r)return b0(Kt(t),e);if(r.isACPResource())throw new tC(t,"ACP");return r}async function hC(t,e){const n=await y0(t,e),r=await b0(t,e,n);return kn({url:n,effectiveUrl:r.url,document:r})}var pC=Object.defineProperty,mC=(t,e,n)=>e in t?pC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Oe=(t,e,n)=>mC(t,typeof e!="symbol"?e+"":e,n);const wn={ChangeUrl:"change",RemoveProperty:"remove",ShieldProperty:"shield",UpdateProperty:"update"};class gC{constructor(e,n){Oe(this,"type",wn.ChangeUrl),this.resourceUrl=e,this.newResourceUrl=n}}const yC={crdt:"https://vocab.noeldemartin.com/crdt/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",pim:"http://www.w3.org/ns/pim/space#",posix:"http://www.w3.org/ns/posix/stat#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",xsd:"http://www.w3.org/2001/XMLSchema#"};function wt(t,e={},n=""){if(/^https?:\/\//.test(t))return t;const r=t.indexOf(":");if(r===-1)return n+t;e={...yC,...e};const s=t.slice(0,r);return s in e?e[s]+t.slice(s.length+1):t}const bC=wt("crdt:property"),Ty=wt("crdt:resource"),so=wt("ldp:Container"),ap=wt("ldp:contains"),v0=wt("rdf:type"),vC=wt("purl:modified");var js=(t=>(t[t.Type=0]="Type",t[t.Reference=1]="Reference",t[t.Literal=2]="Literal",t))(js||{});class w0{constructor(e){Oe(this,"name"),this.name=e}}const Vi={dateTime:wt("xsd:dateTime"),integer:wt("xsd:integer"),boolean:wt("xsd:boolean"),decimal:wt("xsd:decimal"),float:wt("xsd:float"),double:wt("xsd:double")};class Xt{constructor(e,n,r){Oe(this,"resourceUrl"),Oe(this,"name"),Oe(this,"value"),this.resourceUrl=e,this.name=n,this.value=r}static fromStatement(e){const n=e.subject.termType==="NamedNode"?e.subject.value:null;if(e.predicate.value===v0)return this.type(n,e.object.value);if(e.object.termType==="NamedNode")return this.reference(n,e.predicate.value,decodeURI(e.object.value));if(e.object.termType==="BlankNode")return this.reference(n,e.predicate.value,null);if(e.object.termType==="Variable")return this.reference(n,e.predicate.value,new w0(e.object.value));const r=e.object;return this.literal(n,e.predicate.value,this.castLiteralValue(e.object.value,r.datatype.value),r.value)}static literal(e,n,r,s){return new wC(e,n,r,s)}static reference(e,n,r){return new _C(e,n,r)}static type(e,n){return new xC(e,n)}static toTurtle(e,n=null){return e.map(r=>r.toTurtle(n)+" .").join(`
`)}static castLiteralValue(e,n){switch(n){case Vi.dateTime:return new Date(e);case Vi.integer:case Vi.decimal:return parseInt(e);case Vi.boolean:return e==="true"||e==="1";case Vi.float:case Vi.double:return parseFloat(e)}return e}toTurtle(e=null){const n=this.getTurtleSubject(e),r=this.getTurtlePredicate(),s=this.getTurtleObject(e);return`${n} ${r} ${s}`}clone(e){switch(e=e??this.resourceUrl,this.type){case 2:{const n=this;return Xt.literal(e,n.name,n.value,n.originalValue)}case 0:return Xt.type(e,this.value);case 1:return Xt.reference(e,this.name,this.value)}}valueEquals(e){const n=this.value instanceof Date?this.value.getTime():this.value,r=e.value instanceof Date?e.value.getTime():e.value;return n===r}getTurtleReference(e,n){const r=(e==null?void 0:e.indexOf("#"))??-1;return!e||e===n?"<>":n===null||!e.startsWith(n)||r===-1?`<${encodeURI(e)}>`:`<#${e.slice(r+1)}>`}getTurtleSubject(e){return this.getTurtleReference(this.resourceUrl,e)}getTurtlePredicate(){return`<${encodeURI(this.name)}>`}}class wC extends Xt{constructor(e,n,r,s){super(e,n,r),Oe(this,"type",2),this.originalValue=s}getTurtleObject(){if(this.originalValue&&this.value instanceof Date)return`"${this.originalValue}"^^<${wt("xsd:dateTime")}>`;if(this.value instanceof Date){const e=(...i)=>i.map(o=>o.toString().padStart(2,"0")),n=e(this.value.getUTCFullYear(),this.value.getUTCMonth()+1,this.value.getUTCDate()).join("-"),r=e(this.value.getUTCHours(),this.value.getUTCMinutes(),this.value.getUTCSeconds()).join(":"),s=this.value.getUTCMilliseconds().toString().padStart(3,"0");return`"${n}T${r}.${s}Z"^^<${wt("xsd:dateTime")}>`}return JSON.stringify(this.value)}}class _C extends Xt{constructor(e,n,r){super(e,n,r),Oe(this,"type",1)}getTurtleObject(e){return this.value instanceof w0?this.value.name:this.getTurtleReference(this.value,e)}}class xC extends Xt{constructor(e,n){super(e,v0,n),Oe(this,"type",0)}getTurtlePredicate(){return"a"}getTurtleObject(){return`<${encodeURI(this.value)}>`}}class EC{constructor(e){Oe(this,"url"),Oe(this,"types"),Oe(this,"properties"),Oe(this,"propertiesIndex"),Oe(this,"statements"),this.url=e,this.statements=[],this.types=[],this.properties=[],this.propertiesIndex={}}get name(){return this.getPropertyValue(wt("foaf:name"))}get label(){return this.getPropertyValue(wt("rdfs:label"))}isType(e){return this.types.indexOf(wt(e))!==-1}getPropertyValue(e,n=null){const[r]=this.propertiesIndex[wt(e)]||[];return r?r.value:n}getPropertyValues(e){return(this.propertiesIndex[wt(e)]||[]).map(n=>n.value)}addStatement(e){if(e.subject.value!==this.url)return;const n=Xt.fromStatement(e);n.type===js.Type&&this.types.push(n.value),this.statements.push(e),this.properties.push(n),this.propertiesIndex[n.name]=(this.propertiesIndex[n.name]||[]).concat([n])}}class lp extends qe{constructor(e,n){super(n?`Couldn't find resource with id '${e}' in '${n}' document.`:`Couldn't find resource with id '${e}' in document.`)}}const _0=class zl{constructor(e,n=[],r={}){Oe(this,"url"),Oe(this,"metadata"),Oe(this,"statements"),Oe(this,"resourcesIndex"),Oe(this,"properties"),Oe(this,"resources"),this.url=e,this.statements=n,this.metadata=r,this.resourcesIndex=this.statements.reduce((s,i)=>{const o=i.subject.value;return(s[o]=s[o]??new EC(o)).addStatement(i),s},{}),this.resources=Object.values(this.resourcesIndex),this.properties=this.resources.reduce((s,i)=>s.concat(i.properties),[])}static async fromTurtle(e,n={}){const r=await p0(e,{baseIRI:n.baseIRI});return new zl(n.baseIRI||"",r.quads,{containsRelativeIRIs:r.containsRelativeIRIs,describedBy:SC(n),headers:n.headers})}static async resourceFromJsonLDGraph(e,n,r){const s=()=>r??e["@graph"].find(i=>i["@id"]===n)??Xe(lp,n);return(this.documentsCache.get(e)??await this.fromJsonLD(s())).requireResource(n)}static async fromJsonLD(e,n){return this.documentsCache.get(e)??await this.getFromJsonLD(e,n)}static reduceJsonLDGraph(e,n){return je({"@graph":e["@graph"].filter(r=>r["@id"]!==n)},r=>{const s=this.documentsCache.get(e);s&&this.cacheJsonLD(r,s.clone({removeResourceUrls:[n]}))})}static cacheJsonLD(e,n){this.documentsCache.set(e,n)}static async getFromJsonLD(e,n){const r=await ip(e,n);return je(new zl(e["@id"]?lr(e["@id"]):null,r),s=>{this.documentsCache.set(e,s)})}isEmpty(){return this.statements.length===0}hasProperty(e,n){const r=this.resourcesIndex[e];return!!r&&n in r.propertiesIndex}async toJsonLD(){return Hc(this.statements)}resource(e){return this.resourcesIndex[e]??null}requireResource(e){const n=this.resource(e);if(!n)throw new qe(`Resource '${e}' not found`);return n}clone(e={}){return je(new zl(e.changeUrl??this.url,[],this.metadata),n=>{const r=e.removeResourceUrls;if(!r){n.statements=this.statements.slice(0),n.properties=this.properties.slice(0),n.resources=this.resources.slice(0),n.resourcesIndex={...this.resourcesIndex};return}n.statements=this.statements.filter(s=>!r.includes(s.subject.value)),n.properties=this.properties.filter(s=>!s.resourceUrl||!r.includes(s.resourceUrl)),n.resources=this.resources.filter(s=>!r.includes(s.url)),n.resourcesIndex=mw(n.resources,"url")})}};Oe(_0,"documentsCache",new WeakMap);let Fn=_0;function SC(t={}){var e,n;if(!((e=t.headers)!=null&&e.has("Link")))return;const r=(n=t.headers.get("Link"))==null?void 0:n.match(/<([^>]+)>;\s*rel="describedBy"/i);if(r)return bo(t.baseIRI||"",r[1])}let io=class{constructor(t,e,n){Oe(this,"type",wn.RemoveProperty),this.resourceUrl=t,this.property=e,this.value=n}};class AC{constructor(e,n){Oe(this,"type",wn.ShieldProperty),this.resourceUrl=e,this.property=n}}class oo{constructor(e){if(Oe(this,"type",wn.UpdateProperty),Oe(this,"propertyOrProperties"),this.propertyOrProperties=e,!Array.isArray(e))return;const[n,...r]=e;if(!n)throw new Error("Cannot create an UpdatePropertyOperation with an empty array");const{resourceUrl:s,name:i,type:o}=n;if(r.some(a=>a.resourceUrl!==s||a.name!==i||a.type!==o))throw new Error("All properties in an UpdatePropertyOperation must have the same resourceUrl, name and type")}get propertyResourceUrl(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].resourceUrl:this.propertyOrProperties.resourceUrl}get propertyName(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].name:this.propertyOrProperties.name}get propertyType(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].type:this.propertyOrProperties.type}}function IC(t){return t.reduce((e,n)=>(e[n.type].push(n),e),{[wn.ChangeUrl]:[],[wn.RemoveProperty]:[],[wn.ShieldProperty]:[],[wn.UpdateProperty]:[]})}function ky(t){const e=t.filter(n=>n.type===wn.ShieldProperty).reduce((n,r)=>{var s,i;const o=r;return n[s=o.resourceUrl]??(n[s]=[]),(i=n[o.resourceUrl])==null||i.push(o.property),n},{});return t.reduce((n,r)=>{var s;switch(r.type){case wn.UpdateProperty:n[0].push(r.propertyOrProperties);break;case wn.RemoveProperty:if(!e[r.resourceUrl]){n[1].push(en([r.resourceUrl,r.property,r.value]));break}if(!r.property){n[1].push(en([r.resourceUrl,e[r.resourceUrl]]));break}if((s=e[r.resourceUrl])!=null&&s.includes(r.property))break;n[1].push(en([r.resourceUrl,r.property,r.value]));break}return n},[[],[]])}const CC=[ap,wt("posix:mtime"),wt("posix:size"),wt("purl:modified")],RC=[so,wt("ldp:BasicContainer")],$y=new Map;class TC{constructor(e){Oe(this,"fetch"),Oe(this,"config");const n=e??(globalThis==null?void 0:globalThis.fetch);this.fetch=async(r,s)=>{try{return await n(r,s)}catch(i){const o=typeof r=="object"?r.url:r;throw new d0(o,{cause:i})}},this.config={concurrentFetchBatchSize:5}}getFetch(){return this.fetch}setConfig(e){Object.assign(this.config,e)}async createDocument(e,n=null,r=[],s={}){return n&&r.some(i=>i.resourceUrl===n&&i.type===js.Type&&i.value===so)?this.createContainerDocument(e,n,r):this.createNonContainerDocument(e,n,r,s)}async getDocument(e){const n=await this.fetch(e,{headers:{Accept:"text/turtle"}});if(n.status!==200)return null;const r=await n.text();return await Fn.fromTurtle(r,{headers:n.headers,baseIRI:e})}async getDocuments(e){const n=await(await this.fetch(e,{headers:{Accept:"text/turtle"}})).text(),r=await Fn.fromTurtle(n,{baseIRI:e});return this.getDocumentsFromContainer(e,r)}async updateDocument(e,n,r={}){var s;if(n.length===0)return;e=$y.get(e)??e;const i=await this.getDocument(e);if(i===null)throw new zr(e);return this.processChangeUrlOperations(i,n),this.processUpdatePropertyOperations(i,n),n.length===0?void 0:(s=i.resource(e))!=null&&s.isType(so)?await this.updateContainerDocument(i,n):await this.updateNonContainerDocument(i,n,r)}async overwriteDocument(e,n){const r=await this.getDocument(e);if(r===null)throw new zr(e);const s=await this.fetch(e,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:`
                DELETE DATA { ${Xt.toTurtle(r.properties,e)} } ;
                INSERT DATA { ${Xt.toTurtle(n,e)} }
            `});return this.assertSuccessfulResponse(s,`Error overwriting document at ${r.url}`),{headers:s.headers}}async deleteDocument(e,n){var r;const s=n??await this.getDocument(e);if(s===null)return;if((r=s.resource(e))!=null&&r.isType(so)){const o=await this.getDocumentsFromContainer(e,s);await Promise.all(o.map(a=>this.deleteDocument(a.url,a)))}const i=await this.fetch(e,{method:"DELETE"});return this.assertSuccessfulResponse(i,`Error deleting document at ${e}`),{headers:i.headers}}async documentExists(e){const n=await this.fetch(e,{headers:{Accept:"text/turtle"}});if(n.status===200)return(await n.text()).length>0;if(n.status===404)return!1;throw new qe(`Couldn't determine if document at ${e} exists, got ${n.status} response`)}async createContainerDocument(e,n,r){let s=await this.createContainerFolder(e,n);if(r.length!==0){const i=this.withoutReservedContainerProperties(n,r).map(o=>new oo(o));s=await this.updateDocument(n,i)??s}return{url:n,metadata:s}}async createContainerFolder(e,n){if(!n.startsWith(e))throw new qe("Explicit document url should start with the parent url");if(!n.endsWith("/"))throw new qe(`Container urls must end with a trailing slash, given ${n}`);const r=await this.fetch(n,{method:"PUT",headers:{Link:'<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"',"If-None-Match":"*"}});return this.isInternalErrorResponse(r)?this.createContainerDocumentUsingPOST(n):(this.assertSuccessfulResponse(r,`Error creating container folder at ${n}`),{headers:r.headers})}async createContainerDocumentUsingPOST(e,n=!0){const r=Kt(e),s=await this.fetch(r,{method:"POST",headers:{Link:'<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"',Slug:sA(e),"If-None-Match":"*"}});return s.status===404&&n?(await this.createContainerDocumentUsingPOST(r),this.createContainerDocumentUsingPOST(e,!1)):(this.assertSuccessfulResponse(s,`Error creating container at ${e}`),{headers:s.headers})}async createNonContainerDocument(e,n,r,s={}){var i;if(!n||((i=s.method)==null?void 0:i.toLowerCase())==="post"){const a=s.format??"text/turtle",l=await this.renderProperties(n,r,a),c={"Content-Type":a};n&&(c.Slug=Dw(n));const u=await this.fetch(e,{method:s.method??"POST",headers:c,body:l});return this.assertSuccessfulResponse(u,`Error creating document under ${e}`),{url:bo(e,u.headers.get("Location")||""),metadata:{headers:u.headers}}}if(!n.startsWith(e))throw new qe("A minted document url should start with the parent url");const o=await this.fetch(n,{method:"PATCH",headers:{"Content-Type":"application/sparql-update","If-None-Match":"*"},body:`INSERT DATA { ${Xt.toTurtle(r,n)} }`});return this.assertSuccessfulResponse(o,`Error creating document at ${n}`),{url:n,metadata:{headers:o.headers}}}async getDocumentsFromContainer(e,n){var r;const s=[],i=((r=n.resource(e))==null?void 0:r.getPropertyValues("ldp:contains"))??[];for(;i.length>0;){const o=i.splice(0,this.config.concurrentFetchBatchSize||i.length),a=await Promise.all(o.map(l=>this.getDocument(l)));s.push(...a)}return s.filter(o=>!!o)}async updateContainerDocument(e,n){const r=e.metadata.describedBy||`${e.url}.meta`;return e.url&&$y.set(e.url,r),await this.updateNonContainerDocument(e.clone({changeUrl:r}),n)}async updateNonContainerDocument(e,n,r={}){const s=r.format??"application/sparql-update";switch(s){case"application/sparql-update":return this.updateNonContainerDocumentWithSparql(e,n);case"application/ld+json":return this.updateNonContainerDocumentWithJsonLD(e,n)}throw new Error(`Unsupported update format: '${s}'`)}async updateNonContainerDocumentWithSparql(e,n){const[r,s]=ky(n),i=r.flat().map(l=>l.toTurtle(e.url)+" ."),o=e.properties.filter(l=>s.some(([c,u,d])=>c===l.resourceUrl&&(!u||typeof u=="string"&&u===l.name||Array.isArray(u)&&!u.includes(l.name))&&(!d||d===l.value))).map(l=>l.toTurtle(e.url)+" .");if(i.length===0&&o.length===0)return;const a=await this.fetch(e.url,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:en([o.length>0&&`DELETE DATA { ${o.join(`
`)} }`,i.length>0&&`INSERT DATA { ${i.join(`
`)} }`]).join(" ; ")});return this.assertSuccessfulResponse(a,`Error updating document at ${e.url}`),{headers:a.headers}}async updateNonContainerDocumentWithJsonLD(e,n){if(!e.url)throw new Error("Missing document url for JsonLD update");const[r,s]=ky(n),i=e.properties.filter(a=>!s.some(([l,c,u])=>l===a.resourceUrl&&(!c||typeof c=="string"&&c===a.name||Array.isArray(c)&&!c.includes(a.name))&&(!u||u===a.value))).concat(r.flat()),o=await this.fetch(e.url,{headers:{"Content-Type":"application/ld+json"},method:"PUT",body:await this.renderProperties(e.url,i,"application/ld+json")});return this.assertSuccessfulResponse(o,`Error updating document at ${e.url}`),{headers:o.headers}}withoutReservedContainerProperties(e,n){const r=i=>CC.includes(i.name),s=i=>i.type===js.Type&&RC.includes(i.value);return n.filter(i=>i.resourceUrl!==e||!r(i)&&!s(i))}processChangeUrlOperations(e,n){const r=IC(n);for(const s of r[wn.ChangeUrl]){const i=e.resource(s.resourceUrl);if(!i)continue;const o=r[wn.UpdateProperty].filter(l=>l.propertyResourceUrl===s.resourceUrl),a=r[wn.RemoveProperty].filter(l=>l.resourceUrl===s.resourceUrl);o.forEach(l=>{l.propertyOrProperties=Array.isArray(l.propertyOrProperties)?l.propertyOrProperties.map(c=>c.clone(s.newResourceUrl)):l.propertyOrProperties.clone(s.newResourceUrl)}),a.forEach(l=>l.resourceUrl=s.newResourceUrl),n.push(new io(s.resourceUrl)),n.push(...i.properties.filter(l=>!o.some(c=>c.propertyName===l.name)&&!a.some(c=>!c.property||c.property===l.name)).map(l=>new oo(l.clone(s.newResourceUrl)))),jn(n,s)}}processUpdatePropertyOperations(e,n){var r;const s=[],i=[],o=[];for(let l=0;l<n.length;l++){const c=n[l];if(c.type!==wn.UpdateProperty||c.propertyResourceUrl===null)continue;if(!Array.isArray(c.propertyOrProperties)){const y=c.propertyOrProperties,S=y.resourceUrl,[_,...x]=((r=e.resource(S??""))==null?void 0:r.propertiesIndex[y.name])??[];S&&_&&x.length===0&&y.type===_.type&&y.valueEquals(_)&&(i.push(c),n.push(new AC(S,y.name)));continue}const u=e.statements.filter(y=>y.subject.value===c.propertyResourceUrl&&y.predicate.value===c.propertyName).map(y=>y.object),d=c.propertyOrProperties[0].type===js.Literal,f=y=>"type"in y?y.type===js.Reference:y.termType==="NamedNode",{added:h,removed:m}=Ro(u,c.propertyOrProperties,(y,S)=>y.value===S.value&&f(y)===f(S));h.forEach(y=>n.push(new oo(d?Xt.literal(c.propertyResourceUrl,c.propertyName,y.value):Xt.reference(c.propertyResourceUrl,c.propertyName,y.value)))),m.forEach(y=>n.push(new io(c.propertyResourceUrl,c.propertyName,y.value))),s.push(c),o.push(`${c.propertyResourceUrl}-${c.propertyName}`)}s.forEach(l=>jn(n,l)),i.forEach(l=>jn(n,l));const a=n.filter(l=>l.type===wn.UpdateProperty&&l.propertyType!==js.Type&&e.hasProperty(l.propertyResourceUrl,l.propertyName));for(const l of a)o.includes(`${l.propertyResourceUrl}-${l.propertyName}`)||n.push(new io(l.propertyResourceUrl,l.propertyName))}async renderProperties(e,n,r){switch(r){case"text/turtle":return Xt.toTurtle(n,e);case"application/ld+json":{const s=await op(Xt.toTurtle(n,e)),i=await Hc(s);if(i["@graph"].length!==1)throw new Error("Cannot render JSONLD with multiple or no subjects");const o=i["@graph"][0];return aa(o["@id"])&&delete o["@id"],JSON.stringify(o)}}throw new Error(`Unsupported render format: '${r}'`)}assertSuccessfulResponse(e,n){if(Math.floor(e.status/100)!==2)throw new eC(n,e)}isInternalErrorResponse(e){return Math.floor(e.status/100)===5}}const kC={activityPods:!1};function $C(t){return kC[t]}function Jt(){return $C("activityPods")}function DC(t){const e=new Date(t);return isNaN(e.getTime())?null:e}class cp{constructor(e,n={}){Oe(this,"__isSolidEngine",!0),Oe(this,"config"),Oe(this,"helper"),Oe(this,"client"),Oe(this,"cache",new Map),Oe(this,"_listeners",new bw),this.helper=new Bc,this.config={concurrentFetchBatchSize:10,cachesDocuments:!1,...n},this.client=new TC(e),this.client.setConfig({concurrentFetchBatchSize:this.config.concurrentFetchBatchSize})}get listeners(){return this._listeners}setConfig(e){Object.assign(this.config,e)}getFetch(){return this.client.getFetch()}async create(e,n,r){if(this.validateJsonLDGraph(n),r&&await this.client.documentExists(r))throw new Jh(r);const s=await this.getJsonLDGraphProperties(n),{url:i,metadata:o}=await this.client.createDocument(e,r,s,Jt()?{method:"post",format:"application/ld+json"}:{});return await this._listeners.emit("onDocumentCreated",i,o),i}async readOne(e,n){var r,s,i,o;if((r=this.config.persistentCache)!=null&&r.has(e,n))return await this.config.persistentCache.get(e,n)??Xe(zr,n);const a=await this.getDocument(n);if(a===null)throw new zr(n);const l=await this.convertToEngineDocument(a);if(await this._listeners.emit("onRDFDocumentLoaded",a.url,a.metadata),await this._listeners.emit("onDocumentRead",a.url,a.metadata),this.config.persistentCache&&(s=a.resource(n))!=null&&s.isType(so))for(const c of((i=a.resource(n))==null?void 0:i.getPropertyValues(ap))??[]){const u=String(c),d=DC((o=a.resource(u))==null?void 0:o.getPropertyValue(vC));d&&await this.config.persistentCache.activate(n,u,d.getTime())}return l}async readMany(e,n={}){const r=await this.getDocumentsForFilters(e,n),s={};return await Promise.all(r.map(async i=>{s[i.url]=await this.convertToEngineDocument(i),await this._listeners.emit("onRDFDocumentLoaded",i.url,i.metadata),await this._listeners.emit("onDocumentRead",i.url,i.metadata)})),this.helper.filterDocuments(s,n)}async update(e,n,r){if("$overwrite"in r){const o=await this.getJsonLDGraphProperties(r.$overwrite),a=await this.client.overwriteDocument(n,o);await this._listeners.emit("onDocumentUpdated",n,a);return}const s=await this.extractJsonLDGraphUpdate(r),i=await this.client.updateDocument(n,s,Jt()?{format:"application/ld+json"}:{});this.cache.delete(n),i&&await this._listeners.emit("onDocumentUpdated",n,i)}async delete(e,n){const r=await this.client.deleteDocument(n);this.cache.delete(n),r&&await this._listeners.emit("onDocumentDeleted",n,r)}addListener(e){return this.listeners.add(e)}removeListener(e){this.listeners.remove(e)}clearCache(){this.cache=new Map}async getDocument(e){var n;if(this.config.cachesDocuments&&this.cache.has(e))return((n=this.cache.get(e))==null?void 0:n.clone())??null;const r=await this.client.getDocument(e);return this.config.cachesDocuments&&this.cache.set(e,r),r}async getDocumentsForFilters(e,n){return n.$in?await this.getDocumentsFromUrls(n.$in.map(Tt)):await this.client.getDocuments(e)}async getDocumentsFromUrls(e){const n=e.reduce((s,i)=>{const o=ar(i)??Yr(i);return{...s,[o]:(s[o]||[]).concat([i])}},{}),r=Object.values(n).map(async s=>{const i=s.map(o=>this.getDocument(o));return(await Promise.all(i)).filter(o=>o!=null)});return(await Promise.all(r)).flat()}async convertToEngineDocument(e){const n=await Hc(e.statements);return await qI(n)}validateJsonLDGraph(e){if(!Array.isArray(e["@graph"]))throw new qe("Invalid JSON-LD graph provided for SolidEngine. Are you using a model that isn't a SolidModel?")}async extractJsonLDGraphUpdate(e){if(!this.isJsonLDGraphUpdate(e))throw new qe("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");const n=new Map,r=[],s="$apply"in e["@graph"]?e["@graph"].$apply:[e["@graph"]];for(const i of s){if(i.$updateItems){const o=[];for(const a of un(i.$updateItems)){const l=await this.extractJsonLDGraphItemsUpdate(a,n);o.push(...l)}r.push(...o.flat())}if(i.$push){const o=await this.extractJsonLDGraphItemPush(i.$push);r.push(...o)}}return r}async extractJsonLDGraphItemsUpdate({$where:e,$update:n,$override:r,$unset:s},i){if(!e||!("@id"in e))throw new qe("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");if(s){const c=e["@id"];return(typeof c=="string"?[c]:c.$in).map(u=>new io(u))}if(r){const c=e["@id"],u=typeof c=="string"?[c]:c.$in;return(await Promise.all(u.map(async d=>{const f=i.get(d)??d,h=[new io(f)],m=await this.getJsonLDGraphProperties(r);for(const y of m)h.push(new oo(y));return h}))).flat()}if(typeof e["@id"]!="string")throw new qe("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");const o=i.get(e["@id"])??e["@id"],a=n,l=[];for(const[c,u]of Object.entries(a)){if(u===null)throw new qe("SolidEngine doesn't support setting properties to null, delete");if(typeof u=="object"&&"$unset"in u){l.push(new io(o,c));continue}if(c==="@id"&&o!==u){l.push(new gC(o,u)),i.set(u,o);continue}l.push(new oo(this.getUpdatePropertyOperationProperty(o,c,u)))}return l}getUpdatePropertyOperationProperty(e,n,r,s=!0){return n==="@type"?Xt.type(e,r):Array.isArray(r)?s?r.map(i=>this.getUpdatePropertyOperationProperty(e,n,i,!1)):Xe("Cannot have nested array values"):yt(r)&&"@id"in r?Xt.reference(e,n,r["@id"]):yt(r)&&"@type"in r&&r["@type"]==="http://www.w3.org/2001/XMLSchema#dateTime"?Xt.literal(e,n,new Date(r["@value"])):Xt.literal(e,n,r)}async extractJsonLDGraphItemPush(e){return(await this.getJsonLDGraphProperties(e)).map(n=>new oo(n))}extractJsonLDGraphTypes(e){if(!this.isJsonLDGraphTypesFilter(e))return[];const n=e["@graph"].$contains["@type"].$or.reduce((r,s)=>("$contains"in s&&r.push(...s.$contains),"$eq"in s&&r.push(s.$eq),r),[]);return Vn(n.filter(r=>r.startsWith("http")))}async getJsonLDGraphProperties(e){return(await Fn.fromJsonLD(e)).properties}isJsonLDGraphUpdate(e){const n=e["@graph"];return yt(n)?!(n.$apply??[n]).some(r=>{const s=Object.keys(r);return s.length!==1||!["$updateItems","$push"].includes(s[0]??"")}):!1}isJsonLDGraphTypesFilter(e){const n=e["@graph"];return yt(n)&&yt(n.$contains)&&yt(n.$contains["@type"])&&Array.isArray(n.$contains["@type"].$or)}}class Pd extends qe{constructor(e){super(`Some required attributes were missing from '${e}' document.`)}}const uc=new WeakMap,Ld=new WeakMap;function Dy(t){var e;return((e=Object.getPrototypeOf(t))==null?void 0:e.constructor)!==Object}function OC(t,e){if(uc.has(t))throw new qe(`${t.modelName} schema update already in progress!`);uc.set(t,e)}function PC(t){return uc.get(t)??null}function LC(t){uc.delete(t)}function MC(t,e,n){const r=t;if(Dy(r))return r.ensureBooted(),r;if(!Ld.has(r)){const s=Dy(t)?t:e,i=x0(r,s);i.ensureBooted(),Ld.set(r,i)}return Ld.get(r)??Xe("Couldn't boot schema")}function x0(t,e,n){const r=Hw(n?t:e,n??t);return r.__isSchema=!0,r}class NC{async deleteModels(e){const n=this.decantDocumentModelsByContainer(e);await Promise.all(Object.entries(n).map(([r,s])=>this.deleteContainerDocumentsModels(r,s)))}decantDocumentModelsByContainer(e){const n=this.decantModelsByDocument(e);return Object.entries(n).reduce((r,[s,i])=>{const o=ar(s)??Yr(s);return(r[o]=r[o]??[]).push({documentUrl:s,models:i}),r},{})}decantModelsByDocument(e){return e.reduce((n,r)=>{const s=r.requireDocumentUrl();return(n[s]=n[s]??[]).push(r),n},{})}async deleteContainerDocumentsModels(e,n){const r=await this.requireEngine().readMany(e,{$in:n.map(({documentUrl:s})=>s)});await Promise.all(n.map(({documentUrl:s,models:i})=>this.deleteDocumentModels(r,e,s,i)))}async deleteDocumentModels(e,n,r,s){const i=e[r];if(!i)return;const o=this.requireEngine(),a=s.filter(l=>l.exists()).map(l=>l.url);if(!i["@graph"].some(l=>!a.some(c=>c===l["@id"]))){const l=s.filter(c=>c.isRelationLoaded("tombstone")).map(c=>c.tombstone);l.length===0?await o.delete(n,r):await o.update(n,r,{$overwrite:{"@graph":l.map(c=>c.serializeToJsonLD({includeRelations:!1}))}}),s.forEach(c=>c.setDocumentExists(!1));return}await o.update(n,r,{"@graph":{$updateItems:{$where:{"@id":{$in:a}},$unset:!0}}})}}class Vl extends Gs{constructor(e,n){super(e,n)}setForeignAttributes(){}clearForeignAttributes(){}async load(){return this.related??(this.related=[]),this.related}create(e){return je(this.attach(e??{}),()=>this.parent.save())}async __loadDocumentModels(e,n){const r=await Fn.fromJsonLD(n),s=Fn.reduceJsonLDGraph(n,this.parent.url);this.related=en(await Promise.all(this.relatedClass.findMatchingResourceIds(r.statements).map(i=>{const o=s["@graph"].find(a=>a["@id"]===i);return o&&this.relatedClass.createFromEngineDocument(e,s,o["@id"])})))}}class FC{get isPublic(){var e;return((e=this._publicPermissions)==null?void 0:e.includes(zs.Read))??null}get isPrivate(){return this._publicPermissions?!this._publicPermissions.includes(zs.Read):null}async fetchPublicPermissionsIfMissing(){this._publicPermissions||await this.fetchPublicPermissions()}async fetchPublicPermissions(){const e=zt("SolidACLAuthorization"),n=this.requireDocumentUrl(),r=await e.requireFetch()(n,{method:"HEAD"}),s=new lc(n,[],r.headers);this._publicPermissions=s.getPublicPermissions()}async updatePublicPermissions(e){const n=zt("SolidACLAuthorization");await this.withEngine(n.requireEngine(),()=>this.updateAuthorizations(e)),this._publicPermissions=e}trackPublicPermissions(){if(!this.static().usingSolidEngine())return{documentPermissions:{},stopTracking(){}};const e={},n=this.static().requireFinalEngine().listeners.add({onDocumentRead(r,s){if(!s.headers)return;const i=new lc(r,[],s.headers);e[r]=i.getPublicPermissions()}});return{documentPermissions:e,stopTracking:n}}async updateAuthorizations(e){this.relatedAuthorizations.enable();const n=await this.loadRelationIfUnloaded("authorizations"),r=zt("SolidACLAuthorization"),s=e.map(a=>r.modeFromSolidDocumentPermission(a)),i=n.filter(a=>a.agentClasses.includes(Js("foaf:Agent"))),o=i.map(a=>a.modes).flat();if(!(s.length===o.length&&!s.some(a=>o.includes(a)))){if(!this.relatedAuthorizations.isDocumentACL()){await this.createDocumentACLResource(s);return}if(s.length===0){for(const a of i)await a.delete();this.relatedAuthorizations.related=Xn(n,i);return}if(i.length===0){await this.createPublicAuthorization(s);return}for(const a of i)await a.update({modes:s})}}async createDocumentACLResource(e){this.relatedAuthorizations.enable();const n=zt("SolidACLAuthorization"),r=this.authorizations.filter(s=>s.modes.includes(n.rdfTerm("acl:Control"))).map(s=>je(new n(s.getAttributes()),i=>{var o;i.accessTo=[this.requireDocumentUrl()],i.accessToClasses=[],i.default=[],i.mintUrl(this.relatedAuthorizations.requireACLUrl(),!1,((o=qa(s.url))==null?void 0:o.fragment)??$n())}));for(const s of r)await s.save();this.relatedAuthorizations.related=r,this.relatedAuthorizations.effectiveACLUrl=this.relatedAuthorizations.aclUrl,await this.createPublicAuthorization(e)}async createPublicAuthorization(e){var n;this.relatedAuthorizations.enable();const r=zt("SolidACLAuthorization"),s=await r.createInDocument({agentClasses:[r.rdfTerm("foaf:Agent")],accessTo:[this.requireDocumentUrl()],modes:e},this.relatedAuthorizations.requireACLUrl(),"public");(n=this.relatedAuthorizations.related)==null||n.push(s)}}let Oy;function Xs(t){return up()[t]}function up(){return Oy??(Oy={Operation:zt("Operation"),PropertyOperation:zt("PropertyOperation"),AddPropertyOperation:zt("AddPropertyOperation"),RemovePropertyOperation:zt("RemovePropertyOperation"),SetPropertyOperation:zt("SetPropertyOperation"),UnsetPropertyOperation:zt("UnsetPropertyOperation"),DeleteOperation:zt("DeleteOperation")})}class jC{async migrateSchema(e,n={}){if(this.isDirty())throw new qe("Can't migrate dirty model, call save() before proceeding.");const r=MC(e,this.static()),{model:s,updates:i}=await this.getSchemaUpdates(r,n);return await this.updateEngineDocumentSchema(i),s}async getSchemaUpdates(e,n){const{removed:r,added:s}=Ro(Object.keys(this.static().fields),Object.keys(e.fields)),i=await this.newInstanceForSchema(e,s,r),o=i.url!==this.url?i.url:null,a=(await this.getOperationSchemaUpdates(i,r,o,n)).concat(this.getMetadataSchemaUpdates(o)).concat(this.getUrlSchemaUpdates(o)).concat([this.getResourceSchemaUpdate(i,o)]);return{model:i,updates:a}}async newInstanceForSchema(e,n,r){var s,i;const o=Xs("PropertyOperation"),a=e.newInstance(je(this.getAttributes(),l=>{l.url=`${this.requireDocumentUrl()}#${e.defaultResourceHash}`;for(const c of r)delete l[c]}),!0);return a.setRelationModels("operations",this.operations.filter(l=>{if(!cn(l,o))return!0;const c=this.static().getRdfPropertyField(l.property);return!c||!r.includes(c)})),n.forEach(l=>{a.hasAttribute(l)&&(a._dirtyAttributes[l]=a.getAttributeValue(l))}),await((i=(s=a.static().hooks)==null?void 0:s.beforeSave)==null?void 0:i.call(a)),a.operations.length>0&&await a.addDirtyHistoryOperations(),a}async getOperationSchemaUpdates(e,n,r,s){var i;const o=[],a=[],l=Xs("PropertyOperation"),c=this.usingSolidEngine()?Ty:"resource",u=this.usingSolidEngine()?bC:"property";await e.loadRelationIfUnloaded("operations");for(const d of e.operations){if(o.push(d.url),!d.exists()){d.date=this.getUpdatedAtAttribute(),d.resourceUrl=e.url;const y=(i=s.mintOperationUrl)==null?void 0:i.call(s,d);y?d.url=y:d.mintUrl(),a.push({$push:d.serializeToJsonLD({includeRelations:!1,includeAnonymousHashes:!0})});continue}if(!cn(d,l)){r&&a.push({$updateItems:{$where:{"@id":d.url},$update:{[c]:{"@id":r}}}});continue}const f=this.static().getRdfPropertyField(d.property),h=f&&e.static().getFieldRdfProperty(f),m=kn({[c]:r?{"@id":r}:null,[u]:h&&h!==d.property?{"@id":h}:null});Object.keys(m).length!==0&&a.push({$updateItems:{$where:{"@id":d.url},$update:m}})}for(const d of this.operations)o.includes(d.url)||a.push({$updateItems:{$where:{"@id":d.url},$unset:!0}});return a}getMetadataSchemaUpdates(e){if(!e||!this.metadata)return[];const n=this.usingSolidEngine()?Ty:"resource";return[{$updateItems:{$where:{"@id":this.metadata.url},$update:{[n]:{"@id":e}}}}]}getUrlSchemaUpdates(e){return e?[{$updateItems:{$where:{"@id":this.url},$update:{"@id":e}}}]:[]}getResourceSchemaUpdate(e,n){return{$updateItems:{$where:{"@id":n??this.url},$override:e.serializeToJsonLD({includeRelations:!1,includeAnonymousHashes:!0})}}}async updateEngineDocumentSchema(e){const n=this.requireDocumentUrl();await this.requireEngine().update(Kt(n),n,e.length===1?{"@graph":e[0]}:{"@graph":{$apply:e}})}}function dc(t,e,n,r){const s=i=>kn({type:i,rdfProperty:e,rdfPropertyAliases:n,required:r});switch(typeof t){case"string":return s(ke.String);case"number":case"bigint":return s(ke.Number);case"boolean":return s(ke.Boolean);case"object":return t===null?s(ke.Any):t instanceof Hn?s(ke.Key):t instanceof Date?s(ke.Date):Array.isArray(t)?kn({required:r,rdfProperty:e,type:ke.Array,items:t.length>0?dc(t[0]):s(ke.Any)}):kn({required:r,rdfProperty:e,type:ke.Object,fields:Object.entries(t).reduce((i,[o,a])=>(i[o]=dc(a),i),{})});default:return s(ke.Any)}}function UC(t){return zw(t)}class dp{get protectedSolidBelongsTo(){return this}async __loadDocumentModels(e,n){const r=new Bc,s=this.parent.getAttribute(this.foreignKeyName),i=Array.isArray(s)?s:s?[s]:[],o=this.relatedClass.prepareEngineFilters(),a=Fn.reduceJsonLDGraph(n,this.parent.url),l=n["@graph"].filter(d=>i.indexOf(d["@id"])!==-1).reduce((d,f)=>(d[f["@id"]]={"@graph":[f]},d),{}),c=await Promise.all(Object.keys(r.filterDocuments(l,o)).map(d=>this.relatedClass.createFromEngineDocument(e,a,d))),u=i.filter(d=>!c.some(f=>f.url===d)&&lr(d)!==e);this.protectedSolidBelongsTo.loadDocumentModels(c,u)}}class BC{getJsonLDProperty(e,n){if(n=wt(n),n in e)return this.getJsonLDPropertyValue(e[n]);if(!("@context"in e))return null;const r=e["@context"],s=Object.entries(r).find(([a,l])=>n.startsWith(l));if(!s)return null;const i=s[0]==="@vocab"?"":`${s[0]}:`,o=e[i+n.slice(s[1].length)];return this.getJsonLDPropertyValue(o)}getJsonLDPropertyValue(e){return e===void 0?null:Array.isArray(e)&&e.length===1?e[0]:e}}const E0=new BC;class fp{get protectedSolidHas(){return this}async __loadDocumentModels(e,n){var r;const s=new Bc,i=((r=this.relatedClass.fields[this.foreignKeyName])==null?void 0:r.rdfProperty)??Xe(qe,`Field '${this.foreignKeyName}' does not exist in ${this.relatedClass.modelName} model.`),o=this.relatedClass.prepareEngineFilters(),a=Fn.reduceJsonLDGraph(n,this.parent.url),l=n["@graph"].filter(d=>{const f=E0.getJsonLDProperty(d,i);return typeof f=="object"&&f!==null&&"@id"in f&&f["@id"]===this.parent.url}).reduce((d,f)=>(d[f["@id"]]={"@graph":[f]},d),{}),c=await Promise.all(Object.keys(s.filterDocuments(l,o)).map(d=>this.relatedClass.createFromEngineDocument(e,a,d))),u=Object.keys(l).filter(d=>!c.some(f=>f.url===d)&&lr(d)!==e);this.protectedSolidHas.loadDocumentModels(c,u)}}function qC(t){return"__beforeParentCreate"in t}function zC(t){return"__afterParentSave"in t}function _i(t){return"useSameDocument"in t}function VC(t){return Uc(t,dp)}function hp(t){return Uc(t,fp)}function Py(t){return"__synchronizeRelated"in t}class Md{}class pp{constructor(e){Oe(this,"terms"),Oe(this,"reverseProperties"),this.terms=e,this.reverseProperties=new Map}static fromRdfClasses(e,n){const[r,...s]=Object.entries(e),i={name:"@vocab",compactingPrefix:"",value:r==null?void 0:r[1],used:!0},o=s.reduce((a,[l,c])=>(c!==i.value&&a.push({name:l,value:c,compactingPrefix:`${l}:`,used:n.some(u=>u.startsWith(c))}),a),[i]);return new pp(o)}addReverseProperty(e,n){this.reverseProperties.set(e,n)}addTerms(e,n){for(const[r,s]of Object.entries(e)){const i=this.terms.find(l=>l.value===s);if(i){i.used||(i.used=n.some(l=>l.startsWith(s)));continue}let o=r,a=1;for(;this.terms.some(l=>l.name===o);)o=`${r}${++a}`;this.terms.push({name:r,value:s,compactingPrefix:`${r}`,used:n.some(l=>l.startsWith(s))})}}getTermForExpandedIRI(e){return this.terms.find(n=>e.startsWith(n.value))??null}render(){const e=this.terms.reduce((n,r)=>(r.used&&(n[r.name]=r.value),n),{});return this.reverseProperties.forEach((n,r)=>{e[r]={"@reverse":n}}),e}}class ao{constructor(e,n){Oe(this,"context"),Oe(this,"iriFormat"),this.context=e,this.iriFormat=n}static forModel(e,n=!0){const r=e.fields,s=en(Object.values(r).map(o=>o.rdfProperty)),i=pp.fromRdfClasses(e.rdfContexts,s);return new ao(i,n?"compacted":"expanded")}serialize(e,n={}){const r=n.attributes??e.getAttributes(),s=new Set(n.ignoreModels??[]),i={"@context":{},"@type":null};s.add(e);for(const[o,a]of Object.entries(r))this.setJsonLDField(i,e,o,a,n);if(!(e.static("primaryKey")in r)&&n.includeAnonymousHashes){const o=e.static("defaultResourceHash");o&&!Jt()&&(i["@id"]=`#${o}`)}return(n.includeRelations??!0)&&this.setJsonLDRelations(i,e,s),n.includeTypes??!0?this.setJsonLDTypes(i,e):delete i["@type"],n.includeContext??!0?this.setJsonLDContext(i):delete i["@context"],i}processExpandedIRI(e){return this.iriFormat==="expanded"?e:this.compactExpandedIRI(e)}compactExpandedIRI(e){const n=this.context.getTermForExpandedIRI(e);return n?je(n.compactingPrefix+e.slice(n.value.length),()=>n.used=!0):e}setJsonLDField(e,n,r,s,i){if(r===n.static("primaryKey")){e["@id"]=Tt(s);return}const o=n.static().getFieldRdfProperty(r);o&&this.setJsonLDProperty(e,n,this.processExpandedIRI(o),r,s,i)}setJsonLDRelations(e,n,r){for(const s of n.static("relations")){const i=n.requireRelation(s),o=i.getLoadedModels()[0];if(!i.enabled||!i.loaded||!_i(i)||i.isEmpty()||o&&r.has(o))continue;const a=i.relatedClass.fields,l=en(Object.values(a).map(c=>c.rdfProperty));this.context.addTerms(i.relatedClass.rdfContexts,l),this.setJsonLDRelation(e,i,r)}}setJsonLDRelation(e,n,r){const s=n.relatedClass.instance(),i=n.related,o=hp(n),a=o?s.static().getFieldRdfProperty(n.foreignKeyName):n.parent.static().getFieldRdfProperty(n.foreignKeyName),l=this.processExpandedIRI(a),c={ignoreModels:r,includeRelations:!0,includeContext:!1},u=o?d=>je(this.serialize(d,c),f=>{delete f[l]}):d=>this.serialize(d,c);i&&(o&&this.context.addReverseProperty(n.name,l),e[o?n.name:l]=Array.isArray(i)?i.map(d=>u(d)):u(i))}setJsonLDTypes(e,n){const r=n.static("rdfsClasses").map(s=>this.processExpandedIRI(s));e["@type"]=r.length===1?r[0]:r}setJsonLDContext(e){e["@context"]=this.context.render()}setJsonLDProperty(e,n,r,s,i,o){const a=n.static().getFieldDefinition(s,i);if(i=this.castJsonLDValue(i,a),a.serialize&&(i=a.serialize(i)),i instanceof Md){o.keepEmptyValues&&(e[r]=null);return}e[r]=i}castJsonLDValue(e,n){switch(n.type){case ke.Any:{if(e==null)return new Md;const r=dc(e,n.rdfProperty,n.rdfPropertyAliases,n.required);if(r.type===ke.Any)throw new qe("Couldn't infer field definition for a field declared as any");return this.castJsonLDValue(e,r)}case ke.Key:return{"@id":Tt(e)};case ke.Date:return typeof e=="object"&&e!==null&&"$unset"in e?e:{"@type":"http://www.w3.org/2001/XMLSchema#dateTime","@value":new Date(e).toISOString()};case ke.Array:{const r=e,s=n.items;switch(r.length){case 0:return new Md;case 1:return this.castJsonLDValue(r[0],s);default:return r.map(i=>this.castJsonLDValue(i,s))}}default:return JSON.parse(JSON.stringify(e))}}}function tn(t){const e=t&&lg("related-models",t),n=t&&lg("document-models",t);e==null||e.forEach(r=>ug("related-models",r)),n==null||n.forEach(r=>ug("document-models",r))}class S0{constructor(){Oe(this,"useSameDocument",!1),Oe(this,"documentModelsLoaded",!1)}usingSameDocument(e=!0){return this.useSameDocument=e,this}}class Kc extends S0{constructor(){super(...arguments),Oe(this,"__removedDocumentModels",[])}get protectedSolidMulti(){return this}get super(){return new Proxy(this,{get:(e,n)=>(...r)=>Gs.prototype[n].call(this,...r)})}get __newModels(){return this.__newModelsValue??(this.__newModelsValue=[])}set __newModels(e){var n;tn(this.parent),(n=this.__newModelsValue)==null||n.forEach(r=>tn(r)),e==null||e.forEach(r=>tn(r)),this.__newModelsValue=e}isEmpty(){var e,n,r;return!this.documentModelsLoaded&&this.parent.exists()?null:(((e=this.__modelsInSameDocument)==null?void 0:e.length)||0)+(((n=this.__modelsInOtherDocumentIds)==null?void 0:n.length)||0)+this.__newModels.length+(((r=this.related)==null?void 0:r.length)||0)===0}async create(e={}){this.protectedSolidMulti.assertLoaded("create");const n=this.relatedClass.newInstance(e);return await this.save(n),n}async save(e){return this.protectedSolidMulti.assertLoaded("save"),this.attach(e),!this.useSameDocument||Jt()?(await e.save(),this.setForeignAttributes(e)):this.parent.exists()&&await this.parent.save(),e}async remove(e){this.detach(e),await this.parent.save()}detach(e){var n,r,s,i;const o=typeof e=="string"?e:e.getAttribute(this.localKeyName),a=(n=this.related)==null?void 0:n.find(l=>l.getAttribute(this.localKeyName)===o);a&&(this.related=(r=this.related)==null?void 0:r.filter(l=>l.getAttribute(this.localKeyName)!==o),this.__newModels=this.__newModels.filter(l=>l.getAttribute(this.localKeyName)!==o),this.__modelsInSameDocument=(s=this.__modelsInSameDocument)==null?void 0:s.filter(l=>l.getAttribute(this.localKeyName)!==o),this.__modelsInOtherDocumentIds=(i=this.__modelsInOtherDocumentIds)==null?void 0:i.filter(l=>l!==o),a.getDocumentUrl()===this.parent.getDocumentUrl()&&!this.parent.tracksHistory()&&this.__removedDocumentModels.push(a),hp(this)&&a.setAttribute(this.foreignKeyName,null),VC(this)&&this.parent.setAttribute(this.foreignKeyName,this.parent.getAttribute(this.foreignKeyName).filter(l=>l!==o)))}addRelated(e){var n;(n=this.related)!=null&&n.includes(e)||(this.super.addRelated(e),e.exists()||(this.__newModels=this.__newModels.concat([e])))}isRelated(e){return this.super.isRelated(e)||this.__newModels.includes(e)}__afterParentSave(){this.__removedDocumentModels=[]}cloneSolidData(e){const n=e.related??[];e.useSameDocument=this.useSameDocument,e.documentModelsLoaded=this.documentModelsLoaded,e.__newModels=[],e.__removedDocumentModels=[];for(const r of this.__newModels)e.__newModels.push(n.find(s=>s.is(r))??je(r.clone(),s=>n.push(s)));for(const r of this.__removedDocumentModels)e.__removedDocumentModels.push(n.find(s=>s.is(r))??je(r.clone(),s=>n.push(s)));this.__modelsInSameDocument&&(e.__modelsInSameDocument=this.__modelsInSameDocument.map(r=>n.find(s=>s.is(r))??r.clone())),this.__modelsInOtherDocumentIds&&(e.__modelsInOtherDocumentIds=this.__modelsInOtherDocumentIds)}loadDocumentModels(e,n){this.__modelsInSameDocument=e,this.__modelsInOtherDocumentIds=n,this.__modelsInOtherDocumentIds.length===0&&(this.related=Vn(this.related??[]).concat(this.__modelsInSameDocument)),this.documentModelsLoaded=!0}}gw(Kc,"onRelatedUpdated",function(t,e){if(this!==this.parent.requireRelation(this.name))return;const{added:n,removed:r}=Ro(t??[],e??[]);tn(this.parent),t==null||t.forEach(s=>tn(s)),e==null||e.forEach(s=>tn(s)),r.forEach(s=>this.clearInverseRelations(s)),n.forEach(s=>this.initializeInverseRelations(s))});const HC=jc(ro,[Kc,fp]);class A0 extends HC{async load(){if(this.isEmpty())return this.related=[];if(!this.__modelsInSameDocument||!this.__modelsInOtherDocumentIds)return this.related=[];const e=await this.loadRelatedModels(this.__modelsInOtherDocumentIds);return this.related=this.__modelsInSameDocument.concat(e)}reset(e=[]){this.related=[],this.__newModels=[],this.__modelsInSameDocument=[],e.forEach(n=>{var r;n.unsetAttribute(this.foreignKeyName),(r=this.related)==null||r.push(n),this.__newModels.push(n)})}clone(e={}){return je(super.clone(e),n=>{this.cloneSolidData(n)})}__beforeParentCreate(){this.documentModelsLoaded||this.loadDocumentModels([],[])}async __synchronizeRelated(e,n){const r=Vt(this.related??[],"url"),s=Vt(e.related??[],"url"),i=s.getItems().filter(a=>!r.hasKey(a.url)),o=[];for(const a of r.items()){const l=s.get(a.url);if(!l){o.push(a);continue}await a.static().synchronize(a,l,n)}this.related=Array.from(r.items()).concat(i.map(a=>a.clone({clones:je(new WeakMap,l=>l.set(e.parent,this.parent))}))),e.related=Array.from(s.items()).concat(o.map(a=>a.clone({clones:je(new WeakMap,l=>l.set(e.parent,this.parent))})))}loadRelatedModels(e){return this.relatedClass.all({$in:e})}}const I0=class Uf extends A0{constructor(e){super(e,Xs("Operation"),"resourceUrl")}attach(e={},n){const r=Xs("Operation"),s=e instanceof r?e:Xs(n??"SetPropertyOperation").newInstance(e);if(s.constructor===r)throw new Error("Creating base operations is meaningless, you should create a specific operation instead (add property, remove property, etc.)");return super.attach(s)}attachAddOperation(e){return this.attach(e,"AddPropertyOperation")}attachRemoveOperation(e){return this.attach(e,"RemovePropertyOperation")}attachSetOperation(e){return this.attach(e,"SetPropertyOperation")}attachUnsetOperation(e){return this.attach(e,"UnsetPropertyOperation")}attachDeleteOperation(e){return this.attach(e,"DeleteOperation")}async __loadDocumentModels(e,n){var r;const s=((r=this.relatedClass.fields[this.foreignKeyName])==null?void 0:r.rdfProperty)??Xe(qe,`Field '${this.foreignKeyName}' does not exist in ${this.relatedClass.modelName} model.`),i=Fn.reduceJsonLDGraph(n,this.parent.url),o=n["@graph"].filter(c=>{const u=E0.getJsonLDProperty(c,s);return typeof u=="object"&&u!==null&&"@id"in u&&u["@id"]===this.parent.url}),a=en(await Promise.all(o.map(async c=>{var u;return(u=this.getOperationClass(c))==null?void 0:u.createFromEngineDocument(e,i,c["@id"])}))),l=o.map(c=>c["@id"]).filter(c=>!a.some(u=>u.url===c)&&lr(c)!==e);this.protectedSolidHas.loadDocumentModels(a,l)}async loadRelatedModels(){throw new Error("loading operations from different documents has not been implemented yet")}getOperationClass(e){const n=this.getOperationMatchers(),r=un(e["@type"]??[]),s=n.find(i=>i.match(r));return s==null?void 0:s.operation}getOperationMatchers(){return Uf.operationMatchers??(Uf.operationMatchers=Object.values(up()).map(e=>{const n=ao.forModel(e),r=e.rdfsClasses,s=r.map(o=>n.processExpandedIRI(o)),i=r.concat(s);return{operation:e,match:o=>i.some(a=>o.includes(a))}}))}};Oe(I0,"operationMatchers");let KC=I0;class WC{serializeToJsonLD(e={}){return e.includeRelations??(e.includeRelations=!0),ao.forModel(this.static()).serialize(this,e)}async parseEngineDocumentAttributesFromJsonLD(e,n){const r=e,s=r["@graph"].find(l=>l["@id"]===n)??Xe(lp,n,e.url),i=await Fn.resourceFromJsonLDGraph(r,n,s),o=this.static("fields"),a={};a[this.static("primaryKey")]=n;for(const[l,c]of Object.entries(o)){if(!c.rdfProperty)continue;const u=(i.propertiesIndex[c.rdfProperty]??c.rdfPropertyAliases.reduce((h,m)=>h.concat(i.propertiesIndex[m]??[]),[])).map(h=>h.type===js.Reference?new Hn(h.value):h.value),[d,...f]=u;typeof d>"u"||(a[l]=f.length>0?[d].concat(f):d)}return a}convertEngineFiltersToJsonLD(e,n){const r={},s=ao.forModel(this.static()),i=this.static("rdfsClasses"),o=i.map(c=>s.processExpandedIRI(c)),a=[];i.length>0&&(a.push({$contains:o}),a.push({$contains:i})),i.length===1&&(a.push({$eq:o[0]}),a.push({$eq:i[0]})),this.static("rdfsClassesAliases").forEach(c=>{c.length>0&&a.push({$contains:c}),c.length===1&&a.push({$eq:c[0]})}),e.$in&&(r.$in=e.$in,delete e.$in);const l=this.convertAttributeValuesToJsonLD(e,{compactIRIs:n,keepEmptyValues:!1});return a.length>0&&(l["@type"]={$or:a}),Object.keys(l).length>0&&(r["@graph"]={$contains:l}),r}convertEngineUpdatesToJsonLD(e,n){const r=this.convertAttributeValuesToJsonLD(e,{compactIRIs:n,keepEmptyValues:!0});for(const[s,i]of Object.entries(r))i===null&&(r[s]={$unset:!0});return r}convertAttributeValuesToJsonLD(e,n){return ao.forModel(this.static(),n.compactIRIs).serialize(this,{includeContext:!1,includeTypes:!1,includeRelations:!1,keepEmptyValues:n.keepEmptyValues,attributes:e})}}class GC extends Gs{constructor(e){const n=zt("SolidACLAuthorization");super(e,n)}requireACLUrl(){return this.aclUrl??Xe("Could not get ACL Url")}isDocumentACL(){return!this.aclUrl||!this.effectiveACLUrl?null:this.aclUrl===this.effectiveACLUrl}setForeignAttributes(){}clearForeignAttributes(){}async load(){const e=zt("SolidACLAuthorization"),n=await hC(this.parent.requireDocumentUrl(),e.requireFetch()),r=await Hc(n.document.statements()),s=await Promise.all(n.document.statements(void 0,"rdf:type","acl:Authorization").map(({subject:i})=>e.createFromEngineDocument(n.effectiveUrl,r,i.value)));return this.aclUrl=n.url,this.effectiveACLUrl=n.effectiveUrl,this.related=s,s}}const JC=jc(no,[Kc,dp]);class C0 extends JC{async load(){var e;if((!this.__modelsInSameDocument||!this.__modelsInOtherDocumentIds)&&(this.__modelsInSameDocument=[],this.__modelsInOtherDocumentIds=this.parent.getAttribute(this.foreignKeyName)),this.isEmpty())return this.related=[];const n={};for(const s of this.__modelsInOtherDocumentIds??[]){const i=ar(s)??Yr(s);i in n||(n[i]=new Set),(e=n[i])==null||e.add(lr(s))}const r=(await Promise.all(Object.entries(n).map(([s,i])=>this.relatedClass.from(s).all({$in:Array.from(i)})))).reduce((s,i)=>(s.push(...i),s),[]);return this.related=this.__modelsInSameDocument.concat(this.__newModels).concat(r)}associate(e){const n=this.parent.getAttribute(this.foreignKeyName),r=Hn.from(e);this.parent.setAttribute(this.foreignKeyName,n.concat(r))}disassociate(e){const n=this.parent.getAttribute(this.foreignKeyName),r=Hn.from(e);this.parent.setAttribute(this.foreignKeyName,n.filter(s=>!r.equals(Hn.from(s))))}reset(e=[]){this.related=[],this.__newModels=[],this.__modelsInSameDocument=[];const n=this.parent.getAttribute(this.foreignKeyName);e.forEach(r=>{var s;jn(n,r.getAttribute(this.localKeyName)),(s=this.related)==null||s.push(r),this.__newModels.push(r)}),this.parent.setAttribute(this.foreignKeyName,n)}clone(e={}){return je(super.clone(e),n=>{this.cloneSolidData(n)})}__beforeParentCreate(){if(this.documentModelsLoaded)return;const e=this.parent.getAttribute(this.foreignKeyName);if(!Array.isArray(e))throw new Error(`Foreign key (${this.foreignKeyName}) for '${this.name}' relation in '${this.parent.static("modelName")}' model is missing.`);this.loadDocumentModels([],e)}async __synchronizeRelated(e,n){const{SetPropertyOperation:r,AddPropertyOperation:s,RemovePropertyOperation:i}=up(),o=this.parent.static().getFieldRdfProperty(this.foreignKeyName),a=this.localKeyName,l=Vt(this.related??[],a),c=Vt(e.related??[],a),u=je(new WeakMap,f=>f.set(e.parent,this.parent));this.parent.operations.filter(f=>!f.exists()&&(f instanceof r||f instanceof s||f instanceof i)&&f.property===o).map(f=>un(f.value)).flat().map(f=>c.get(f instanceof Hn?f.toString():f)).filter(f=>!!f).forEach(f=>{var h;if(l.hasKey(f.getAttribute(a)))return;const m=f.clone({clones:u});(h=this.related)==null||h.push(m),l.add(m)});const d=await Promise.all(this.parent.getAttribute(this.foreignKeyName).map(async f=>{const h=l.get(f),m=c.get(f);return!h||!m||await h.static().synchronize(h,m,n),h}));this.related=en(d).concat(this.__newModels)}}class Wc extends S0{get super(){return new Proxy(this,{get:(e,n)=>(...r)=>To.prototype[n].call(this,...r)})}get __newModel(){return this.__newModelValue}set __newModel(e){tn(this.parent),tn(this.__newModelValue),tn(e),this.__newModelValue=e}isEmpty(){return!this.documentModelsLoaded&&this.parent.exists()?null:!(this.__modelInSameDocument||this.__modelInOtherDocumentId||this.__newModel||this.related)}async create(e={}){this.assertNotLoadedOrEmpty("create");const n=this.relatedClass.newInstance(e);return await this.save(n),n}async save(e){return this.assertNotLoadedOrEmpty("save"),this.attach(e),!this.useSameDocument||Jt()?await e.save():this.parent.exists()&&await this.parent.save(),e}addRelated(e){this.related!==e&&(this.super.addRelated(e),e.exists()||(this.__newModel=e))}isRelated(e){return this.super.isRelated(e)||this.__newModel===e}cloneSolidData(e){let n=e.related??null;e.useSameDocument=this.useSameDocument,e.documentModelsLoaded=this.documentModelsLoaded,this.__newModel&&(this.__newModel=n??je(this.__newModel.clone(),r=>n=r)),this.__modelInSameDocument&&(e.__modelInSameDocument=n??this.__modelInSameDocument.clone()),this.__modelInOtherDocumentId&&(e.__modelInOtherDocumentId=this.__modelInOtherDocumentId)}loadDocumentModels(e,n){var r;if(e.length+n.length>1&&console.warn(`The ${this.name} relationship in ${this.parent.static("modelName")} has been declared as hasOne, but more than one related model were found.`),e.length>0){if(this.__modelInSameDocument=e[0],this.documentModelsLoaded=!0,this.related=this.__modelInSameDocument,!((r=this.__modelInSameDocument)!=null&&r.exists())){this.__newModel=this.__modelInSameDocument;return}this.__newModel=void 0;return}if(n.length>0){this.__modelInOtherDocumentId=n[0],this.documentModelsLoaded=!0;return}this.documentModelsLoaded=!0}async synchronizeRelated(e,n){if(!this.related&&e.related){this.related=e.related.clone({clones:je(new WeakMap,s=>s.set(e.parent,this.parent))});return}if(!e.related||!this.related)return;const r=this.parent.getAttribute(this.foreignKeyName);if(await this.related.static().synchronize(this.related,e.related,n),this.__newModel||this.related.url===r){this.related=this.__newModel??this.related;return}e.related.url===r&&(this.related=e.related.clone({clones:je(new WeakMap,s=>s.set(e.parent,this.parent))}))}assertNotLoadedOrEmpty(e){if(!(!this.loaded||!this.related))throw new qe(`The "${e}" method can't be called because a related model already exists, use a hasMany relationship if you want to support multiple related models.`)}}gw(Wc,"onRelatedUpdated",function(t,e){this===this.parent.requireRelation(this.name)&&(tn(this.parent),tn(t),tn(e),t&&this.clearInverseRelations(t),e&&this.initializeInverseRelations(e))});const XC=jc(ua,[Wc,dp]);class YC extends XC{async load(){if(this.__modelInSameDocument)return this.related=this.__modelInSameDocument;const e=this.__modelInOtherDocumentId??this.parent.getAttribute(this.foreignKeyName);if(!e)return this.related=null;const n=await this.relatedClass.find(e);return this.related=n}reset(e=[]){const n=e[0];delete this.related,delete this.__modelInSameDocument,delete this.__modelInSameDocument,n&&(this.parent.unsetAttribute(this.foreignKeyName),this.related=n,this.__newModel=n)}clone(e={}){return je(super.clone(e),n=>{this.cloneSolidData(n)})}__beforeParentCreate(){if(this.documentModelsLoaded)return;const e=this.parent.getAttribute(this.foreignKeyName);this.loadDocumentModels([],e?[e]:[])}async __synchronizeRelated(e,n){if(!this.related||!e.related||this.related.url!==e.related.url)return;const r=this.parent.getAttribute(this.foreignKeyName);if(await this.related.static().synchronize(this.related,e.related,n),this.__newModel||this.related.url===r){this.related=this.__newModel??this.related;return}e.related.url===r&&(this.related=e.related.clone({clones:je(new WeakMap,s=>s.set(e.parent,this.parent))}))}}const QC=jc(Ii,[Wc,fp]);class ZC extends QC{async load(){if(this.isEmpty())return this.related=null;if(!(this.__modelInSameDocument||this.__modelInOtherDocumentId))return this.related=null;const e=await(async()=>this.__modelInSameDocument?this.__modelInSameDocument:this.__modelInOtherDocumentId?this.relatedClass.find(this.__modelInOtherDocumentId):null)();return this.related=e}async remove(){if(!this.related)return;const e=this.related;this.related=null,await e.delete()}reset(e=[]){const n=e[0];this.related=void 0,this.__newModel=void 0,delete this.__modelInSameDocument,n&&(n.unsetAttribute(this.foreignKeyName),this.related=n,this.__newModel=n)}clone(e={}){return je(super.clone(e),n=>{this.cloneSolidData(n)})}__beforeParentCreate(){this.documentModelsLoaded||this.loadDocumentModels([],[])}async __synchronizeRelated(e,n){if(this.related&&e.related&&this.related.url===e.related.url){await this.related.static().synchronize(this.related,e.related,n);return}if(!(!e.related||this.related&&this.related.url!==e.related.url)&&!this.related){this.related=e.related.clone({clones:je(new WeakMap,r=>r.set(e.parent,this.parent))});return}}}class R0 extends To{constructor(e,n){super(e,n,"resourceUrls","url")}isEmpty(){return!1}setForeignAttributes(e){const n=this.parent.getDocumentUrl();if(!n||!this.parent.url||e.resourceUrls.includes(n))return;const r=e.resourceUrls.concat([n]);this.parent.usingSolidEngine()?e.setOriginalAttribute("resourceUrls",r):e.setAttribute("resourceUrls",r)}clearForeignAttributes(e){const n=this.parent.getDocumentUrl();if(!n||!this.parent.url||!e.resourceUrls.includes(n))return;const r=Xn(e.resourceUrls,n);this.parent.usingSolidEngine()?e.setOriginalAttribute("resourceUrls",r):e.setAttribute("resourceUrls",r)}async load(){const e=this.relatedClass.collection,n=Kt(this.parent.url);return this.related=await this.relatedClass.from(ar(n)??Yr(n)).find(n),this.relatedClass.collection=e,this.related}onRelatedUpdated(e,n){this===this.parent.requireRelation(this.name)&&(tn(this.parent),tn(e),tn(n),e&&this.clearInverseRelations(e),n&&this.initializeInverseRelations(n))}}class eR extends To{constructor(e){super(e,zt("Tombstone"))}create(){const e=zt("Tombstone");this.related=new e({url:this.parent.metadata.url,resourceUrl:this.parent.url,deletedAt:new Date})}async load(){return null}setForeignAttributes(){}clearForeignAttributes(){}}const Nd=new WeakMap;function nr(t,e){return t[e]}async function tR(t,e,n){if(t.getPrimaryKey()!==e.getPrimaryKey())throw new qe("Can't synchronize different models");if(!(n.has(t)||n.has(e))){n.add(t),n.add(e),await t.loadRelationIfUnloaded("operations"),await e.loadRelationIfUnloaded("operations"),(t.operations.length>0||e.operations.length>0)&&(t.addHistoryOperations(e.operations),e.addHistoryOperations(t.operations));for(const r of Xn(t.static().relations,t.static().reservedRelations)){const s=t.requireRelation(r),i=e.requireRelation(r);!s.enabled||!i.enabled||(await If(s,Py).__synchronizeRelated(i,n),await If(i,Py).__synchronizeRelated(s,n))}}}class nR{tracksHistory(){return Nd.has(this)?!1:this._history??this.static("history")}withoutTrackingHistory(e){if(!this.tracksHistory())return e();const n=()=>(Nd.delete(this),!0);Nd.set(this);const r=e();return ZS(r)?r.then(s=>n()&&s):n()&&r}enableHistory(){this._history=!0}disableHistory(){this._history=!1}disableTombstone(){this._tombstone=!1}enableTombstone(){this._tombstone=!0}leavesTombstone(){return this._tombstone??this.static("tombstone")}getHistoryHash(){const e=this.getRelatedModels().map(n=>n.operations??[]).flat();return e.length===0?null:FS(la(e,"url").reduce((n,r)=>n+r.url,""))}rebuildAttributesFromHistory(){var e,n;if(!this.hasRelation("operations")||!this.isRelationLoaded("operations"))throw new qe("Can't rebuild attributes from history if 'operations'  relation isn't loaded");if(this.operations.length===0)return;const r=Xs("PropertyOperation"),s=la(this.operations,"date"),i=new Set(Object.keys(nr(this,"_attributes"))),o=Object.entries(this.static("fields")).filter(([a,l])=>l.type===ke.Array);i.delete(this.static("primaryKey")),i.delete(At.CreatedAt),i.delete(At.UpdatedAt),o.forEach(([a,l])=>{this.ignoreRdfPropertyHistory(l.rdfProperty)||this.setAttribute(a,[])}),s.forEach(a=>{if(a instanceof r){const l=this.static().getRdfPropertyField(a.property);l&&i.delete(l)}a.apply(this)}),i.forEach(a=>{const l=this.static().getFieldRdfProperty(a);l&&this.ignoreRdfPropertyHistory(l)||this.unsetAttribute(a)}),this.setAttribute("createdAt",(e=s[0])==null?void 0:e.date),this.setAttribute("updatedAt",(n=s[s.length-1])==null?void 0:n.date)}addHistoryOperations(e){const n=Xs("PropertyOperation"),r=new Set(this.operations.map(a=>a.url)),s=[],i=new Set,o=Object.keys(this.static("fields")).reduce((a,l)=>{const c=this.static().getFieldRdfProperty(l);return c&&(a[c]=l),a},{});for(const a of e){if(r.has(a.url)||a instanceof n&&this.ignoreRdfPropertyHistory(a.property))continue;const l=a.clone();l.reset(),l.url=a.url,s.push(l),a instanceof n&&a.property in o&&i.add(a.property)}if(s.some(a=>!a.isInception(this))){this.setRelationModels("operations",la(this.operations.concat(s),["date","url"])),this.removeDuplicatedHistoryOperations(),this.rebuildAttributesFromHistory();for(const a of i){const l=o[a];nr(this,"_trackedDirtyAttributes")[l]=nr(this,"_dirtyAttributes")[l]}}}async addDirtyHistoryOperations(){const e=nr(this,"_trackedDirtyAttributes");if(await this.loadRelationIfUnloaded("operations"),"url"in nr(this,"_dirtyAttributes"))throw new qe(`It wasn't possible to generate the changes history for a model because its primary key was modified from '${this.url}' to '${nr(this,"_originalAttributes").url}'.`);if(this.operations.length===0){const n=kn(vs(nr(this,"_originalAttributes"),[this.static("primaryKey")]));for(const[r,s]of Object.entries(n)){if(s===null||Array.isArray(s)&&s.length===0||r in e&&e[r]===s)continue;const i=this.static().getFieldRdfProperty(r);i&&this.ignoreRdfPropertyHistory(i)||this.relatedOperations.attachSetOperation({property:this.static().requireFieldRdfProperty(r),date:this.metadata.createdAt,value:this.getOperationValue(r,s)})}}for(const[n,r]of Object.entries(nr(this,"_dirtyAttributes"))){if(n in e&&e[n]===r)continue;const s=this.static().getFieldRdfProperty(n);if(!(s&&this.ignoreRdfPropertyHistory(s))){if(Array.isArray(r)){this.addArrayHistoryOperations(n,r,nr(this,"_originalAttributes")[n]);continue}if(r==null){this.relatedOperations.attachUnsetOperation({property:this.static().requireFieldRdfProperty(n),date:this.metadata.updatedAt});continue}this.relatedOperations.attachSetOperation({property:this.static().requireFieldRdfProperty(n),date:this.metadata.updatedAt,value:this.getOperationValue(n,r)})}}this.metadata.isDirty("deletedAt")&&this.metadata.deletedAt&&this.relatedOperations.attachDeleteOperation({date:this.metadata.deletedAt})}removeDuplicatedHistoryOperations(){const e=Xs("PropertyOperation"),n=[],r=[],s=this.operations.filter(o=>o.isInception(this)),i=o=>!r.includes(o.url);for(const o of s)if(o instanceof e){if(!n.includes(o.property)){n.push(o.property);continue}r.push(o.url),o.exists()&&nr(this,"_removedResourceUrls").push(o.url)}this.setRelationModels("operations",this.operations.filter(i))}getOperationValue(e,n){const r=this.static().getFieldDefinition(e,n);return zw(r)?en(un(n,!0).map(s=>this.getOperationValue(`${e}.*`,s))):(n&&r.type===ke.Key&&(n=new Hn(n)),r.serialize&&(n=r.serialize(n)),n)}addArrayHistoryOperations(e,n,r){const s=un(this.getOperationValue(e,r),!0),i=un(this.getOperationValue(e,n),!0),{added:o,removed:a}=Ro(s,i,(l,c)=>l instanceof Hn&&c instanceof Hn?l.equals(c):l===c);o.length>0&&this.relatedOperations.attachAddOperation({property:this.static().getFieldRdfProperty(e),date:this.metadata.updatedAt,value:en(o)}),a.length>0&&this.relatedOperations.attachRemoveOperation({property:this.static().getFieldRdfProperty(e),date:this.metadata.updatedAt,value:en(a)})}reconcileModelTimestamps(e){var n;const[r,...s]=this.operations??[];if(r){this.setAttribute(At.UpdatedAt,s.reduce((a,l)=>a>l.date?a:l.date,r.date));return}if(e)return;const i=nr(this,"_originalAttributes")[At.UpdatedAt]??((n=this.metadata)==null?void 0:n.getOriginalAttribute(At.UpdatedAt));if(!i)return;const o=Object.keys(nr(this,"_dirtyAttributes"));o[1]||o[0]&&o[0]!==At.UpdatedAt||this.setAttribute(At.UpdatedAt,i)}}function yl(t){return Uc(t,Kc)}function Fd(t){return Uc(t,Wc)}const rR=Fc(Ci,[NC,FC,jC,WC,nR]);class Dt extends rR{constructor(){super(...arguments),Oe(this,"_sourceSubject",{}),Oe(this,"_lock",new Kh)}static getFieldDefinition(e,n){if(e.endsWith(".*")){const r=this.getFieldDefinition(e.slice(0,-2),Array.isArray(n)&&n.length>0?n[0]:void 0);if(!UC(r))throw new qe("Can't get item field definition for non-array field");return{type:r.items.type,rdfProperty:r.rdfProperty,rdfPropertyAliases:r.rdfPropertyAliases,required:!1}}return this.fields[e]??dc(n,this.getDefaultRdfContext()+e,[],!1)}static getFieldRdfProperty(e){const n=this.fields[e];return n&&!n.rdfProperty?null:(n==null?void 0:n.rdfProperty)??this.getDefaultRdfContext()+e}static getRdfPropertyField(e){return(this.rdfPropertyFields??(this.rdfPropertyFields=gS(Vt(Object.keys(this.fields),n=>this.getFieldRdfProperty(n)))))[e]??null}static async updateSchema(e){await super.updateSchema(e),delete this.rdfPropertyFields}static requireFetch(){if(!this.usingSolidEngine())throw new qe(`Could not get fetch from ${this.modelName} model`);return this.requireFinalEngine().getFetch()}static requireFieldRdfProperty(e){return this.getFieldRdfProperty(e)??Xe(`Couldn't get required property for rdf field '${e}'`)}static usingSolidEngine(){return!!this.requireFinalEngine().__isSolidEngine}static useSoftDeletes(e){this.softDeletesEnabled=e}static from(e){return this.collection=e,this}static at(e){return this.from(e)}static boot(e){var n,r,s,i;this.modelName=this.bootModelName(e),this.rdfContexts=this.bootRdfContexts(((n=Object.getOwnPropertyDescriptor(this,"rdfContext"))==null?void 0:n.value)??null,((r=Object.getOwnPropertyDescriptor(this,"rdfContexts"))==null?void 0:r.value)??{},this.rdfsClass),this.rdfsClasses=this.bootRdfsClasses(((s=Object.getOwnPropertyDescriptor(this,"rdfsClass"))==null?void 0:s.value)??null,((i=Object.getOwnPropertyDescriptor(this,"rdfsClasses"))==null?void 0:i.value)??null,this.rdfContexts),this.rdfsClassesAliases=this.bootRdfsClassesAliases(this.rdfsClassesAliases,this.rdfContexts),super.boot(e)}static aliasRdfPrefixes(e){var n;this.ensureBooted();for(const[r,s]of Object.entries(e)){const i=this.rdfsClasses.reduce((o,a)=>(a.startsWith(r)&&o.push(a.replace(r,s)),o),[]);i.length>0&&this.rdfsClassesAliases.push(i);for(const o of Object.values(this.fields))(n=o.rdfProperty)!=null&&n.startsWith(r)&&o.rdfPropertyAliases.push(o.rdfProperty.replace(r,s))}}static resetRdfAliases(){this.rdfsClassesAliases=[];for(const e of Object.values(this.fields))e.rdfPropertyAliases&&(e.rdfPropertyAliases=[])}static replaceRdfPrefixes(e){var n;this.ensureBooted();for(const[r,s]of Object.entries(e)){this.rdfsClasses=this.rdfsClasses.map(i=>i.replace(r,s));for(const i of Object.values(this.fields))(n=i.rdfProperty)!=null&&n.startsWith(r)&&(i.rdfProperty=i.rdfProperty.replace(r,s))}}static createFromEngineDocument(e,n,r){return this.instance().createFromEngineDocument(e,n,r)}static async find(e){const n=Vn([this.rdfsClasses,...this.rdfsClassesAliases].flat()),r=this.instance().serializeKey(e),s=lr(r),i=ar(s)??Yr(s);this.ensureBooted();try{const{documentPermissions:o,stopTracking:a}=this.instance().trackPublicPermissions(),l=await this.requireEngine().readOne(i,s),c=await Fn.resourceFromJsonLDGraph(l,r);if(!n.some(d=>c.isType(d)))return null;const u=await this.instance().createFromEngineDocument(s,l,r);return a(),u._publicPermissions=o[s],u}catch(o){if(NS()&&!cn(o,zr)&&!cn(o,lp)&&!cn(o,Pd))throw o;return null}}static async all(e={}){e=this.prepareEngineFilters(e);const{documentPermissions:n,stopTracking:r}=this.instance().trackPublicPermissions(),s=await this.withCollection(()=>super.all(e));return r(),s.forEach(i=>i._publicPermissions=n[i.requireDocumentUrl()]),s}static prepareEngineFilters(e={}){const n=!this.usingSolidEngine();return this.instance().convertEngineFiltersToJsonLD(e,n)}static rdfTerm(e,n){return n??(n=this.rdfContexts),Js(e,kn({extraContext:n,defaultPrefix:Object.values(n).shift()}))}static async newFromJsonLD(e,n,r){const s=oC(e),i=await Fn.fromJsonLD(s,n??this.collection),o=await i.toJsonLD(),a=r??this.findMatchingResourceIds(i.statements,n)[0]??Xe(qe,"Couldn't find matching resource in JSON-LD"),l=i.resource(a),c=n||lr(a),u=await this.instance().parseEngineDocumentAttributes(c,o,a);return this.hasAutomaticTimestamp(At.CreatedAt)&&(u.createdAt=l==null?void 0:l.getPropertyValue(wt("purl:created"))),this.hasAutomaticTimestamp(At.UpdatedAt)&&(u.updatedAt=l==null?void 0:l.getPropertyValue(wt("purl:modified"))),je(this.newInstance(kn(u)),async d=>{await d.loadDocumentModels(c,o),d.reset(),d._sourceSubject=e["@id"]?aC(e["@id"]):{};for(const f of this.relations){const h=d.requireRelation(f),m=h.getLoadedModels();h.enabled&&(If(h,_i).reset(m),m.forEach(y=>y.reset()))}})}static async createFromJsonLD(e,n,r){return je(await this.newFromJsonLD(e,n,r),s=>s.save(n))}static async createInDocument(e,n,r){return je(new this(e),s=>s.saveInDocument(n,r))}static async synchronize(e,n,r){if(this!==e.static())return e.static().synchronize(e,n,r??new WeakSet);await tR(e,n,r??new WeakSet)}static findMatchingResourceIds(e,n){const r=e.reduce((s,i)=>{var o;return i.predicate.value==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"&&(s[i.subject.value]=s[i.subject.value]??[],(o=s[i.subject.value])==null||o.push(i.object.value)),s},{});return Object.entries(r).filter(([s,i])=>i.some(o=>this.rdfsClasses.includes(o))).map(([s])=>n?bo(n,s):s)}static bootRdfContexts(e,n,r,s={}){var i,o;const a=s.modelClass??this,l={crdt:"https://vocab.noeldemartin.com/crdt/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",pim:"http://www.w3.org/ns/pim/space#",posix:"http://www.w3.org/ns/posix/stat#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",xsd:"http://www.w3.org/2001/XMLSchema#"},c=()=>{var d;return(d=Object.entries({...n,...l}).find(([f,h])=>(r==null?void 0:r.startsWith(`${f}:`))||(r==null?void 0:r.startsWith(Tt(h)))))==null?void 0:d[1]};n.default??(n.default=e??c()??Object.values(n).find(d=>!!d));let u=Object.getPrototypeOf(a);return s.skipParentSchema&&u.__isSchema&&(u=Object.getPrototypeOf(u)),u?this.bootRdfContexts(((i=Object.getOwnPropertyDescriptor(u,"rdfContext"))==null?void 0:i.value)??null,{...n,...((o=Object.getOwnPropertyDescriptor(u,"rdfContexts"))==null?void 0:o.value)??{}},u.rdfsClass,{modelClass:u}):{...n,...l,default:n.default??"http://www.w3.org/ns/solid/terms#"}}static bootRdfsClasses(e,n,r,s){var i,o,a;const l=s??this;if(n&&n.length>0)return Vn((n==null?void 0:n.map(u=>this.rdfTerm(u,r)))??[]);if(e)return[this.rdfTerm(e,r)];const c=Object.getPrototypeOf(l);return c?this.bootRdfsClasses(((i=Object.getOwnPropertyDescriptor(c,"rdfsClass"))==null?void 0:i.value)??null,((o=Object.getOwnPropertyDescriptor(c,"rdfsClasses"))==null?void 0:o.value)??null,{...r,...((a=Object.getOwnPropertyDescriptor(c,"rdfContexts"))==null?void 0:a.value)??{}},c):[this.rdfTerm(this.getDefaultRdfContext(r)+this.modelName,r)]}static bootRdfsClassesAliases(e,n){return e.map(r=>Vn(r.map(s=>wt(s,this.rdfContexts,this.getDefaultRdfContext(n)))??[]))}static bootCollection(){const e=super.bootCollection();if(!e.match(/^\w+:\/\/.*\/$/))throw new qs(this.modelName,`SolidModel collections must be valid container urls (ending with a trailing slash), '${e}' isn't.`);return e}static bootFields(e,n,r,s){var i,o,a;const l=PC(this)??this.rdfContexts,c=this.getDefaultRdfContext(l),{fieldAliases:u}=super.bootFields(e,n,r,s);r.includes(At.CreatedAt)&&delete s[At.CreatedAt],r.includes(At.UpdatedAt)&&delete s[At.UpdatedAt];for(const[d,f]of Object.entries(s))f.rdfProperty=wt(f.rdfProperty??`${c}${d}`,l,c),f.rdfPropertyAliases=((i=f.rdfPropertyAliases)==null?void 0:i.map(h=>wt(h,l,c)))??[];return(o=s[n])==null||delete o.rdfProperty,(a=s[n])==null||delete a.rdfPropertyAliases,{fields:s,fieldAliases:u}}static getDefaultRdfContext(e){return e??(e=this.rdfContexts),e.default??""}static async performSchemaUpdate(e){try{e.primaryKey??(e.primaryKey="url");const n=this.bootRdfContexts(e.rdfContext??null,{...e.rdfContexts},e.rdfsClass,{skipParentSchema:!0}),r=this.bootRdfsClasses(e.rdfsClass??null,e.rdfsClasses??null,n),s=this.bootRdfsClassesAliases(e.rdfsClassesAliases??[],n);OC(this,n),await super.performSchemaUpdate(e),this.rdfContexts=n,this.rdfsClasses=r,this.rdfsClassesAliases=s,this.rdfsClass=e.rdfsClass,this.rdfContext=e.rdfContext,this.defaultResourceHash=e.defaultResourceHash??"it",this.slugField=e.slugField,this.history=e.history??!1,this.tombstone=e.tombstone??!0}finally{LC(this)}}initialize(e,n){this._documentExists=n,this._sourceDocumentUrl=this._sourceDocumentUrl??null,this._trackedDirtyAttributes={},this._removedResourceUrls=[],this._usesRdfAliases=!1,super.initialize(e,n)}initializeRelations(){super.initializeRelations(),this.initializeRelationsEnabling(),this.initializeMetadataRelation()}initializeRelationsEnabling(){this.static().hasAutomaticTimestamps()||this._proxy.relatedMetadata.disable(),this._proxy.tracksHistory()||(this._proxy.relatedOperations.disable(),this._proxy.relatedTombstone.disable()),this._proxy.relatedAuthorizations.disable()}initializeMetadataRelation(){if(!this._proxy.relatedMetadata.enabled)return;const e=this._proxy.relatedMetadata.relatedClass.newInstance(kn({resourceUrl:this._attributes[this.static("primaryKey")],createdAt:this._attributes.createdAt,updatedAt:this._attributes.updatedAt}),!1);e.resourceUrl&&e.mintUrl(this.getDocumentUrl()||void 0,this._documentExists),this._proxy.relatedMetadata.attach(e),delete this._attributes.createdAt,delete this._attributes.updatedAt,delete this._originalAttributes.createdAt,delete this._originalAttributes.updatedAt}static(e){return super.static(e)}update(e){return this._lock.run(()=>super.update(e))}save(e){return this.static().withCollection(e||this.guessCollection(),()=>super.save())}async saveInDocument(e,n){return this.exists()?dS(this.getDocumentUrl()===e,qe,"Model already exists and is not stored in the given document"):this.mintUrl(e,!0,n),await this.save(),this}delete(){return this.static().softDeletesEnabled?this.softDelete():this.forceDelete()}forceDelete(){return this.static().withCollection(this.guessCollection(),()=>super.delete())}async softDelete(){if(!this.static().hasAutomaticTimestamps())throw new qe("Cannot soft delete a model without automatic timestamps");if(this.isSoftDeleted())return this;const e=new Date;return this.metadata.setAttribute(At.UpdatedAt,e),this.metadata.setAttribute("deletedAt",e),await this.save(),this}async registerInTypeIndex(e){const n=zt("SolidDocument");await new n({url:this.getDocumentUrl()}).register(e,this.static())}mintUrl(e,n,r){this.setAttribute(this.static("primaryKey"),this.newUrl(e,r)),e&&(this._documentExists=n??!0)}toJsonLD(e={}){e={ids:!0,timestamps:!0,history:!0,...e};const n=this.clone();return e.ids||n.getRelatedModels().forEach(r=>r.setAttribute("url",null)),e.timestamps||n.getRelatedModels().forEach(r=>{r.relatedMetadata.related=null,delete r.relatedMetadata.__modelInSameDocument,delete r.relatedMetadata.__modelInOtherDocumentId,delete r.relatedMetadata.__newModel}),e.history||n.getRelatedModels().forEach(r=>{r.relatedOperations.related=[],r.relatedOperations.__newModels=[],delete r.relatedOperations.__modelsInSameDocument,delete r.relatedOperations.__modelsInOtherDocumentIds}),n.serializeToJsonLD()}async toTurtle(e={}){const n=await ip(this.toJsonLD(e));return GI(n)}getIdAttribute(){return this.getAttribute("url")}setExists(e){this._documentExists=e&&this._documentExists,super.setExists(e)}documentExists(){return this._documentExists}setDocumentExists(e){this._documentExists=e,Object.values(this._relations).filter(_i).filter(n=>n.enabled&&n.useSameDocument&&!Jt()).map(n=>n.getLoadedModels()).flat().forEach(n=>n.setDocumentExists(e))}isDirty(e,n){var r,s;if(e)return this.static("timestamps").includes(e)?((r=this.metadata)==null?void 0:r.isDirty(e))||super.isDirty(e):super.isDirty(e);if(super.isDirty())return!0;if(n)return!!((s=this.metadata)!=null&&s.isDirty("deletedAt"));const i=this.getDocumentModels().filter(a=>a.isDirty(void 0,!0)),o=this.getRemovedDocumentModels();return i.length+o.length>0}isSoftDeleted(){var e;return!!((e=this.metadata)!=null&&e.deletedAt)}cleanDirty(e){super.cleanDirty(),this._documentExists=!0,this._trackedDirtyAttributes={},this._removedResourceUrls=[],Object.values(this._relations).filter(yl).filter(n=>n.enabled&&n.useSameDocument&&!Jt()).forEach(n=>{n.__modelsInSameDocument=n.__modelsInSameDocument||[],n.__modelsInSameDocument.push(...n.__newModels),n.__newModels=[]}),Object.values(this._relations).filter(Fd).filter(n=>n.useSameDocument&&n.enabled&&!!n.__newModel&&!Jt()).forEach(n=>{n.__modelInSameDocument=n.__newModel,n.__newModel=void 0}),e||this.getDocumentModels().forEach(n=>n.cleanDirty(!0))}fixMalformedAttributes(){super.fixMalformedAttributes(),this.relatedMetadata.enabled&&(this.static().hasAutomaticTimestamp(At.CreatedAt)&&(this.metadata.createdAt=this.getAttribute("createdAt")??new Date),this.static().hasAutomaticTimestamp(At.UpdatedAt)&&(this.metadata.updatedAt=this.getAttribute("updatedAt")??this.getAttribute("createdAt")??new Date))}ignoreRdfPropertyHistory(e,n){return!1}getDocumentUrl(){return this.url?lr(this.url):null}requireDocumentUrl(){return this.getDocumentUrl()??Xe(qe,"Failed getting required document url")}usesRdfAliases(){return this._usesRdfAliases}getSourceDocumentUrl(){return this._sourceDocumentUrl}setSourceDocumentUrl(e){this._sourceDocumentUrl=e}requireContainerUrl(){return this.getContainerUrl()??Xe(qe,"Failed getting required container url")}getContainerUrl(){const e=this.getDocumentUrl();return e?ar(e):null}getSourceContainerUrl(){const e=this.getSourceDocumentUrl();return e?ar(e):null}setAttribute(e,n){const r=this.getPrimaryKey();super.setAttribute(e,n);const s=this.getPrimaryKey();r!==s&&this.onPrimaryKeyUpdated(s,r)}unsetAttribute(e){var n,r;return((r=(n=this.static("fields"))==null?void 0:n[e])==null?void 0:r.type)===ke.Array?this.setAttributeValue(e,[]):super.unsetAttribute(e)}setCreatedAtAttribute(e){(this.metadata??this).setAttributeValue("createdAt",e)}setUpdatedAtAttribute(e){(this.metadata??this).setAttributeValue("updatedAt",e)}getCreatedAtAttribute(){var e;return((e=this.metadata)==null?void 0:e.getAttributeValue("createdAt"))??super.getAttributeValue("createdAt")}getUpdatedAtAttribute(){var e;return((e=this.metadata)==null?void 0:e.getAttributeValue("updatedAt"))??super.getAttributeValue("updatedAt")}getDeletedAtAttribute(){var e;return((e=this.metadata)==null?void 0:e.getAttributeValue("deletedAt"))??super.getAttributeValue("deletedAt")}getDocumentModels(){return Jt()?[]:ag("document-models",this,()=>{const e=new Set;return this.populateDocumentModels(e),je(Array.from(e),n=>{n.forEach(r=>Ew("document-models",r,n))})})}getRemovedDocumentModels(){const e=new Set;for(const n of Object.values(this._relations))!n.enabled||!n.loaded||!_i(n)||!yl(n)||n.__removedDocumentModels.forEach(r=>e.add(r));return Array.from(e)}getDirtyDocumentModels(){return this.getDocumentModels().filter(e=>e.isDirty(void 0,!0))}requireRelation(e){return super.requireRelation(e)}getRelationModel(e){return super.getRelationModel(e)}getRelationModels(e){return super.getRelationModels(e)}setRelationModel(e,n){return super.setRelationModel(e,n)}setRelationModels(e,n){return super.setRelationModels(e,n)}getRelatedModels(){return ag("related-models",this,()=>{const e=new Set;return this.populateRelatedModels(e),Array.from(e)})}usingSolidEngine(){return!!this.requireFinalEngine().__isSolidEngine}metadataRelationship(){const e=zt("Metadata");return this.hasOne(e,"resourceUrl").usingSameDocument(!Jt()).onDelete("cascade")}operationsRelationship(){return new KC(this).usingSameDocument(!Jt()).onDelete("cascade")}tombstoneRelationship(){return new eR(this)}authorizationsRelationship(){return new GC(this)}onMoved(e,n){n&&this.setSourceDocumentUrl(n)}getDefaultCollection(){return`solid://${super.getDefaultCollection()}/`}async createFromEngineDocument(e,n,r){const s=async()=>{const l=await this.parseEngineDocumentAttributes(e,n,r);l[this.static("primaryKey")]=new Hn(r||e);for(const[c,u]of Object.entries(this.static("fields")))u.deserialize&&(l[c]=u.deserialize(l[c]));return this.newInstance(l,!0)},i=Tt(e),o=await Fn.resourceFromJsonLDGraph(n,r||i),a=await s();if(await a.loadDocumentModels(i,n),a.hasIncompleteAttributes())throw new Pd(i);return je(a,l=>{l._sourceDocumentUrl=Ow(i,{fragment:!1}),l._usesRdfAliases=this.static("rdfsClassesAliases").some(c=>!c.some(u=>!o.isType(u)))})}async createManyFromEngineDocuments(e){const n=Vn([this.static("rdfsClasses"),...this.static("rdfsClassesAliases")].flat()),r=await Promise.all(Object.entries(e).map(async([s,i])=>{const o=await Fn.fromJsonLD(i);return Promise.all(o.resources.filter(a=>!!a.url&&n.some(l=>a.isType(l))).map(async a=>{try{return await this.createFromEngineDocument(s,i,a.url)}catch(l){if(l instanceof Pd)return null;throw l}}))}));return en(r.flat())}async loadDocumentModels(e,n){const r=this.requireEngine();await Promise.all(Object.values(this._relations).filter(s=>s.enabled&&(_i(s)||s instanceof Vl)).map(async s=>s.relatedClass.withEngine(r,()=>s.__loadDocumentModels(e,n))))}async beforeSave(e){var n;const r=this.isDirty(At.UpdatedAt)||!!((n=this.metadata)!=null&&n.isDirty(At.UpdatedAt));await super.beforeSave(),!this.url&&this.static("mintsUrls")&&!Jt()&&this.mintUrl(),!e&&(await Promise.all(this.getDirtyDocumentModels().map(async s=>s.exists()||s.beforeCreate())),await this.beforeDocumentSave(),await Promise.all(this.getDirtyDocumentModels().map(async s=>s.exists()&&s.beforeUpdate())),this.reconcileModelTimestamps(r))}async beforeDocumentSave(){let e=[];const n=new Set,r=()=>(e=this.getDocumentModels().filter(s=>!n.has(s)),e.length>0);for(;r();)this.static("mintsUrls")&&!Jt()&&this.mintDocumentModelsKeys(e),await Promise.all(e.map(async s=>{s!==this&&s.isDirty(void 0,!0)&&await s.beforeSave(!0),n.add(s)}))}async beforeCreate(){for(const e of Object.values(this._relations))!e.enabled||!qC(e)||e.__beforeParentCreate();this.metadata&&!this.metadata.resourceUrl&&this.static("defaultResourceHash")&&!Jt()&&(this.metadata.resourceUrl=this.url??`#${this.static("defaultResourceHash")}`,this.metadata.mintUrl(this.getDocumentUrl()||void 0,this._documentExists))}async beforeUpdate(){this.tracksHistory()&&this.isDirty(void 0,!0)&&(await this.addDirtyHistoryOperations(),await Promise.all(this.operations.map(async e=>{e.exists()||(await e.beforeCreate(),await e.beforeSave(!0),this.mintDocumentModelsKeys([e]))})))}async performSave(){const e=this.getDirtyDocumentModels().map(n=>[n,n.exists()]);try{await super.performSave()}catch(n){if(!(n instanceof Jh))throw n;this.url=this.newUniqueUrl(this.url),await super.performSave()}e.forEach(([n,r])=>{n._wasRecentlyCreated=n._wasRecentlyCreated||!r})}async performDelete(){this.tracksHistory()&&this.leavesTombstone()&&this.relatedTombstone.create(),await super.performDelete()}async afterSave(e){if(await super.afterSave(),!e){this.metadata&&this.metadata.resourceUrl!==this.url&&(this.metadata.resourceUrl=this.url,Jt()||this.metadata.mintUrl(this.getDocumentUrl()||void 0,this._documentExists)),await Promise.all(this.getDirtyDocumentModels().map(n=>n.afterSave(!0)));for(const n of Object.values(this._relations))!n.enabled||!zC(n)||n.__afterParentSave()}}onPrimaryKeyUpdated(e,n){var r,s;const i=this.getDocumentUrl()||void 0,o=this.documentExists(),a=Object.values(this._relations).filter(l=>l.enabled&&hp(l));for(const l of a)l.getLoadedModels().forEach(c=>{const u=c.getAttribute(l.foreignKeyName);c.setAttribute(l.foreignKeyName,Array.isArray(u)?je(u.slice(0),d=>yw(d,n,e)):e)});Jt()||((r=this.metadata)==null||r.mintUrl(i,o),(s=this.operations)==null||s.map(l=>l.mintUrl(i,o)))}async syncDirty(){const e=this.getDocumentUrl(),n=()=>this.requireEngine().create(e?Kt(e):this.static("collection"),this.toEngineDocument(),e||void 0),r=()=>this.requireEngine().update(Kt(e),e,{"@graph":{$push:this.serializeToJsonLD()}}),s=()=>this.requireEngine().update(Kt(e),e,this.getDirtyEngineDocumentUpdates());return await(async()=>{if(!this._documentExists){const i=this.static("defaultResourceHash"),o=await n();return this.getSerializedPrimaryKey()??(i&&!Jt()?`${o}#${i}`:o)}return this._exists?(await s(),this.getSerializedPrimaryKey()):(await r(),this.getSerializedPrimaryKey())})()??Xe(qe,"Missing primary key")}async deleteModelsFromEngine(e){await this.deleteModels(e)}hasOne(e,n,r){return new ZC(this,e,n,r)}hasMany(e,n,r){return new A0(this,e,n,r)}belongsToOne(e,n,r){return new YC(this,e,n,r)}belongsToMany(e,n,r){return new C0(this,e,n,r)}isContainedBy(e){return new R0(this,e)}documentContainsMany(e){return new Vl(this,e)}toEngineDocument(){return{"@graph":this.getDirtyDocumentModels().map(e=>e.serializeToJsonLD({includeRelations:!1,includeAnonymousHashes:!0}))}}getDirtyEngineDocumentUpdates(e){const n=[],r=this.requireEngine(),s=this.getDirtyDocumentModels(),i=this.getRemovedDocumentModels();if(!e){for(const o of s){if(o===this)continue;if(!o.exists()){n.push({$push:o.serializeToJsonLD({includeRelations:!1})});continue}const a=o.withEngine(r,l=>l.getDirtyEngineDocumentUpdates(!0))["@graph"];"$apply"in a?n.push(...a.$apply):n.push(a)}for(const o of i)o.getDocumentModels().forEach(a=>n.push({$updateItems:{$where:{"@id":a.url},$unset:!0}}))}if(super.isDirty()&&this.url){const o=super.getDirtyEngineDocumentUpdates(),a=!this.usingSolidEngine();n.push({$updateItems:{$where:{"@id":this.url},$update:this.convertEngineUpdatesToJsonLD(o,a)}})}return this._removedResourceUrls.forEach(o=>n.push({$updateItems:{$where:{"@id":o},$unset:!0}})),n.length===1?{"@graph":n[0]}:{"@graph":{$apply:n}}}async parseEngineDocumentAttributes(e,n,r){return this.parseEngineDocumentAttributesFromJsonLD(n,r||e)}castAttribute(e,n={}){const r=()=>{var s;const i=typeof e>"u"||e===null;switch((s=n.definition)==null?void 0:s.type){case ke.Array:{const o=i?[]:un(e),a=Vn(o);return o.length!==a.length&&console.warn("An array field had duplicate values, this is not supported in Solid models."),a}case ke.Any:if(!Array.isArray(e))return e;if(e.length===0)return;if(e.length===1)return e[0];break}return i?void 0:e};return super.castAttribute(r(),n)}newUrl(e,n){return e=e??this.newUrlDocumentUrl(),n=n??this.newUrlResourceHash(),n?`${e}#${n}`:e}newUrlDocumentUrl(){var e;const n=((e=this._sourceSubject)==null?void 0:e.documentName)??this.newUrlDocumentUrlSlug()??$n();return bo(this.static("collection"),n)}newUrlDocumentUrlSlug(){const e=this.static("slugField"),n=e&&this.getAttribute(e);return(n&&Ba(n))??null}newUrlResourceHash(){var e;return((e=this._sourceSubject)==null?void 0:e.resourceHash)??this.static("defaultResourceHash")}newUniqueUrl(e){var n;e=e??this.newUrl();const r=(n=qa(e))==null?void 0:n.fragment;return`${lr(e)}-${Iw()}${r?`#${r}`:""}`}guessCollection(){if(this.url)return ar(this.url)??void 0}mintDocumentModelsKeys(e){const n=this.requireDocumentUrl(),r=this._documentExists;for(const s of e)s.url||s.mintUrl(n,r,$n());for(const s of e)for(const i of Object.values(s._relations))i.enabled&&i.getLoadedModels().forEach(o=>i.setForeignAttributes(o))}populateRelatedModels(e){if(!e.has(this)){e.add(this);for(const n of Object.values(this._relations))n.enabled&&(Fd(n)&&n.__newModel&&n.__newModel.populateRelatedModels(e),yl(n)&&n.__newModels.map(r=>r.populateRelatedModels(e)),n.getLoadedModels().forEach(r=>r.populateRelatedModels(e)))}}populateDocumentModels(e){if(e.has(this))return;const n=this.getDocumentUrl(),r=(s,i)=>n&&i.getDocumentUrl()===n||_i(s)&&s.useSameDocument;e.add(this);for(const s of Object.values(this._relations)){const i=s instanceof Vl;if(!(!s.enabled||!s.loaded||!i&&!_i(s))){if(Fd(s)&&s.__newModel&&r(s,s.__newModel)&&s.__newModel.populateDocumentModels(e),yl(s))for(const o of s.__newModels)r(s,o)&&o.populateDocumentModels(e);s.getLoadedModels().filter(o=>i||r(s,o)).forEach(o=>o.populateDocumentModels(e))}}}}Oe(Dt,"primaryKey","url"),Oe(Dt,"fields"),Oe(Dt,"classFields",["_history","_publicPermissions","_tombstone"]),Oe(Dt,"rdfContext"),Oe(Dt,"rdfContexts",{}),Oe(Dt,"rdfsClass"),Oe(Dt,"rdfsClasses",[]),Oe(Dt,"rdfsClassesAliases",[]),Oe(Dt,"reservedRelations",["metadata","operations","tombstone","authorizations"]),Oe(Dt,"defaultResourceHash","it"),Oe(Dt,"slugField"),Oe(Dt,"mintsUrls",!0),Oe(Dt,"history",!1),Oe(Dt,"tombstone",!0),Oe(Dt,"rdfPropertyFields"),Oe(Dt,"historyDisabled",new WeakMap),Oe(Dt,"softDeletesEnabled",!1);function Bn(t,e){return x0(t,Dt,e)}const T0={resourceUrl:{type:ke.Key,required:!0,rdfProperty:"resource"},date:{type:ke.Date,required:!0}},sR=Bn({rdfContexts:{crdt:"https://vocab.noeldemartin.com/crdt/"},rdfsClass:"Operation",timestamps:!1,fields:T0});class Gc extends sR{apply(e){}isInception(e){var n,r;return((r=(n=e.metadata)==null?void 0:n.createdAt)==null?void 0:r.getTime())===this.date.getTime()}newUrl(e,n){if(!this.resourceUrl)return super.newUrl(e,n);const r=n??$n();return this.resourceUrl.includes("#")?`${this.resourceUrl}-operation-${r}`:`${this.resourceUrl}#operation-${r}`}}const Jc={...T0,property:{type:ke.Key,required:!0}},iR=Bn(Gc,{rdfsClass:"PropertyOperation",fields:Jc});class ws extends iR{apply(e){const n=e.static().getRdfPropertyField(this.property);n&&this.applyPropertyUpdate(e,n)}applyPropertyUpdate(e,n){}}const oR=Bn(ws,{rdfsClass:"AddPropertyOperation",fields:{...Jc,value:{type:ke.Any,required:!0}}});class aR extends oR{applyPropertyUpdate(e,n){const r=e.getAttributeValue(n);if(!Array.isArray(r))throw new qe("Can't apply Add operation to non-array field (should be Set instead)");e.setAttributeValue(n,r.concat(un(this.value)))}}const lR=Bn(Gc,{rdfsClass:"DeleteOperation"});class cR extends lR{apply(e){e.metadata.setAttribute("deletedAt",this.date)}}const uR=Bn({rdfContexts:{crdt:"https://vocab.noeldemartin.com/crdt/"},rdfsClass:"Metadata",timestamps:!1,fields:{resourceUrl:{type:ke.Key,required:!0,rdfProperty:"resource"},createdAt:ke.Date,updatedAt:ke.Date,deletedAt:ke.Date}});class mp extends uR{getCreatedAtAttribute(){return this.getAttributeValue("createdAt")}getUpdatedAtAttribute(){return this.getAttributeValue("updatedAt")}newUrl(e,n){return this.resourceUrl?this.resourceUrl.includes("#")?`${this.resourceUrl}-metadata`:`${this.resourceUrl}#metadata`:super.newUrl(e,n)}}const dR=Bn(ws,{rdfsClass:"RemovePropertyOperation",fields:{...Jc,value:{type:ke.Any,required:!0}}}),k0=class Bf extends dR{applyPropertyUpdate(e,n){const r=e.static().getFieldDefinition(n),s=e.getAttributeValue(n),i=r.deserialize?r.deserialize(s):s;if(!Array.isArray(i))throw new qe("Can't apply Remove operation to non-array field (use Unset instead)");e.setAttributeValue(n,Xn(i,this.castModelAttribute(e,n,un(this.value))))}castModelAttribute(e,n,r){const s=e.constructor;return(Bf.attributeCasters.get(s)??this.createAttributeCaster(s))(n,r)}createAttributeCaster(e){const n=(class extends e{castAttribute(r,s={}){return super.castAttribute(r,s)}}).pureInstance();return je((r,s)=>n.castAttribute(s,{definition:n.static().getFieldDefinition(r)}),r=>Bf.attributeCasters.set(e,r))}};Oe(k0,"attributeCasters",new WeakMap);let fR=k0;const hR=Bn(ws,{rdfsClass:"SetPropertyOperation",fields:{...Jc,value:{type:ke.Any,required:!0}}});class pR extends hR{applyPropertyUpdate(e,n){const r=e.static().getFieldDefinition(n),s=r.deserialize?r.deserialize(this.value):this.value;e.setAttributeValue(n,s)}}class Ys extends mp{}Oe(Ys,"rdfsClass","Tombstone");const mR=Bn(ws,{rdfsClass:"UnsetPropertyOperation"});let gR=class extends mR{applyPropertyUpdate(e,n){e.unsetAttribute(n)}};const yR={AddPropertyOperation:aR,DeleteOperation:cR,Metadata:mp,Operation:Gc,PropertyOperation:ws,RemovePropertyOperation:fR,SetPropertyOperation:pR,Tombstone:Ys,UnsetPropertyOperation:gR},bR=Bn({rdfContexts:{acl:"http://www.w3.org/ns/auth/acl#"},rdfsClass:"Authorization",timestamps:!1,fields:{agents:{rdfProperty:"agent",type:ke.Array,items:ke.Key},agentClasses:{rdfProperty:"agentClass",type:ke.Array,items:ke.Key},agentGroups:{rdfProperty:"agentGroup",type:ke.Array,items:ke.Key},accessTo:{type:ke.Array,items:ke.Key},accessToClasses:{rdfProperty:"accessToClass",type:ke.Array,items:ke.Key},default:{type:ke.Array,items:ke.Key},modes:{rdfProperty:"mode",type:ke.Array,items:ke.Key}}}),vR={[zs.Read]:"http://www.w3.org/ns/auth/acl#Read",[zs.Write]:"http://www.w3.org/ns/auth/acl#Write",[zs.Append]:"http://www.w3.org/ns/auth/acl#Append",[zs.Control]:"http://www.w3.org/ns/auth/acl#Control"};class gp extends bR{static get fetch(){return this.requireFetch()}static modeFromSolidDocumentPermission(e){return vR[e]}}const wR=Bn({rdfsClass:"ldp:Resource",timestamps:!1,fields:{updatedAt:{type:ke.Date,rdfProperty:"purl:modified"}}}),_R=Bn({rdfContexts:{solid:"http://www.w3.org/ns/solid/terms#"},rdfsClass:"TypeRegistration",timestamps:!1,fields:{forClass:{type:ke.Array,items:ke.Key},instance:ke.Key,instanceContainer:ke.Key}});class Ca extends _R{}class Ri extends wR{static async fromTypeIndex(e,n){const r=this.requireFinalEngine(),s=r instanceof cp?r.getFetch():void 0;return(await fC(e,n.rdfsClasses,s)).map(i=>this.newInstance({url:i},!0))}async register(e,n){const r=new Ca({forClass:n.rdfsClasses[0],instance:this.url});if(typeof e=="string"){r.mintUrl(e,!0,$n()),await r.withEngine(this.requireEngine(),()=>r.save(Kt(e)));return}await e.withEngine(this.requireEngine(),async()=>{await e.loadRelationIfUnloaded("registrations"),await e.relatedRegistrations.create(r)})}}const xR=["http://www.w3.org/ns/iana/media-types/text/turtle#Resource","http://www.w3.org/ns/iana/media-types/application/rdf+xml#Resource","http://www.w3.org/ns/iana/media-types/application/ld+json#Resource","http://www.w3.org/ns/ldp#Container","http://www.w3.org/ns/ldp#BasicContainer"];let ER=class extends C0{constructor(e){super(e,Ri,"resourceUrls")}get container(){return this.parent}async load(){if(this.isEmpty())return this.related=[];if(this.parent.usingSolidEngine())return super.load();const e=await this.parent.requireEngine().readMany(this.container.requireDocumentUrl());return this.related=Object.entries(e).map(([n,r])=>new Ri({url:n,updatedAt:this.getLatestUpdateDate(r["@graph"])})),this.related}async __loadDocumentModels(e,n){if(!Ri.usingSolidEngine())return super.__loadDocumentModels(e,n);const r=this.parent.resourceUrls,s=Fn.reduceJsonLDGraph(n,this.parent.url),i=n["@graph"].filter(a=>{if(r.indexOf(a["@id"])===-1)return!1;const l=un(a["@type"]??[]);return xR.some(c=>l.includes(c))}).map(a=>a["@id"]),o=await Promise.all(i.map(a=>Ri.createFromEngineDocument(e,s,a)));this.protectedSolidBelongsTo.loadDocumentModels(o,[])}getLatestUpdateDate(e){const n=e.reduce((r,s)=>{const{"@value":i}=s["purl:modified"]??s["http://purl.org/dc/terms/modified"]??s["purl:created"]??s["http://purl.org/dc/terms/created"]??{"@value":0},o=new Date(i).getTime();return Math.max(r,o)},0);return new Date(n)}};class $0 extends no{constructor(e,n){super(e,n,"resourceUrls","url")}setForeignAttributes(e){const n=e.getDocumentUrl();if(!n||!e.url||this.parent.resourceUrls.includes(n))return;const r=this.parent.resourceUrls.concat([n]);this.parent.usingSolidEngine()?this.parent.setOriginalAttribute("resourceUrls",r):this.parent.setAttribute("resourceUrls",r)}clearForeignAttributes(e){const n=e.getDocumentUrl();if(!n||!e.url||!this.parent.resourceUrls.includes(n))return;const r=Xn(this.parent.resourceUrls,n);this.parent.usingSolidEngine()?this.parent.setOriginalAttribute("resourceUrls",r):this.parent.setAttribute("resourceUrls",r)}async load(){return this.related=this.isEmpty()?[]:await this.relatedClass.from(this.parent.url).all({$in:this.parent.resourceUrls}),this.related}async create(e={}){this.assertParentExists();const n=this.relatedClass.newInstance(e);return!n.url&&n.static("mintsUrls")&&!Jt()&&this.relatedClass.withCollection(this.parent.url,()=>n.mintUrl()),je(this.attach(n),r=>this.save(r))}async save(e){return this.assertParentExists(),je(e,async()=>{await e.save(this.parent.url),this.setForeignAttributes(e),await this.parent.save()})}async delete(e){var n;const r=e instanceof this.relatedClass?e:(n=this.related)==null?void 0:n.find(s=>s.url===e);r&&(await r.delete(),this.related&&(this.related=Xn(this.related,r)))}assertParentExists(){if(!this.parent.exists())throw new qe("Cannot save a model because the container doesn't exist")}onRelatedUpdated(e,n){if(this!==this.parent.requireRelation(this.name))return;const{added:r,removed:s}=Ro(e??[],n??[]);tn(this.parent),e==null||e.forEach(i=>tn(i)),n==null||n.forEach(i=>tn(i)),s.forEach(i=>this.clearInverseRelations(i)),r.forEach(i=>this.initializeInverseRelations(i))}}const SR={name:{type:ke.String,rdfProperty:"rdfs:label"},description:{type:ke.String,rdfProperty:"rdfs:comment"},resourceUrls:{type:ke.Array,rdfProperty:"ldp:contains",items:ke.Key},createdAt:{type:ke.Date,rdfProperty:"purl:created"},updatedAt:{type:ke.Date,rdfProperty:"purl:modified"}},AR=Bn({rdfsClass:"ldp:Container",timestamps:!1,fields:SR});class Wn extends AR{static boot(e){super.boot(e),this.slugField=this.slugField??"name"}static async fromTypeIndex(e,n){const r=this.requireFinalEngine(),s=r instanceof cp?r.getFetch():void 0;return(await dC(e,n.rdfsClasses,s)).map(i=>this.newInstance({url:i},!0))}documentsRelationship(){return new ER(this)}markAttributeDirty(e,n,r){return e==="resourceUrls"&&this.usingSolidEngine()?!1:super.markAttributeDirty(e,n,r)}async register(e,n){const r=new Ca({forClass:un(n).map(s=>s.rdfsClasses).flat(),instanceContainer:this.url});if(typeof e=="string"){r.mintUrl(e,!0,$n()),await r.withEngine(this.requireEngine(),()=>r.save(Kt(e)));return}await e.withEngine(this.requireEngine(),async()=>{await e.loadRelationIfUnloaded("registrations"),!e.registrations.some(s=>r.instanceContainer===s.instanceContainer&&!r.forClass.some(i=>!s.forClass.includes(i)))&&await e.relatedRegistrations.create(r)})}static(e){return super.static(e)}ignoreRdfPropertyHistory(e,n){return n??(n=this.usingSolidEngine()),n&&e===ap}contains(e){return new $0(this,e)}newUrl(){return ic(this.newUrlDocumentUrl())}newUniqueUrl(e){e=e??this.newUrl();const n=$w(e);return ic(Kt(e),`${n}-${Iw()}`)}}Oe(Wn,"defaultResourceHash",null);const IR=Bn({rdfContext:"http://www.w3.org/ns/solid/terms#",rdfsClass:"TypeIndex",timestamps:!1,fields:{registrationUrls:{type:ke.Array,items:ke.Key,rdfProperty:"hasTypeRegistration"}}});class us extends IR{static async createPublic(e){const n=await cC(e,us.requireFetch()),r=await this.findOrFail(n);return await r.updatePublicPermissions([zs.Read]),r}static async createPrivate(e){const n=await uC(e,us.requireFetch());return await this.findOrFail(n)}registrationsRelationship(){return Jt()?this.belongsToMany(Ca,"registrationUrls"):new Vl(this,Ca)}async findContainer(e,n){await this.loadRelationIfUnloaded("registrations");const r=this.registrations.filter(s=>s.instanceContainer&&ES(s.forClass,e.rdfsClasses));return QS(r,async s=>s!=null&&s.instanceContainer?(n??Wn).find(s.instanceContainer):null)}}function D0(t){return"rdfContexts"in t}function ds(t){return t instanceof Wn}function wo(t){return t.rdfsClasses.includes(so)}const O0={...yR,SolidACLAuthorization:gp,SolidContainer:Wn,SolidDocument:Ri,SolidTypeIndex:us,SolidTypeRegistration:Ca};new Set(Object.values(O0));function CR(){Qh(O0)}class RR{constructor(e,n){Oe(this,"engine"),Oe(this,"metadata"),Oe(this,"active",{}),this.engine=n,this.metadata=new fS(`${e}-documents-cache`)}has(e,n){return!!this.active[this.getDocumentKey(e,n)]}get(e,n){return this.engine.readOne(e,n)}async remember(e,n,r){await this.metadata.set(this.getDocumentKey(e,n),{modifiedAt:typeof r=="number"?r:r.getTime()})}async forget(e,n){await this.metadata.delete(this.getDocumentKey(e,n))}async activate(e,n,r){const s=await this.metadata.get(this.getDocumentKey(e,n));this.active[this.getDocumentKey(e,n)]=!!(s!=null&&s.modifiedAt)&&s.modifiedAt>=r}async clear(){await this.metadata.clear(),this.metadata.close()}getDocumentKey(e,n){return`${e}-${n}`}}const P0=Bn({rdfsClass:"schema:Action",fields:{name:{type:ke.String,required:!0}}}),TR=Object.freeze(Object.defineProperty({__proto__:null,default:P0},Symbol.toStringTag,{value:"Module"}));class Vs extends P0{}const kR=Object.freeze(Object.defineProperty({__proto__:null,default:Vs},Symbol.toStringTag,{value:"Module"}));class lo extends Vs{}Se(lo,"cloud",{path:"/tasks/"}),Se(lo,"history",!0),Se(lo,"tombstone",!1);const $R=Object.freeze(Object.defineProperty({__proto__:null,default:lo},Symbol.toStringTag,{value:"Module"})),L0=Hw({fields:{name:{type:ke.String,required:!0}}}),DR=Object.freeze(Object.defineProperty({__proto__:null,default:L0},Symbol.toStringTag,{value:"Module"}));class qf extends L0{}const OR=Object.freeze(Object.defineProperty({__proto__:null,default:qf},Symbol.toStringTag,{value:"Module"})),PR=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));/**
* @vue/shared v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function yp(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const xt={},co=[],Vr=()=>{},LR=()=>!1,Xc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),bp=t=>t.startsWith("onUpdate:"),_n=Object.assign,vp=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},MR=Object.prototype.hasOwnProperty,ft=(t,e)=>MR.call(t,e),ze=Array.isArray,uo=t=>Ha(t)==="[object Map]",Yc=t=>Ha(t)==="[object Set]",Ly=t=>Ha(t)==="[object Date]",Ke=t=>typeof t=="function",jt=t=>typeof t=="string",Tr=t=>typeof t=="symbol",Ct=t=>t!==null&&typeof t=="object",M0=t=>(Ct(t)||Ke(t))&&Ke(t.then)&&Ke(t.catch),N0=Object.prototype.toString,Ha=t=>N0.call(t),NR=t=>Ha(t).slice(8,-1),F0=t=>Ha(t)==="[object Object]",wp=t=>jt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,fa=yp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Qc=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},FR=/-(\w)/g,Un=Qc(t=>t.replace(FR,(e,n)=>n?n.toUpperCase():"")),jR=/\B([A-Z])/g,li=Qc(t=>t.replace(jR,"-$1").toLowerCase()),Zc=Qc(t=>t.charAt(0).toUpperCase()+t.slice(1)),Hl=Qc(t=>t?`on${Zc(t)}`:""),Qs=(t,e)=>!Object.is(t,e),Kl=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},j0=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},zf=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let My;const eu=()=>My||(My=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Is(t){if(ze(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=jt(r)?zR(r):Is(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(jt(t)||Ct(t))return t}const UR=/;(?![^(]*\))/g,BR=/:([^]+)/,qR=/\/\*[^]*?\*\//g;function zR(t){const e={};return t.replace(qR,"").split(UR).forEach(n=>{if(n){const r=n.split(BR);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ye(t){let e="";if(jt(t))e=t;else if(ze(t))for(let n=0;n<t.length;n++){const r=Ye(t[n]);r&&(e+=r+" ")}else if(Ct(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Dn(t){if(!t)return null;let{class:e,style:n}=t;return e&&!jt(e)&&(t.class=Ye(e)),n&&(t.style=Is(n)),t}const VR="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",HR=yp(VR);function U0(t){return!!t||t===""}function KR(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=tu(t[r],e[r]);return n}function tu(t,e){if(t===e)return!0;let n=Ly(t),r=Ly(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Tr(t),r=Tr(e),n||r)return t===e;if(n=ze(t),r=ze(e),n||r)return n&&r?KR(t,e):!1;if(n=Ct(t),r=Ct(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!tu(t[o],e[o]))return!1}}return String(t)===String(e)}function B0(t,e){return t.findIndex(n=>tu(n,e))}const q0=t=>!!(t&&t.__v_isRef===!0),xe=t=>jt(t)?t:t==null?"":ze(t)||Ct(t)&&(t.toString===N0||!Ke(t.toString))?q0(t)?xe(t.value):JSON.stringify(t,z0,2):String(t),z0=(t,e)=>q0(e)?z0(t,e.value):uo(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[jd(r,i)+" =>"]=s,n),{})}:Yc(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>jd(n))}:Tr(e)?jd(e):Ct(e)&&!ze(e)&&!F0(e)?String(e):e,jd=(t,e="")=>{var n;return Tr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let bn;class V0{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=bn,!e&&bn&&(this.index=(bn.scopes||(bn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=bn;try{return bn=this,e()}finally{bn=n}}}on(){++this._on===1&&(this.prevScope=bn,bn=this)}off(){this._on>0&&--this._on===0&&(bn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Ka(t){return new V0(t)}function Wa(){return bn}function nu(t,e=!1){bn&&bn.cleanups.push(t)}let Rt;const Ud=new WeakSet;class H0{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,bn&&bn.active&&bn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ud.has(this)&&(Ud.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||W0(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ny(this),G0(this);const e=Rt,n=Cr;Rt=this,Cr=!0;try{return this.fn()}finally{J0(this),Rt=e,Cr=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Ep(e);this.deps=this.depsTail=void 0,Ny(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ud.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Vf(this)&&this.run()}get dirty(){return Vf(this)}}let K0=0,ha,pa;function W0(t,e=!1){if(t.flags|=8,e){t.next=pa,pa=t;return}t.next=ha,ha=t}function _p(){K0++}function xp(){if(--K0>0)return;if(pa){let e=pa;for(pa=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;ha;){let e=ha;for(ha=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function G0(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function J0(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Ep(r),WR(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Vf(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(X0(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function X0(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ra)||(t.globalVersion=Ra,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Vf(t))))return;t.flags|=2;const e=t.dep,n=Rt,r=Cr;Rt=t,Cr=!0;try{G0(t);const s=t.fn(t._value);(e.version===0||Qs(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Rt=n,Cr=r,J0(t),t.flags&=-3}}function Ep(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Ep(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function WR(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Cr=!0;const Y0=[];function _s(){Y0.push(Cr),Cr=!1}function xs(){const t=Y0.pop();Cr=t===void 0?!0:t}function Ny(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Rt;Rt=void 0;try{e()}finally{Rt=n}}}let Ra=0;class GR{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ru{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Rt||!Cr||Rt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Rt)n=this.activeLink=new GR(Rt,this),Rt.deps?(n.prevDep=Rt.depsTail,Rt.depsTail.nextDep=n,Rt.depsTail=n):Rt.deps=Rt.depsTail=n,Q0(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Rt.depsTail,n.nextDep=void 0,Rt.depsTail.nextDep=n,Rt.depsTail=n,Rt.deps===n&&(Rt.deps=r)}return n}trigger(e){this.version++,Ra++,this.notify(e)}notify(e){_p();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{xp()}}}function Q0(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Q0(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const fc=new WeakMap,Ti=Symbol(""),Hf=Symbol(""),Ta=Symbol("");function vn(t,e,n){if(Cr&&Rt){let r=fc.get(t);r||fc.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new ru),s.map=r,s.key=n),s.track()}}function fs(t,e,n,r,s,i){const o=fc.get(t);if(!o){Ra++;return}const a=l=>{l&&l.trigger()};if(_p(),e==="clear")o.forEach(a);else{const l=ze(t),c=l&&wp(n);if(l&&n==="length"){const u=Number(r);o.forEach((d,f)=>{(f==="length"||f===Ta||!Tr(f)&&f>=u)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(Ta)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Ti)),uo(t)&&a(o.get(Hf)));break;case"delete":l||(a(o.get(Ti)),uo(t)&&a(o.get(Hf)));break;case"set":uo(t)&&a(o.get(Ti));break}}xp()}function JR(t,e){const n=fc.get(t);return n&&n.get(e)}function Hi(t){const e=rt(t);return e===t?e:(vn(e,"iterate",Ta),ur(t)?e:e.map(an))}function su(t){return vn(t=rt(t),"iterate",Ta),t}const XR={__proto__:null,[Symbol.iterator](){return Bd(this,Symbol.iterator,an)},concat(...t){return Hi(this).concat(...t.map(e=>ze(e)?Hi(e):e))},entries(){return Bd(this,"entries",t=>(t[1]=an(t[1]),t))},every(t,e){return ss(this,"every",t,e,void 0,arguments)},filter(t,e){return ss(this,"filter",t,e,n=>n.map(an),arguments)},find(t,e){return ss(this,"find",t,e,an,arguments)},findIndex(t,e){return ss(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ss(this,"findLast",t,e,an,arguments)},findLastIndex(t,e){return ss(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ss(this,"forEach",t,e,void 0,arguments)},includes(...t){return qd(this,"includes",t)},indexOf(...t){return qd(this,"indexOf",t)},join(t){return Hi(this).join(t)},lastIndexOf(...t){return qd(this,"lastIndexOf",t)},map(t,e){return ss(this,"map",t,e,void 0,arguments)},pop(){return Vo(this,"pop")},push(...t){return Vo(this,"push",t)},reduce(t,...e){return Fy(this,"reduce",t,e)},reduceRight(t,...e){return Fy(this,"reduceRight",t,e)},shift(){return Vo(this,"shift")},some(t,e){return ss(this,"some",t,e,void 0,arguments)},splice(...t){return Vo(this,"splice",t)},toReversed(){return Hi(this).toReversed()},toSorted(t){return Hi(this).toSorted(t)},toSpliced(...t){return Hi(this).toSpliced(...t)},unshift(...t){return Vo(this,"unshift",t)},values(){return Bd(this,"values",an)}};function Bd(t,e,n){const r=su(t),s=r[e]();return r!==t&&!ur(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const YR=Array.prototype;function ss(t,e,n,r,s,i){const o=su(t),a=o!==t&&!ur(t),l=o[e];if(l!==YR[e]){const d=l.apply(t,i);return a?an(d):d}let c=n;o!==t&&(a?c=function(d,f){return n.call(this,an(d),f,t)}:n.length>2&&(c=function(d,f){return n.call(this,d,f,t)}));const u=l.call(o,c,r);return a&&s?s(u):u}function Fy(t,e,n,r){const s=su(t);let i=n;return s!==t&&(ur(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,an(a),l,t)}),s[e](i,...r)}function qd(t,e,n){const r=rt(t);vn(r,"iterate",Ta);const s=r[e](...n);return(s===-1||s===!1)&&Sp(n[0])?(n[0]=rt(n[0]),r[e](...n)):s}function Vo(t,e,n=[]){_s(),_p();const r=rt(t)[e].apply(t,n);return xp(),xs(),r}const QR=yp("__proto__,__v_isRef,__isVue"),Z0=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Tr));function ZR(t){Tr(t)||(t=String(t));const e=rt(this);return vn(e,"has",t),e.hasOwnProperty(t)}class e_{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?o_:i_:i?s_:r_).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ze(e);if(!s){let l;if(o&&(l=XR[n]))return l;if(n==="hasOwnProperty")return ZR}const a=Reflect.get(e,n,Pt(e)?e:r);return(Tr(n)?Z0.has(n):QR(n))||(s||vn(e,"get",n),i)?a:Pt(a)?o&&wp(n)?a:a.value:Ct(a)?s?Cs(a):kr(a):a}}class t_ extends e_{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=ti(i);if(!ur(r)&&!ti(r)&&(i=rt(i),r=rt(r)),!ze(e)&&Pt(i)&&!Pt(r))return l?!1:(i.value=r,!0)}const o=ze(e)&&wp(n)?Number(n)<e.length:ft(e,n),a=Reflect.set(e,n,r,Pt(e)?e:s);return e===rt(s)&&(o?Qs(r,i)&&fs(e,"set",n,r):fs(e,"add",n,r)),a}deleteProperty(e,n){const r=ft(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&fs(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Tr(n)||!Z0.has(n))&&vn(e,"has",n),r}ownKeys(e){return vn(e,"iterate",ze(e)?"length":Ti),Reflect.ownKeys(e)}}class n_ extends e_{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const eT=new t_,tT=new n_,nT=new t_(!0),rT=new n_(!0),Kf=t=>t,bl=t=>Reflect.getPrototypeOf(t);function sT(t,e,n){return function(...r){const s=this.__v_raw,i=rt(s),o=uo(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=s[t](...r),u=n?Kf:e?hc:an;return!e&&vn(i,"iterate",l?Hf:Ti),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function vl(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function iT(t,e){const n={get(s){const i=this.__v_raw,o=rt(i),a=rt(s);t||(Qs(s,a)&&vn(o,"get",s),vn(o,"get",a));const{has:l}=bl(o),c=e?Kf:t?hc:an;if(l.call(o,s))return c(i.get(s));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&vn(rt(s),"iterate",Ti),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=rt(i),a=rt(s);return t||(Qs(s,a)&&vn(o,"has",s),vn(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,l=rt(a),c=e?Kf:t?hc:an;return!t&&vn(l,"iterate",Ti),a.forEach((u,d)=>s.call(i,c(u),c(d),o))}};return _n(n,t?{add:vl("add"),set:vl("set"),delete:vl("delete"),clear:vl("clear")}:{add(s){!e&&!ur(s)&&!ti(s)&&(s=rt(s));const i=rt(this);return bl(i).has.call(i,s)||(i.add(s),fs(i,"add",s,s)),this},set(s,i){!e&&!ur(i)&&!ti(i)&&(i=rt(i));const o=rt(this),{has:a,get:l}=bl(o);let c=a.call(o,s);c||(s=rt(s),c=a.call(o,s));const u=l.call(o,s);return o.set(s,i),c?Qs(i,u)&&fs(o,"set",s,i):fs(o,"add",s,i),this},delete(s){const i=rt(this),{has:o,get:a}=bl(i);let l=o.call(i,s);l||(s=rt(s),l=o.call(i,s)),a&&a.call(i,s);const c=i.delete(s);return l&&fs(i,"delete",s,void 0),c},clear(){const s=rt(this),i=s.size!==0,o=s.clear();return i&&fs(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=sT(s,t,e)}),n}function iu(t,e){const n=iT(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(ft(n,s)&&s in r?n:r,s,i)}const oT={get:iu(!1,!1)},aT={get:iu(!1,!0)},lT={get:iu(!0,!1)},cT={get:iu(!0,!0)},r_=new WeakMap,s_=new WeakMap,i_=new WeakMap,o_=new WeakMap;function uT(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function dT(t){return t.__v_skip||!Object.isExtensible(t)?0:uT(NR(t))}function kr(t){return ti(t)?t:ou(t,!1,eT,oT,r_)}function a_(t){return ou(t,!1,nT,aT,s_)}function Cs(t){return ou(t,!0,tT,lT,i_)}function Ki(t){return ou(t,!0,rT,cT,o_)}function ou(t,e,n,r,s){if(!Ct(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=dT(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function Zs(t){return ti(t)?Zs(t.__v_raw):!!(t&&t.__v_isReactive)}function ti(t){return!!(t&&t.__v_isReadonly)}function ur(t){return!!(t&&t.__v_isShallow)}function Sp(t){return t?!!t.__v_raw:!1}function rt(t){const e=t&&t.__v_raw;return e?rt(e):t}function it(t){return!ft(t,"__v_skip")&&Object.isExtensible(t)&&j0(t,"__v_skip",!0),t}const an=t=>Ct(t)?kr(t):t,hc=t=>Ct(t)?Cs(t):t;function Pt(t){return t?t.__v_isRef===!0:!1}function Ee(t){return l_(t,!1)}function pr(t){return l_(t,!0)}function l_(t,e){return Pt(t)?t:new fT(t,e)}class fT{constructor(e,n){this.dep=new ru,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:rt(e),this._value=n?e:an(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||ur(e)||ti(e);e=r?e:rt(e),Qs(e,n)&&(this._rawValue=e,this._value=r?e:an(e),this.dep.trigger())}}function zd(t){t.dep&&t.dep.trigger()}function E(t){return Pt(t)?t.value:t}function dr(t){return Ke(t)?t():E(t)}const hT={get:(t,e,n)=>e==="__v_raw"?t:E(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Pt(s)&&!Pt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function c_(t){return Zs(t)?t:new Proxy(t,hT)}class pT{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new ru,{get:r,set:s}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function Ap(t){return new pT(t)}function er(t){const e=ze(t)?new Array(t.length):{};for(const n in t)e[n]=u_(t,n);return e}class mT{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return JR(rt(this._object),this._key)}}class gT{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Wf(t,e,n){return Pt(t)?t:Ke(t)?new gT(t):Ct(t)&&arguments.length>1?u_(t,e,n):Ee(t)}function u_(t,e,n){const r=t[e];return Pt(r)?r:new mT(t,e,n)}class yT{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new ru(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ra-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Rt!==this)return W0(this,!0),!0}get value(){const e=this.dep.track();return X0(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function bT(t,e,n=!1){let r,s;return Ke(t)?r=t:(r=t.get,s=t.set),new yT(r,s,n)}const wl={},pc=new WeakMap;let xi;function vT(t,e=!1,n=xi){if(n){let r=pc.get(n);r||pc.set(n,r=[]),r.push(t)}}function wT(t,e,n=xt){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:l}=n,c=p=>s?p:ur(p)||s===!1||s===0?hs(p,1):hs(p);let u,d,f,h,m=!1,y=!1;if(Pt(t)?(d=()=>t.value,m=ur(t)):Zs(t)?(d=()=>c(t),m=!0):ze(t)?(y=!0,m=t.some(p=>Zs(p)||ur(p)),d=()=>t.map(p=>{if(Pt(p))return p.value;if(Zs(p))return c(p);if(Ke(p))return l?l(p,2):p()})):Ke(t)?e?d=l?()=>l(t,2):t:d=()=>{if(f){_s();try{f()}finally{xs()}}const p=xi;xi=u;try{return l?l(t,3,[h]):t(h)}finally{xi=p}}:d=Vr,e&&s){const p=d,b=s===!0?1/0:s;d=()=>hs(p(),b)}const S=Wa(),_=()=>{u.stop(),S&&S.active&&vp(S.effects,u)};if(i&&e){const p=e;e=(...b)=>{p(...b),_()}}let x=y?new Array(t.length).fill(wl):wl;const w=p=>{if(!(!(u.flags&1)||!u.dirty&&!p))if(e){const b=u.run();if(s||m||(y?b.some((A,R)=>Qs(A,x[R])):Qs(b,x))){f&&f();const A=xi;xi=u;try{const R=[b,x===wl?void 0:y&&x[0]===wl?[]:x,h];l?l(e,3,R):e(...R),x=b}finally{xi=A}}}else u.run()};return a&&a(w),u=new H0(d),u.scheduler=o?()=>o(w,!1):w,h=p=>vT(p,!1,u),f=u.onStop=()=>{const p=pc.get(u);if(p){if(l)l(p,4);else for(const b of p)b();pc.delete(u)}},e?r?w(!0):x=u.run():o?o(w.bind(null,!0),!0):u.run(),_.pause=u.pause.bind(u),_.resume=u.resume.bind(u),_.stop=_,_}function hs(t,e=1/0,n){if(e<=0||!Ct(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Pt(t))hs(t.value,e,n);else if(ze(t))for(let r=0;r<t.length;r++)hs(t[r],e,n);else if(Yc(t)||uo(t))t.forEach(r=>{hs(r,e,n)});else if(F0(t)){for(const r in t)hs(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&hs(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ga(t,e,n,r){try{return r?t(...r):t()}catch(s){au(s,e,n)}}function Gr(t,e,n,r){if(Ke(t)){const s=Ga(t,e,n,r);return s&&M0(s)&&s.catch(i=>{au(i,e,n)}),s}if(ze(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Gr(t[i],e,n,r));return s}}function au(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||xt;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,l,c)===!1)return}a=a.parent}if(i){_s(),Ga(i,null,10,[t,l,c]),xs();return}}_T(t,n,s,r,o)}function _T(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Cn=[];let Br=-1;const fo=[];let Ms=null,Yi=0;const d_=Promise.resolve();let mc=null;function Ft(t){const e=mc||d_;return t?e.then(this?t.bind(this):t):e}function xT(t){let e=Br+1,n=Cn.length;for(;e<n;){const r=e+n>>>1,s=Cn[r],i=ka(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function Ip(t){if(!(t.flags&1)){const e=ka(t),n=Cn[Cn.length-1];!n||!(t.flags&2)&&e>=ka(n)?Cn.push(t):Cn.splice(xT(e),0,t),t.flags|=1,f_()}}function f_(){mc||(mc=d_.then(p_))}function ET(t){ze(t)?fo.push(...t):Ms&&t.id===-1?Ms.splice(Yi+1,0,t):t.flags&1||(fo.push(t),t.flags|=1),f_()}function jy(t,e,n=Br+1){for(;n<Cn.length;n++){const r=Cn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Cn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function h_(t){if(fo.length){const e=[...new Set(fo)].sort((n,r)=>ka(n)-ka(r));if(fo.length=0,Ms){Ms.push(...e);return}for(Ms=e,Yi=0;Yi<Ms.length;Yi++){const n=Ms[Yi];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ms=null,Yi=0}}const ka=t=>t.id==null?t.flags&2?-1:1/0:t.id;function p_(t){try{for(Br=0;Br<Cn.length;Br++){const e=Cn[Br];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ga(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Br<Cn.length;Br++){const e=Cn[Br];e&&(e.flags&=-2)}Br=-1,Cn.length=0,h_(),mc=null,(Cn.length||fo.length)&&p_()}}let Yt=null,m_=null;function gc(t){const e=Yt;return Yt=t,m_=t&&t.type.__scopeId||null,e}function K(t,e=Yt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Qy(-1);const i=gc(e);let o;try{o=t(...s)}finally{gc(i),r._d&&Qy(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Cp(t,e){if(Yt===null)return t;const n=du(Yt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=xt]=e[s];i&&(Ke(i)&&(i={mounted:i,updated:i}),i.deep&&hs(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function bi(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(_s(),Gr(l,n,8,[t.el,a,t,e]),xs())}}const g_=Symbol("_vte"),ST=t=>t.__isTeleport,ma=t=>t&&(t.disabled||t.disabled===""),Uy=t=>t&&(t.defer||t.defer===""),By=t=>typeof SVGElement<"u"&&t instanceof SVGElement,qy=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Gf=(t,e)=>{const n=t&&t.to;return jt(n)?e?e(n):null:n},y_={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,a,l,c){const{mc:u,pc:d,pbc:f,o:{insert:h,querySelector:m,createText:y,createComment:S}}=c,_=ma(e.props);let{shapeFlag:x,children:w,dynamicChildren:p}=e;if(t==null){const b=e.el=y(""),A=e.anchor=y("");h(b,n,r),h(A,n,r);const R=(T,D)=>{x&16&&(s&&s.isCE&&(s.ce._teleportTarget=T),u(w,T,D,s,i,o,a,l))},I=()=>{const T=e.target=Gf(e.props,m),D=b_(T,e,y,h);T&&(o!=="svg"&&By(T)?o="svg":o!=="mathml"&&qy(T)&&(o="mathml"),_||(R(T,D),Wl(e,!1)))};_&&(R(n,A),Wl(e,!0)),Uy(e.props)?In(()=>{I(),e.el.__isMounted=!0},i):I()}else{if(Uy(e.props)&&!t.el.__isMounted){In(()=>{y_.process(t,e,n,r,s,i,o,a,l,c),delete t.el.__isMounted},i);return}e.el=t.el,e.targetStart=t.targetStart;const b=e.anchor=t.anchor,A=e.target=t.target,R=e.targetAnchor=t.targetAnchor,I=ma(t.props),T=I?n:A,D=I?b:R;if(o==="svg"||By(A)?o="svg":(o==="mathml"||qy(A))&&(o="mathml"),p?(f(t.dynamicChildren,p,T,s,i,o,a),Np(t,e,!0)):l||d(t,e,T,D,s,i,o,a,!1),_)I?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):_l(e,n,b,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const U=e.target=Gf(e.props,m);U&&_l(e,U,null,c,0)}else I&&_l(e,A,R,c,1);Wl(e,_)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:u,target:d,props:f}=t;if(d&&(s(c),s(u)),i&&s(l),o&16){const h=i||!ma(f);for(let m=0;m<a.length;m++){const y=a[m];r(y,e,n,h,!!y.dynamicChildren)}}},move:_l,hydrate:AT};function _l(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,d=i===2;if(d&&r(o,e,n),(!d||ma(u))&&l&16)for(let f=0;f<c.length;f++)s(c[f],e,n,2);d&&r(a,e,n)}function AT(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:u}},d){const f=e.target=Gf(e.props,l);if(f){const h=ma(e.props),m=f._lpa||f.firstChild;if(e.shapeFlag&16)if(h)e.anchor=d(o(t),e,a(t),n,r,s,i),e.targetStart=m,e.targetAnchor=m&&o(m);else{e.anchor=o(t);let y=m;for(;y;){if(y&&y.nodeType===8){if(y.data==="teleport start anchor")e.targetStart=y;else if(y.data==="teleport anchor"){e.targetAnchor=y,f._lpa=e.targetAnchor&&o(e.targetAnchor);break}}y=o(y)}e.targetAnchor||b_(f,e,u,c),d(m&&o(m),e,f,n,r,s,i)}Wl(e,h)}return e.anchor&&o(e.anchor)}const Rp=y_;function Wl(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function b_(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[g_]=i,t&&(r(s,t),r(i,t)),i}function Tp(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Tp(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function fe(t,e){return Ke(t)?_n({name:t.name},e,{setup:t}):t}function zy(){const t=tr();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function v_(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function ci(t){const e=tr(),n=pr(null);if(e){const s=e.refs===xt?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>n.value,set:i=>n.value=i})}return n}function yc(t,e,n,r,s=!1){if(ze(t)){t.forEach((m,y)=>yc(m,e&&(ze(e)?e[y]:e),n,r,s));return}if(ho(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&yc(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?du(r.component):r.el,o=s?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===xt?a.refs={}:a.refs,d=a.setupState,f=rt(d),h=d===xt?()=>!1:m=>ft(f,m);if(c!=null&&c!==l&&(jt(c)?(u[c]=null,h(c)&&(d[c]=null)):Pt(c)&&(c.value=null)),Ke(l))Ga(l,a,12,[o,u]);else{const m=jt(l),y=Pt(l);if(m||y){const S=()=>{if(t.f){const _=m?h(l)?d[l]:u[l]:l.value;s?ze(_)&&vp(_,i):ze(_)?_.includes(i)||_.push(i):m?(u[l]=[i],h(l)&&(d[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else m?(u[l]=o,h(l)&&(d[l]=o)):y&&(l.value=o,t.k&&(u[t.k]=o))};o?(S.id=-1,In(S,n)):S()}}}eu().requestIdleCallback;eu().cancelIdleCallback;const ho=t=>!!t.type.__asyncLoader,w_=t=>t.type.__isKeepAlive;function IT(t,e){__(t,"a",e)}function CT(t,e){__(t,"da",e)}function __(t,e,n=Zt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(lu(e,r,n),n){let s=n.parent;for(;s&&s.parent;)w_(s.parent.vnode)&&RT(r,e,n,s),s=s.parent}}function RT(t,e,n,r){const s=lu(e,t,r,!0);vr(()=>{vp(r[e],s)},n)}function lu(t,e,n=Zt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{_s();const a=Ja(n),l=Gr(e,n,t,o);return a(),xs(),l});return r?s.unshift(i):s.push(i),i}}const Rs=t=>(e,n=Zt)=>{(!Oa||t==="sp")&&lu(t,(...r)=>e(...r),n)},TT=Rs("bm"),sn=Rs("m"),kT=Rs("bu"),$T=Rs("u"),kp=Rs("bum"),vr=Rs("um"),DT=Rs("sp"),OT=Rs("rtg"),PT=Rs("rtc");function LT(t,e=Zt){lu("ec",t,e)}const $p="components",MT="directives";function Dp(t,e){return Op($p,t,!0,e)||t}const x_=Symbol.for("v-ndc");function Ts(t){return jt(t)?Op($p,t,!1)||t:t||x_}function NT(t){return Op(MT,t)}function Op(t,e,n=!0,r=!1){const s=Yt||Zt;if(s){const i=s.type;if(t===$p){const a=_k(i,!1);if(a&&(a===e||a===Un(e)||a===Zc(Un(e))))return i}const o=Vy(s[t]||i[t],e)||Vy(s.appContext[t],e);return!o&&r?i:o}}function Vy(t,e){return t&&(t[e]||t[Un(e)]||t[Zc(Un(e))])}function Ln(t,e,n,r){let s;const i=n,o=ze(t);if(o||jt(t)){const a=o&&Zs(t);let l=!1,c=!1;a&&(l=!ur(t),c=ti(t),t=su(t)),s=new Array(t.length);for(let u=0,d=t.length;u<d;u++)s[u]=e(l?c?hc(an(t[u])):an(t[u]):t[u],u,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(Ct(t))if(t[Symbol.iterator])s=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];s[l]=e(t[u],u,l,i)}}else s=[];return s}function Ae(t,e,n={},r,s){if(Yt.ce||Yt.parent&&ho(Yt.parent)&&Yt.parent.ce)return e!=="default"&&(n.name=e),N(),ae(Je,null,[z("slot",n,r&&r())],64);let i=t[e];i&&i._c&&(i._d=!1),N();const o=i&&E_(i(n)),a=n.key||o&&o.key,l=ae(Je,{key:(a&&!Tr(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function E_(t){return t.some(e=>Da(e)?!(e.type===$r||e.type===Je&&!E_(e.children)):!0)?t:null}const Jf=t=>t?K_(t)?du(t):Jf(t.parent):null,ga=_n(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Jf(t.parent),$root:t=>Jf(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>R_(t),$forceUpdate:t=>t.f||(t.f=()=>{Ip(t.update)}),$nextTick:t=>t.n||(t.n=Ft.bind(t.proxy)),$watch:t=>ik.bind(t)}),Vd=(t,e)=>t!==xt&&!t.__isScriptSetup&&ft(t,e),FT={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const h=o[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Vd(r,e))return o[e]=1,r[e];if(s!==xt&&ft(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&ft(c,e))return o[e]=3,i[e];if(n!==xt&&ft(n,e))return o[e]=4,n[e];Yf&&(o[e]=0)}}const u=ga[e];let d,f;if(u)return e==="$attrs"&&vn(t.attrs,"get",""),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==xt&&ft(n,e))return o[e]=4,n[e];if(f=l.config.globalProperties,ft(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Vd(s,e)?(s[e]=n,!0):r!==xt&&ft(r,e)?(r[e]=n,!0):ft(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==xt&&ft(t,o)||Vd(e,o)||(a=i[0])&&ft(a,o)||ft(r,o)||ft(ga,o)||ft(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ft(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Pp(){return A_().slots}function S_(){return A_().attrs}function A_(){const t=tr();return t.setupContext||(t.setupContext=G_(t))}function Xf(t){return ze(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function I_(t,e){const n=Xf(t);for(const r in e){if(r.startsWith("__skip"))continue;let s=n[r];s?ze(s)||Ke(s)?s=n[r]={type:s,default:e[r]}:s.default=e[r]:s===null&&(s=n[r]={default:e[r]}),s&&e[`__skip_${r}`]&&(s.skipFactory=!0)}return n}function ui(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}let Yf=!0;function jT(t){const e=R_(t),n=t.proxy,r=t.ctx;Yf=!1,e.beforeCreate&&Hy(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:h,updated:m,activated:y,deactivated:S,beforeDestroy:_,beforeUnmount:x,destroyed:w,unmounted:p,render:b,renderTracked:A,renderTriggered:R,errorCaptured:I,serverPrefetch:T,expose:D,inheritAttrs:U,components:J,directives:H,filters:j}=e;if(c&&UT(c,r,null),o)for(const W in o){const B=o[W];Ke(B)&&(r[W]=B.bind(n))}if(s){const W=s.call(n,n);Ct(W)&&(t.data=kr(W))}if(Yf=!0,i)for(const W in i){const B=i[W],oe=Ke(B)?B.bind(n,n):Ke(B.get)?B.get.bind(n,n):Vr,q=!Ke(B)&&Ke(B.set)?B.set.bind(n):Vr,le=re({get:oe,set:q});Object.defineProperty(r,W,{enumerable:!0,configurable:!0,get:()=>le.value,set:de=>le.value=de})}if(a)for(const W in a)C_(a[W],r,n,W);if(l){const W=Ke(l)?l.call(n):l;Reflect.ownKeys(W).forEach(B=>{fr(B,W[B])})}u&&Hy(u,t,"c");function $(W,B){ze(B)?B.forEach(oe=>W(oe.bind(n))):B&&W(B.bind(n))}if($(TT,d),$(sn,f),$(kT,h),$($T,m),$(IT,y),$(CT,S),$(LT,I),$(PT,A),$(OT,R),$(kp,x),$(vr,p),$(DT,T),ze(D))if(D.length){const W=t.exposed||(t.exposed={});D.forEach(B=>{Object.defineProperty(W,B,{get:()=>n[B],set:oe=>n[B]=oe})})}else t.exposed||(t.exposed={});b&&t.render===Vr&&(t.render=b),U!=null&&(t.inheritAttrs=U),J&&(t.components=J),H&&(t.directives=H),T&&v_(t)}function UT(t,e,n=Vr){ze(t)&&(t=Qf(t));for(const r in t){const s=t[r];let i;Ct(s)?"default"in s?i=qt(s.from||r,s.default,!0):i=qt(s.from||r):i=qt(s),Pt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Hy(t,e,n){Gr(ze(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function C_(t,e,n,r){let s=r.includes(".")?U_(n,r):()=>n[r];if(jt(t)){const i=e[t];Ke(i)&&ut(s,i)}else if(Ke(t))ut(s,t.bind(n));else if(Ct(t))if(ze(t))t.forEach(i=>C_(i,e,n,r));else{const i=Ke(t.handler)?t.handler.bind(n):e[t.handler];Ke(i)&&ut(s,i,t)}}function R_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(c=>bc(l,c,o,!0)),bc(l,e,o)),Ct(e)&&i.set(e,l),l}function bc(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&bc(t,i,n,!0),s&&s.forEach(o=>bc(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=BT[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const BT={data:Ky,props:Wy,emits:Wy,methods:ia,computed:ia,beforeCreate:Sn,created:Sn,beforeMount:Sn,mounted:Sn,beforeUpdate:Sn,updated:Sn,beforeDestroy:Sn,beforeUnmount:Sn,destroyed:Sn,unmounted:Sn,activated:Sn,deactivated:Sn,errorCaptured:Sn,serverPrefetch:Sn,components:ia,directives:ia,watch:zT,provide:Ky,inject:qT};function Ky(t,e){return e?t?function(){return _n(Ke(t)?t.call(this,this):t,Ke(e)?e.call(this,this):e)}:e:t}function qT(t,e){return ia(Qf(t),Qf(e))}function Qf(t){if(ze(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Sn(t,e){return t?[...new Set([].concat(t,e))]:e}function ia(t,e){return t?_n(Object.create(null),t,e):e}function Wy(t,e){return t?ze(t)&&ze(e)?[...new Set([...t,...e])]:_n(Object.create(null),Xf(t),Xf(e??{})):e}function zT(t,e){if(!t)return e;if(!e)return t;const n=_n(Object.create(null),t);for(const r in e)n[r]=Sn(t[r],e[r]);return n}function T_(){return{app:null,config:{isNativeTag:LR,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let VT=0;function HT(t,e){return function(r,s=null){Ke(r)||(r=_n({},r)),s!=null&&!Ct(s)&&(s=null);const i=T_(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:VT++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Ek,get config(){return i.config},set config(u){},use(u,...d){return o.has(u)||(u&&Ke(u.install)?(o.add(u),u.install(c,...d)):Ke(u)&&(o.add(u),u(c,...d))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,d){return d?(i.components[u]=d,c):i.components[u]},directive(u,d){return d?(i.directives[u]=d,c):i.directives[u]},mount(u,d,f){if(!l){const h=c._ceVNode||z(r,s);return h.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),t(h,u,f),l=!0,c._container=u,u.__vue_app__=c,du(h.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Gr(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return i.provides[u]=d,c},runWithContext(u){const d=ki;ki=c;try{return u()}finally{ki=d}}};return c}}let ki=null;function fr(t,e){if(Zt){let n=Zt.provides;const r=Zt.parent&&Zt.parent.provides;r===n&&(n=Zt.provides=Object.create(r)),n[t]=e}}function qt(t,e,n=!1){const r=Zt||Yt;if(r||ki){const s=ki?ki._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Ke(e)?e.call(r&&r.proxy):e}}function KT(){return!!(Zt||Yt||ki)}const k_={},$_=()=>Object.create(k_),D_=t=>Object.getPrototypeOf(t)===k_;function WT(t,e,n,r=!1){const s={},i=$_();t.propsDefaults=Object.create(null),O_(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:a_(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function GT(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=rt(s),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(uu(t.emitsOptions,f))continue;const h=e[f];if(l)if(ft(i,f))h!==i[f]&&(i[f]=h,c=!0);else{const m=Un(f);s[m]=Zf(l,a,m,h,t,!1)}else h!==i[f]&&(i[f]=h,c=!0)}}}else{O_(t,e,s,i)&&(c=!0);let u;for(const d in a)(!e||!ft(e,d)&&((u=li(d))===d||!ft(e,u)))&&(l?n&&(n[d]!==void 0||n[u]!==void 0)&&(s[d]=Zf(l,a,d,void 0,t,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!ft(e,d))&&(delete i[d],c=!0)}c&&fs(t.attrs,"set","")}function O_(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(fa(l))continue;const c=e[l];let u;s&&ft(s,u=Un(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:uu(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=rt(n),c=a||xt;for(let u=0;u<i.length;u++){const d=i[u];n[d]=Zf(s,l,d,c[d],t,!ft(c,d))}}return o}function Zf(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=ft(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ke(l)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const u=Ja(s);r=c[n]=l.call(null,e),u()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===li(n))&&(r=!0))}return r}const JT=new WeakMap;function P_(t,e,n=!1){const r=n?JT:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!Ke(t)){const u=d=>{l=!0;const[f,h]=P_(d,e,!0);_n(o,f),h&&a.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return Ct(t)&&r.set(t,co),co;if(ze(i))for(let u=0;u<i.length;u++){const d=Un(i[u]);Gy(d)&&(o[d]=xt)}else if(i)for(const u in i){const d=Un(u);if(Gy(d)){const f=i[u],h=o[d]=ze(f)||Ke(f)?{type:f}:_n({},f),m=h.type;let y=!1,S=!0;if(ze(m))for(let _=0;_<m.length;++_){const x=m[_],w=Ke(x)&&x.name;if(w==="Boolean"){y=!0;break}else w==="String"&&(S=!1)}else y=Ke(m)&&m.name==="Boolean";h[0]=y,h[1]=S,(y||ft(h,"default"))&&a.push(d)}}const c=[o,a];return Ct(t)&&r.set(t,c),c}function Gy(t){return t[0]!=="$"&&!fa(t)}const Lp=t=>t[0]==="_"||t==="$stable",Mp=t=>ze(t)?t.map(qr):[qr(t)],XT=(t,e,n)=>{if(e._n)return e;const r=K((...s)=>Mp(e(...s)),n);return r._c=!1,r},L_=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Lp(s))continue;const i=t[s];if(Ke(i))e[s]=XT(s,i,r);else if(i!=null){const o=Mp(i);e[s]=()=>o}}},M_=(t,e)=>{const n=Mp(e);t.slots.default=()=>n},N_=(t,e,n)=>{for(const r in e)(n||!Lp(r))&&(t[r]=e[r])},YT=(t,e,n)=>{const r=t.slots=$_();if(t.vnode.shapeFlag&32){const s=e._;s?(N_(r,e,n),n&&j0(r,"_",s,!0)):L_(e,r)}else e&&M_(t,e)},QT=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=xt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:N_(s,e,n):(i=!e.$stable,L_(e,s)),o=e}else e&&(M_(t,e),o={default:1});if(i)for(const a in s)!Lp(a)&&o[a]==null&&delete s[a]},In=fk;function ZT(t){return ek(t)}function ek(t,e){const n=eu();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:h=Vr,insertStaticContent:m}=t,y=(P,k,V,pe=null,be=null,ge=null,M=void 0,F=null,te=!!k.dynamicChildren)=>{if(P===k)return;P&&!Ho(P,k)&&(pe=O(P),de(P,be,ge,!0),P=null),k.patchFlag===-2&&(te=!1,k.dynamicChildren=null);const{type:ue,ref:Re,shapeFlag:we}=k;switch(ue){case ko:S(P,k,V,pe);break;case $r:_(P,k,V,pe);break;case ya:P==null&&x(k,V,pe,M);break;case Je:J(P,k,V,pe,be,ge,M,F,te);break;default:we&1?b(P,k,V,pe,be,ge,M,F,te):we&6?H(P,k,V,pe,be,ge,M,F,te):(we&64||we&128)&&ue.process(P,k,V,pe,be,ge,M,F,te,ne)}Re!=null&&be&&yc(Re,P&&P.ref,ge,k||P,!k)},S=(P,k,V,pe)=>{if(P==null)r(k.el=a(k.children),V,pe);else{const be=k.el=P.el;k.children!==P.children&&c(be,k.children)}},_=(P,k,V,pe)=>{P==null?r(k.el=l(k.children||""),V,pe):k.el=P.el},x=(P,k,V,pe)=>{[P.el,P.anchor]=m(P.children,k,V,pe,P.el,P.anchor)},w=({el:P,anchor:k},V,pe)=>{let be;for(;P&&P!==k;)be=f(P),r(P,V,pe),P=be;r(k,V,pe)},p=({el:P,anchor:k})=>{let V;for(;P&&P!==k;)V=f(P),s(P),P=V;s(k)},b=(P,k,V,pe,be,ge,M,F,te)=>{k.type==="svg"?M="svg":k.type==="math"&&(M="mathml"),P==null?A(k,V,pe,be,ge,M,F,te):T(P,k,be,ge,M,F,te)},A=(P,k,V,pe,be,ge,M,F)=>{let te,ue;const{props:Re,shapeFlag:we,transition:ee,dirs:he}=P;if(te=P.el=o(P.type,ge,Re&&Re.is,Re),we&8?u(te,P.children):we&16&&I(P.children,te,null,pe,be,Hd(P,ge),M,F),he&&bi(P,null,pe,"created"),R(te,P,P.scopeId,M,pe),Re){for(const C in Re)C!=="value"&&!fa(C)&&i(te,C,null,Re[C],ge,pe);"value"in Re&&i(te,"value",null,Re.value,ge),(ue=Re.onVnodeBeforeMount)&&Fr(ue,pe,P)}he&&bi(P,null,pe,"beforeMount");const De=tk(be,ee);De&&ee.beforeEnter(te),r(te,k,V),((ue=Re&&Re.onVnodeMounted)||De||he)&&In(()=>{ue&&Fr(ue,pe,P),De&&ee.enter(te),he&&bi(P,null,pe,"mounted")},be)},R=(P,k,V,pe,be)=>{if(V&&h(P,V),pe)for(let ge=0;ge<pe.length;ge++)h(P,pe[ge]);if(be){let ge=be.subTree;if(k===ge||q_(ge.type)&&(ge.ssContent===k||ge.ssFallback===k)){const M=be.vnode;R(P,M,M.scopeId,M.slotScopeIds,be.parent)}}},I=(P,k,V,pe,be,ge,M,F,te=0)=>{for(let ue=te;ue<P.length;ue++){const Re=P[ue]=F?Ns(P[ue]):qr(P[ue]);y(null,Re,k,V,pe,be,ge,M,F)}},T=(P,k,V,pe,be,ge,M)=>{const F=k.el=P.el;let{patchFlag:te,dynamicChildren:ue,dirs:Re}=k;te|=P.patchFlag&16;const we=P.props||xt,ee=k.props||xt;let he;if(V&&vi(V,!1),(he=ee.onVnodeBeforeUpdate)&&Fr(he,V,k,P),Re&&bi(k,P,V,"beforeUpdate"),V&&vi(V,!0),(we.innerHTML&&ee.innerHTML==null||we.textContent&&ee.textContent==null)&&u(F,""),ue?D(P.dynamicChildren,ue,F,V,pe,Hd(k,be),ge):M||B(P,k,F,null,V,pe,Hd(k,be),ge,!1),te>0){if(te&16)U(F,we,ee,V,be);else if(te&2&&we.class!==ee.class&&i(F,"class",null,ee.class,be),te&4&&i(F,"style",we.style,ee.style,be),te&8){const De=k.dynamicProps;for(let C=0;C<De.length;C++){const g=De[C],v=we[g],L=ee[g];(L!==v||g==="value")&&i(F,g,v,L,be,V)}}te&1&&P.children!==k.children&&u(F,k.children)}else!M&&ue==null&&U(F,we,ee,V,be);((he=ee.onVnodeUpdated)||Re)&&In(()=>{he&&Fr(he,V,k,P),Re&&bi(k,P,V,"updated")},pe)},D=(P,k,V,pe,be,ge,M)=>{for(let F=0;F<k.length;F++){const te=P[F],ue=k[F],Re=te.el&&(te.type===Je||!Ho(te,ue)||te.shapeFlag&70)?d(te.el):V;y(te,ue,Re,null,pe,be,ge,M,!0)}},U=(P,k,V,pe,be)=>{if(k!==V){if(k!==xt)for(const ge in k)!fa(ge)&&!(ge in V)&&i(P,ge,k[ge],null,be,pe);for(const ge in V){if(fa(ge))continue;const M=V[ge],F=k[ge];M!==F&&ge!=="value"&&i(P,ge,F,M,be,pe)}"value"in V&&i(P,"value",k.value,V.value,be)}},J=(P,k,V,pe,be,ge,M,F,te)=>{const ue=k.el=P?P.el:a(""),Re=k.anchor=P?P.anchor:a("");let{patchFlag:we,dynamicChildren:ee,slotScopeIds:he}=k;he&&(F=F?F.concat(he):he),P==null?(r(ue,V,pe),r(Re,V,pe),I(k.children||[],V,Re,be,ge,M,F,te)):we>0&&we&64&&ee&&P.dynamicChildren?(D(P.dynamicChildren,ee,V,be,ge,M,F),(k.key!=null||be&&k===be.subTree)&&Np(P,k,!0)):B(P,k,V,Re,be,ge,M,F,te)},H=(P,k,V,pe,be,ge,M,F,te)=>{k.slotScopeIds=F,P==null?k.shapeFlag&512?be.ctx.activate(k,V,pe,M,te):j(k,V,pe,be,ge,M,te):se(P,k,te)},j=(P,k,V,pe,be,ge,M)=>{const F=P.component=yk(P,pe,be);if(w_(P)&&(F.ctx.renderer=ne),bk(F,!1,M),F.asyncDep){if(be&&be.registerDep(F,$,M),!P.el){const te=F.subTree=z($r);_(null,te,k,V)}}else $(F,P,k,V,be,ge,M)},se=(P,k,V)=>{const pe=k.component=P.component;if(uk(P,k,V))if(pe.asyncDep&&!pe.asyncResolved){W(pe,k,V);return}else pe.next=k,pe.update();else k.el=P.el,pe.vnode=k},$=(P,k,V,pe,be,ge,M)=>{const F=()=>{if(P.isMounted){let{next:we,bu:ee,u:he,parent:De,vnode:C}=P;{const ce=F_(P);if(ce){we&&(we.el=C.el,W(P,we,M)),ce.asyncDep.then(()=>{P.isUnmounted||F()});return}}let g=we,v;vi(P,!1),we?(we.el=C.el,W(P,we,M)):we=C,ee&&Kl(ee),(v=we.props&&we.props.onVnodeBeforeUpdate)&&Fr(v,De,we,C),vi(P,!0);const L=Xy(P),Y=P.subTree;P.subTree=L,y(Y,L,d(Y.el),O(Y),P,be,ge),we.el=L.el,g===null&&dk(P,L.el),he&&In(he,be),(v=we.props&&we.props.onVnodeUpdated)&&In(()=>Fr(v,De,we,C),be)}else{let we;const{el:ee,props:he}=k,{bm:De,m:C,parent:g,root:v,type:L}=P,Y=ho(k);vi(P,!1),De&&Kl(De),!Y&&(we=he&&he.onVnodeBeforeMount)&&Fr(we,g,k),vi(P,!0);{v.ce&&v.ce._injectChildStyle(L);const ce=P.subTree=Xy(P);y(null,ce,V,pe,P,be,ge),k.el=ce.el}if(C&&In(C,be),!Y&&(we=he&&he.onVnodeMounted)){const ce=k;In(()=>Fr(we,g,ce),be)}(k.shapeFlag&256||g&&ho(g.vnode)&&g.vnode.shapeFlag&256)&&P.a&&In(P.a,be),P.isMounted=!0,k=V=pe=null}};P.scope.on();const te=P.effect=new H0(F);P.scope.off();const ue=P.update=te.run.bind(te),Re=P.job=te.runIfDirty.bind(te);Re.i=P,Re.id=P.uid,te.scheduler=()=>Ip(Re),vi(P,!0),ue()},W=(P,k,V)=>{k.component=P;const pe=P.vnode.props;P.vnode=k,P.next=null,GT(P,k.props,pe,V),QT(P,k.children,V),_s(),jy(P),xs()},B=(P,k,V,pe,be,ge,M,F,te=!1)=>{const ue=P&&P.children,Re=P?P.shapeFlag:0,we=k.children,{patchFlag:ee,shapeFlag:he}=k;if(ee>0){if(ee&128){q(ue,we,V,pe,be,ge,M,F,te);return}else if(ee&256){oe(ue,we,V,pe,be,ge,M,F,te);return}}he&8?(Re&16&&G(ue,be,ge),we!==ue&&u(V,we)):Re&16?he&16?q(ue,we,V,pe,be,ge,M,F,te):G(ue,be,ge,!0):(Re&8&&u(V,""),he&16&&I(we,V,pe,be,ge,M,F,te))},oe=(P,k,V,pe,be,ge,M,F,te)=>{P=P||co,k=k||co;const ue=P.length,Re=k.length,we=Math.min(ue,Re);let ee;for(ee=0;ee<we;ee++){const he=k[ee]=te?Ns(k[ee]):qr(k[ee]);y(P[ee],he,V,null,be,ge,M,F,te)}ue>Re?G(P,be,ge,!0,!1,we):I(k,V,pe,be,ge,M,F,te,we)},q=(P,k,V,pe,be,ge,M,F,te)=>{let ue=0;const Re=k.length;let we=P.length-1,ee=Re-1;for(;ue<=we&&ue<=ee;){const he=P[ue],De=k[ue]=te?Ns(k[ue]):qr(k[ue]);if(Ho(he,De))y(he,De,V,null,be,ge,M,F,te);else break;ue++}for(;ue<=we&&ue<=ee;){const he=P[we],De=k[ee]=te?Ns(k[ee]):qr(k[ee]);if(Ho(he,De))y(he,De,V,null,be,ge,M,F,te);else break;we--,ee--}if(ue>we){if(ue<=ee){const he=ee+1,De=he<Re?k[he].el:pe;for(;ue<=ee;)y(null,k[ue]=te?Ns(k[ue]):qr(k[ue]),V,De,be,ge,M,F,te),ue++}}else if(ue>ee)for(;ue<=we;)de(P[ue],be,ge,!0),ue++;else{const he=ue,De=ue,C=new Map;for(ue=De;ue<=ee;ue++){const Ge=k[ue]=te?Ns(k[ue]):qr(k[ue]);Ge.key!=null&&C.set(Ge.key,ue)}let g,v=0;const L=ee-De+1;let Y=!1,ce=0;const ve=new Array(L);for(ue=0;ue<L;ue++)ve[ue]=0;for(ue=he;ue<=we;ue++){const Ge=P[ue];if(v>=L){de(Ge,be,ge,!0);continue}let Qe;if(Ge.key!=null)Qe=C.get(Ge.key);else for(g=De;g<=ee;g++)if(ve[g-De]===0&&Ho(Ge,k[g])){Qe=g;break}Qe===void 0?de(Ge,be,ge,!0):(ve[Qe-De]=ue+1,Qe>=ce?ce=Qe:Y=!0,y(Ge,k[Qe],V,null,be,ge,M,F,te),v++)}const Ve=Y?nk(ve):co;for(g=Ve.length-1,ue=L-1;ue>=0;ue--){const Ge=De+ue,Qe=k[Ge],pt=Ge+1<Re?k[Ge+1].el:pe;ve[ue]===0?y(null,Qe,V,pt,be,ge,M,F,te):Y&&(g<0||ue!==Ve[g]?le(Qe,V,pt,2):g--)}}},le=(P,k,V,pe,be=null)=>{const{el:ge,type:M,transition:F,children:te,shapeFlag:ue}=P;if(ue&6){le(P.component.subTree,k,V,pe);return}if(ue&128){P.suspense.move(k,V,pe);return}if(ue&64){M.move(P,k,V,ne);return}if(M===Je){r(ge,k,V);for(let we=0;we<te.length;we++)le(te[we],k,V,pe);r(P.anchor,k,V);return}if(M===ya){w(P,k,V);return}if(pe!==2&&ue&1&&F)if(pe===0)F.beforeEnter(ge),r(ge,k,V),In(()=>F.enter(ge),be);else{const{leave:we,delayLeave:ee,afterLeave:he}=F,De=()=>{P.ctx.isUnmounted?s(ge):r(ge,k,V)},C=()=>{we(ge,()=>{De(),he&&he()})};ee?ee(ge,De,C):C()}else r(ge,k,V)},de=(P,k,V,pe=!1,be=!1)=>{const{type:ge,props:M,ref:F,children:te,dynamicChildren:ue,shapeFlag:Re,patchFlag:we,dirs:ee,cacheIndex:he}=P;if(we===-2&&(be=!1),F!=null&&(_s(),yc(F,null,V,P,!0),xs()),he!=null&&(k.renderCache[he]=void 0),Re&256){k.ctx.deactivate(P);return}const De=Re&1&&ee,C=!ho(P);let g;if(C&&(g=M&&M.onVnodeBeforeUnmount)&&Fr(g,k,P),Re&6)X(P.component,V,pe);else{if(Re&128){P.suspense.unmount(V,pe);return}De&&bi(P,null,k,"beforeUnmount"),Re&64?P.type.remove(P,k,V,ne,pe):ue&&!ue.hasOnce&&(ge!==Je||we>0&&we&64)?G(ue,k,V,!1,!0):(ge===Je&&we&384||!be&&Re&16)&&G(te,k,V),pe&&ye(P)}(C&&(g=M&&M.onVnodeUnmounted)||De)&&In(()=>{g&&Fr(g,k,P),De&&bi(P,null,k,"unmounted")},V)},ye=P=>{const{type:k,el:V,anchor:pe,transition:be}=P;if(k===Je){Ce(V,pe);return}if(k===ya){p(P);return}const ge=()=>{s(V),be&&!be.persisted&&be.afterLeave&&be.afterLeave()};if(P.shapeFlag&1&&be&&!be.persisted){const{leave:M,delayLeave:F}=be,te=()=>M(V,ge);F?F(P.el,ge,te):te()}else ge()},Ce=(P,k)=>{let V;for(;P!==k;)V=f(P),s(P),P=V;s(k)},X=(P,k,V)=>{const{bum:pe,scope:be,job:ge,subTree:M,um:F,m:te,a:ue,parent:Re,slots:{__:we}}=P;Jy(te),Jy(ue),pe&&Kl(pe),Re&&ze(we)&&we.forEach(ee=>{Re.renderCache[ee]=void 0}),be.stop(),ge&&(ge.flags|=8,de(M,P,k,V)),F&&In(F,k),In(()=>{P.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},G=(P,k,V,pe=!1,be=!1,ge=0)=>{for(let M=ge;M<P.length;M++)de(P[M],k,V,pe,be)},O=P=>{if(P.shapeFlag&6)return O(P.component.subTree);if(P.shapeFlag&128)return P.suspense.next();const k=f(P.anchor||P.el),V=k&&k[g_];return V?f(V):k};let Q=!1;const ie=(P,k,V)=>{P==null?k._vnode&&de(k._vnode,null,null,!0):y(k._vnode||null,P,k,null,null,null,V),k._vnode=P,Q||(Q=!0,jy(),h_(),Q=!1)},ne={p:y,um:de,m:le,r:ye,mt:j,mc:I,pc:B,pbc:D,n:O,o:t};return{render:ie,hydrate:void 0,createApp:HT(ie)}}function Hd({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function vi({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function tk(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Np(t,e,n=!1){const r=t.children,s=e.children;if(ze(r)&&ze(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Ns(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Np(o,a)),a.type===ko&&(a.el=o.el),a.type===$r&&!a.el&&(a.el=o.el)}}function nk(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(s=n[n.length-1],t[s]<c){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function F_(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:F_(e)}function Jy(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const rk=Symbol.for("v-scx"),sk=()=>qt(rk);function Lt(t,e){return cu(t,null,e)}function j_(t,e){return cu(t,null,{flush:"post"})}function ut(t,e,n){return cu(t,e,n)}function cu(t,e,n=xt){const{immediate:r,deep:s,flush:i,once:o}=n,a=_n({},n),l=e&&r||!e&&i!=="post";let c;if(Oa){if(i==="sync"){const h=sk();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=Vr,h.resume=Vr,h.pause=Vr,h}}const u=Zt;a.call=(h,m,y)=>Gr(h,u,m,y);let d=!1;i==="post"?a.scheduler=h=>{In(h,u&&u.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(h,m)=>{m?h():Ip(h)}),a.augmentJob=h=>{e&&(h.flags|=4),d&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const f=wT(t,e,a);return Oa&&(c?c.push(f):l&&f()),f}function ik(t,e,n){const r=this.proxy,s=jt(t)?t.includes(".")?U_(r,t):()=>r[t]:t.bind(r,r);let i;Ke(e)?i=e:(i=e.handler,n=e);const o=Ja(this),a=cu(s,i.bind(r),n);return o(),a}function U_(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const ok=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Un(e)}Modifiers`]||t[`${li(e)}Modifiers`];function ak(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||xt;let s=n;const i=e.startsWith("update:"),o=i&&ok(r,e.slice(7));o&&(o.trim&&(s=n.map(u=>jt(u)?u.trim():u)),o.number&&(s=n.map(zf)));let a,l=r[a=Hl(e)]||r[a=Hl(Un(e))];!l&&i&&(l=r[a=Hl(li(e))]),l&&Gr(l,t,6,s);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Gr(c,t,6,s)}}function B_(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Ke(t)){const l=c=>{const u=B_(c,e,!0);u&&(a=!0,_n(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(Ct(t)&&r.set(t,null),null):(ze(i)?i.forEach(l=>o[l]=null):_n(o,i),Ct(t)&&r.set(t,o),o)}function uu(t,e){return!t||!Xc(e)?!1:(e=e.slice(2).replace(/Once$/,""),ft(t,e[0].toLowerCase()+e.slice(1))||ft(t,li(e))||ft(t,e))}function Xy(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:f,setupState:h,ctx:m,inheritAttrs:y}=t,S=gc(t);let _,x;try{if(n.shapeFlag&4){const p=s||r,b=p;_=qr(c.call(b,p,u,d,h,f,m)),x=a}else{const p=e;_=qr(p.length>1?p(d,{attrs:a,slots:o,emit:l}):p(d,null)),x=e.props?a:lk(a)}}catch(p){ba.length=0,au(p,t,1),_=z($r)}let w=_;if(x&&y!==!1){const p=Object.keys(x),{shapeFlag:b}=w;p.length&&b&7&&(i&&p.some(bp)&&(x=ck(x,i)),w=Pi(w,x,!1,!0))}return n.dirs&&(w=Pi(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&Tp(w,n.transition),_=w,gc(S),_}const lk=t=>{let e;for(const n in t)(n==="class"||n==="style"||Xc(n))&&((e||(e={}))[n]=t[n]);return e},ck=(t,e)=>{const n={};for(const r in t)(!bp(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function uk(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Yy(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==r[f]&&!uu(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Yy(r,o,c):!0:!!o;return!1}function Yy(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!uu(n,i))return!0}return!1}function dk({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const q_=t=>t.__isSuspense;function fk(t,e){e&&e.pendingBranch?ze(t)?e.effects.push(...t):e.effects.push(t):ET(t)}const Je=Symbol.for("v-fgt"),ko=Symbol.for("v-txt"),$r=Symbol.for("v-cmt"),ya=Symbol.for("v-stc"),ba=[];let Kn=null;function N(t=!1){ba.push(Kn=t?null:[])}function hk(){ba.pop(),Kn=ba[ba.length-1]||null}let $a=1;function Qy(t,e=!1){$a+=t,t<0&&Kn&&e&&(Kn.hasOnce=!0)}function z_(t){return t.dynamicChildren=$a>0?Kn||co:null,hk(),$a>0&&Kn&&Kn.push(t),t}function _e(t,e,n,r,s,i){return z_(me(t,e,n,r,s,i,!0))}function ae(t,e,n,r,s){return z_(z(t,e,n,r,s,!0))}function Da(t){return t?t.__v_isVNode===!0:!1}function Ho(t,e){return t.type===e.type&&t.key===e.key}const V_=({key:t})=>t??null,Gl=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?jt(t)||Pt(t)||Ke(t)?{i:Yt,r:t,k:e,f:!!n}:t:null);function me(t,e=null,n=null,r=0,s=null,i=t===Je?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&V_(e),ref:e&&Gl(e),scopeId:m_,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Yt};return a?(Fp(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=jt(n)?8:16),$a>0&&!o&&Kn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Kn.push(l),l}const z=pk;function pk(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===x_)&&(t=$r),Da(t)){const a=Pi(t,e,!0);return n&&Fp(a,n),$a>0&&!i&&Kn&&(a.shapeFlag&6?Kn[Kn.indexOf(t)]=a:Kn.push(a)),a.patchFlag=-2,a}if(xk(t)&&(t=t.__vccOpts),e){e=qn(e);let{class:a,style:l}=e;a&&!jt(a)&&(e.class=Ye(a)),Ct(l)&&(Sp(l)&&!ze(l)&&(l=_n({},l)),e.style=Is(l))}const o=jt(t)?1:q_(t)?128:ST(t)?64:Ct(t)?4:Ke(t)?2:0;return me(t,e,n,r,s,o,i,!0)}function qn(t){return t?Sp(t)||D_(t)?_n({},t):t:null}function Pi(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=t,c=e?Be(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&V_(c),ref:e&&e.ref?n&&i?ze(i)?i.concat(Gl(e)):[i,Gl(e)]:Gl(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Je?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Pi(t.ssContent),ssFallback:t.ssFallback&&Pi(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Tp(u,l.clone(u)),u}function $e(t=" ",e=0){return z(ko,null,t,e)}function H_(t,e){const n=z(ya,null,t);return n.staticCount=e,n}function We(t="",e=!1){return e?(N(),ae($r,null,t)):z($r,null,t)}function qr(t){return t==null||typeof t=="boolean"?z($r):ze(t)?z(Je,null,t.slice()):Da(t)?Ns(t):z(ko,null,String(t))}function Ns(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Pi(t)}function Fp(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ze(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Fp(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!D_(e)?e._ctx=Yt:s===3&&Yt&&(Yt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ke(e)?(e={default:e,_ctx:Yt},n=32):(e=String(e),r&64?(n=16,e=[$e(e)]):n=8);t.children=e,t.shapeFlag|=n}function Be(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Ye([e.class,r.class]));else if(s==="style")e.style=Is([e.style,r.style]);else if(Xc(s)){const i=e[s],o=r[s];o&&i!==o&&!(ze(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Fr(t,e,n,r=null){Gr(t,e,7,[n,r])}const mk=T_();let gk=0;function yk(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||mk,i={uid:gk++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new V0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:P_(r,s),emitsOptions:B_(r,s),emit:null,emitted:null,propsDefaults:xt,inheritAttrs:r.inheritAttrs,ctx:xt,data:xt,props:xt,attrs:xt,slots:xt,refs:xt,setupState:xt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=ak.bind(null,i),t.ce&&t.ce(i),i}let Zt=null;const tr=()=>Zt||Yt;let vc,eh;{const t=eu(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};vc=e("__VUE_INSTANCE_SETTERS__",n=>Zt=n),eh=e("__VUE_SSR_SETTERS__",n=>Oa=n)}const Ja=t=>{const e=Zt;return vc(t),t.scope.on(),()=>{t.scope.off(),vc(e)}},Zy=()=>{Zt&&Zt.scope.off(),vc(null)};function K_(t){return t.vnode.shapeFlag&4}let Oa=!1;function bk(t,e=!1,n=!1){e&&eh(e);const{props:r,children:s}=t.vnode,i=K_(t);WT(t,r,i,e),YT(t,s,n||e);const o=i?vk(t,e):void 0;return e&&eh(!1),o}function vk(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,FT);const{setup:r}=n;if(r){_s();const s=t.setupContext=r.length>1?G_(t):null,i=Ja(t),o=Ga(r,t,0,[t.props,s]),a=M0(o);if(xs(),i(),(a||t.sp)&&!ho(t)&&v_(t),a){if(o.then(Zy,Zy),e)return o.then(l=>{eb(t,l)}).catch(l=>{au(l,t,0)});t.asyncDep=o}else eb(t,o)}else W_(t)}function eb(t,e,n){Ke(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ct(e)&&(t.setupState=c_(e)),W_(t)}function W_(t,e,n){const r=t.type;t.render||(t.render=r.render||Vr);{const s=Ja(t);_s();try{jT(t)}finally{xs(),s()}}}const wk={get(t,e){return vn(t,"get",""),t[e]}};function G_(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,wk),slots:t.slots,emit:t.emit,expose:e}}function du(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(c_(it(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ga)return ga[n](t)},has(e,n){return n in e||n in ga}})):t.proxy}function _k(t,e=!0){return Ke(t)?t.displayName||t.name:t.name||e&&t.__name}function xk(t){return Ke(t)&&"__vccOpts"in t}const re=(t,e)=>bT(t,e,Oa);function Gn(t,e,n){const r=arguments.length;return r===2?Ct(e)&&!ze(e)?Da(e)?z(t,null,[e]):z(t,e):z(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Da(n)&&(n=[n]),z(t,e,n))}const Ek="3.5.14";/**
* @vue/runtime-dom v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let th;const tb=typeof window<"u"&&window.trustedTypes;if(tb)try{th=tb.createPolicy("vue",{createHTML:t=>t})}catch{}const J_=th?t=>th.createHTML(t):t=>t,Sk="http://www.w3.org/2000/svg",Ak="http://www.w3.org/1998/Math/MathML",cs=typeof document<"u"?document:null,nb=cs&&cs.createElement("template"),Ik={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?cs.createElementNS(Sk,t):e==="mathml"?cs.createElementNS(Ak,t):n?cs.createElement(t,{is:n}):cs.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>cs.createTextNode(t),createComment:t=>cs.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>cs.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{nb.innerHTML=J_(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=nb.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Ck=Symbol("_vtc");function Rk(t,e,n){const r=t[Ck];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const rb=Symbol("_vod"),Tk=Symbol("_vsh"),kk=Symbol(""),$k=/(^|;)\s*display\s*:/;function Dk(t,e,n){const r=t.style,s=jt(n);let i=!1;if(n&&!s){if(e)if(jt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Jl(r,a,"")}else for(const o in e)n[o]==null&&Jl(r,o,"");for(const o in n)o==="display"&&(i=!0),Jl(r,o,n[o])}else if(s){if(e!==n){const o=r[kk];o&&(n+=";"+o),r.cssText=n,i=$k.test(n)}}else e&&t.removeAttribute("style");rb in t&&(t[rb]=i?r.display:"",t[Tk]&&(r.display="none"))}const sb=/\s*!important$/;function Jl(t,e,n){if(ze(n))n.forEach(r=>Jl(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Ok(t,e);sb.test(n)?t.setProperty(li(r),n.replace(sb,""),"important"):t[r]=n}}const ib=["Webkit","Moz","ms"],Kd={};function Ok(t,e){const n=Kd[e];if(n)return n;let r=Un(e);if(r!=="filter"&&r in t)return Kd[e]=r;r=Zc(r);for(let s=0;s<ib.length;s++){const i=ib[s]+r;if(i in t)return Kd[e]=i}return e}const ob="http://www.w3.org/1999/xlink";function ab(t,e,n,r,s,i=HR(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(ob,e.slice(6,e.length)):t.setAttributeNS(ob,e,n):n==null||i&&!U0(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Tr(n)?String(n):n)}function lb(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?J_(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=U0(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Ei(t,e,n,r){t.addEventListener(e,n,r)}function Pk(t,e,n,r){t.removeEventListener(e,n,r)}const cb=Symbol("_vei");function Lk(t,e,n,r,s=null){const i=t[cb]||(t[cb]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=Mk(e);if(r){const c=i[e]=jk(r,s);Ei(t,a,c,l)}else o&&(Pk(t,a,o,l),i[e]=void 0)}}const ub=/(?:Once|Passive|Capture)$/;function Mk(t){let e;if(ub.test(t)){e={};let r;for(;r=t.match(ub);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):li(t.slice(2)),e]}let Wd=0;const Nk=Promise.resolve(),Fk=()=>Wd||(Nk.then(()=>Wd=0),Wd=Date.now());function jk(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Gr(Uk(r,n.value),e,5,[r])};return n.value=t,n.attached=Fk(),n}function Uk(t,e){if(ze(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const db=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Bk=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?Rk(t,r,o):e==="style"?Dk(t,n,r):Xc(e)?bp(e)||Lk(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):qk(t,e,r,o))?(lb(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&ab(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!jt(r))?lb(t,Un(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),ab(t,e,r,o))};function qk(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&db(e)&&Ke(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return db(e)&&jt(n)?!1:e in t}const wc=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ze(e)?n=>Kl(e,n):e};function zk(t){t.target.composing=!0}function fb(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const po=Symbol("_assign"),Vk={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[po]=wc(s);const i=r||s.props&&s.props.type==="number";Ei(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=zf(a)),t[po](a)}),n&&Ei(t,"change",()=>{t.value=t.value.trim()}),e||(Ei(t,"compositionstart",zk),Ei(t,"compositionend",fb),Ei(t,"change",fb))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[po]=wc(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?zf(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},Hk={deep:!0,created(t,e,n){t[po]=wc(n),Ei(t,"change",()=>{const r=t._modelValue,s=Kk(t),i=t.checked,o=t[po];if(ze(r)){const a=B0(r,s),l=a!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const c=[...r];c.splice(a,1),o(c)}}else if(Yc(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(X_(t,i))})},mounted:hb,beforeUpdate(t,e,n){t[po]=wc(n),hb(t,e,n)}};function hb(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(ze(e))s=B0(e,r.props.value)>-1;else if(Yc(e))s=e.has(r.props.value);else{if(e===n)return;s=tu(e,X_(t,!0))}t.checked!==s&&(t.checked=s)}function Kk(t){return"_value"in t?t._value:t.value}function X_(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Wk=["ctrl","shift","alt","meta"],Gk={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Wk.some(n=>t[`${n}Key`]&&!e.includes(n))},Hr=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const a=Gk[e[o]];if(a&&a(s,e))return}return t(s,...i)})},Jk={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Y_=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const i=li(s.key);if(e.some(o=>o===i||Jk[o]===i))return t(s)})},Xk=_n({patchProp:Bk},Ik);let pb;function Yk(){return pb||(pb=ZT(Xk))}const Qk=(...t)=>{const e=Yk().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=e$(r);if(!s)return;const i=e._component;!Ke(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,Zk(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function Zk(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function e$(t){return jt(t)?document.querySelector(t):t}const Sr={name:"Aerogel Playground",version:"?",sourceHash:`464fe4a843d6255cd7a9f1c2ff0444870f44454a
`,basePath:"/playground/",sourceUrl:"https://github.com/NoelDeMartin/aerogel",locales:{en:"English"}};class nh extends Yn{constructor(e,n){super(`Service '${e}' failed booting`,{cause:n})}}function jp(){return Sr.namespace??Ba(Sr.name)}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Q_;const Xa=t=>Q_=t,Z_=Symbol();function rh(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var va;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(va||(va={}));function t$(){const t=Ka(!0),e=t.run(()=>Ee({}));let n=[],r=[];const s=it({install(i){Xa(s),s._a=i,i.provide(Z_,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const e1=()=>{};function mb(t,e,n,r=e1){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&Wa()&&nu(s),s}function Wi(t,...e){t.slice().forEach(n=>{n(...e)})}const n$=t=>t(),gb=Symbol(),Gd=Symbol();function sh(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];rh(s)&&rh(r)&&t.hasOwnProperty(n)&&!Pt(r)&&!Zs(r)?t[n]=sh(s,r):t[n]=r}return t}const r$=Symbol();function s$(t){return!rh(t)||!t.hasOwnProperty(r$)}const{assign:Ps}=Object;function i$(t){return!!(Pt(t)&&t.effect)}function o$(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=s?s():{});const u=er(n.state.value[t]);return Ps(u,i,Object.keys(o||{}).reduce((d,f)=>(d[f]=it(re(()=>{Xa(n);const h=n._s.get(t);return o[f].call(h,h)})),d),{}))}return l=t1(t,c,e,n,r,!0),l}function t1(t,e,n={},r,s,i){let o;const a=Ps({actions:{}},n),l={deep:!0};let c,u,d=[],f=[],h;const m=r.state.value[t];!i&&!m&&(r.state.value[t]={}),Ee({});let y;function S(I){let T;c=u=!1,typeof I=="function"?(I(r.state.value[t]),T={type:va.patchFunction,storeId:t,events:h}):(sh(r.state.value[t],I),T={type:va.patchObject,payload:I,storeId:t,events:h});const D=y=Symbol();Ft().then(()=>{y===D&&(c=!0)}),u=!0,Wi(d,T,r.state.value[t])}const _=i?function(){const{state:T}=n,D=T?T():{};this.$patch(U=>{Ps(U,D)})}:e1;function x(){o.stop(),d=[],f=[],r._s.delete(t)}const w=(I,T="")=>{if(gb in I)return I[Gd]=T,I;const D=function(){Xa(r);const U=Array.from(arguments),J=[],H=[];function j(W){J.push(W)}function se(W){H.push(W)}Wi(f,{args:U,name:D[Gd],store:b,after:j,onError:se});let $;try{$=I.apply(this&&this.$id===t?this:b,U)}catch(W){throw Wi(H,W),W}return $ instanceof Promise?$.then(W=>(Wi(J,W),W)).catch(W=>(Wi(H,W),Promise.reject(W))):(Wi(J,$),$)};return D[gb]=!0,D[Gd]=T,D},p={_p:r,$id:t,$onAction:mb.bind(null,f),$patch:S,$reset:_,$subscribe(I,T={}){const D=mb(d,I,T.detached,()=>U()),U=o.run(()=>ut(()=>r.state.value[t],J=>{(T.flush==="sync"?u:c)&&I({storeId:t,type:va.direct,events:h},J)},Ps({},l,T)));return D},$dispose:x},b=kr(p);r._s.set(t,b);const R=(r._a&&r._a.runWithContext||n$)(()=>r._e.run(()=>(o=Ka()).run(()=>e({action:w}))));for(const I in R){const T=R[I];if(Pt(T)&&!i$(T)||Zs(T))i||(m&&s$(T)&&(Pt(T)?T.value=m[I]:sh(T,m[I])),r.state.value[t][I]=T);else if(typeof T=="function"){const D=w(T,I);R[I]=D,a.actions[I]=T}}return Ps(b,R),Ps(rt(b),R),Object.defineProperty(b,"$state",{get:()=>r.state.value[t],set:I=>{S(T=>{Ps(T,I)})}}),r._p.forEach(I=>{Ps(b,o.run(()=>I({store:b,app:r._a,pinia:r,options:a})))}),m&&i&&n.hydrate&&n.hydrate(b.$state,m),c=!0,u=!0,b}/*! #__NO_SIDE_EFFECTS__ */function a$(t,e,n){let r,s;const i=typeof e=="function";typeof t=="string"?(r=t,s=i?n:e):(s=t,r=t.id);function o(a,l){const c=KT();return a=a||(c?qt(Z_,null):null),a&&Xa(a),a=Q_,a._s.has(r)||(i?t1(r,e,s,a):o$(r,s,a)),a._s.get(r)}return o.$id=r,o}let Up=null;function n1(){return Up??l$()}function l$(){return je(t$(),t=>{Up=t,Xa(t)})}function c$(){return Up??n1()}function u$(t,e){return n1(),a$(t,e)()}function di(t){var e;return e=class extends Ya{usesStore(){return!0}getName(){return t.name??null}getInitialState(){return typeof t.initialState=="function"?t.initialState():Object.entries(t.initialState).reduce((n,[r,s])=>{try{s=structuredClone(s)}catch{console.warn(`Could not clone '${r}' state from ${this.getName()} service, this may cause problems if you're using multiple instances of the service (for example, in unit tests).
To fix this problem, declare your initialState as a function instead.`)}return n[r]=s,n},{})}getComputedStateDefinition(){return t.computed??{}}getStateWatchers(){return t.watch??{}}serializePersistedState(n){var r;return((r=t.serialize)==null?void 0:r.call(t,n))??n}deserializePersistedState(n){var r;return((r=t.restore)==null?void 0:r.call(t,n))??n}},Se(e,"persist",t.persist??[]),e}var _f;let Ya=(_f=class extends rc{constructor(){super();Se(this,"_name");Se(this,"_booted");Se(this,"_computedStateKeys");Se(this,"_watchers");Se(this,"_store");const n=this.getComputedStateDefinition();this._name=this.getName()??new.target.name,this._booted=new Ir,this._computedStateKeys=new Set(Object.keys(n)),this._watchers=this.getStateWatchers(),this._store=this.usesStore()&&u$(this._name,{state:()=>this.getInitialState(),getters:n})}get booted(){return this._booted}static(n){return super.static(n)}launch(){const n=r=>this._booted.reject(new nh(this._name,r));try{this.frameworkBoot().then(()=>this.boot()).then(()=>this._booted.resolve()).catch(n)}catch(r){n(r)}return this._booted}hasPersistedState(){return sr.has(this.storageKey)}hasState(n){return this._store?n in this._store.$state||this._computedStateKeys.has(n):!1}getState(n){const r=this._store;return n?r?r[n]:void 0:r||{}}setState(n,r){if(!this._store)return;const s=typeof n=="string"?{[n]:r}:n,i=Us(this._store.$state,Object.keys(s));Object.assign(this._store.$state,s),this.onStateUpdated(s,i)}updatePersistedState(n){if(!this._store)return;const r=un(n),s=Us(this._store.$state,r);aa(s)||this.onPersistentStateUpdated(s)}__get(n){return this.hasState(n)?this.getState(n):super.__get(n)}__set(n,r){this.setState({[n]:r})}get storageKey(){return`${jp()}:${this._name}`}onStateUpdated(n,r){const s=Us(n,this.static("persist"));aa(s)||this.onPersistentStateUpdated(s);for(const i in n){const o=this._watchers[i];!o||n[i]===r[i]||o.call(this,n[i],r[i])}}onPersistentStateUpdated(n){const r=sr.get(this.storageKey);r&&sr.set(this.storageKey,{...r,...this.serializePersistedState(Er(n))})}usesStore(){return!1}getName(){return null}getInitialState(){return{}}getComputedStateDefinition(){return{}}getStateWatchers(){return{}}serializePersistedState(n){return n}deserializePersistedState(n){return n}async frameworkBoot(){this.restorePersistedState()}async boot(){}restorePersistedState(){if(!(!this.usesStore()||aa(this.static("persist")))){if(sr.has(this.storageKey)){const n=sr.require(this.storageKey);this.setState(this.deserializePersistedState(n));return}sr.set(this.storageKey,Us(this.getState(),this.static("persist")))}}requireStore(){return this._store?this._store:Xe(`Failed getting '${this._name}' store`)}},Se(_f,"persist",[]),_f);class d$ extends Ya{constructor(){super(...arguments);Se(this,"listeners",{})}async boot(){Object.entries(globalThis.__aerogelEvents__??{}).forEach(([n,r])=>this.on(n,r))}async emit(n,r){var i;const s=this.listeners[n]??{priorities:[],handlers:{}};for(const o of s.priorities)await Promise.all(((i=s.handlers[o])==null?void 0:i.map(a=>a(r)))??[])}on(n,r,s){const i=typeof r=="function"?{}:typeof r=="number"?{priority:r}:r,o=typeof r=="function"?r:s;return this.registerListener(n,i,o),()=>this.off(n,o)}once(n,r,s){let i=null;const o=typeof r=="function"?{}:r,a=typeof r=="function"?r:s;return je(()=>i&&this.off(n,i),l=>{i=(...c)=>(l(),a(...c)),this.registerListener(n,o,a)})}off(n,r){var o;const s=this.listeners[n];if(!s)return;const i=[...s.priorities];for(const a of i)jn(s.handlers[a]??[],r),((o=s.handlers[a])==null?void 0:o.length)===0&&(delete s.handlers[a],jn(s.priorities,a));s.priorities.length===0&&delete this.listeners[n]}registerListener(n,r,s){var l,c,u;const i=r.priority??0;n in this.listeners||(this.listeners[n]={priorities:[],handlers:{}});const o=((l=this.listeners[n])==null?void 0:l.priorities)??Xe(`priorities missing for event '${n}'`),a=((c=this.listeners[n])==null?void 0:c.handlers)??Xe(`handlers missing for event '${n}'`);o.includes(i)||(o.push(i),o.sort((d,f)=>f-d),a[i]=[]),(u=a[i])==null||u.push(s)}}const He=Qn(d$);const f$=di({name:"app",initialState:{plugins:{},instance:null,environment:Mc()??"development",version:Sr.version,sourceUrl:Sr.sourceUrl,settings:[]},computed:{development:t=>t.environment==="development",staging:t=>t.environment==="staging",testing:t=>t.environment==="test"||t.environment==="testing",versionName(t){return this.development?"dev."+Sr.sourceHash.toString().substring(0,7):this.staging?"staging."+Sr.sourceHash.toString().substring(0,7):`v${t.version}`},versionUrl(t){return t.sourceUrl+(this.development||this.staging?`/tree/${Sr.sourceHash}`:`/releases/tag/${this.versionName}`)}}});class h$ extends f${constructor(){super(...arguments);Se(this,"name",Sr.name);Se(this,"ready",new Ir);Se(this,"mounted",new Ir)}isReady(){return this.ready.isResolved()}isMounted(){return this.mounted.isResolved()}addSetting(n){this.settings.push(it(n))}async whenReady(n){return await this.ready.then(n)}async reload(n){n&&WS(n),location.reload(),await VS()}plugin(n){return this.plugins[n]??null}service(n){var r;return((r=this.instance)==null?void 0:r.config.globalProperties[n])??null}async boot(){He.once("application-ready",()=>this.ready.resolve()),He.once("application-mounted",()=>this.mounted.resolve())}}const lt=Qn(h$);async function p$(t,...e){lt.setState("plugins",t.reduce((n,r)=>(r.name&&(n[r.name]=r),n),{})),await Promise.all(t.map(n=>n.install(...e))??[])}function m$(t){return Object.entries(t.props??{}).reduce((e,[n,r])=>e+`${n}="${Tt(r)}"`,"")}function g$(t){const e=qt(t);return e?kr(e):void 0}function dn(t,e){return g$(t)??Xe(e??`Could not resolve '${Tt(t)}' injection key`)}function y$(t,e){return qt(t)??Xe(`Could not resolve '${Tt(t)}' injection key`)}function r1(t){return typeof t=="string"?t:t.type===$r?"":t.type===ko||t.type===ya?t.children:t.type==="br"?`

`:`<${t.type} ${m$(t)}>${Array.from(t.children).map(r1).join("")}</${t.type}>`}const Jd=new WeakMap,b$={mounted(t,{value:e,modifiers:n}){const r=typeof e=="function"?e:null,s=()=>{const i=t.getBoundingClientRect();n.css&&(t.style.setProperty("--width",`${i.width}px`),t.style.setProperty("--height",`${i.height}px`)),r==null||r({width:i.width,height:i.height})};n.watch&&Jd.set(t,je(new ResizeObserver(s)).observe(t)),s()},unmounted(t){var e;(e=Jd.get(t))==null||e.unobserve(t),Jd.delete(t)}};function s1(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=s1(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function i1(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=s1(t))&&(r&&(r+=" "),r+=e);return r}const yb=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,bb=i1,v$=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return bb(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=n==null?void 0:n[c],d=i==null?void 0:i[c];if(u===null)return null;const f=yb(u)||yb(d);return s[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,f]=u;return f===void 0||(c[d]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:f,...h}=u;return Object.entries(h).every(m=>{let[y,S]=m;return Array.isArray(S)?S.includes({...i,...a}[y]):{...i,...a}[y]===S})?[...c,d,f]:c},[]);return bb(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},Bp="-",w$=t=>{const e=x$(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(Bp);return a[0]===""&&a.length!==1&&a.shift(),o1(a,e)||_$(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},o1=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?o1(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Bp);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},vb=/^\[(.+)\]$/,_$=t=>{if(vb.test(t)){const e=vb.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},x$=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const s in n)ih(n[s],r,s,e);return r},ih=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:wb(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(E$(s)){ih(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{ih(o,wb(e,i),n,r)})})},wb=(t,e)=>{let n=t;return e.split(Bp).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},E$=t=>t.isThemeGetter,S$=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},oh="!",ah=":",A$=ah.length,I$=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const i=[];let o=0,a=0,l=0,c;for(let m=0;m<s.length;m++){let y=s[m];if(o===0&&a===0){if(y===ah){i.push(s.slice(l,m)),l=m+A$;continue}if(y==="/"){c=m;continue}}y==="["?o++:y==="]"?o--:y==="("?a++:y===")"&&a--}const u=i.length===0?s:s.substring(l),d=C$(u),f=d!==u,h=c&&c>l?c-l:void 0;return{modifiers:i,hasImportantModifier:f,baseClassName:d,maybePostfixModifierPosition:h}};if(e){const s=e+ah,i=r;r=o=>o.startsWith(s)?i(o.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},C$=t=>t.endsWith(oh)?t.substring(0,t.length-1):t.startsWith(oh)?t.substring(1):t,R$=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let i=[];return r.forEach(o=>{o[0]==="["||e[o]?(s.push(...i.sort(),o),i=[]):i.push(o)}),s.push(...i.sort()),s}},T$=t=>({cache:S$(t.cacheSize),parseClassName:I$(t),sortModifiers:R$(t),...w$(t)}),k$=/\s+/,$$=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=e,o=[],a=t.trim().split(k$);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:d,modifiers:f,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:y}=n(u);if(d){l=u+(l.length>0?" "+l:l);continue}let S=!!y,_=r(S?m.substring(0,y):m);if(!_){if(!S){l=u+(l.length>0?" "+l:l);continue}if(_=r(m),!_){l=u+(l.length>0?" "+l:l);continue}S=!1}const x=i(f).join(":"),w=h?x+oh:x,p=w+_;if(o.includes(p))continue;o.push(p);const b=s(_,S);for(let A=0;A<b.length;++A){const R=b[A];o.push(w+R)}l=u+(l.length>0?" "+l:l)}return l};function D$(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=a1(e))&&(r&&(r+=" "),r+=n);return r}const a1=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=a1(t[r]))&&(n&&(n+=" "),n+=e);return n};function O$(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((u,d)=>d(u),t());return n=T$(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=$$(l,n);return s(l,u),u}return function(){return i(D$.apply(null,arguments))}}const Gt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},l1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,c1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,P$=/^\d+\/\d+$/,L$=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,M$=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,N$=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,F$=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,j$=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gi=t=>P$.test(t),Ze=t=>!!t&&!Number.isNaN(Number(t)),$s=t=>!!t&&Number.isInteger(Number(t)),Xd=t=>t.endsWith("%")&&Ze(t.slice(0,-1)),is=t=>L$.test(t),U$=()=>!0,B$=t=>M$.test(t)&&!N$.test(t),u1=()=>!1,q$=t=>F$.test(t),z$=t=>j$.test(t),V$=t=>!Pe(t)&&!Le(t),H$=t=>$o(t,h1,u1),Pe=t=>l1.test(t),wi=t=>$o(t,p1,B$),Yd=t=>$o(t,X$,Ze),_b=t=>$o(t,d1,u1),K$=t=>$o(t,f1,z$),xl=t=>$o(t,m1,q$),Le=t=>c1.test(t),Ko=t=>Do(t,p1),W$=t=>Do(t,Y$),xb=t=>Do(t,d1),G$=t=>Do(t,h1),J$=t=>Do(t,f1),El=t=>Do(t,m1,!0),$o=(t,e,n)=>{const r=l1.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Do=(t,e,n=!1)=>{const r=c1.exec(t);return r?r[1]?e(r[1]):n:!1},d1=t=>t==="position"||t==="percentage",f1=t=>t==="image"||t==="url",h1=t=>t==="length"||t==="size"||t==="bg-size",p1=t=>t==="length",X$=t=>t==="number",Y$=t=>t==="family-name",m1=t=>t==="shadow",Q$=()=>{const t=Gt("color"),e=Gt("font"),n=Gt("text"),r=Gt("font-weight"),s=Gt("tracking"),i=Gt("leading"),o=Gt("breakpoint"),a=Gt("container"),l=Gt("spacing"),c=Gt("radius"),u=Gt("shadow"),d=Gt("inset-shadow"),f=Gt("text-shadow"),h=Gt("drop-shadow"),m=Gt("blur"),y=Gt("perspective"),S=Gt("aspect"),_=Gt("ease"),x=Gt("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],p=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],b=()=>[...p(),Le,Pe],A=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],I=()=>[Le,Pe,l],T=()=>[Gi,"full","auto",...I()],D=()=>[$s,"none","subgrid",Le,Pe],U=()=>["auto",{span:["full",$s,Le,Pe]},$s,Le,Pe],J=()=>[$s,"auto",Le,Pe],H=()=>["auto","min","max","fr",Le,Pe],j=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],se=()=>["start","end","center","stretch","center-safe","end-safe"],$=()=>["auto",...I()],W=()=>[Gi,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...I()],B=()=>[t,Le,Pe],oe=()=>[...p(),xb,_b,{position:[Le,Pe]}],q=()=>["no-repeat",{repeat:["","x","y","space","round"]}],le=()=>["auto","cover","contain",G$,H$,{size:[Le,Pe]}],de=()=>[Xd,Ko,wi],ye=()=>["","none","full",c,Le,Pe],Ce=()=>["",Ze,Ko,wi],X=()=>["solid","dashed","dotted","double"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>[Ze,Xd,xb,_b],Q=()=>["","none",m,Le,Pe],ie=()=>["none",Ze,Le,Pe],ne=()=>["none",Ze,Le,Pe],Ie=()=>[Ze,Le,Pe],P=()=>[Gi,"full",...I()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[is],breakpoint:[is],color:[U$],container:[is],"drop-shadow":[is],ease:["in","out","in-out"],font:[V$],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[is],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[is],shadow:[is],spacing:["px",Ze],text:[is],"text-shadow":[is],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Gi,Pe,Le,S]}],container:["container"],columns:[{columns:[Ze,Pe,Le,a]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:b()}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:T()}],"inset-x":[{"inset-x":T()}],"inset-y":[{"inset-y":T()}],start:[{start:T()}],end:[{end:T()}],top:[{top:T()}],right:[{right:T()}],bottom:[{bottom:T()}],left:[{left:T()}],visibility:["visible","invisible","collapse"],z:[{z:[$s,"auto",Le,Pe]}],basis:[{basis:[Gi,"full","auto",a,...I()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ze,Gi,"auto","initial","none",Pe]}],grow:[{grow:["",Ze,Le,Pe]}],shrink:[{shrink:["",Ze,Le,Pe]}],order:[{order:[$s,"first","last","none",Le,Pe]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:U()}],"col-start":[{"col-start":J()}],"col-end":[{"col-end":J()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:U()}],"row-start":[{"row-start":J()}],"row-end":[{"row-end":J()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":H()}],"auto-rows":[{"auto-rows":H()}],gap:[{gap:I()}],"gap-x":[{"gap-x":I()}],"gap-y":[{"gap-y":I()}],"justify-content":[{justify:[...j(),"normal"]}],"justify-items":[{"justify-items":[...se(),"normal"]}],"justify-self":[{"justify-self":["auto",...se()]}],"align-content":[{content:["normal",...j()]}],"align-items":[{items:[...se(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...se(),{baseline:["","last"]}]}],"place-content":[{"place-content":j()}],"place-items":[{"place-items":[...se(),"baseline"]}],"place-self":[{"place-self":["auto",...se()]}],p:[{p:I()}],px:[{px:I()}],py:[{py:I()}],ps:[{ps:I()}],pe:[{pe:I()}],pt:[{pt:I()}],pr:[{pr:I()}],pb:[{pb:I()}],pl:[{pl:I()}],m:[{m:$()}],mx:[{mx:$()}],my:[{my:$()}],ms:[{ms:$()}],me:[{me:$()}],mt:[{mt:$()}],mr:[{mr:$()}],mb:[{mb:$()}],ml:[{ml:$()}],"space-x":[{"space-x":I()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":I()}],"space-y-reverse":["space-y-reverse"],size:[{size:W()}],w:[{w:[a,"screen",...W()]}],"min-w":[{"min-w":[a,"screen","none",...W()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...W()]}],h:[{h:["screen","lh",...W()]}],"min-h":[{"min-h":["screen","lh","none",...W()]}],"max-h":[{"max-h":["screen","lh",...W()]}],"font-size":[{text:["base",n,Ko,wi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Le,Yd]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Xd,Pe]}],"font-family":[{font:[W$,Pe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Le,Pe]}],"line-clamp":[{"line-clamp":[Ze,"none",Le,Yd]}],leading:[{leading:[i,...I()]}],"list-image":[{"list-image":["none",Le,Pe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Le,Pe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:B()}],"text-color":[{text:B()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ze,"from-font","auto",Le,wi]}],"text-decoration-color":[{decoration:B()}],"underline-offset":[{"underline-offset":[Ze,"auto",Le,Pe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le,Pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le,Pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:oe()}],"bg-repeat":[{bg:q()}],"bg-size":[{bg:le()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},$s,Le,Pe],radial:["",Le,Pe],conic:[$s,Le,Pe]},J$,K$]}],"bg-color":[{bg:B()}],"gradient-from-pos":[{from:de()}],"gradient-via-pos":[{via:de()}],"gradient-to-pos":[{to:de()}],"gradient-from":[{from:B()}],"gradient-via":[{via:B()}],"gradient-to":[{to:B()}],rounded:[{rounded:ye()}],"rounded-s":[{"rounded-s":ye()}],"rounded-e":[{"rounded-e":ye()}],"rounded-t":[{"rounded-t":ye()}],"rounded-r":[{"rounded-r":ye()}],"rounded-b":[{"rounded-b":ye()}],"rounded-l":[{"rounded-l":ye()}],"rounded-ss":[{"rounded-ss":ye()}],"rounded-se":[{"rounded-se":ye()}],"rounded-ee":[{"rounded-ee":ye()}],"rounded-es":[{"rounded-es":ye()}],"rounded-tl":[{"rounded-tl":ye()}],"rounded-tr":[{"rounded-tr":ye()}],"rounded-br":[{"rounded-br":ye()}],"rounded-bl":[{"rounded-bl":ye()}],"border-w":[{border:Ce()}],"border-w-x":[{"border-x":Ce()}],"border-w-y":[{"border-y":Ce()}],"border-w-s":[{"border-s":Ce()}],"border-w-e":[{"border-e":Ce()}],"border-w-t":[{"border-t":Ce()}],"border-w-r":[{"border-r":Ce()}],"border-w-b":[{"border-b":Ce()}],"border-w-l":[{"border-l":Ce()}],"divide-x":[{"divide-x":Ce()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ce()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...X(),"hidden","none"]}],"divide-style":[{divide:[...X(),"hidden","none"]}],"border-color":[{border:B()}],"border-color-x":[{"border-x":B()}],"border-color-y":[{"border-y":B()}],"border-color-s":[{"border-s":B()}],"border-color-e":[{"border-e":B()}],"border-color-t":[{"border-t":B()}],"border-color-r":[{"border-r":B()}],"border-color-b":[{"border-b":B()}],"border-color-l":[{"border-l":B()}],"divide-color":[{divide:B()}],"outline-style":[{outline:[...X(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ze,Le,Pe]}],"outline-w":[{outline:["",Ze,Ko,wi]}],"outline-color":[{outline:B()}],shadow:[{shadow:["","none",u,El,xl]}],"shadow-color":[{shadow:B()}],"inset-shadow":[{"inset-shadow":["none",d,El,xl]}],"inset-shadow-color":[{"inset-shadow":B()}],"ring-w":[{ring:Ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:B()}],"ring-offset-w":[{"ring-offset":[Ze,wi]}],"ring-offset-color":[{"ring-offset":B()}],"inset-ring-w":[{"inset-ring":Ce()}],"inset-ring-color":[{"inset-ring":B()}],"text-shadow":[{"text-shadow":["none",f,El,xl]}],"text-shadow-color":[{"text-shadow":B()}],opacity:[{opacity:[Ze,Le,Pe]}],"mix-blend":[{"mix-blend":[...G(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":G()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ze]}],"mask-image-linear-from-pos":[{"mask-linear-from":O()}],"mask-image-linear-to-pos":[{"mask-linear-to":O()}],"mask-image-linear-from-color":[{"mask-linear-from":B()}],"mask-image-linear-to-color":[{"mask-linear-to":B()}],"mask-image-t-from-pos":[{"mask-t-from":O()}],"mask-image-t-to-pos":[{"mask-t-to":O()}],"mask-image-t-from-color":[{"mask-t-from":B()}],"mask-image-t-to-color":[{"mask-t-to":B()}],"mask-image-r-from-pos":[{"mask-r-from":O()}],"mask-image-r-to-pos":[{"mask-r-to":O()}],"mask-image-r-from-color":[{"mask-r-from":B()}],"mask-image-r-to-color":[{"mask-r-to":B()}],"mask-image-b-from-pos":[{"mask-b-from":O()}],"mask-image-b-to-pos":[{"mask-b-to":O()}],"mask-image-b-from-color":[{"mask-b-from":B()}],"mask-image-b-to-color":[{"mask-b-to":B()}],"mask-image-l-from-pos":[{"mask-l-from":O()}],"mask-image-l-to-pos":[{"mask-l-to":O()}],"mask-image-l-from-color":[{"mask-l-from":B()}],"mask-image-l-to-color":[{"mask-l-to":B()}],"mask-image-x-from-pos":[{"mask-x-from":O()}],"mask-image-x-to-pos":[{"mask-x-to":O()}],"mask-image-x-from-color":[{"mask-x-from":B()}],"mask-image-x-to-color":[{"mask-x-to":B()}],"mask-image-y-from-pos":[{"mask-y-from":O()}],"mask-image-y-to-pos":[{"mask-y-to":O()}],"mask-image-y-from-color":[{"mask-y-from":B()}],"mask-image-y-to-color":[{"mask-y-to":B()}],"mask-image-radial":[{"mask-radial":[Le,Pe]}],"mask-image-radial-from-pos":[{"mask-radial-from":O()}],"mask-image-radial-to-pos":[{"mask-radial-to":O()}],"mask-image-radial-from-color":[{"mask-radial-from":B()}],"mask-image-radial-to-color":[{"mask-radial-to":B()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":p()}],"mask-image-conic-pos":[{"mask-conic":[Ze]}],"mask-image-conic-from-pos":[{"mask-conic-from":O()}],"mask-image-conic-to-pos":[{"mask-conic-to":O()}],"mask-image-conic-from-color":[{"mask-conic-from":B()}],"mask-image-conic-to-color":[{"mask-conic-to":B()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:oe()}],"mask-repeat":[{mask:q()}],"mask-size":[{mask:le()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Le,Pe]}],filter:[{filter:["","none",Le,Pe]}],blur:[{blur:Q()}],brightness:[{brightness:[Ze,Le,Pe]}],contrast:[{contrast:[Ze,Le,Pe]}],"drop-shadow":[{"drop-shadow":["","none",h,El,xl]}],"drop-shadow-color":[{"drop-shadow":B()}],grayscale:[{grayscale:["",Ze,Le,Pe]}],"hue-rotate":[{"hue-rotate":[Ze,Le,Pe]}],invert:[{invert:["",Ze,Le,Pe]}],saturate:[{saturate:[Ze,Le,Pe]}],sepia:[{sepia:["",Ze,Le,Pe]}],"backdrop-filter":[{"backdrop-filter":["","none",Le,Pe]}],"backdrop-blur":[{"backdrop-blur":Q()}],"backdrop-brightness":[{"backdrop-brightness":[Ze,Le,Pe]}],"backdrop-contrast":[{"backdrop-contrast":[Ze,Le,Pe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ze,Le,Pe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ze,Le,Pe]}],"backdrop-invert":[{"backdrop-invert":["",Ze,Le,Pe]}],"backdrop-opacity":[{"backdrop-opacity":[Ze,Le,Pe]}],"backdrop-saturate":[{"backdrop-saturate":[Ze,Le,Pe]}],"backdrop-sepia":[{"backdrop-sepia":["",Ze,Le,Pe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":I()}],"border-spacing-x":[{"border-spacing-x":I()}],"border-spacing-y":[{"border-spacing-y":I()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Le,Pe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ze,"initial",Le,Pe]}],ease:[{ease:["linear","initial",_,Le,Pe]}],delay:[{delay:[Ze,Le,Pe]}],animate:[{animate:["none",x,Le,Pe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,Le,Pe]}],"perspective-origin":[{"perspective-origin":b()}],rotate:[{rotate:ie()}],"rotate-x":[{"rotate-x":ie()}],"rotate-y":[{"rotate-y":ie()}],"rotate-z":[{"rotate-z":ie()}],scale:[{scale:ne()}],"scale-x":[{"scale-x":ne()}],"scale-y":[{"scale-y":ne()}],"scale-z":[{"scale-z":ne()}],"scale-3d":["scale-3d"],skew:[{skew:Ie()}],"skew-x":[{"skew-x":Ie()}],"skew-y":[{"skew-y":Ie()}],transform:[{transform:[Le,Pe,"","none","gpu","cpu"]}],"transform-origin":[{origin:b()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:P()}],"translate-x":[{"translate-x":P()}],"translate-y":[{"translate-y":P()}],"translate-z":[{"translate-z":P()}],"translate-none":["translate-none"],accent:[{accent:B()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:B()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le,Pe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le,Pe]}],fill:[{fill:["none",...B()]}],"stroke-w":[{stroke:[Ze,Ko,wi,Yd]}],stroke:[{stroke:["none",...B()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Z$=O$(Q$);function g1(t,e){const{baseClasses:n,...r}=t,{baseClasses:s,...i}=e,o=v$(s,i);return kt(o(r),E(n))}function kt(...t){return Z$(i1(t))}function fu(t,e){const n=He.on(t,e);vr(()=>n())}const eD={required:t=>t?void 0:"required"};function tD(t,e){var n;if(t==null)return!0;switch(e.type){case"string":return typeof t=="string";case"enum":return!!((n=e.values)!=null&&n.includes(t));case"number":return typeof t=="number";case"boolean":return typeof t=="boolean";case"date":return t instanceof Date;case"object":return typeof t=="object"}}const Xl={...eD};function nD(t,e){Xl[t]=e}function rD(t,e){return tD(t,e)?[]:["invalid_value"]}function sD(t,e){var r;const n=(r=Xl[e])==null?void 0:r.call(Xl,t);return n?un(n):[]}const Eb=new WeakMap;class iD extends rc{constructor(n){super();Se(this,"errors");Se(this,"_fields");Se(this,"_data");Se(this,"_submitted");Se(this,"_errors");Se(this,"_listeners",{});this._fields=n,this._submitted=Ee(!1),this._data=this.getInitialData(n),this._errors=this.getInitialErrors(n),Eb.set(this,re(()=>!Object.values(this._errors).some(r=>r!==null))),this.errors=Cs(this._errors)}get valid(){var n;return!!((n=Eb.get(this))!=null&&n.value)}get submitted(){return this._submitted.value}setFieldValue(n,r){const s=this._fields[n]??Xe(`Trying to set undefined '${Tt(n)}' field`);this._data[n]=s.type==="string"&&(s.trim??!0)?Tt(r).trim():r,this._submitted.value&&this.validate()}getFieldValue(n){return this._data[n]}getFieldRules(n){var r,s;return((s=(r=this._fields[n])==null?void 0:r.rules)==null?void 0:s.split("|"))??[]}getFieldType(n){var r;return((r=this._fields[n])==null?void 0:r.type)??null}data(){return{...this._data}}validate(){const n=Object.entries(this._fields).reduce((r,[s,i])=>(r[s]=this.getFieldErrors(s,i),r),{});return this.resetErrors(n),this.valid}reset(n={}){this._submitted.value=!1,n.keepData||this.resetData(),n.keepErrors||this.resetErrors()}submit(){var r;this._submitted.value=!0;const n=this.validate();return n&&((r=this._listeners.submit)==null||r.forEach(s=>s())),n}on(n,r){var s,i;return(s=this._listeners)[n]??(s[n]=[]),(i=this._listeners[n])==null||i.push(r),()=>this.off(n,r)}off(n,r){jn(this._listeners[n]??[],r)}async focus(n){var r;await Ft(),(r=this._listeners.focus)==null||r.forEach(s=>s(n))}__get(n){return n in this._fields?this.getFieldValue(n):super.__get(n)}__set(n,r){if(!(n in this._fields)){super.__set(n,r);return}this.setFieldValue(n,r)}getFieldErrors(n,r){var a;const s=[],i=this._data[n],o=((a=r.rules)==null?void 0:a.split("|"))??[];s.push(...rD(i,r));for(const l of o)l!=="required"&&i==null||s.push(...sD(i,l));return s.length>0?s:null}getInitialData(n){if(this.static().isConjuring())return{};const r=Object.entries(n).reduce((s,[i,o])=>(s[i]=o.default??null,s),{});return kr(r)}getInitialErrors(n){if(this.static().isConjuring())return{};const r=Object.keys(n).reduce((s,i)=>(s[i]=null,s),{});return kr(r)}resetData(){for(const[n,r]of Object.entries(this._fields))this._data[n]=r.default??null}resetErrors(n){Object.keys(this._errors).forEach(r=>delete this._errors[r]),n&&Object.assign(this._errors,n)}}function y1(t,e){const n=qt("form",null),r=n==null?void 0:n.on("focus",s=>t.name===s&&e());vr(()=>r==null?void 0:r())}function Qa(t){return new iD(t)}function qp(){const t=S_(),e=re(()=>t.class);return[re(()=>vs(t,"class")),e]}function oD(t){let e=uA;sn(()=>e=t()),vr(()=>e())}function aD(t,e){const n=kr(sr.get(t)??e);return ut(n,()=>sr.set(t,rt(n))),n}function b1(t){const e=Ee(),n=re(t);return ut(n,async()=>e.value=await n.value,{immediate:!0}),e}/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:v1,setPrototypeOf:Sb,isFrozen:lD,getPrototypeOf:cD,getOwnPropertyDescriptor:uD}=Object;let{freeze:On,seal:mr,create:w1}=Object,{apply:lh,construct:ch}=typeof Reflect<"u"&&Reflect;On||(On=function(e){return e});mr||(mr=function(e){return e});lh||(lh=function(e,n,r){return e.apply(n,r)});ch||(ch=function(e,n){return new e(...n)});const Sl=Pn(Array.prototype.forEach),dD=Pn(Array.prototype.lastIndexOf),Ab=Pn(Array.prototype.pop),Wo=Pn(Array.prototype.push),fD=Pn(Array.prototype.splice),Yl=Pn(String.prototype.toLowerCase),Qd=Pn(String.prototype.toString),Ib=Pn(String.prototype.match),Go=Pn(String.prototype.replace),hD=Pn(String.prototype.indexOf),pD=Pn(String.prototype.trim),wr=Pn(Object.prototype.hasOwnProperty),En=Pn(RegExp.prototype.test),Jo=mD(TypeError);function Pn(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return lh(t,e,r)}}function mD(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ch(t,n)}}function et(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Yl;Sb&&Sb(t,null);let r=e.length;for(;r--;){let s=e[r];if(typeof s=="string"){const i=n(s);i!==s&&(lD(e)||(e[r]=i),s=i)}t[s]=!0}return t}function gD(t){for(let e=0;e<t.length;e++)wr(t,e)||(t[e]=null);return t}function ls(t){const e=w1(null);for(const[n,r]of v1(t))wr(t,n)&&(Array.isArray(r)?e[n]=gD(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=ls(r):e[n]=r);return e}function Xo(t,e){for(;t!==null;){const r=uD(t,e);if(r){if(r.get)return Pn(r.get);if(typeof r.value=="function")return Pn(r.value)}t=cD(t)}function n(){return null}return n}const Cb=On(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Zd=On(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ef=On(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),yD=On(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),tf=On(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),bD=On(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Rb=On(["#text"]),Tb=On(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),nf=On(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),kb=On(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Al=On(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),vD=mr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),wD=mr(/<%[\w\W]*|[\w\W]*%>/gm),_D=mr(/\$\{[\w\W]*/gm),xD=mr(/^data-[\-\w.\u00B7-\uFFFF]+$/),ED=mr(/^aria-[\-\w]+$/),_1=mr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),SD=mr(/^(?:\w+script|data):/i),AD=mr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),x1=mr(/^html$/i),ID=mr(/^[a-z][.\w]*(-[.\w]+)+$/i);var $b=Object.freeze({__proto__:null,ARIA_ATTR:ED,ATTR_WHITESPACE:AD,CUSTOM_ELEMENT:ID,DATA_ATTR:xD,DOCTYPE_NAME:x1,ERB_EXPR:wD,IS_ALLOWED_URI:_1,IS_SCRIPT_OR_DATA:SD,MUSTACHE_EXPR:vD,TMPLIT_EXPR:_D});const Yo={element:1,text:3,progressingInstruction:7,comment:8,document:9},CD=function(){return typeof window>"u"?null:window},RD=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(r=n.getAttribute(s));const i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},Db=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function E1(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:CD();const e=Ue=>E1(Ue);if(e.version="3.2.6",e.removed=[],!t||!t.document||t.document.nodeType!==Yo.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,s=r.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:h}=t,m=l.prototype,y=Xo(m,"cloneNode"),S=Xo(m,"remove"),_=Xo(m,"nextSibling"),x=Xo(m,"childNodes"),w=Xo(m,"parentNode");if(typeof o=="function"){const Ue=n.createElement("template");Ue.content&&Ue.content.ownerDocument&&(n=Ue.content.ownerDocument)}let p,b="";const{implementation:A,createNodeIterator:R,createDocumentFragment:I,getElementsByTagName:T}=n,{importNode:D}=r;let U=Db();e.isSupported=typeof v1=="function"&&typeof w=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:J,ERB_EXPR:H,TMPLIT_EXPR:j,DATA_ATTR:se,ARIA_ATTR:$,IS_SCRIPT_OR_DATA:W,ATTR_WHITESPACE:B,CUSTOM_ELEMENT:oe}=$b;let{IS_ALLOWED_URI:q}=$b,le=null;const de=et({},[...Cb,...Zd,...ef,...tf,...Rb]);let ye=null;const Ce=et({},[...Tb,...nf,...kb,...Al]);let X=Object.seal(w1(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),G=null,O=null,Q=!0,ie=!0,ne=!1,Ie=!0,P=!1,k=!0,V=!1,pe=!1,be=!1,ge=!1,M=!1,F=!1,te=!0,ue=!1;const Re="user-content-";let we=!0,ee=!1,he={},De=null;const C=et({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let g=null;const v=et({},["audio","video","img","source","image","track"]);let L=null;const Y=et({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ce="http://www.w3.org/1998/Math/MathML",ve="http://www.w3.org/2000/svg",Ve="http://www.w3.org/1999/xhtml";let Ge=Ve,Qe=!1,pt=null;const mt=et({},[ce,ve,Ve],Qd);let cl=et({},["mi","mo","mn","ms","mtext"]),ul=et({},["annotation-xml"]);const jE=et({},["title","style","font","a","script"]);let Lo=null;const UE=["application/xhtml+xml","text/html"],BE="text/html";let Qt=null,Bi=null;const qE=n.createElement("form"),Bm=function(Z){return Z instanceof RegExp||Z instanceof Function},$u=function(){let Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Bi&&Bi===Z)){if((!Z||typeof Z!="object")&&(Z={}),Z=ls(Z),Lo=UE.indexOf(Z.PARSER_MEDIA_TYPE)===-1?BE:Z.PARSER_MEDIA_TYPE,Qt=Lo==="application/xhtml+xml"?Qd:Yl,le=wr(Z,"ALLOWED_TAGS")?et({},Z.ALLOWED_TAGS,Qt):de,ye=wr(Z,"ALLOWED_ATTR")?et({},Z.ALLOWED_ATTR,Qt):Ce,pt=wr(Z,"ALLOWED_NAMESPACES")?et({},Z.ALLOWED_NAMESPACES,Qd):mt,L=wr(Z,"ADD_URI_SAFE_ATTR")?et(ls(Y),Z.ADD_URI_SAFE_ATTR,Qt):Y,g=wr(Z,"ADD_DATA_URI_TAGS")?et(ls(v),Z.ADD_DATA_URI_TAGS,Qt):v,De=wr(Z,"FORBID_CONTENTS")?et({},Z.FORBID_CONTENTS,Qt):C,G=wr(Z,"FORBID_TAGS")?et({},Z.FORBID_TAGS,Qt):ls({}),O=wr(Z,"FORBID_ATTR")?et({},Z.FORBID_ATTR,Qt):ls({}),he=wr(Z,"USE_PROFILES")?Z.USE_PROFILES:!1,Q=Z.ALLOW_ARIA_ATTR!==!1,ie=Z.ALLOW_DATA_ATTR!==!1,ne=Z.ALLOW_UNKNOWN_PROTOCOLS||!1,Ie=Z.ALLOW_SELF_CLOSE_IN_ATTR!==!1,P=Z.SAFE_FOR_TEMPLATES||!1,k=Z.SAFE_FOR_XML!==!1,V=Z.WHOLE_DOCUMENT||!1,ge=Z.RETURN_DOM||!1,M=Z.RETURN_DOM_FRAGMENT||!1,F=Z.RETURN_TRUSTED_TYPE||!1,be=Z.FORCE_BODY||!1,te=Z.SANITIZE_DOM!==!1,ue=Z.SANITIZE_NAMED_PROPS||!1,we=Z.KEEP_CONTENT!==!1,ee=Z.IN_PLACE||!1,q=Z.ALLOWED_URI_REGEXP||_1,Ge=Z.NAMESPACE||Ve,cl=Z.MATHML_TEXT_INTEGRATION_POINTS||cl,ul=Z.HTML_INTEGRATION_POINTS||ul,X=Z.CUSTOM_ELEMENT_HANDLING||{},Z.CUSTOM_ELEMENT_HANDLING&&Bm(Z.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(X.tagNameCheck=Z.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Z.CUSTOM_ELEMENT_HANDLING&&Bm(Z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(X.attributeNameCheck=Z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Z.CUSTOM_ELEMENT_HANDLING&&typeof Z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(X.allowCustomizedBuiltInElements=Z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),P&&(ie=!1),M&&(ge=!0),he&&(le=et({},Rb),ye=[],he.html===!0&&(et(le,Cb),et(ye,Tb)),he.svg===!0&&(et(le,Zd),et(ye,nf),et(ye,Al)),he.svgFilters===!0&&(et(le,ef),et(ye,nf),et(ye,Al)),he.mathMl===!0&&(et(le,tf),et(ye,kb),et(ye,Al))),Z.ADD_TAGS&&(le===de&&(le=ls(le)),et(le,Z.ADD_TAGS,Qt)),Z.ADD_ATTR&&(ye===Ce&&(ye=ls(ye)),et(ye,Z.ADD_ATTR,Qt)),Z.ADD_URI_SAFE_ATTR&&et(L,Z.ADD_URI_SAFE_ATTR,Qt),Z.FORBID_CONTENTS&&(De===C&&(De=ls(De)),et(De,Z.FORBID_CONTENTS,Qt)),we&&(le["#text"]=!0),V&&et(le,["html","head","body"]),le.table&&(et(le,["tbody"]),delete G.tbody),Z.TRUSTED_TYPES_POLICY){if(typeof Z.TRUSTED_TYPES_POLICY.createHTML!="function")throw Jo('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Z.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Jo('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');p=Z.TRUSTED_TYPES_POLICY,b=p.createHTML("")}else p===void 0&&(p=RD(h,s)),p!==null&&typeof b=="string"&&(b=p.createHTML(""));On&&On(Z),Bi=Z}},qm=et({},[...Zd,...ef,...yD]),zm=et({},[...tf,...bD]),zE=function(Z){let Te=w(Z);(!Te||!Te.tagName)&&(Te={namespaceURI:Ge,tagName:"template"});const Fe=Yl(Z.tagName),$t=Yl(Te.tagName);return pt[Z.namespaceURI]?Z.namespaceURI===ve?Te.namespaceURI===Ve?Fe==="svg":Te.namespaceURI===ce?Fe==="svg"&&($t==="annotation-xml"||cl[$t]):!!qm[Fe]:Z.namespaceURI===ce?Te.namespaceURI===Ve?Fe==="math":Te.namespaceURI===ve?Fe==="math"&&ul[$t]:!!zm[Fe]:Z.namespaceURI===Ve?Te.namespaceURI===ve&&!ul[$t]||Te.namespaceURI===ce&&!cl[$t]?!1:!zm[Fe]&&(jE[Fe]||!qm[Fe]):!!(Lo==="application/xhtml+xml"&&pt[Z.namespaceURI]):!1},Nr=function(Z){Wo(e.removed,{element:Z});try{w(Z).removeChild(Z)}catch{S(Z)}},qi=function(Z,Te){try{Wo(e.removed,{attribute:Te.getAttributeNode(Z),from:Te})}catch{Wo(e.removed,{attribute:null,from:Te})}if(Te.removeAttribute(Z),Z==="is")if(ge||M)try{Nr(Te)}catch{}else try{Te.setAttribute(Z,"")}catch{}},Vm=function(Z){let Te=null,Fe=null;if(be)Z="<remove></remove>"+Z;else{const Wt=Ib(Z,/^[\r\n\t ]+/);Fe=Wt&&Wt[0]}Lo==="application/xhtml+xml"&&Ge===Ve&&(Z='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Z+"</body></html>");const $t=p?p.createHTML(Z):Z;if(Ge===Ve)try{Te=new f().parseFromString($t,Lo)}catch{}if(!Te||!Te.documentElement){Te=A.createDocument(Ge,"template",null);try{Te.documentElement.innerHTML=Qe?b:$t}catch{}}const fn=Te.body||Te.documentElement;return Z&&Fe&&fn.insertBefore(n.createTextNode(Fe),fn.childNodes[0]||null),Ge===Ve?T.call(Te,V?"html":"body")[0]:V?Te.documentElement:fn},Hm=function(Z){return R.call(Z.ownerDocument||Z,Z,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Du=function(Z){return Z instanceof d&&(typeof Z.nodeName!="string"||typeof Z.textContent!="string"||typeof Z.removeChild!="function"||!(Z.attributes instanceof u)||typeof Z.removeAttribute!="function"||typeof Z.setAttribute!="function"||typeof Z.namespaceURI!="string"||typeof Z.insertBefore!="function"||typeof Z.hasChildNodes!="function")},Km=function(Z){return typeof a=="function"&&Z instanceof a};function ns(Ue,Z,Te){Sl(Ue,Fe=>{Fe.call(e,Z,Te,Bi)})}const Wm=function(Z){let Te=null;if(ns(U.beforeSanitizeElements,Z,null),Du(Z))return Nr(Z),!0;const Fe=Qt(Z.nodeName);if(ns(U.uponSanitizeElement,Z,{tagName:Fe,allowedTags:le}),k&&Z.hasChildNodes()&&!Km(Z.firstElementChild)&&En(/<[/\w!]/g,Z.innerHTML)&&En(/<[/\w!]/g,Z.textContent)||Z.nodeType===Yo.progressingInstruction||k&&Z.nodeType===Yo.comment&&En(/<[/\w]/g,Z.data))return Nr(Z),!0;if(!le[Fe]||G[Fe]){if(!G[Fe]&&Jm(Fe)&&(X.tagNameCheck instanceof RegExp&&En(X.tagNameCheck,Fe)||X.tagNameCheck instanceof Function&&X.tagNameCheck(Fe)))return!1;if(we&&!De[Fe]){const $t=w(Z)||Z.parentNode,fn=x(Z)||Z.childNodes;if(fn&&$t){const Wt=fn.length;for(let Mn=Wt-1;Mn>=0;--Mn){const rs=y(fn[Mn],!0);rs.__removalCount=(Z.__removalCount||0)+1,$t.insertBefore(rs,_(Z))}}}return Nr(Z),!0}return Z instanceof l&&!zE(Z)||(Fe==="noscript"||Fe==="noembed"||Fe==="noframes")&&En(/<\/no(script|embed|frames)/i,Z.innerHTML)?(Nr(Z),!0):(P&&Z.nodeType===Yo.text&&(Te=Z.textContent,Sl([J,H,j],$t=>{Te=Go(Te,$t," ")}),Z.textContent!==Te&&(Wo(e.removed,{element:Z.cloneNode()}),Z.textContent=Te)),ns(U.afterSanitizeElements,Z,null),!1)},Gm=function(Z,Te,Fe){if(te&&(Te==="id"||Te==="name")&&(Fe in n||Fe in qE))return!1;if(!(ie&&!O[Te]&&En(se,Te))){if(!(Q&&En($,Te))){if(!ye[Te]||O[Te]){if(!(Jm(Z)&&(X.tagNameCheck instanceof RegExp&&En(X.tagNameCheck,Z)||X.tagNameCheck instanceof Function&&X.tagNameCheck(Z))&&(X.attributeNameCheck instanceof RegExp&&En(X.attributeNameCheck,Te)||X.attributeNameCheck instanceof Function&&X.attributeNameCheck(Te))||Te==="is"&&X.allowCustomizedBuiltInElements&&(X.tagNameCheck instanceof RegExp&&En(X.tagNameCheck,Fe)||X.tagNameCheck instanceof Function&&X.tagNameCheck(Fe))))return!1}else if(!L[Te]){if(!En(q,Go(Fe,B,""))){if(!((Te==="src"||Te==="xlink:href"||Te==="href")&&Z!=="script"&&hD(Fe,"data:")===0&&g[Z])){if(!(ne&&!En(W,Go(Fe,B,"")))){if(Fe)return!1}}}}}}return!0},Jm=function(Z){return Z!=="annotation-xml"&&Ib(Z,oe)},Xm=function(Z){ns(U.beforeSanitizeAttributes,Z,null);const{attributes:Te}=Z;if(!Te||Du(Z))return;const Fe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ye,forceKeepAttr:void 0};let $t=Te.length;for(;$t--;){const fn=Te[$t],{name:Wt,namespaceURI:Mn,value:rs}=fn,Mo=Qt(Wt),Ou=rs;let hn=Wt==="value"?Ou:pD(Ou);if(Fe.attrName=Mo,Fe.attrValue=hn,Fe.keepAttr=!0,Fe.forceKeepAttr=void 0,ns(U.uponSanitizeAttribute,Z,Fe),hn=Fe.attrValue,ue&&(Mo==="id"||Mo==="name")&&(qi(Wt,Z),hn=Re+hn),k&&En(/((--!?|])>)|<\/(style|title)/i,hn)){qi(Wt,Z);continue}if(Fe.forceKeepAttr)continue;if(!Fe.keepAttr){qi(Wt,Z);continue}if(!Ie&&En(/\/>/i,hn)){qi(Wt,Z);continue}P&&Sl([J,H,j],Qm=>{hn=Go(hn,Qm," ")});const Ym=Qt(Z.nodeName);if(!Gm(Ym,Mo,hn)){qi(Wt,Z);continue}if(p&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!Mn)switch(h.getAttributeType(Ym,Mo)){case"TrustedHTML":{hn=p.createHTML(hn);break}case"TrustedScriptURL":{hn=p.createScriptURL(hn);break}}if(hn!==Ou)try{Mn?Z.setAttributeNS(Mn,Wt,hn):Z.setAttribute(Wt,hn),Du(Z)?Nr(Z):Ab(e.removed)}catch{qi(Wt,Z)}}ns(U.afterSanitizeAttributes,Z,null)},VE=function Ue(Z){let Te=null;const Fe=Hm(Z);for(ns(U.beforeSanitizeShadowDOM,Z,null);Te=Fe.nextNode();)ns(U.uponSanitizeShadowNode,Te,null),Wm(Te),Xm(Te),Te.content instanceof i&&Ue(Te.content);ns(U.afterSanitizeShadowDOM,Z,null)};return e.sanitize=function(Ue){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Te=null,Fe=null,$t=null,fn=null;if(Qe=!Ue,Qe&&(Ue="<!-->"),typeof Ue!="string"&&!Km(Ue))if(typeof Ue.toString=="function"){if(Ue=Ue.toString(),typeof Ue!="string")throw Jo("dirty is not a string, aborting")}else throw Jo("toString is not a function");if(!e.isSupported)return Ue;if(pe||$u(Z),e.removed=[],typeof Ue=="string"&&(ee=!1),ee){if(Ue.nodeName){const rs=Qt(Ue.nodeName);if(!le[rs]||G[rs])throw Jo("root node is forbidden and cannot be sanitized in-place")}}else if(Ue instanceof a)Te=Vm("<!---->"),Fe=Te.ownerDocument.importNode(Ue,!0),Fe.nodeType===Yo.element&&Fe.nodeName==="BODY"||Fe.nodeName==="HTML"?Te=Fe:Te.appendChild(Fe);else{if(!ge&&!P&&!V&&Ue.indexOf("<")===-1)return p&&F?p.createHTML(Ue):Ue;if(Te=Vm(Ue),!Te)return ge?null:F?b:""}Te&&be&&Nr(Te.firstChild);const Wt=Hm(ee?Ue:Te);for(;$t=Wt.nextNode();)Wm($t),Xm($t),$t.content instanceof i&&VE($t.content);if(ee)return Ue;if(ge){if(M)for(fn=I.call(Te.ownerDocument);Te.firstChild;)fn.appendChild(Te.firstChild);else fn=Te;return(ye.shadowroot||ye.shadowrootmode)&&(fn=D.call(r,fn,!0)),fn}let Mn=V?Te.outerHTML:Te.innerHTML;return V&&le["!doctype"]&&Te.ownerDocument&&Te.ownerDocument.doctype&&Te.ownerDocument.doctype.name&&En(x1,Te.ownerDocument.doctype.name)&&(Mn="<!DOCTYPE "+Te.ownerDocument.doctype.name+`>
`+Mn),P&&Sl([J,H,j],rs=>{Mn=Go(Mn,rs," ")}),p&&F?p.createHTML(Mn):Mn},e.setConfig=function(){let Ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$u(Ue),pe=!0},e.clearConfig=function(){Bi=null,pe=!1},e.isValidAttribute=function(Ue,Z,Te){Bi||$u({});const Fe=Qt(Ue),$t=Qt(Z);return Gm(Fe,$t,Te)},e.addHook=function(Ue,Z){typeof Z=="function"&&Wo(U[Ue],Z)},e.removeHook=function(Ue,Z){if(Z!==void 0){const Te=dD(U[Ue],Z);return Te===-1?void 0:fD(U[Ue],Te,1)[0]}return Ab(U[Ue])},e.removeHooks=function(Ue){U[Ue]=[]},e.removeAllHooks=function(){U=Db()},e}var TD=E1();function zp(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Ni=zp();function S1(t){Ni=t}var wa={exec:()=>null};function ht(t,e=""){let n=typeof t=="string"?t:t.source;const r={replace:(s,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(Rn.caret,"$1"),n=n.replace(s,o),r},getRegex:()=>new RegExp(n,e)};return r}var Rn={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},kD=/^(?:[ \t]*(?:\n|$))+/,$D=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,DD=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Za=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,OD=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Vp=/(?:[*+-]|\d{1,9}[.)])/,A1=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,I1=ht(A1).replace(/bull/g,Vp).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),PD=ht(A1).replace(/bull/g,Vp).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Hp=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,LD=/^[^\n]+/,Kp=/(?!\s*\])(?:\\.|[^\[\]\\])+/,MD=ht(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Kp).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),ND=ht(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Vp).getRegex(),hu="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Wp=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,FD=ht("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Wp).replace("tag",hu).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),C1=ht(Hp).replace("hr",Za).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",hu).getRegex(),jD=ht(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",C1).getRegex(),Gp={blockquote:jD,code:$D,def:MD,fences:DD,heading:OD,hr:Za,html:FD,lheading:I1,list:ND,newline:kD,paragraph:C1,table:wa,text:LD},Ob=ht("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Za).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",hu).getRegex(),UD={...Gp,lheading:PD,table:Ob,paragraph:ht(Hp).replace("hr",Za).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Ob).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",hu).getRegex()},BD={...Gp,html:ht(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Wp).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:wa,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ht(Hp).replace("hr",Za).replace("heading",` *#{1,6} *[^
]`).replace("lheading",I1).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},qD=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,zD=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,R1=/^( {2,}|\\)\n(?!\s*$)/,VD=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,pu=/[\p{P}\p{S}]/u,Jp=/[\s\p{P}\p{S}]/u,T1=/[^\s\p{P}\p{S}]/u,HD=ht(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Jp).getRegex(),k1=/(?!~)[\p{P}\p{S}]/u,KD=/(?!~)[\s\p{P}\p{S}]/u,WD=/(?:[^\s\p{P}\p{S}]|~)/u,GD=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,$1=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,JD=ht($1,"u").replace(/punct/g,pu).getRegex(),XD=ht($1,"u").replace(/punct/g,k1).getRegex(),D1="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",YD=ht(D1,"gu").replace(/notPunctSpace/g,T1).replace(/punctSpace/g,Jp).replace(/punct/g,pu).getRegex(),QD=ht(D1,"gu").replace(/notPunctSpace/g,WD).replace(/punctSpace/g,KD).replace(/punct/g,k1).getRegex(),ZD=ht("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,T1).replace(/punctSpace/g,Jp).replace(/punct/g,pu).getRegex(),eO=ht(/\\(punct)/,"gu").replace(/punct/g,pu).getRegex(),tO=ht(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),nO=ht(Wp).replace("(?:-->|$)","-->").getRegex(),rO=ht("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",nO).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),_c=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,sO=ht(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",_c).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),O1=ht(/^!?\[(label)\]\[(ref)\]/).replace("label",_c).replace("ref",Kp).getRegex(),P1=ht(/^!?\[(ref)\](?:\[\])?/).replace("ref",Kp).getRegex(),iO=ht("reflink|nolink(?!\\()","g").replace("reflink",O1).replace("nolink",P1).getRegex(),Xp={_backpedal:wa,anyPunctuation:eO,autolink:tO,blockSkip:GD,br:R1,code:zD,del:wa,emStrongLDelim:JD,emStrongRDelimAst:YD,emStrongRDelimUnd:ZD,escape:qD,link:sO,nolink:P1,punctuation:HD,reflink:O1,reflinkSearch:iO,tag:rO,text:VD,url:wa},oO={...Xp,link:ht(/^!?\[(label)\]\((.*?)\)/).replace("label",_c).getRegex(),reflink:ht(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",_c).getRegex()},uh={...Xp,emStrongRDelimAst:QD,emStrongLDelim:XD,url:ht(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},aO={...uh,br:ht(R1).replace("{2,}","*").getRegex(),text:ht(uh.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Il={normal:Gp,gfm:UD,pedantic:BD},Qo={normal:Xp,gfm:uh,breaks:aO,pedantic:oO},lO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Pb=t=>lO[t];function Ur(t,e){if(e){if(Rn.escapeTest.test(t))return t.replace(Rn.escapeReplace,Pb)}else if(Rn.escapeTestNoEncode.test(t))return t.replace(Rn.escapeReplaceNoEncode,Pb);return t}function Lb(t){try{t=encodeURI(t).replace(Rn.percentDecode,"%")}catch{return null}return t}function Mb(t,e){var i;const n=t.replace(Rn.findPipe,(o,a,l)=>{let c=!1,u=a;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),r=n.split(Rn.splitPipe);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!((i=r.at(-1))!=null&&i.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(Rn.slashPipe,"|");return r}function Zo(t,e,n){const r=t.length;if(r===0)return"";let s=0;for(;s<r&&t.charAt(r-s-1)===e;)s++;return t.slice(0,r-s)}function cO(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function Nb(t,e,n,r,s){const i=e.href,o=e.title||null,a=t[1].replace(s.other.outputLinkReplace,"$1");r.state.inLink=!0;const l={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:i,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function uO(t,e,n){const r=t.match(n.other.indentCodeCompensation);if(r===null)return e;const s=r[1];return e.split(`
`).map(i=>{const o=i.match(n.other.beginningSpace);if(o===null)return i;const[a]=o;return a.length>=s.length?i.slice(s.length):i}).join(`
`)}var xc=class{constructor(t){Se(this,"options");Se(this,"rules");Se(this,"lexer");this.options=t||Ni}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Zo(n,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const n=e[0],r=uO(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){const r=Zo(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:Zo(e[0],`
`)}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let n=Zo(e[0],`
`).split(`
`),r="",s="";const i=[];for(;n.length>0;){let o=!1;const a=[];let l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))a.push(n[l]),o=!0;else if(!o)a.push(n[l]);else break;n=n.slice(l);const c=a.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${c}`:c,s=s?`${s}
${u}`:u;const d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,i,!0),this.lexer.state.top=d,n.length===0)break;const f=i.at(-1);if((f==null?void 0:f.type)==="code")break;if((f==null?void 0:f.type)==="blockquote"){const h=f,m=h.raw+`
`+n.join(`
`),y=this.blockquote(m);i[i.length-1]=y,r=r.substring(0,r.length-h.raw.length)+y.raw,s=s.substring(0,s.length-h.text.length)+y.text;break}else if((f==null?void 0:f.type)==="list"){const h=f,m=h.raw+`
`+n.join(`
`),y=this.list(m);i[i.length-1]=y,r=r.substring(0,r.length-f.raw.length)+y.raw,s=s.substring(0,s.length-h.raw.length)+y.raw,n=m.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:i,text:s}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim();const r=n.length>1,s={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const i=this.rules.other.listItemRegex(n);let o=!1;for(;t;){let l=!1,c="",u="";if(!(e=i.exec(t))||this.rules.block.hr.test(t))break;c=e[0],t=t.substring(c.length);let d=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,_=>" ".repeat(3*_.length)),f=t.split(`
`,1)[0],h=!d.trim(),m=0;if(this.options.pedantic?(m=2,u=d.trimStart()):h?m=e[1].length+1:(m=e[2].search(this.rules.other.nonSpaceChar),m=m>4?1:m,u=d.slice(m),m+=e[1].length),h&&this.rules.other.blankLine.test(f)&&(c+=f+`
`,t=t.substring(f.length+1),l=!0),!l){const _=this.rules.other.nextBulletRegex(m),x=this.rules.other.hrRegex(m),w=this.rules.other.fencesBeginRegex(m),p=this.rules.other.headingBeginRegex(m),b=this.rules.other.htmlBeginRegex(m);for(;t;){const A=t.split(`
`,1)[0];let R;if(f=A,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),R=f):R=f.replace(this.rules.other.tabCharGlobal,"    "),w.test(f)||p.test(f)||b.test(f)||_.test(f)||x.test(f))break;if(R.search(this.rules.other.nonSpaceChar)>=m||!f.trim())u+=`
`+R.slice(m);else{if(h||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||w.test(d)||p.test(d)||x.test(d))break;u+=`
`+f}!h&&!f.trim()&&(h=!0),c+=A+`
`,t=t.substring(A.length+1),d=R.slice(m)}}s.loose||(o?s.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(o=!0));let y=null,S;this.options.gfm&&(y=this.rules.other.listIsTask.exec(u),y&&(S=y[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:c,task:!!y,checked:S,loose:!1,text:u,tokens:[]}),s.raw+=c}const a=s.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let l=0;l<s.items.length;l++)if(this.lexer.state.top=!1,s.items[l].tokens=this.lexer.blockTokens(s.items[l].text,[]),!s.loose){const c=s.items[l].tokens.filter(d=>d.type==="space"),u=c.length>0&&c.some(d=>this.rules.other.anyLine.test(d.raw));s.loose=u}if(s.loose)for(let l=0;l<s.items.length;l++)s.items[l].loose=!0;return s}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:r,title:s}}}table(t){var o;const e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const n=Mb(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=(o=e[3])!=null&&o.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const a of r)this.rules.other.tableAlignRight.test(a)?i.align.push("right"):this.rules.other.tableAlignCenter.test(a)?i.align.push("center"):this.rules.other.tableAlignLeft.test(a)?i.align.push("left"):i.align.push(null);for(let a=0;a<n.length;a++)i.header.push({text:n[a],tokens:this.lexer.inline(n[a]),header:!0,align:i.align[a]});for(const a of s)i.rows.push(Mb(a,i.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:i.align[c]})));return i}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const i=Zo(n.slice(0,-1),"\\");if((n.length-i.length)%2===0)return}else{const i=cO(e[2],"()");if(i===-2)return;if(i>-1){const a=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let r=e[2],s="";if(this.options.pedantic){const i=this.rules.other.pedanticHrefTitle.exec(r);i&&(r=i[1],s=i[3])}else s=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),Nb(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=e[r.toLowerCase()];if(!s){const i=n[0].charAt(0);return{type:"text",raw:i,text:i}}return Nb(n,s,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const i=[...r[0]].length-1;let o,a,l=i,c=0;const u=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*t.length+i);(r=u.exec(e))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(a=[...o].length,r[3]||r[4]){l+=a;continue}else if((r[5]||r[6])&&i%3&&!((i+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);const d=[...r[0]][0].length,f=t.slice(0,i+r.index+d+a);if(Math.min(i,a)%2){const m=f.slice(1,-1);return{type:"em",raw:f,text:m,tokens:this.lexer.inlineTokens(m)}}const h=f.slice(2,-2);return{type:"strong",raw:f,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," ");const r=this.rules.other.nonSpaceChar.test(n),s=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&s&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let n,r;return e[2]==="@"?(n=e[1],r="mailto:"+n):(n=e[1],r=n),{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(t){var n;let e;if(e=this.rules.inline.url.exec(t)){let r,s;if(e[2]==="@")r=e[0],s="mailto:"+r;else{let i;do i=e[0],e[0]=((n=this.rules.inline._backpedal.exec(e[0]))==null?void 0:n[0])??"";while(i!==e[0]);r=e[0],e[1]==="www."?s="http://"+e[0]:s=e[0]}return{type:"link",raw:e[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){const n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},ps=class dh{constructor(e){Se(this,"tokens");Se(this,"options");Se(this,"state");Se(this,"tokenizer");Se(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ni,this.options.tokenizer=this.options.tokenizer||new xc,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:Rn,block:Il.normal,inline:Qo.normal};this.options.pedantic?(n.block=Il.pedantic,n.inline=Qo.pedantic):this.options.gfm&&(n.block=Il.gfm,this.options.breaks?n.inline=Qo.breaks:n.inline=Qo.gfm),this.tokenizer.rules=n}static get rules(){return{block:Il,inline:Qo}}static lex(e,n){return new dh(n).lex(e)}static lexInline(e,n){return new dh(n).inlineTokens(e)}lex(e){e=e.replace(Rn.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){var s,i,o;for(this.options.pedantic&&(e=e.replace(Rn.tabCharGlobal,"    ").replace(Rn.spaceLine,""));e;){let a;if((i=(s=this.options.extensions)==null?void 0:s.block)!=null&&i.some(c=>(a=c.call({lexer:this},e,n))?(e=e.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const c=n.at(-1);a.raw.length===1&&c!==void 0?c.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),n.push(a);continue}let l=e;if((o=this.options.extensions)!=null&&o.startBlock){let c=1/0;const u=e.slice(1);let d;this.options.extensions.startBlock.forEach(f=>{d=f.call({lexer:this},u),typeof d=="number"&&d>=0&&(c=Math.min(c,d))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){const c=n.at(-1);r&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a),r=l.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var a,l,c;let r=e,s=null;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)u.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,s.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(s=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let i=!1,o="";for(;e;){i||(o=""),i=!1;let u;if((l=(a=this.options.extensions)==null?void 0:a.inline)!=null&&l.some(f=>(u=f.call({lexer:this},e,n))?(e=e.substring(u.raw.length),n.push(u),!0):!1))continue;if(u=this.tokenizer.escape(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.tag(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.link(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(u.raw.length);const f=n.at(-1);u.type==="text"&&(f==null?void 0:f.type)==="text"?(f.raw+=u.raw,f.text+=u.text):n.push(u);continue}if(u=this.tokenizer.emStrong(e,r,o)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.codespan(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.br(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.del(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.autolink(e)){e=e.substring(u.raw.length),n.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(e))){e=e.substring(u.raw.length),n.push(u);continue}let d=e;if((c=this.options.extensions)!=null&&c.startInline){let f=1/0;const h=e.slice(1);let m;this.options.extensions.startInline.forEach(y=>{m=y.call({lexer:this},h),typeof m=="number"&&m>=0&&(f=Math.min(f,m))}),f<1/0&&f>=0&&(d=e.substring(0,f+1))}if(u=this.tokenizer.inlineText(d)){e=e.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(o=u.raw.slice(-1)),i=!0;const f=n.at(-1);(f==null?void 0:f.type)==="text"?(f.raw+=u.raw,f.text+=u.text):n.push(u);continue}if(e){const f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return n}},_o=class{constructor(t){Se(this,"options");Se(this,"parser");this.options=t||Ni}space(t){return""}code({text:t,lang:e,escaped:n}){var i;const r=(i=(e||"").match(Rn.notSpaceStart))==null?void 0:i[0],s=t.replace(Rn.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Ur(r)+'">'+(n?s:Ur(s,!0))+`</code></pre>
`:"<pre><code>"+(n?s:Ur(s,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){const e=t.ordered,n=t.start;let r="";for(let o=0;o<t.items.length;o++){const a=t.items[o];r+=this.listitem(a)}const s=e?"ol":"ul",i=e&&n!==1?' start="'+n+'"':"";return"<"+s+i+`>
`+r+"</"+s+`>
`}listitem(t){var n;let e="";if(t.task){const r=this.checkbox({checked:!!t.checked});t.loose?((n=t.tokens[0])==null?void 0:n.type)==="paragraph"?(t.tokens[0].text=r+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=r+" "+Ur(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):e+=r+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let s=0;s<t.header.length;s++)n+=this.tablecell(t.header[s]);e+=this.tablerow({text:n});let r="";for(let s=0;s<t.rows.length;s++){const i=t.rows[s];n="";for(let o=0;o<i.length;o++)n+=this.tablecell(i[o]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Ur(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){const r=this.parser.parseInline(n),s=Lb(t);if(s===null)return r;t=s;let i='<a href="'+t+'"';return e&&(i+=' title="'+Ur(e)+'"'),i+=">"+r+"</a>",i}image({href:t,title:e,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));const s=Lb(t);if(s===null)return Ur(n);t=s;let i=`<img src="${t}" alt="${n}"`;return e&&(i+=` title="${Ur(e)}"`),i+=">",i}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Ur(t.text)}},Yp=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},ms=class fh{constructor(e){Se(this,"options");Se(this,"renderer");Se(this,"textRenderer");this.options=e||Ni,this.options.renderer=this.options.renderer||new _o,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Yp}static parse(e,n){return new fh(n).parse(e)}static parseInline(e,n){return new fh(n).parseInline(e)}parse(e,n=!0){var s,i;let r="";for(let o=0;o<e.length;o++){const a=e[o];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[a.type]){const c=a,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){r+=u||"";continue}}const l=a;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;o+1<e.length&&e[o+1].type==="text";)c=e[++o],u+=`
`+this.renderer.text(c);n?r+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):r+=u;continue}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(e,n=this.renderer){var s,i;let r="";for(let o=0;o<e.length;o++){const a=e[o];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[a.type]){const c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=c||"";continue}}const l=a;switch(l.type){case"escape":{r+=n.text(l);break}case"html":{r+=n.html(l);break}case"link":{r+=n.link(l);break}case"image":{r+=n.image(l);break}case"strong":{r+=n.strong(l);break}case"em":{r+=n.em(l);break}case"codespan":{r+=n.codespan(l);break}case"br":{r+=n.br(l);break}case"del":{r+=n.del(l);break}case"text":{r+=n.text(l);break}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}},xf,Ql=(xf=class{constructor(t){Se(this,"options");Se(this,"block");this.options=t||Ni}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?ps.lex:ps.lexInline}provideParser(){return this.block?ms.parse:ms.parseInline}},Se(xf,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),xf),dO=class{constructor(...t){Se(this,"defaults",zp());Se(this,"options",this.setOptions);Se(this,"parse",this.parseMarkdown(!0));Se(this,"parseInline",this.parseMarkdown(!1));Se(this,"Parser",ms);Se(this,"Renderer",_o);Se(this,"TextRenderer",Yp);Se(this,"Lexer",ps);Se(this,"Tokenizer",xc);Se(this,"Hooks",Ql);this.use(...t)}walkTokens(t,e){var r,s;let n=[];for(const i of t)switch(n=n.concat(e.call(this,i)),i.type){case"table":{const o=i;for(const a of o.header)n=n.concat(this.walkTokens(a.tokens,e));for(const a of o.rows)for(const l of a)n=n.concat(this.walkTokens(l.tokens,e));break}case"list":{const o=i;n=n.concat(this.walkTokens(o.items,e));break}default:{const o=i;(s=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&s[o.type]?this.defaults.extensions.childTokens[o.type].forEach(a=>{const l=o[a].flat(1/0);n=n.concat(this.walkTokens(l,e))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,e)))}}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const i=e.renderers[s.name];i?e.renderers[s.name]=function(...o){let a=s.renderer.apply(this,o);return a===!1&&(a=i.apply(this,o)),a}:e.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const i=e[s.level];i?i.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),r.extensions=e),n.renderer){const s=this.defaults.renderer||new _o(this.defaults);for(const i in n.renderer){if(!(i in s))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;const o=i,a=n.renderer[o],l=s[o];s[o]=(...c)=>{let u=a.apply(s,c);return u===!1&&(u=l.apply(s,c)),u||""}}r.renderer=s}if(n.tokenizer){const s=this.defaults.tokenizer||new xc(this.defaults);for(const i in n.tokenizer){if(!(i in s))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;const o=i,a=n.tokenizer[o],l=s[o];s[o]=(...c)=>{let u=a.apply(s,c);return u===!1&&(u=l.apply(s,c)),u}}r.tokenizer=s}if(n.hooks){const s=this.defaults.hooks||new Ql;for(const i in n.hooks){if(!(i in s))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;const o=i,a=n.hooks[o],l=s[o];Ql.passThroughHooks.has(i)?s[o]=c=>{if(this.defaults.async)return Promise.resolve(a.call(s,c)).then(d=>l.call(s,d));const u=a.call(s,c);return l.call(s,u)}:s[o]=(...c)=>{let u=a.apply(s,c);return u===!1&&(u=l.apply(s,c)),u}}r.hooks=s}if(n.walkTokens){const s=this.defaults.walkTokens,i=n.walkTokens;r.walkTokens=function(o){let a=[];return a.push(i.call(this,o)),s&&(a=a.concat(s.call(this,o))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return ps.lex(t,e??this.defaults)}parser(t,e){return ms.parse(t,e??this.defaults)}parseMarkdown(t){return(n,r)=>{const s={...r},i={...this.defaults,...s},o=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&s.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=t);const a=i.hooks?i.hooks.provideLexer():t?ps.lex:ps.lexInline,l=i.hooks?i.hooks.provideParser():t?ms.parse:ms.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(n):n).then(c=>a(c,i)).then(c=>i.hooks?i.hooks.processAllTokens(c):c).then(c=>i.walkTokens?Promise.all(this.walkTokens(c,i.walkTokens)).then(()=>c):c).then(c=>l(c,i)).then(c=>i.hooks?i.hooks.postprocess(c):c).catch(o);try{i.hooks&&(n=i.hooks.preprocess(n));let c=a(n,i);i.hooks&&(c=i.hooks.processAllTokens(c)),i.walkTokens&&this.walkTokens(c,i.walkTokens);let u=l(c,i);return i.hooks&&(u=i.hooks.postprocess(u)),u}catch(c){return o(c)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const r="<p>An error occurred:</p><pre>"+Ur(n.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(n);throw n}}},Li=new dO;function _t(t,e){return Li.parse(t,e)}_t.options=_t.setOptions=function(t){return Li.setOptions(t),_t.defaults=Li.defaults,S1(_t.defaults),_t};_t.getDefaults=zp;_t.defaults=Ni;_t.use=function(...t){return Li.use(...t),_t.defaults=Li.defaults,S1(_t.defaults),_t};_t.walkTokens=function(t,e){return Li.walkTokens(t,e)};_t.parseInline=Li.parseInline;_t.Parser=ms;_t.parser=ms.parse;_t.Renderer=_o;_t.TextRenderer=Yp;_t.Lexer=ps;_t.lexer=ps.lex;_t.Tokenizer=xc;_t.Hooks=Ql;_t.parse=_t;_t.options;_t.setOptions;_t.use;_t.walkTokens;_t.parseInline;ms.parse;ps.lex;let _a=null;function fO(){return je(new _o,t=>{t.link=function(e){const n=_o.prototype.link.apply(this,[e]);return e.href.startsWith("#")?n:n.replace("<a",'<a target="_blank"')}})}function hO(t){const e=kw(t,/<a[^>]*href="#action:([^"]+)"[^>]*>([^<]+)<\/a>/g);for(const[n,r,s]of e)t=t.replace(n,`<button type="button" data-markdown-action="${r}">${s}</button>`);return t}function pO(t){const e=kw(t,/<a[^>]*href="#route:([^"]+)"[^>]*>([^<]+)<\/a>/g);for(const[n,r,s]of e){const i=(_a==null?void 0:_a.resolve(r))??r;t=t.replace(n,`<a data-markdown-route="${r}" href="${i}">${s}</a>`)}return t}function mO(){return _a}function gO(t){_a=t}function yO(t){let e=_t(t,{renderer:fO(),async:!1});return e=L1(e),e=hO(e),e=pO(e),e}function L1(t){return TD.sanitize(t,{ADD_ATTR:["target"]})}const bO={mounted(t,{value:e}){t.innerHTML=L1(e)}},vO={measure:b$,"safe-html":bO},wO={install(t,e){const n={...vO,...e.directives};for(const[r,s]of Object.entries(n))t.directive(r,s)}};class _O extends Ya{constructor(){super(...arguments);Se(this,"cache")}async get(n){return await(await this.open()).match(n)??null}async store(n,r){await(await this.open()).put(n,r)}async replace(n,r){const s=await this.open();(await s.keys(n)).length!==0&&await s.put(n,r)}async open(){return this.cache=this.cache??je(new Ir,n=>{caches.open("app").then(r=>n.resolve(r))})}}const rf=Qn(_O);class xO extends Ya{async purge(){await He.emit("purge-storage")}}const mu=Qn(xO);function Fb(t,e){return{...t,...Us(e,Object.keys(t))}}const EO={$app:lt,$events:He,$storage:mu};async function Fi(t,e){await Promise.all(Object.entries(e).map(async([n,r])=>{await r.launch().catch(s=>{var i,o;return(o=(i=t.config).errorHandler)==null?void 0:o.call(i,s,null,`Failed launching ${n}.`)})})),Object.assign(t.config.globalProperties,e),(ei()||Ia())&&Object.assign(globalThis,e)}const SO={async install(t,e){var r;const n={...EO,...e.services};t.use(c$()),(r=e.settings)==null||r.forEach(s=>lt.addSetting(s)),await Fi(t,n)}},M1=768,Ec={Mobile:"mobile",Desktop:"desktop"};function N1(){return globalThis.innerWidth>M1?Ec.Desktop:Ec.Mobile}const AO=di({name:"ui",initialState:{modals:[],toasts:[],layout:N1()},computed:{desktop:({layout:t})=>t===Ec.Desktop,mobile:({layout:t})=>t===Ec.Mobile,openModals:({modals:t})=>t.filter(({closing:e})=>!e)}});class IO extends AO{constructor(){super(...arguments);Se(this,"modalCallbacks",{});Se(this,"components",{})}registerComponent(n,r){this.components[n]=r}resolveComponent(n){return this.components[n]??null}requireComponent(n){return this.resolveComponent(n)??Xe(`UI Component '${n}' is not defined!`)}alert(n,r){const s=()=>typeof r!="string"?{message:n}:{title:n,message:r};this.modal(this.requireComponent("alert-modal"),s())}async confirm(n,r,s){const o=typeof r!="string"?{...r??{},message:n,required:!!(r!=null&&r.required)}:{...s??{},title:n,message:r,required:!!(s!=null&&s.required)},a=await this.modalForm(this.requireComponent("confirm-modal"),o),l=typeof a=="object"?a[0]:a??!1,c=typeof a=="object"?a[1]:Object.entries(o.checkboxes??{}).reduce((u,[d,{default:f}])=>({[d]:f??!1,...u}),{});for(const[u,d]of Object.entries(o.checkboxes??{}))if(!(!d.required||c[u]))return l&&ei()&&console.warn(`Confirmed confirm modal was suppressed because required '${u}' checkbox was missing`),[!1,c];return"checkboxes"in o?[l,c]:l}async prompt(n,r,s){const i=(s==null?void 0:s.trim)??!0,o=()=>typeof r!="string"?{message:n,...r??{}}:{title:n,message:r,...s??{}},a=await this.modalForm(this.requireComponent("prompt-modal"),o());return(i&&typeof a=="string"?a==null?void 0:a.trim():a)??null}async loading(n,r){const s=d=>typeof d=="function"?Promise.resolve(d()):d,i=()=>{if(typeof n=="string")return{props:{message:n},operationPromise:s(r)};if(typeof n=="function"||n instanceof Promise)return{operationPromise:s(n)};const{delay:d,...f}=n;return{props:f,delay:E(d),operationPromise:s(r)}};let o=!1;const{operationPromise:a,props:l,delay:c}=i();if(c&&await Promise.race([ln({ms:c}).then(()=>o=!0),a]),c&&!o)return a;const u=await this.modal(this.requireComponent("loading-modal"),l);try{const d=await a;return await ln({ms:500}),d}finally{await this.closeModal(u.id)}}toast(n,r={}){const{component:s,...i}=r,o={id:$n(),properties:{message:n,...i},component:it(s??this.requireComponent("toast"))};this.setState("toasts",this.toasts.concat(o))}async modal(n,r){const s=$n(),i={},o={id:s,closing:!1,properties:r??{},component:it(n),beforeClose:new Promise(l=>i.willClose=l),afterClose:new Promise(l=>i.hasClosed=l)},a=this.modals.concat(o);return this.modalCallbacks[o.id]=i,this.setState({modals:a}),await Ft(),o}async modalForm(n,r){return await(await this.modal(n,r)).beforeClose}async closeModal(n,r){if(!lt.isMounted()){await this.removeModal(n,r);return}await He.emit("close-modal",{id:n,result:r})}async closeAllModals(){for(;this.modals.length>0;)await this.closeModal(Nn(this.modals[this.modals.length-1]).id)}async boot(){this.watchModalEvents(),this.watchMountedEvent(),this.watchViewportBreakpoints()}async removeModal(n,r){var s,i;this.setState("modals",this.modals.filter(o=>o.id!==n)),(i=(s=this.modalCallbacks[n])==null?void 0:s.hasClosed)==null||i.call(s,r),delete this.modalCallbacks[n]}watchModalEvents(){He.on("modal-will-close",({modal:{id:n},result:r})=>{var i,o;const s=this.modals.find(a=>n===a.id);s&&(s.closing=!0),(o=(i=this.modalCallbacks[n])==null?void 0:i.willClose)==null||o.call(i,r)}),He.on("modal-has-closed",async({modal:{id:n},result:r})=>{await this.removeModal(n,r)})}watchMountedEvent(){He.once("application-mounted",async()=>{if(!globalThis.document||!globalThis.getComputedStyle)return;const n=globalThis.document.getElementById("splash");n&&(globalThis.getComputedStyle(n).opacity!=="0"&&(n.style.opacity="0",await ln({ms:600})),n.remove())})}watchViewportBreakpoints(){if(!globalThis.matchMedia)return;globalThis.matchMedia(`(min-width: ${M1}px)`).addEventListener("change",()=>this.setState({layout:N1()}))}}const It=Qn(IO);class CO{constructor(e,n){this.locale=e,this.fallbackLocale=n}getLocale(){return this.locale}async setLocale(e){this.locale=e}getFallbackLocale(){return this.fallbackLocale}async setFallbackLocale(e){this.fallbackLocale=e}getLocales(){return["en"]}translate(e){return ei()&&console.warn("Lang provider is missing"),e}translateWithDefault(e,n){return ei()&&console.warn("Lang provider is missing"),n}}const RO=di({name:"lang",persist:["locale","fallbackLocale"],initialState:{locale:null,locales:["en"],fallbackLocale:"en"}});class TO extends RO{constructor(){super();Se(this,"provider");this.provider=new CO(this.getState("locale")??this.getBrowserLocale(),this.getState("fallbackLocale"))}async setProvider(n){this.provider=n,this.locales=n.getLocales(),await n.setLocale(this.locale??this.getBrowserLocale()),await n.setFallbackLocale(this.fallbackLocale)}translate(n,r){return this.provider.translate(n,r)??n}translateWithDefault(n,r,s={}){return this.provider.translateWithDefault(n,r,s)}getBrowserLocale(){const n=this.getState("locales");return navigator.languages.find(r=>n.includes(r))??"en"}async boot(){globalThis.document&&this.requireStore().$subscribe(async()=>{var n,r;await this.provider.setLocale(this.locale??this.getBrowserLocale()),await this.provider.setFallbackLocale(this.fallbackLocale),this.locale?(n=document.querySelector("html"))==null||n.setAttribute("lang",this.locale):(r=document.querySelector("html"))==null||r.removeAttribute("lang")},{immediate:!0})}}const ni=Qn(TO),el=ni.translate.bind(ni),Ne=ni.translateWithDefault.bind(ni),kO=di({name:"errors",initialState:{logs:[],startupErrors:[],debug:!1},computed:{hasErrors:({logs:t})=>t.length>0,hasNewErrors:({logs:t})=>t.some(e=>!e.seen),hasStartupErrors:({startupErrors:t})=>t.length>0}});class $O extends kO{constructor(){super(...arguments);Se(this,"forceReporting",!1);Se(this,"enabled",!0);Se(this,"eruda",null)}enable(){this.enabled=!0}disable(){this.enabled=!1}async inspect(n,r){if(Array.isArray(n)&&n.length===0){It.alert(Ne("errors.inspectEmpty","Nothing to inspect!"));return}const s=Array.isArray(n)?n[0]:this.isErrorReport(n)?n:await this.createErrorReport(n),i=Array.isArray(n)?n:r??[s];It.modal(It.requireComponent("error-report-modal"),{report:s,reports:i})}async report(n,r){if(await He.emit("error",{error:n,message:r}),Ia("unit")||(ei()&&this.logError(n),!this.enabled))throw n;if(!lt.isMounted()){const o=await this.createStartupErrorReport(n);o&&this.setState({startupErrors:this.startupErrors.concat(o)});return}const s=await this.createErrorReport(n),i={report:s,seen:!1,date:new Date};It.toast(r??Ne("errors.notice","Something went wrong, but it's not your fault. Try again!"),{variant:"danger",actions:[{label:Ne("errors.viewDetails","View details"),dismiss:!0,click:()=>It.modal(It.requireComponent("error-report-modal"),{report:s,reports:[s]})}]}),this.setState({logs:[i].concat(this.logs)})}reportDevelopmentError(n,r){ei()&&(r&&console.warn(r),this.logError(n))}see(n){this.setState({logs:this.logs.map(r=>r.report!==n?r:{...r,seen:!0})})}async boot(){Lt(async()=>{var n;if(!this.debug){(n=this.eruda)==null||n.destroy();return}this.eruda??(this.eruda=(await to(async()=>{const{default:r}=await import("./eruda-BCRYnMj4.js").then(s=>s.e);return{default:r}},[])).default),this.eruda.init()})}logError(n){console.error(n),yt(n)&&n.cause&&this.logError(n.cause)}isErrorReport(n){return yt(n)&&"title"in n}async createErrorReport(n){return typeof n=="string"?{title:n}:n instanceof Error||n instanceof Yn?this.createErrorReportFromError(n):yt(n)?kn({title:Tt(n.name??n.title??Ne("errors.unknown","Unknown Error")),description:Tt(n.message??n.description??Ne("errors.unknownDescription","Unknown error object")),error:n}):{title:Ne("errors.unknown","Unknown Error"),error:n}}async createStartupErrorReport(n){return n instanceof nh?n.cause instanceof nh?null:this.createErrorReport(n.cause):this.createErrorReport(n)}createErrorReportFromError(n,r={}){return{title:n.name,description:n.message,details:n.stack,error:n,...r}}}const ri=Qn($O),DO=["top","right","bottom","left"],si=Math.min,zn=Math.max,Sc=Math.round,Cl=Math.floor,Kr=t=>({x:t,y:t}),OO={left:"right",right:"left",bottom:"top",top:"bottom"},PO={start:"end",end:"start"};function hh(t,e,n){return zn(t,si(e,n))}function Es(t,e){return typeof t=="function"?t(e):t}function Ss(t){return t.split("-")[0]}function Oo(t){return t.split("-")[1]}function Qp(t){return t==="x"?"y":"x"}function Zp(t){return t==="y"?"height":"width"}function bs(t){return["top","bottom"].includes(Ss(t))?"y":"x"}function em(t){return Qp(bs(t))}function LO(t,e,n){n===void 0&&(n=!1);const r=Oo(t),s=em(t),i=Zp(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Ac(o)),[o,Ac(o)]}function MO(t){const e=Ac(t);return[ph(t),e,ph(e)]}function ph(t){return t.replace(/start|end/g,e=>PO[e])}function NO(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function FO(t,e,n,r){const s=Oo(t);let i=NO(Ss(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(ph)))),i}function Ac(t){return t.replace(/left|right|bottom|top/g,e=>OO[e])}function jO(t){return{top:0,right:0,bottom:0,left:0,...t}}function F1(t){return typeof t!="number"?jO(t):{top:t,right:t,bottom:t,left:t}}function Ic(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function jb(t,e,n){let{reference:r,floating:s}=t;const i=bs(e),o=em(e),a=Zp(o),l=Ss(e),c=i==="y",u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let h;switch(l){case"top":h={x:u,y:r.y-s.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-s.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Oo(e)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const UO=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:d}=jb(c,r,l),f=r,h={},m=0;for(let y=0;y<a.length;y++){const{name:S,fn:_}=a[y],{x,y:w,data:p,reset:b}=await _({x:u,y:d,initialPlacement:r,placement:f,strategy:s,middlewareData:h,rects:c,platform:o,elements:{reference:t,floating:e}});u=x??u,d=w??d,h={...h,[S]:{...h[S],...p}},b&&m<=50&&(m++,typeof b=="object"&&(b.placement&&(f=b.placement),b.rects&&(c=b.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):b.rects),{x:u,y:d}=jb(c,f,l)),y=-1)}return{x:u,y:d,placement:f,strategy:s,middlewareData:h}};async function Pa(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Es(e,t),m=F1(h),S=a[f?d==="floating"?"reference":"floating":d],_=Ic(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(S)))==null||n?S:S.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=d==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),p=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},b=Ic(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:w,strategy:l}):x);return{top:(_.top-b.top+m.top)/p.y,bottom:(b.bottom-_.bottom+m.bottom)/p.y,left:(_.left-b.left+m.left)/p.x,right:(b.right-_.right+m.right)/p.x}}const BO=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Es(t,e)||{};if(c==null)return{};const d=F1(u),f={x:n,y:r},h=em(s),m=Zp(h),y=await o.getDimensions(c),S=h==="y",_=S?"top":"left",x=S?"bottom":"right",w=S?"clientHeight":"clientWidth",p=i.reference[m]+i.reference[h]-f[h]-i.floating[m],b=f[h]-i.reference[h],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let R=A?A[w]:0;(!R||!await(o.isElement==null?void 0:o.isElement(A)))&&(R=a.floating[w]||i.floating[m]);const I=p/2-b/2,T=R/2-y[m]/2-1,D=si(d[_],T),U=si(d[x],T),J=D,H=R-y[m]-U,j=R/2-y[m]/2+I,se=hh(J,j,H),$=!l.arrow&&Oo(s)!=null&&j!==se&&i.reference[m]/2-(j<J?D:U)-y[m]/2<0,W=$?j<J?j-J:j-H:0;return{[h]:f[h]+W,data:{[h]:se,centerOffset:j-se-W,...$&&{alignmentOffset:W}},reset:$}}}),qO=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:y=!0,...S}=Es(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=Ss(s),x=bs(a),w=Ss(a)===a,p=await(l.isRTL==null?void 0:l.isRTL(c.floating)),b=f||(w||!y?[Ac(a)]:MO(a)),A=m!=="none";!f&&A&&b.push(...FO(a,y,m,p));const R=[a,...b],I=await Pa(e,S),T=[];let D=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&T.push(I[_]),d){const se=LO(s,o,p);T.push(I[se[0]],I[se[1]])}if(D=[...D,{placement:s,overflows:T}],!T.every(se=>se<=0)){var U,J;const se=(((U=i.flip)==null?void 0:U.index)||0)+1,$=R[se];if($){var H;const B=d==="alignment"?x!==bs($):!1,oe=((H=D[0])==null?void 0:H.overflows[0])>0;if(!B||oe)return{data:{index:se,overflows:D},reset:{placement:$}}}let W=(J=D.filter(B=>B.overflows[0]<=0).sort((B,oe)=>B.overflows[1]-oe.overflows[1])[0])==null?void 0:J.placement;if(!W)switch(h){case"bestFit":{var j;const B=(j=D.filter(oe=>{if(A){const q=bs(oe.placement);return q===x||q==="y"}return!0}).map(oe=>[oe.placement,oe.overflows.filter(q=>q>0).reduce((q,le)=>q+le,0)]).sort((oe,q)=>oe[1]-q[1])[0])==null?void 0:j[0];B&&(W=B);break}case"initialPlacement":W=a;break}if(s!==W)return{reset:{placement:W}}}return{}}}};function Ub(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Bb(t){return DO.some(e=>t[e]>=0)}const zO=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Es(t,e);switch(r){case"referenceHidden":{const i=await Pa(e,{...s,elementContext:"reference"}),o=Ub(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Bb(o)}}}case"escaped":{const i=await Pa(e,{...s,altBoundary:!0}),o=Ub(i,n.floating);return{data:{escapedOffsets:o,escaped:Bb(o)}}}default:return{}}}}};async function VO(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ss(n),a=Oo(n),l=bs(n)==="y",c=["left","top"].includes(o)?-1:1,u=i&&l?-1:1,d=Es(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const HO=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await VO(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},KO=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:S=>{let{x:_,y:x}=S;return{x:_,y:x}}},...l}=Es(t,e),c={x:n,y:r},u=await Pa(e,l),d=bs(Ss(s)),f=Qp(d);let h=c[f],m=c[d];if(i){const S=f==="y"?"top":"left",_=f==="y"?"bottom":"right",x=h+u[S],w=h-u[_];h=hh(x,h,w)}if(o){const S=d==="y"?"top":"left",_=d==="y"?"bottom":"right",x=m+u[S],w=m-u[_];m=hh(x,m,w)}const y=a.fn({...e,[f]:h,[d]:m});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[f]:i,[d]:o}}}}}},WO=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Es(t,e),u={x:n,y:r},d=bs(s),f=Qp(d);let h=u[f],m=u[d];const y=Es(a,e),S=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const w=f==="y"?"height":"width",p=i.reference[f]-i.floating[w]+S.mainAxis,b=i.reference[f]+i.reference[w]-S.mainAxis;h<p?h=p:h>b&&(h=b)}if(c){var _,x;const w=f==="y"?"width":"height",p=["top","left"].includes(Ss(s)),b=i.reference[d]-i.floating[w]+(p&&((_=o.offset)==null?void 0:_[d])||0)+(p?0:S.crossAxis),A=i.reference[d]+i.reference[w]+(p?0:((x=o.offset)==null?void 0:x[d])||0)-(p?S.crossAxis:0);m<b?m=b:m>A&&(m=A)}return{[f]:h,[d]:m}}}},GO=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Es(t,e),u=await Pa(e,c),d=Ss(s),f=Oo(s),h=bs(s)==="y",{width:m,height:y}=i.floating;let S,_;d==="top"||d==="bottom"?(S=d,_=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=d,S=f==="end"?"top":"bottom");const x=y-u.top-u.bottom,w=m-u.left-u.right,p=si(y-u[S],x),b=si(m-u[_],w),A=!e.middlewareData.shift;let R=p,I=b;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(I=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(R=x),A&&!f){const D=zn(u.left,0),U=zn(u.right,0),J=zn(u.top,0),H=zn(u.bottom,0);h?I=m-2*(D!==0||U!==0?D+U:zn(u.left,u.right)):R=y-2*(J!==0||H!==0?J+H:zn(u.top,u.bottom))}await l({...e,availableWidth:I,availableHeight:R});const T=await o.getDimensions(a.floating);return m!==T.width||y!==T.height?{reset:{rects:!0}}:{}}}};function gu(){return typeof window<"u"}function ji(t){return tm(t)?(t.nodeName||"").toLowerCase():"#document"}function Jn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Zr(t){var e;return(e=(tm(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function tm(t){return gu()?t instanceof Node||t instanceof Jn(t).Node:!1}function Dr(t){return gu()?t instanceof Element||t instanceof Jn(t).Element:!1}function Jr(t){return gu()?t instanceof HTMLElement||t instanceof Jn(t).HTMLElement:!1}function qb(t){return!gu()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Jn(t).ShadowRoot}function tl(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Or(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function JO(t){return["table","td","th"].includes(ji(t))}function yu(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function nm(t){const e=rm(),n=Dr(t)?Or(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function XO(t){let e=ii(t);for(;Jr(e)&&!xo(e);){if(nm(e))return e;if(yu(e))return null;e=ii(e)}return null}function rm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function xo(t){return["html","body","#document"].includes(ji(t))}function Or(t){return Jn(t).getComputedStyle(t)}function bu(t){return Dr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ii(t){if(ji(t)==="html")return t;const e=t.assignedSlot||t.parentNode||qb(t)&&t.host||Zr(t);return qb(e)?e.host:e}function j1(t){const e=ii(t);return xo(e)?t.ownerDocument?t.ownerDocument.body:t.body:Jr(e)&&tl(e)?e:j1(e)}function La(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=j1(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Jn(s);if(i){const a=mh(o);return e.concat(o,o.visualViewport||[],tl(s)?s:[],a&&n?La(a):[])}return e.concat(s,La(s,[],n))}function mh(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function U1(t){const e=Or(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Jr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Sc(n)!==i||Sc(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function sm(t){return Dr(t)?t:t.contextElement}function mo(t){const e=sm(t);if(!Jr(e))return Kr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=U1(e);let o=(i?Sc(n.width):n.width)/r,a=(i?Sc(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const YO=Kr(0);function B1(t){const e=Jn(t);return!rm()||!e.visualViewport?YO:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function QO(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Jn(t)?!1:e}function Mi(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=sm(t);let o=Kr(1);e&&(r?Dr(r)&&(o=mo(r)):o=mo(t));const a=QO(i,n,r)?B1(i):Kr(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(i){const f=Jn(i),h=r&&Dr(r)?Jn(r):r;let m=f,y=mh(m);for(;y&&r&&h!==m;){const S=mo(y),_=y.getBoundingClientRect(),x=Or(y),w=_.left+(y.clientLeft+parseFloat(x.paddingLeft))*S.x,p=_.top+(y.clientTop+parseFloat(x.paddingTop))*S.y;l*=S.x,c*=S.y,u*=S.x,d*=S.y,l+=w,c+=p,m=Jn(y),y=mh(m)}}return Ic({width:u,height:d,x:l,y:c})}function im(t,e){const n=bu(t).scrollLeft;return e?e.left+n:Mi(Zr(t)).left+n}function q1(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:im(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function ZO(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Zr(r),a=e?yu(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Kr(1);const u=Kr(0),d=Jr(r);if((d||!d&&!i)&&((ji(r)!=="body"||tl(o))&&(l=bu(r)),Jr(r))){const h=Mi(r);c=mo(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}const f=o&&!d&&!i?q1(o,l,!0):Kr(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function eP(t){return Array.from(t.getClientRects())}function tP(t){const e=Zr(t),n=bu(t),r=t.ownerDocument.body,s=zn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=zn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+im(t);const a=-n.scrollTop;return Or(r).direction==="rtl"&&(o+=zn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function nP(t,e){const n=Jn(t),r=Zr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=rm();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function rP(t,e){const n=Mi(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Jr(t)?mo(t):Kr(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function zb(t,e,n){let r;if(e==="viewport")r=nP(t,n);else if(e==="document")r=tP(Zr(t));else if(Dr(e))r=rP(e,n);else{const s=B1(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Ic(r)}function z1(t,e){const n=ii(t);return n===e||!Dr(n)||xo(n)?!1:Or(n).position==="fixed"||z1(n,e)}function sP(t,e){const n=e.get(t);if(n)return n;let r=La(t,[],!1).filter(a=>Dr(a)&&ji(a)!=="body"),s=null;const i=Or(t).position==="fixed";let o=i?ii(t):t;for(;Dr(o)&&!xo(o);){const a=Or(o),l=nm(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||tl(o)&&!l&&z1(t,o))?r=r.filter(u=>u!==o):s=a,o=ii(o)}return e.set(t,r),r}function iP(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?yu(e)?[]:sP(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=zb(e,u,s);return c.top=zn(d.top,c.top),c.right=si(d.right,c.right),c.bottom=si(d.bottom,c.bottom),c.left=zn(d.left,c.left),c},zb(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function oP(t){const{width:e,height:n}=U1(t);return{width:e,height:n}}function aP(t,e,n){const r=Jr(e),s=Zr(e),i=n==="fixed",o=Mi(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Kr(0);function c(){l.x=im(s)}if(r||!r&&!i)if((ji(e)!=="body"||tl(s))&&(a=bu(e)),r){const h=Mi(e,!0,i,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else s&&c();i&&!r&&s&&c();const u=s&&!r&&!i?q1(s,a):Kr(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function sf(t){return Or(t).position==="static"}function Vb(t,e){if(!Jr(t)||Or(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Zr(t)===n&&(n=n.ownerDocument.body),n}function V1(t,e){const n=Jn(t);if(yu(t))return n;if(!Jr(t)){let s=ii(t);for(;s&&!xo(s);){if(Dr(s)&&!sf(s))return s;s=ii(s)}return n}let r=Vb(t,e);for(;r&&JO(r)&&sf(r);)r=Vb(r,e);return r&&xo(r)&&sf(r)&&!nm(r)?n:r||XO(t)||n}const lP=async function(t){const e=this.getOffsetParent||V1,n=this.getDimensions,r=await n(t.floating);return{reference:aP(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function cP(t){return Or(t).direction==="rtl"}const uP={convertOffsetParentRelativeRectToViewportRelativeRect:ZO,getDocumentElement:Zr,getClippingRect:iP,getOffsetParent:V1,getElementRects:lP,getClientRects:eP,getDimensions:oP,getScale:mo,isElement:Dr,isRTL:cP};function H1(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function dP(t,e){let n=null,r;const s=Zr(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(a||e(),!f||!h)return;const m=Cl(d),y=Cl(s.clientWidth-(u+f)),S=Cl(s.clientHeight-(d+h)),_=Cl(u),w={rootMargin:-m+"px "+-y+"px "+-S+"px "+-_+"px",threshold:zn(0,si(1,l))||1};let p=!0;function b(A){const R=A[0].intersectionRatio;if(R!==l){if(!p)return o();R?o(!1,R):r=setTimeout(()=>{o(!1,1e-7)},1e3)}R===1&&!H1(c,t.getBoundingClientRect())&&o(),p=!1}try{n=new IntersectionObserver(b,{...w,root:s.ownerDocument})}catch{n=new IntersectionObserver(b,w)}n.observe(t)}return o(!0),i}function fP(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=sm(t),u=s||i?[...c?La(c):[],...La(e)]:[];u.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const d=c&&a?dP(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(_=>{let[x]=_;x&&x.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let m,y=l?Mi(t):null;l&&S();function S(){const _=Mi(t);y&&!H1(y,_)&&n(),y=_,m=requestAnimationFrame(S)}return n(),()=>{var _;u.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),d==null||d(),(_=h)==null||_.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const hP=HO,pP=KO,Hb=qO,mP=GO,gP=zO,yP=BO,bP=WO,vP=(t,e,n)=>{const r=new Map,s={platform:uP,...n},i={...s.platform,_c:r};return UO(t,e,{...s,platform:i})};function wP(t){return t!=null&&typeof t=="object"&&"$el"in t}function gh(t){if(wP(t)){const e=t.$el;return tm(e)&&ji(e)==="#comment"?null:e}return t}function Qi(t){return typeof t=="function"?t():E(t)}function _P(t){return{name:"arrow",options:t,fn(e){const n=gh(Qi(t.element));return n==null?{}:yP({element:n,padding:t.padding}).fn(e)}}}function K1(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Kb(t,e){const n=K1(t);return Math.round(e*n)/n}function xP(t,e,n){n===void 0&&(n={});const r=n.whileElementsMounted,s=re(()=>{var R;return(R=Qi(n.open))!=null?R:!0}),i=re(()=>Qi(n.middleware)),o=re(()=>{var R;return(R=Qi(n.placement))!=null?R:"bottom"}),a=re(()=>{var R;return(R=Qi(n.strategy))!=null?R:"absolute"}),l=re(()=>{var R;return(R=Qi(n.transform))!=null?R:!0}),c=re(()=>gh(t.value)),u=re(()=>gh(e.value)),d=Ee(0),f=Ee(0),h=Ee(a.value),m=Ee(o.value),y=pr({}),S=Ee(!1),_=re(()=>{const R={position:h.value,left:"0",top:"0"};if(!u.value)return R;const I=Kb(u.value,d.value),T=Kb(u.value,f.value);return l.value?{...R,transform:"translate("+I+"px, "+T+"px)",...K1(u.value)>=1.5&&{willChange:"transform"}}:{position:h.value,left:I+"px",top:T+"px"}});let x;function w(){if(c.value==null||u.value==null)return;const R=s.value;vP(c.value,u.value,{middleware:i.value,placement:o.value,strategy:a.value}).then(I=>{d.value=I.x,f.value=I.y,h.value=I.strategy,m.value=I.placement,y.value=I.middlewareData,S.value=R!==!1})}function p(){typeof x=="function"&&(x(),x=void 0)}function b(){if(p(),r===void 0){w();return}if(c.value!=null&&u.value!=null){x=r(c.value,u.value,w);return}}function A(){s.value||(S.value=!1)}return ut([i,o,a,s],w,{flush:"sync"}),ut([c,u],b,{flush:"sync"}),ut(s,A,{flush:"sync"}),Wa()&&nu(p),{x:Ki(d),y:Ki(f),strategy:Ki(h),placement:Ki(m),middlewareData:Ki(y),isPositioned:Ki(S),floatingStyles:_,update:w}}function om(t){return t?t.flatMap(e=>e.type===Je?om(e.children):[e]):[]}const yh=fe({name:"PrimitiveSlot",inheritAttrs:!1,setup(t,{attrs:e,slots:n}){return()=>{var l,c;if(!n.default)return null;const r=om(n.default()),s=r.findIndex(u=>u.type!==$r);if(s===-1)return r;const i=r[s];(l=i.props)==null||delete l.ref;const o=i.props?Be(e,i.props):e;e.class&&((c=i.props)!=null&&c.class)&&delete i.props.class;const a=Pi(i,o);for(const u in o)u.startsWith("on")&&(a.props||(a.props={}),a.props[u]=o[u]);return r.length===1?a:(r[s]=a,r)}}}),EP=["area","img","input"],St=fe({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(t,{attrs:e,slots:n}){const r=t.asChild?"template":t.as;return typeof r=="string"&&EP.includes(r)?()=>Gn(r,e):r!=="template"?()=>Gn(t.as,e,{default:n.default}):()=>Gn(yh,e,{default:n.default})}}),vu=fe({__name:"VisuallyHidden",props:{feature:{default:"focusable"},asChild:{type:Boolean},as:{default:"span"}},setup(t){return(e,n)=>(N(),ae(E(St),{as:e.as,"as-child":e.asChild,"aria-hidden":e.feature==="focusable"?"true":void 0,"data-hidden":e.feature==="fully-hidden"?"":void 0,tabindex:e.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal"}},{default:K(()=>[Ae(e.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}});function SP(t,e){var n;const r=pr();return Lt(()=>{r.value=t()},{...e,flush:(n=void 0)!=null?n:"sync"}),Cs(r)}function Po(t){return Wa()?(nu(t),!0):!1}function AP(t){let e=!1,n;const r=Ka(!0);return(...s)=>(e||(n=r.run(()=>t(...s)),e=!0),n)}function W1(t){let e=0,n,r;const s=()=>{e-=1,r&&e<=0&&(r.stop(),n=void 0,r=void 0)};return(...i)=>(e+=1,r||(r=Ka(!0),n=r.run(()=>t(...i))),Po(s),n)}const es=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const IP=t=>typeof t<"u",CP=Object.prototype.toString,RP=t=>CP.call(t)==="[object Object]",TP=()=>{},Wb=kP();function kP(){var t,e;return es&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function $P(t){return tr()}function of(t){return Array.isArray(t)?t:[t]}function DP(t,e=1e4){return Ap((n,r)=>{let s=dr(t),i;const o=()=>setTimeout(()=>{s=dr(t),r()},dr(e));return Po(()=>{clearTimeout(i)}),{get(){return n(),s},set(a){s=a,r(),clearTimeout(i),i=o()}}})}const OP=dr;function PP(t,e){$P()&&kp(t,e)}function LP(t,e,n={}){const{immediate:r=!0,immediateCallback:s=!1}=n,i=pr(!1);let o=null;function a(){o&&(clearTimeout(o),o=null)}function l(){i.value=!1,a()}function c(...u){s&&t(),a(),i.value=!0,o=setTimeout(()=>{i.value=!1,o=null,t(...u)},dr(e))}return r&&(i.value=!0,es&&c()),Po(l),{isPending:Cs(i),start:c,stop:l}}function MP(t=1e3,e={}){const{controls:n=!1,callback:r}=e,s=LP(r??TP,t,e),i=re(()=>!s.isPending.value);return n?{ready:i,...s}:i}function NP(t,e,n){return ut(t,e,{...n,immediate:!0})}const nl=es?window:void 0;function gr(t){var e;const n=dr(t);return(e=n==null?void 0:n.$el)!=null?e:n}function Cc(...t){const e=[],n=()=>{e.forEach(a=>a()),e.length=0},r=(a,l,c,u)=>(a.addEventListener(l,c,u),()=>a.removeEventListener(l,c,u)),s=re(()=>{const a=of(dr(t[0])).filter(l=>l!=null);return a.every(l=>typeof l!="string")?a:void 0}),i=NP(()=>{var a,l;return[(l=(a=s.value)==null?void 0:a.map(c=>gr(c)))!=null?l:[nl].filter(c=>c!=null),of(dr(s.value?t[1]:t[0])),of(E(s.value?t[2]:t[1])),dr(s.value?t[3]:t[2])]},([a,l,c,u])=>{if(n(),!(a!=null&&a.length)||!(l!=null&&l.length)||!(c!=null&&c.length))return;const d=RP(u)?{...u}:u;e.push(...a.flatMap(f=>l.flatMap(h=>c.map(m=>r(f,h,m,d)))))},{flush:"post"}),o=()=>{i(),n()};return Po(n),o}function G1(){const t=pr(!1),e=tr();return e&&sn(()=>{t.value=!0},e),t}function FP(t){const e=G1();return re(()=>(e.value,!!t()))}function jP(t){return typeof t=="function"?t:typeof t=="string"?e=>e.key===t:Array.isArray(t)?e=>t.includes(e.key):()=>!0}function am(...t){let e,n,r={};t.length===3?(e=t[0],n=t[1],r=t[2]):t.length===2?typeof t[1]=="object"?(e=!0,n=t[0],r=t[1]):(e=t[0],n=t[1]):(e=!0,n=t[0]);const{target:s=nl,eventName:i="keydown",passive:o=!1,dedupe:a=!1}=r,l=jP(e);return Cc(s,i,u=>{u.repeat&&dr(a)||l(u)&&n(u)},o)}function J1(t,e={}){const{immediate:n=!0,fpsLimit:r=void 0,window:s=nl,once:i=!1}=e,o=pr(!1),a=re(()=>r?1e3/dr(r):null);let l=0,c=null;function u(h){if(!o.value||!s)return;l||(l=h);const m=h-l;if(a.value&&m<a.value){c=s.requestAnimationFrame(u);return}if(l=h,t({delta:m,timestamp:h}),i){o.value=!1,c=null;return}c=s.requestAnimationFrame(u)}function d(){!o.value&&s&&(o.value=!0,l=0,c=s.requestAnimationFrame(u))}function f(){o.value=!1,c!=null&&s&&(s.cancelAnimationFrame(c),c=null)}return n&&d(),Po(f),{isActive:Cs(o),pause:f,resume:d}}function UP(t){return JSON.parse(JSON.stringify(t))}function BP(t,e,n={}){const{window:r=nl,...s}=n;let i;const o=FP(()=>r&&"ResizeObserver"in r),a=()=>{i&&(i.disconnect(),i=void 0)},l=re(()=>{const d=dr(t);return Array.isArray(d)?d.map(f=>gr(f)):[gr(d)]}),c=ut(l,d=>{if(a(),o.value&&r){i=new ResizeObserver(e);for(const f of d)f&&i.observe(f,s)}},{immediate:!0,flush:"post"}),u=()=>{a(),c()};return Po(u),{isSupported:o,stop:u}}function oi(t,e,n,r={}){var s,i,o;const{clone:a=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:d,shouldEmit:f}=r,h=tr(),m=n||(h==null?void 0:h.emit)||((s=h==null?void 0:h.$emit)==null?void 0:s.bind(h))||((o=(i=h==null?void 0:h.proxy)==null?void 0:i.$emit)==null?void 0:o.bind(h==null?void 0:h.proxy));let y=c;e||(e="modelValue"),y=y||`update:${e.toString()}`;const S=w=>a?typeof a=="function"?a(w):UP(w):w,_=()=>IP(t[e])?S(t[e]):d,x=w=>{f?f(w)&&m(y,w):m(y,w)};if(l){const w=_(),p=Ee(w);let b=!1;return ut(()=>t[e],A=>{b||(b=!0,p.value=S(A),Ft(()=>b=!1))}),ut(p,A=>{!b&&(A!==t[e]||u)&&x(A)},{deep:u}),p}else return re({get(){return _()},set(w){x(w)}})}function xn(t,e){const n=typeof t=="string"&&!e?`${t}Context`:e,r=Symbol(n);return[o=>{const a=qt(r,o);if(a||a===null)return a;throw new Error(`Injection \`${r.toString()}\` not found. Component must be used within ${Array.isArray(t)?`one of the following components: ${t.join(", ")}`:`\`${t}\``}`)},o=>(fr(r,o),o)]}function Gb(t){return typeof t=="string"?`'${t}'`:new qP().serialize(t)}const qP=function(){var e;class t{constructor(){eg(this,e,new Map)}compare(r,s){const i=typeof r,o=typeof s;return i==="string"&&o==="string"?r.localeCompare(s):i==="number"&&o==="number"?r-s:String.prototype.localeCompare.call(this.serialize(r,!0),this.serialize(s,!0))}serialize(r,s){if(r===null)return"null";switch(typeof r){case"string":return s?r:`'${r}'`;case"bigint":return`${r}n`;case"object":return this.$object(r);case"function":return this.$function(r)}return String(r)}serializeObject(r){const s=Object.prototype.toString.call(r);if(s!=="[object Object]")return this.serializeBuiltInType(s.length<10?`unknown:${s}`:s.slice(8,-1),r);const i=r.constructor,o=i===Object||i===void 0?"":i.name;if(o!==""&&globalThis[o]===i)return this.serializeBuiltInType(o,r);if(typeof r.toJSON=="function"){const a=r.toJSON();return o+(a!==null&&typeof a=="object"?this.$object(a):`(${this.serialize(a)})`)}return this.serializeObjectEntries(o,Object.entries(r))}serializeBuiltInType(r,s){const i=this["$"+r];if(i)return i.call(this,s);if(typeof(s==null?void 0:s.entries)=="function")return this.serializeObjectEntries(r,s.entries());throw new Error(`Cannot serialize ${r}`)}serializeObjectEntries(r,s){const i=Array.from(s).sort((a,l)=>this.compare(a[0],l[0]));let o=`${r}{`;for(let a=0;a<i.length;a++){const[l,c]=i[a];o+=`${this.serialize(l,!0)}:${this.serialize(c)}`,a<i.length-1&&(o+=",")}return o+"}"}$object(r){let s=No(this,e).get(r);return s===void 0&&(No(this,e).set(r,`#${No(this,e).size}`),s=this.serializeObject(r),No(this,e).set(r,s)),s}$function(r){const s=Function.prototype.toString.call(r);return s.slice(-15)==="[native code] }"?`${r.name||""}()[native]`:`${r.name}(${r.length})${s.replace(/\s*\n\s*/g,"")}`}$Array(r){let s="[";for(let i=0;i<r.length;i++)s+=this.serialize(r[i]),i<r.length-1&&(s+=",");return s+"]"}$Date(r){try{return`Date(${r.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(r){return`ArrayBuffer[${new Uint8Array(r).join(",")}]`}$Set(r){return`Set${this.$Array(Array.from(r).sort((s,i)=>this.compare(s,i)))}`}$Map(r){return this.serializeObjectEntries("Map",r.entries())}}e=new WeakMap;for(const n of["Error","RegExp","URL"])t.prototype["$"+n]=function(r){return`${n}(${r})`};for(const n of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])t.prototype["$"+n]=function(r){return`${n}[${r.join(",")}]`};for(const n of["BigInt64Array","BigUint64Array"])t.prototype["$"+n]=function(r){return`${n}[${r.join("n,")}${r.length>0?"n":""}]`};return t}();function zP(t,e){return t===e||Gb(t)===Gb(e)}function Jb(t){return t==null}const[wu,y5]=xn("ConfigProvider");function _u(t){const e=wu({dir:Ee("ltr")});return re(()=>{var n;return(t==null?void 0:t.value)||((n=e.dir)==null?void 0:n.value)||"ltr"})}function tt(){const t=tr(),e=Ee(),n=re(()=>{var o,a;return["#text","#comment"].includes((o=e.value)==null?void 0:o.$el.nodeName)?(a=e.value)==null?void 0:a.$el.nextElementSibling:gr(e)}),r=Object.assign({},t.exposed),s={};for(const o in t.props)Object.defineProperty(s,o,{enumerable:!0,configurable:!0,get:()=>t.props[o]});if(Object.keys(r).length>0)for(const o in r)Object.defineProperty(s,o,{enumerable:!0,configurable:!0,get:()=>r[o]});Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>t.vnode.el}),t.exposed=s;function i(o){e.value=o,o&&(Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>o instanceof Element?o:o.$el}),t.exposed=s)}return{forwardRef:i,currentRef:e,currentElement:n}}const VP=["INPUT","TEXTAREA"];function HP(t,e,n,r={}){if(!e||r.enableIgnoredElement&&VP.includes(e.nodeName))return null;const{arrowKeyOptions:s="both",attributeName:i="[data-reka-collection-item]",itemsArray:o=[],loop:a=!0,dir:l="ltr",preventScroll:c=!0,focus:u=!1}=r,[d,f,h,m,y,S]=[t.key==="ArrowRight",t.key==="ArrowLeft",t.key==="ArrowUp",t.key==="ArrowDown",t.key==="Home",t.key==="End"],_=h||m,x=d||f;if(!y&&!S&&(!_&&!x||s==="vertical"&&x||s==="horizontal"&&_))return null;const w=n?Array.from(n.querySelectorAll(i)):o;if(!w.length)return null;c&&t.preventDefault();let p=null;return x||_?p=X1(w,e,{goForward:_?m:l==="ltr"?d:f,loop:a}):y?p=w.at(0)||null:S&&(p=w.at(-1)||null),u&&(p==null||p.focus()),p}function X1(t,e,n,r=t.length){if(--r===0)return null;const s=t.indexOf(e),i=n.goForward?s+1:s-1;if(!n.loop&&(i<0||i>=t.length))return null;const o=(i+t.length)%t.length,a=t[o];return a?a.hasAttribute("disabled")&&a.getAttribute("disabled")!=="false"?X1(t,a,n,r):a:null}let KP=0;function Eo(t,e="reka"){const n=wu({useId:void 0});return zy?`${e}-${zy()}`:n.useId?`${e}-${n.useId()}`:`${e}-${++KP}`}function WP(t,e){const n=Ee(t);function r(i){return e[n.value][i]??n.value}return{state:n,dispatch:i=>{n.value=r(i)}}}function GP(t,e){var S;const n=Ee({}),r=Ee("none"),s=Ee(t),i=t.value?"mounted":"unmounted";let o;const a=((S=e.value)==null?void 0:S.ownerDocument.defaultView)??nl,{state:l,dispatch:c}=WP(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),u=_=>{var x;if(es){const w=new CustomEvent(_,{bubbles:!1,cancelable:!1});(x=e.value)==null||x.dispatchEvent(w)}};ut(t,async(_,x)=>{var p;const w=x!==_;if(await Ft(),w){const b=r.value,A=Rl(e.value);_?(c("MOUNT"),u("enter"),A==="none"&&u("after-enter")):A==="none"||A==="undefined"||((p=n.value)==null?void 0:p.display)==="none"?(c("UNMOUNT"),u("leave"),u("after-leave")):x&&b!==A?(c("ANIMATION_OUT"),u("leave")):(c("UNMOUNT"),u("after-leave"))}},{immediate:!0});const d=_=>{const x=Rl(e.value),w=x.includes(_.animationName),p=l.value==="mounted"?"enter":"leave";if(_.target===e.value&&w&&(u(`after-${p}`),c("ANIMATION_END"),!s.value)){const b=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",o=a==null?void 0:a.setTimeout(()=>{var A;((A=e.value)==null?void 0:A.style.animationFillMode)==="forwards"&&(e.value.style.animationFillMode=b)})}_.target===e.value&&x==="none"&&c("ANIMATION_END")},f=_=>{_.target===e.value&&(r.value=Rl(e.value))},h=ut(e,(_,x)=>{_?(n.value=getComputedStyle(_),_.addEventListener("animationstart",f),_.addEventListener("animationcancel",d),_.addEventListener("animationend",d)):(c("ANIMATION_END"),o!==void 0&&(a==null||a.clearTimeout(o)),x==null||x.removeEventListener("animationstart",f),x==null||x.removeEventListener("animationcancel",d),x==null||x.removeEventListener("animationend",d))},{immediate:!0}),m=ut(l,()=>{const _=Rl(e.value);r.value=l.value==="mounted"?_:"none"});return vr(()=>{h(),m()}),{isPresent:re(()=>["mounted","unmountSuspended"].includes(l.value))}}function Rl(t){return t&&getComputedStyle(t).animationName||"none"}const rl=fe({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(t,{slots:e,expose:n}){var c;const{present:r,forceMount:s}=er(t),i=Ee(),{isPresent:o}=GP(r,i);n({present:o});let a=e.default({present:o.value});a=om(a||[]);const l=tr();if(a&&(a==null?void 0:a.length)>1){const u=(c=l==null?void 0:l.parent)!=null&&c.type.name?`<${l.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${u}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(d=>`  - ${d}`).join(`
`)].join(`
`))}return()=>s.value||r.value||o.value?Gn(e.default({present:o.value})[0],{ref:u=>{const d=gr(u);return typeof(d==null?void 0:d.hasAttribute)>"u"||(d!=null&&d.hasAttribute("data-reka-popper-content-wrapper")?i.value=d.firstElementChild:i.value=d),d}}):null}}),[fi,JP]=xn("DialogRoot"),XP=fe({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:!1},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,s=oi(n,"open",e,{defaultValue:n.defaultOpen,passive:n.open===void 0}),i=Ee(),o=Ee(),{modal:a}=er(n);return JP({open:s,modal:a,openModal:()=>{s.value=!0},onOpenChange:l=>{s.value=l},onOpenToggle:()=>{s.value=!s.value},contentId:"",titleId:"",descriptionId:"",triggerElement:i,contentElement:o}),(l,c)=>Ae(l.$slots,"default",{open:E(s)})}});function sl(t){const e=tr(),n=e==null?void 0:e.type.emits,r={};return n!=null&&n.length||console.warn(`No emitted event found. Please check component: ${e==null?void 0:e.type.__name}`),n==null||n.forEach(s=>{r[Hl(Un(s))]=(...i)=>t(s,...i)}),r}function lm(t,e,n){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),r.dispatchEvent(s)}const YP="dismissableLayer.pointerDownOutside",QP="dismissableLayer.focusOutside";function Y1(t,e){const n=e.closest("[data-dismissable-layer]"),r=t.dataset.dismissableLayer===""?t:t.querySelector("[data-dismissable-layer]"),s=Array.from(t.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(n&&(r===n||s.indexOf(r)<s.indexOf(n)))}function ZP(t,e){var i;const n=((i=e==null?void 0:e.value)==null?void 0:i.ownerDocument)??(globalThis==null?void 0:globalThis.document),r=Ee(!1),s=Ee(()=>{});return Lt(o=>{if(!es)return;const a=async c=>{const u=c.target;if(!(!(e!=null&&e.value)||!u)){if(Y1(e.value,u)){r.value=!1;return}if(c.target&&!r.value){let d=function(){lm(YP,t,f)};const f={originalEvent:c};c.pointerType==="touch"?(n.removeEventListener("click",s.value),s.value=d,n.addEventListener("click",s.value,{once:!0})):d()}else n.removeEventListener("click",s.value);r.value=!1}},l=window.setTimeout(()=>{n.addEventListener("pointerdown",a)},0);o(()=>{window.clearTimeout(l),n.removeEventListener("pointerdown",a),n.removeEventListener("click",s.value)})}),{onPointerDownCapture:()=>r.value=!0}}function e2(t,e){var s;const n=((s=e==null?void 0:e.value)==null?void 0:s.ownerDocument)??(globalThis==null?void 0:globalThis.document),r=Ee(!1);return Lt(i=>{if(!es)return;const o=async a=>{if(!(e!=null&&e.value))return;await Ft(),await Ft();const l=a.target;!e.value||!l||Y1(e.value,l)||a.target&&!r.value&&lm(QP,t,{originalEvent:a})};n.addEventListener("focusin",o),i(()=>n.removeEventListener("focusin",o))}),{onFocusCapture:()=>r.value=!0,onBlurCapture:()=>r.value=!1}}const _r=kr({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cm=fe({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s,currentElement:i}=tt(),o=re(()=>{var m;return((m=i.value)==null?void 0:m.ownerDocument)??globalThis.document}),a=re(()=>_r.layersRoot),l=re(()=>i.value?Array.from(a.value).indexOf(i.value):-1),c=re(()=>_r.layersWithOutsidePointerEventsDisabled.size>0),u=re(()=>{const m=Array.from(a.value),[y]=[..._r.layersWithOutsidePointerEventsDisabled].slice(-1),S=m.indexOf(y);return l.value>=S}),d=ZP(async m=>{const y=[..._r.branches].some(S=>S==null?void 0:S.contains(m.target));!u.value||y||(r("pointerDownOutside",m),r("interactOutside",m),await Ft(),m.defaultPrevented||r("dismiss"))},i),f=e2(m=>{[..._r.branches].some(S=>S==null?void 0:S.contains(m.target))||(r("focusOutside",m),r("interactOutside",m),m.defaultPrevented||r("dismiss"))},i);am("Escape",m=>{l.value===a.value.size-1&&(r("escapeKeyDown",m),m.defaultPrevented||r("dismiss"))});let h;return Lt(m=>{i.value&&(n.disableOutsidePointerEvents&&(_r.layersWithOutsidePointerEventsDisabled.size===0&&(h=o.value.body.style.pointerEvents,o.value.body.style.pointerEvents="none"),_r.layersWithOutsidePointerEventsDisabled.add(i.value)),a.value.add(i.value),m(()=>{n.disableOutsidePointerEvents&&_r.layersWithOutsidePointerEventsDisabled.size===1&&(o.value.body.style.pointerEvents=h)}))}),Lt(m=>{m(()=>{i.value&&(a.value.delete(i.value),_r.layersWithOutsidePointerEventsDisabled.delete(i.value))})}),(m,y)=>(N(),ae(E(St),{ref:E(s),"as-child":m.asChild,as:m.as,"data-dismissable-layer":"",style:Is({pointerEvents:c.value?u.value?"auto":"none":void 0}),onFocusCapture:E(f).onFocusCapture,onBlurCapture:E(f).onBlurCapture,onPointerdownCapture:E(d).onPointerDownCapture},{default:K(()=>[Ae(m.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}});function nn(){let t=document.activeElement;if(t==null)return null;for(;t!=null&&t.shadowRoot!=null&&t.shadowRoot.activeElement!=null;)t=t.shadowRoot.activeElement;return t}const t2="menu.itemSelect",bh=["Enter"," "],n2=["ArrowDown","PageUp","Home"],Q1=["ArrowUp","PageDown","End"],r2=[...n2,...Q1];[...bh],[...bh];function Z1(t){return t?"open":"closed"}function vh(t){const e=nn();for(const n of t)if(n===e||(n.focus(),nn()!==e))return}function s2(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function i2(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return s2(n,e)}function wh(t){return t.pointerType==="mouse"}const o2=AP(()=>Ee([]));function a2(){const t=o2();return{add(e){const n=t.value[0];e!==n&&(n==null||n.pause()),t.value=Xb(t.value,e),t.value.unshift(e)},remove(e){var n;t.value=Xb(t.value,e),(n=t.value[0])==null||n.resume()}}}function Xb(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function l2(t){return t.filter(e=>e.tagName!=="A")}const af="focusScope.autoFocusOnMount",lf="focusScope.autoFocusOnUnmount",Yb={bubbles:!1,cancelable:!0};function Zl(t,{select:e=!1}={}){const n=nn();for(const r of t)if(Ls(r,{select:e}),nn()!==n)return!0}function c2(t){const e=um(t),n=Qb(e,t),r=Qb(e.reverse(),t);return[n,r]}function um(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Qb(t,e){for(const n of t)if(!u2(n,{upTo:e}))return n}function u2(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function d2(t){return t instanceof HTMLInputElement&&"select"in t}function Ls(t,{select:e=!1}={}){if(t&&t.focus){const n=nn();t.focus({preventScroll:!0}),t!==n&&d2(t)&&e&&t.select()}}const dm=fe({__name:"FocusScope",props:{loop:{type:Boolean,default:!1},trapped:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["mountAutoFocus","unmountAutoFocus"],setup(t,{emit:e}){const n=t,r=e,{currentRef:s,currentElement:i}=tt(),o=Ee(null),a=a2(),l=kr({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});Lt(u=>{if(!es)return;const d=i.value;if(!n.trapped)return;function f(S){if(l.paused||!d)return;const _=S.target;d.contains(_)?o.value=_:Ls(o.value,{select:!0})}function h(S){if(l.paused||!d)return;const _=S.relatedTarget;_!==null&&(d.contains(_)||Ls(o.value,{select:!0}))}function m(S){d.contains(o.value)||Ls(d)}document.addEventListener("focusin",f),document.addEventListener("focusout",h);const y=new MutationObserver(m);d&&y.observe(d,{childList:!0,subtree:!0}),u(()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",h),y.disconnect()})}),Lt(async u=>{const d=i.value;if(await Ft(),!d)return;a.add(l);const f=nn();if(!d.contains(f)){const m=new CustomEvent(af,Yb);d.addEventListener(af,y=>r("mountAutoFocus",y)),d.dispatchEvent(m),m.defaultPrevented||(Zl(l2(um(d)),{select:!0}),nn()===f&&Ls(d))}u(()=>{d.removeEventListener(af,S=>r("mountAutoFocus",S));const m=new CustomEvent(lf,Yb),y=S=>{r("unmountAutoFocus",S)};d.addEventListener(lf,y),d.dispatchEvent(m),setTimeout(()=>{m.defaultPrevented||Ls(f??document.body,{select:!0}),d.removeEventListener(lf,y),a.remove(l)},0)})});function c(u){if(!n.loop&&!n.trapped||l.paused)return;const d=u.key==="Tab"&&!u.altKey&&!u.ctrlKey&&!u.metaKey,f=nn();if(d&&f){const h=u.currentTarget,[m,y]=c2(h);m&&y?!u.shiftKey&&f===y?(u.preventDefault(),n.loop&&Ls(m,{select:!0})):u.shiftKey&&f===m&&(u.preventDefault(),n.loop&&Ls(y,{select:!0})):f===h&&u.preventDefault()}}return(u,d)=>(N(),ae(E(St),{ref_key:"currentRef",ref:s,tabindex:"-1","as-child":u.asChild,as:u.as,onKeydown:c},{default:K(()=>[Ae(u.$slots,"default")]),_:3},8,["as-child","as"]))}}),ex=fe({__name:"DialogContentImpl",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=fi(),{forwardRef:i,currentElement:o}=tt();return s.titleId||(s.titleId=Eo(void 0,"reka-dialog-title")),s.descriptionId||(s.descriptionId=Eo(void 0,"reka-dialog-description")),sn(()=>{s.contentElement=o,nn()!==document.body&&(s.triggerElement.value=nn())}),(a,l)=>(N(),ae(E(dm),{"as-child":"",loop:"",trapped:n.trapFocus,onMountAutoFocus:l[5]||(l[5]=c=>r("openAutoFocus",c)),onUnmountAutoFocus:l[6]||(l[6]=c=>r("closeAutoFocus",c))},{default:K(()=>[z(E(cm),Be({id:E(s).contentId,ref:E(i),as:a.as,"as-child":a.asChild,"disable-outside-pointer-events":a.disableOutsidePointerEvents,role:"dialog","aria-describedby":E(s).descriptionId,"aria-labelledby":E(s).titleId,"data-state":E(Z1)(E(s).open.value)},a.$attrs,{onDismiss:l[0]||(l[0]=c=>E(s).onOpenChange(!1)),onEscapeKeyDown:l[1]||(l[1]=c=>r("escapeKeyDown",c)),onFocusOutside:l[2]||(l[2]=c=>r("focusOutside",c)),onInteractOutside:l[3]||(l[3]=c=>r("interactOutside",c)),onPointerDownOutside:l[4]||(l[4]=c=>r("pointerDownOutside",c))}),{default:K(()=>[Ae(a.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}});var f2=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ji=new WeakMap,Tl=new WeakMap,kl={},cf=0,tx=function(t){return t&&(t.host||tx(t.parentNode))},h2=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=tx(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},p2=function(t,e,n,r){var s=h2(e,Array.isArray(t)?t:[t]);kl[n]||(kl[n]=new WeakMap);var i=kl[n],o=[],a=new Set,l=new Set(s),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};s.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(r),m=h!==null&&h!=="false",y=(Ji.get(f)||0)+1,S=(i.get(f)||0)+1;Ji.set(f,y),i.set(f,S),o.push(f),y===1&&m&&Tl.set(f,!0),S===1&&f.setAttribute(n,"true"),m||f.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",f,_)}})};return u(e),a.clear(),cf++,function(){o.forEach(function(d){var f=Ji.get(d)-1,h=i.get(d)-1;Ji.set(d,f),i.set(d,h),f||(Tl.has(d)||d.removeAttribute(r),Tl.delete(d)),h||d.removeAttribute(n)}),cf--,cf||(Ji=new WeakMap,Ji=new WeakMap,Tl=new WeakMap,kl={})}},m2=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=f2(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),p2(r,s,n,"aria-hidden")):function(){return null}};function fm(t){let e;ut(()=>gr(t),n=>{n?e=m2(n):e&&e()}),vr(()=>{e&&e()})}const g2=fe({__name:"DialogContentModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=fi(),i=sl(r),{forwardRef:o,currentElement:a}=tt();return fm(a),(l,c)=>(N(),ae(ex,Be({...n,...E(i)},{ref:E(o),"trap-focus":E(s).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:c[0]||(c[0]=u=>{var d;u.defaultPrevented||(u.preventDefault(),(d=E(s).triggerElement.value)==null||d.focus())}),onPointerDownOutside:c[1]||(c[1]=u=>{const d=u.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0;(d.button===2||f)&&u.preventDefault()}),onFocusOutside:c[2]||(c[2]=u=>{u.preventDefault()})}),{default:K(()=>[Ae(l.$slots,"default")]),_:3},16,["trap-focus"]))}}),y2=fe({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,s=sl(e);tt();const i=fi(),o=Ee(!1),a=Ee(!1);return(l,c)=>(N(),ae(ex,Be({...n,...E(s)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:c[0]||(c[0]=u=>{var d;u.defaultPrevented||(o.value||(d=E(i).triggerElement.value)==null||d.focus(),u.preventDefault()),o.value=!1,a.value=!1}),onInteractOutside:c[1]||(c[1]=u=>{var h;u.defaultPrevented||(o.value=!0,u.detail.originalEvent.type==="pointerdown"&&(a.value=!0));const d=u.target;((h=E(i).triggerElement.value)==null?void 0:h.contains(d))&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&a.value&&u.preventDefault()})}),{default:K(()=>[Ae(l.$slots,"default")]),_:3},16))}}),b2=fe({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=fi(),i=sl(r),{forwardRef:o}=tt();return(a,l)=>(N(),ae(E(rl),{present:a.forceMount||E(s).open.value},{default:K(()=>[E(s).modal.value?(N(),ae(g2,Be({key:0,ref:E(o)},{...n,...E(i),...a.$attrs}),{default:K(()=>[Ae(a.$slots,"default")]),_:3},16)):(N(),ae(y2,Be({key:1,ref:E(o)},{...n,...E(i),...a.$attrs}),{default:K(()=>[Ae(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),v2=fe({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{default:"p"}},setup(t){const e=t;tt();const n=fi();return(r,s)=>(N(),ae(E(St),Be(e,{id:E(n).descriptionId}),{default:K(()=>[Ae(r.$slots,"default")]),_:3},16,["id"]))}});function uf(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function _h(t,e,n=".",r){if(!uf(e))return _h(t,{},n,r);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(r&&r(s,i,o,n)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:uf(o)&&uf(s[i])?s[i]=_h(o,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=o))}return s}function w2(t){return(...e)=>e.reduce((n,r)=>_h(n,r,"",t),{})}const _2=w2(),x2=W1(()=>{const t=Ee(new Map),e=Ee(),n=re(()=>{for(const o of t.value.values())if(o)return!0;return!1}),r=wu({scrollBody:Ee(!0)});let s=null;const i=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.body.style.removeProperty("--scrollbar-width"),document.body.style.overflow=e.value??"",Wb&&(s==null||s()),e.value=void 0};return ut(n,(o,a)=>{var d;if(!es)return;if(!o){a&&i();return}e.value===void 0&&(e.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,c={padding:l,margin:0},u=(d=r.scrollBody)!=null&&d.value?typeof r.scrollBody.value=="object"?_2({padding:r.scrollBody.value.padding===!0?l:r.scrollBody.value.padding,margin:r.scrollBody.value.margin===!0?l:r.scrollBody.value.margin},c):c:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof u.padding=="number"?`${u.padding}px`:String(u.padding),document.body.style.marginRight=typeof u.margin=="number"?`${u.margin}px`:String(u.margin),document.body.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),Wb&&(s=Cc(document,"touchmove",f=>E2(f),{passive:!1})),Ft(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),t});function hm(t){const e=Math.random().toString(36).substring(2,7),n=x2();n.value.set(e,t??!1);const r=re({get:()=>n.value.get(e)??!1,set:s=>n.value.set(e,s)});return PP(()=>{n.value.delete(e)}),r}function nx(t){const e=window.getComputedStyle(t);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&t.clientWidth<t.scrollWidth||e.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const n=t.parentNode;return!(n instanceof Element)||n.tagName==="BODY"?!1:nx(n)}}function E2(t){const e=t||window.event,n=e.target;return n instanceof Element&&nx(n)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}const S2=fe({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean},as:{}},setup(t){const e=fi();return hm(!0),tt(),(n,r)=>(N(),ae(E(St),{as:n.as,"as-child":n.asChild,"data-state":E(e).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:K(()=>[Ae(n.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),A2=fe({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(t){const e=fi(),{forwardRef:n}=tt();return(r,s)=>{var i;return(i=E(e))!=null&&i.modal.value?(N(),ae(E(rl),{key:0,present:r.forceMount||E(e).open.value},{default:K(()=>[z(S2,Be(r.$attrs,{ref:E(n),as:r.as,"as-child":r.asChild}),{default:K(()=>[Ae(r.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):We("",!0)}}}),pm=fe({__name:"Teleport",props:{to:{default:"body"},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(t){const e=G1();return(n,r)=>E(e)||n.forceMount?(N(),ae(Rp,{key:0,to:n.to,disabled:n.disabled,defer:n.defer},[Ae(n.$slots,"default")],8,["to","disabled","defer"])):We("",!0)}});function mm(t){const e=tr(),n=Object.keys((e==null?void 0:e.type.props)??{}).reduce((s,i)=>{const o=(e==null?void 0:e.type.props[i]).default;return o!==void 0&&(s[i]=o),s},{}),r=Wf(t);return re(()=>{const s={},i=(e==null?void 0:e.vnode.props)??{};return Object.keys(i).forEach(o=>{s[Un(o)]=i[o]}),Object.keys({...n,...s}).reduce((o,a)=>(r.value[a]!==void 0&&(o[a]=r.value[a]),o),{})})}function il(t,e){const n=mm(t),r=e?sl(e):{};return re(()=>({...n.value,...r}))}const I2=fe({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{default:"h2"}},setup(t){const e=t,n=fi();return tt(),(r,s)=>(N(),ae(E(St),Be(e,{id:E(n).titleId}),{default:K(()=>[Ae(r.$slots,"default")]),_:3},16,["id"]))}});function xh(){const t=Ee(),e=re(()=>{var n,r;return["#text","#comment"].includes((n=t.value)==null?void 0:n.$el.nodeName)?(r=t.value)==null?void 0:r.$el.nextElementSibling:gr(t)});return{primitiveElement:t,currentElement:e}}function rx(t){return re(()=>{var e;return OP(t)?!!((e=gr(t))!=null&&e.closest("form")):!0})}const Zb="data-reka-collection-item";function ts(t={}){const{key:e="",isProvider:n=!1}=t,r=`${e}CollectionProvider`;let s;if(n){const u=Ee(new Map);s={collectionRef:Ee(),itemMap:u},fr(r,s)}else s=qt(r);const i=(u=!1)=>{const d=s.collectionRef.value;if(!d)return[];const f=Array.from(d.querySelectorAll(`[${Zb}]`)),m=Array.from(s.itemMap.value.values()).sort((y,S)=>f.indexOf(y.ref)-f.indexOf(S.ref));return u?m:m.filter(y=>y.ref.dataset.disabled!=="")},o=fe({name:"CollectionSlot",setup(u,{slots:d}){const{primitiveElement:f,currentElement:h}=xh();return ut(h,()=>{s.collectionRef.value=h.value}),()=>Gn(yh,{ref:f},d)}}),a=fe({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(u,{slots:d,attrs:f}){const{primitiveElement:h,currentElement:m}=xh();return Lt(y=>{if(m.value){const S=it(m.value);s.itemMap.value.set(S,{ref:m.value,value:u.value}),y(()=>s.itemMap.value.delete(S))}}),()=>Gn(yh,{...f,[Zb]:"",ref:h},d)}}),l=re(()=>Array.from(s.itemMap.value.values())),c=re(()=>s.itemMap.value.size);return{getItems:i,reactiveItems:l,itemMapSize:c,CollectionSlot:o,CollectionItem:a}}const C2="rovingFocusGroup.onEntryFocus",R2={bubbles:!1,cancelable:!0};function T2(t,e=!1){const n=nn();for(const r of t)if(r===n||(r.focus({preventScroll:e}),nn()!==n))return}const[b5,k2]=xn("RovingFocusGroup"),$2=fe({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(t,{expose:e,emit:n}){const r=t,s=n,{loop:i,orientation:o,dir:a}=er(r),l=_u(a),c=oi(r,"currentTabStopId",s,{defaultValue:r.defaultCurrentTabStopId,passive:r.currentTabStopId===void 0}),u=Ee(!1),d=Ee(!1),f=Ee(0),{getItems:h,CollectionSlot:m}=ts({isProvider:!0});function y(_){const x=!d.value;if(_.currentTarget&&_.target===_.currentTarget&&x&&!u.value){const w=new CustomEvent(C2,R2);if(_.currentTarget.dispatchEvent(w),s("entryFocus",w),!w.defaultPrevented){const p=h().map(I=>I.ref).filter(I=>I.dataset.disabled!==""),b=p.find(I=>I.getAttribute("data-active")===""),A=p.find(I=>I.id===c.value),R=[b,A,...p].filter(Boolean);T2(R,r.preventScrollOnEntryFocus)}}d.value=!1}function S(){setTimeout(()=>{d.value=!1},1)}return e({getItems:h}),k2({loop:i,dir:l,orientation:o,currentTabStopId:c,onItemFocus:_=>{c.value=_},onItemShiftTab:()=>{u.value=!0},onFocusableItemAdd:()=>{f.value++},onFocusableItemRemove:()=>{f.value--}}),(_,x)=>(N(),ae(E(m),null,{default:K(()=>[z(E(St),{tabindex:u.value||f.value===0?-1:0,"data-orientation":E(o),as:_.as,"as-child":_.asChild,dir:E(l),style:{outline:"none"},onMousedown:x[0]||(x[0]=w=>d.value=!0),onMouseup:S,onFocus:y,onBlur:x[1]||(x[1]=w=>u.value=!1)},{default:K(()=>[Ae(_.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),ev=fe({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(t){const e=t,{primitiveElement:n,currentElement:r}=xh(),s=re(()=>e.checked??e.value);return ut(s,(i,o)=>{if(!r.value)return;const a=r.value,l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(u&&i!==o){const d=new Event("input",{bubbles:!0}),f=new Event("change",{bubbles:!0});u.call(a,i),a.dispatchEvent(d),a.dispatchEvent(f)}}),(i,o)=>(N(),ae(vu,Be({ref_key:"primitiveElement",ref:n},{...e,...i.$attrs},{as:"input"}),null,16))}}),D2=fe({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(t){const e=t,n=re(()=>typeof e.value=="object"&&Array.isArray(e.value)&&e.value.length===0&&e.required),r=re(()=>typeof e.value=="string"||typeof e.value=="number"||typeof e.value=="boolean"?[{name:e.name,value:e.value}]:typeof e.value=="object"&&Array.isArray(e.value)?e.value.flatMap((s,i)=>typeof s=="object"?Object.entries(s).map(([o,a])=>({name:`[${e.name}][${i}][${o}]`,value:a})):{name:`[${e.name}][${i}]`,value:s}):e.value!==null&&typeof e.value=="object"&&!Array.isArray(e.value)?Object.entries(e.value).map(([s,i])=>({name:`[${e.name}][${s}]`,value:i})):[]);return(s,i)=>n.value?(N(),ae(ev,Be({key:s.name},{...e,...s.$attrs},{name:s.name,value:s.value}),null,16,["name","value"])):(N(!0),_e(Je,{key:1},Ln(r.value,o=>(N(),ae(ev,Be({key:o.name,ref_for:!0},{...e,...s.$attrs},{name:o.name,value:o.value}),null,16,["name","value"]))),128))}}),[sx,O2]=xn("PopperRoot"),ix=fe({inheritAttrs:!1,__name:"PopperRoot",setup(t){const e=Ee();return O2({anchor:e,onAnchorChange:n=>e.value=n}),(n,r)=>Ae(n.$slots,"default")}}),ox=fe({__name:"PopperAnchor",props:{reference:{},asChild:{type:Boolean},as:{}},setup(t){const e=t,{forwardRef:n,currentElement:r}=tt(),s=sx();return j_(()=>{s.onAnchorChange(e.reference??r.value)}),(i,o)=>(N(),ae(E(St),{ref:E(n),as:i.as,"as-child":i.asChild},{default:K(()=>[Ae(i.$slots,"default")]),_:3},8,["as","as-child"]))}});function P2(t){return t!==null}function L2(t){return{name:"transformOrigin",options:t,fn(e){var S,_,x;const{placement:n,rects:r,middlewareData:s}=e,o=((S=s.arrow)==null?void 0:S.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=Eh(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((_=s.arrow)==null?void 0:_.x)??0)+a/2,h=(((x=s.arrow)==null?void 0:x.y)??0)+l/2;let m="",y="";return c==="bottom"?(m=o?d:`${f}px`,y=`${-l}px`):c==="top"?(m=o?d:`${f}px`,y=`${r.floating.height+l}px`):c==="right"?(m=`${-l}px`,y=o?d:`${h}px`):c==="left"&&(m=`${r.floating.width+l}px`,y=o?d:`${h}px`),{data:{x:m,y}}}}}function Eh(t){const[e,n="center"]=t.split("-");return[e,n]}function M2(t){const e=Ee(),n=re(()=>{var s;return((s=e.value)==null?void 0:s.width)??0}),r=re(()=>{var s;return((s=e.value)==null?void 0:s.height)??0});return sn(()=>{const s=gr(t);if(s){e.value={width:s.offsetWidth,height:s.offsetHeight};const i=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let l,c;if("borderBoxSize"in a){const u=a.borderBoxSize,d=Array.isArray(u)?u[0]:u;l=d.inlineSize,c=d.blockSize}else l=s.offsetWidth,c=s.offsetHeight;e.value={width:l,height:c}});return i.observe(s,{box:"border-box"}),()=>i.unobserve(s)}else e.value=void 0}),{width:n,height:r}}const ax={side:"bottom",sideOffset:0,align:"center",alignOffset:0,arrowPadding:0,avoidCollisions:!0,collisionBoundary:()=>[],collisionPadding:0,sticky:"partial",hideWhenDetached:!1,positionStrategy:"fixed",updatePositionStrategy:"optimized",prioritizePosition:!1},[v5,N2]=xn("PopperContent"),lx=fe({inheritAttrs:!1,__name:"PopperContent",props:I_({side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},{...ax}),emits:["placed"],setup(t,{emit:e}){const n=t,r=e,s=sx(),{forwardRef:i,currentElement:o}=tt(),a=Ee(),l=Ee(),{width:c,height:u}=M2(l),d=re(()=>n.side+(n.align!=="center"?`-${n.align}`:"")),f=re(()=>typeof n.collisionPadding=="number"?n.collisionPadding:{top:0,right:0,bottom:0,left:0,...n.collisionPadding}),h=re(()=>Array.isArray(n.collisionBoundary)?n.collisionBoundary:[n.collisionBoundary]),m=re(()=>({padding:f.value,boundary:h.value.filter(P2),altBoundary:h.value.length>0})),y=SP(()=>[hP({mainAxis:n.sideOffset+u.value,alignmentAxis:n.alignOffset}),n.prioritizePosition&&n.avoidCollisions&&Hb({...m.value}),n.avoidCollisions&&pP({mainAxis:!0,crossAxis:!!n.prioritizePosition,limiter:n.sticky==="partial"?bP():void 0,...m.value}),!n.prioritizePosition&&n.avoidCollisions&&Hb({...m.value}),mP({...m.value,apply:({elements:U,rects:J,availableWidth:H,availableHeight:j})=>{const{width:se,height:$}=J.reference,W=U.floating.style;W.setProperty("--reka-popper-available-width",`${H}px`),W.setProperty("--reka-popper-available-height",`${j}px`),W.setProperty("--reka-popper-anchor-width",`${se}px`),W.setProperty("--reka-popper-anchor-height",`${$}px`)}}),l.value&&_P({element:l.value,padding:n.arrowPadding}),L2({arrowWidth:c.value,arrowHeight:u.value}),n.hideWhenDetached&&gP({strategy:"referenceHidden",...m.value})]),S=re(()=>n.reference??s.anchor.value),{floatingStyles:_,placement:x,isPositioned:w,middlewareData:p}=xP(S,a,{strategy:n.positionStrategy,placement:d,whileElementsMounted:(...U)=>fP(...U,{layoutShift:!n.disableUpdateOnLayoutShift,animationFrame:n.updatePositionStrategy==="always"}),middleware:y}),b=re(()=>Eh(x.value)[0]),A=re(()=>Eh(x.value)[1]);j_(()=>{w.value&&r("placed")});const R=re(()=>{var U;return((U=p.value.arrow)==null?void 0:U.centerOffset)!==0}),I=Ee("");Lt(()=>{o.value&&(I.value=window.getComputedStyle(o.value).zIndex)});const T=re(()=>{var U;return((U=p.value.arrow)==null?void 0:U.x)??0}),D=re(()=>{var U;return((U=p.value.arrow)==null?void 0:U.y)??0});return N2({placedSide:b,onArrowChange:U=>l.value=U,arrowX:T,arrowY:D,shouldHideArrow:R}),(U,J)=>{var H,j,se;return N(),_e("div",{ref_key:"floatingRef",ref:a,"data-reka-popper-content-wrapper":"",style:Is({...E(_),transform:E(w)?E(_).transform:"translate(0, -200%)",minWidth:"max-content",zIndex:I.value,"--reka-popper-transform-origin":[(H=E(p).transformOrigin)==null?void 0:H.x,(j=E(p).transformOrigin)==null?void 0:j.y].join(" "),...((se=E(p).hide)==null?void 0:se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}})},[z(E(St),Be({ref:E(i)},U.$attrs,{"as-child":n.asChild,as:U.as,"data-side":b.value,"data-align":A.value,style:{animation:E(w)?void 0:"none"}}),{default:K(()=>[Ae(U.$slots,"default")]),_:3},16,["as-child","as","data-side","data-align","style"])],4)}}});function gm(t){const e=DP("",1e3);return{search:e,handleTypeaheadSearch:(s,i)=>{e.value=e.value+s;{const o=nn(),a=i.map(f=>{var h,m;return{...f,textValue:((h=f.value)==null?void 0:h.textValue)??((m=f.ref.textContent)==null?void 0:m.trim())??""}}),l=a.find(f=>f.ref===o),c=a.map(f=>f.textValue),u=j2(c,e.value,l==null?void 0:l.textValue),d=a.find(f=>f.textValue===u);return d&&d.ref.focus(),d==null?void 0:d.ref}},resetTypeahead:()=>{e.value=""}}}function F2(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function j2(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=F2(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function U2(t){const e=wu({nonce:Ee()});return re(()=>{var n;return(t==null?void 0:t.value)||((n=e.nonce)==null?void 0:n.value)})}function B2(){const t=Ee(!1);return sn(()=>{Cc("keydown",()=>{t.value=!0},{capture:!0,passive:!0}),Cc(["pointerdown","pointermove"],()=>{t.value=!1},{capture:!0,passive:!0})}),t}const q2=W1(B2),[xu,z2]=xn(["MenuRoot","MenuSub"],"MenuContext"),[ym,V2]=xn("MenuRoot"),H2=fe({__name:"MenuRoot",props:{open:{type:Boolean,default:!1},dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,r=e,{modal:s,dir:i}=er(n),o=_u(i),a=oi(n,"open",r),l=Ee(),c=q2();return z2({open:a,onOpenChange:u=>{a.value=u},content:l,onContentChange:u=>{l.value=u}}),V2({onClose:()=>{a.value=!1},isUsingKeyboardRef:c,dir:o,modal:s}),(u,d)=>(N(),ae(E(ix),null,{default:K(()=>[Ae(u.$slots,"default")]),_:3}))}});let df=0;function cx(){Lt(t=>{if(!es)return;const e=document.querySelectorAll("[data-reka-focus-guard]");document.body.insertAdjacentElement("afterbegin",e[0]??tv()),document.body.insertAdjacentElement("beforeend",e[1]??tv()),df++,t(()=>{df===1&&document.querySelectorAll("[data-reka-focus-guard]").forEach(n=>n.remove()),df--})})}function tv(){const t=document.createElement("span");return t.setAttribute("data-reka-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}const[ux,K2]=xn("MenuContent"),dx=fe({__name:"MenuContentImpl",props:I_({loop:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},disableOutsideScroll:{type:Boolean},trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},{...ax}),emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus","dismiss"],setup(t,{emit:e}){const n=t,r=e,s=xu(),i=ym(),{trapFocus:o,disableOutsidePointerEvents:a,loop:l}=er(n);cx(),hm(a.value);const c=Ee(""),u=Ee(0),d=Ee(0),f=Ee(null),h=Ee("right"),m=Ee(0),y=Ee(null),S=Ee(),{forwardRef:_,currentElement:x}=tt(),{handleTypeaheadSearch:w}=gm();ut(x,T=>{s.onContentChange(T)}),vr(()=>{window.clearTimeout(u.value)});function p(T){var U,J;return h.value===((U=f.value)==null?void 0:U.side)&&i2(T,(J=f.value)==null?void 0:J.area)}async function b(T){var D;r("openAutoFocus",T),!T.defaultPrevented&&(T.preventDefault(),(D=x.value)==null||D.focus({preventScroll:!0}))}function A(T){var W;if(T.defaultPrevented)return;const U=T.target.closest("[data-reka-menu-content]")===T.currentTarget,J=T.ctrlKey||T.altKey||T.metaKey,H=T.key.length===1,j=HP(T,nn(),x.value,{loop:l.value,arrowKeyOptions:"vertical",dir:i==null?void 0:i.dir.value,focus:!0,attributeName:"[data-reka-collection-item]:not([data-disabled])"});if(j)return j==null?void 0:j.focus();if(T.code==="Space")return;const se=((W=S.value)==null?void 0:W.getItems())??[];if(U&&(T.key==="Tab"&&T.preventDefault(),!J&&H&&w(T.key,se)),T.target!==x.value||!r2.includes(T.key))return;T.preventDefault();const $=[...se.map(B=>B.ref)];Q1.includes(T.key)&&$.reverse(),vh($)}function R(T){var D,U;(U=(D=T==null?void 0:T.currentTarget)==null?void 0:D.contains)!=null&&U.call(D,T.target)||(window.clearTimeout(u.value),c.value="")}function I(T){var J;if(!wh(T))return;const D=T.target,U=m.value!==T.clientX;if((J=T==null?void 0:T.currentTarget)!=null&&J.contains(D)&&U){const H=T.clientX>m.value?"right":"left";h.value=H,m.value=T.clientX}}return K2({onItemEnter:T=>!!p(T),onItemLeave:T=>{var D;p(T)||((D=x.value)==null||D.focus(),y.value=null)},onTriggerLeave:T=>!!p(T),searchRef:c,pointerGraceTimerRef:d,onPointerGraceIntentChange:T=>{f.value=T}}),(T,D)=>(N(),ae(E(dm),{"as-child":"",trapped:E(o),onMountAutoFocus:b,onUnmountAutoFocus:D[7]||(D[7]=U=>r("closeAutoFocus",U))},{default:K(()=>[z(E(cm),{"as-child":"","disable-outside-pointer-events":E(a),onEscapeKeyDown:D[2]||(D[2]=U=>r("escapeKeyDown",U)),onPointerDownOutside:D[3]||(D[3]=U=>r("pointerDownOutside",U)),onFocusOutside:D[4]||(D[4]=U=>r("focusOutside",U)),onInteractOutside:D[5]||(D[5]=U=>r("interactOutside",U)),onDismiss:D[6]||(D[6]=U=>r("dismiss"))},{default:K(()=>[z(E($2),{ref_key:"rovingFocusGroupRef",ref:S,"current-tab-stop-id":y.value,"onUpdate:currentTabStopId":D[0]||(D[0]=U=>y.value=U),"as-child":"",orientation:"vertical",dir:E(i).dir.value,loop:E(l),onEntryFocus:D[1]||(D[1]=U=>{r("entryFocus",U),E(i).isUsingKeyboardRef.value||U.preventDefault()})},{default:K(()=>[z(E(lx),{ref:E(_),role:"menu",as:T.as,"as-child":T.asChild,"aria-orientation":"vertical","data-reka-menu-content":"","data-state":E(Z1)(E(s).open.value),dir:E(i).dir.value,side:T.side,"side-offset":T.sideOffset,align:T.align,"align-offset":T.alignOffset,"avoid-collisions":T.avoidCollisions,"collision-boundary":T.collisionBoundary,"collision-padding":T.collisionPadding,"arrow-padding":T.arrowPadding,"prioritize-position":T.prioritizePosition,"position-strategy":T.positionStrategy,"update-position-strategy":T.updatePositionStrategy,sticky:T.sticky,"hide-when-detached":T.hideWhenDetached,reference:T.reference,onKeydown:A,onBlur:R,onPointermove:I},{default:K(()=>[Ae(T.$slots,"default")]),_:3},8,["as","as-child","data-state","dir","side","side-offset","align","align-offset","avoid-collisions","collision-boundary","collision-padding","arrow-padding","prioritize-position","position-strategy","update-position-strategy","sticky","hide-when-detached","reference"])]),_:3},8,["current-tab-stop-id","dir","loop"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),W2=fe({inheritAttrs:!1,__name:"MenuItemImpl",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(t){const e=t,n=ux(),{forwardRef:r}=tt(),{CollectionItem:s}=ts(),i=Ee(!1);async function o(l){if(!l.defaultPrevented&&wh(l)){if(e.disabled)n.onItemLeave(l);else if(!n.onItemEnter(l)){const u=l.currentTarget;u==null||u.focus({preventScroll:!0})}}}async function a(l){await Ft(),!l.defaultPrevented&&wh(l)&&n.onItemLeave(l)}return(l,c)=>(N(),ae(E(s),{value:{textValue:l.textValue}},{default:K(()=>[z(E(St),Be({ref:E(r),role:"menuitem",tabindex:"-1"},l.$attrs,{as:l.as,"as-child":l.asChild,"aria-disabled":l.disabled||void 0,"data-disabled":l.disabled?"":void 0,"data-highlighted":i.value?"":void 0,onPointermove:o,onPointerleave:a,onFocus:c[0]||(c[0]=async u=>{await Ft(),!(u.defaultPrevented||l.disabled)&&(i.value=!0)}),onBlur:c[1]||(c[1]=async u=>{await Ft(),!u.defaultPrevented&&(i.value=!1)})}),{default:K(()=>[Ae(l.$slots,"default")]),_:3},16,["as","as-child","aria-disabled","data-disabled","data-highlighted"])]),_:3},8,["value"]))}}),G2=fe({__name:"MenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s,currentElement:i}=tt(),o=ym(),a=ux(),l=Ee(!1);async function c(){const u=i.value;if(!n.disabled&&u){const d=new CustomEvent(t2,{bubbles:!0,cancelable:!0});r("select",d),await Ft(),d.defaultPrevented?l.value=!1:o.onClose()}}return(u,d)=>(N(),ae(W2,Be(n,{ref:E(s),onClick:c,onPointerdown:d[0]||(d[0]=()=>{l.value=!0}),onPointerup:d[1]||(d[1]=async f=>{var h;await Ft(),!f.defaultPrevented&&(l.value||(h=f.currentTarget)==null||h.click())}),onKeydown:d[2]||(d[2]=async f=>{const h=E(a).searchRef.value!=="";u.disabled||h&&f.key===" "||E(bh).includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})}),{default:K(()=>[Ae(u.$slots,"default")]),_:3},16))}}),J2=fe({__name:"MenuRootContentModal",props:{loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=il(n,r),i=xu(),{forwardRef:o,currentElement:a}=tt();return fm(a),(l,c)=>(N(),ae(dx,Be(E(s),{ref:E(o),"trap-focus":E(i).open.value,"disable-outside-pointer-events":E(i).open.value,"disable-outside-scroll":!0,onDismiss:c[0]||(c[0]=u=>E(i).onOpenChange(!1)),onFocusOutside:c[1]||(c[1]=Hr(u=>r("focusOutside",u),["prevent"]))}),{default:K(()=>[Ae(l.$slots,"default")]),_:3},16,["trap-focus","disable-outside-pointer-events"]))}}),X2=fe({__name:"MenuRootContentNonModal",props:{loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const s=il(t,e),i=xu();return(o,a)=>(N(),ae(dx,Be(E(s),{"trap-focus":!1,"disable-outside-pointer-events":!1,"disable-outside-scroll":!1,onDismiss:a[0]||(a[0]=l=>E(i).onOpenChange(!1))}),{default:K(()=>[Ae(o.$slots,"default")]),_:3},16))}}),Y2=fe({__name:"MenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const s=il(t,e),i=xu(),o=ym();return(a,l)=>(N(),ae(E(rl),{present:a.forceMount||E(i).open.value},{default:K(()=>[E(o).modal.value?(N(),ae(J2,Dn(Be({key:0},{...a.$attrs,...E(s)})),{default:K(()=>[Ae(a.$slots,"default")]),_:3},16)):(N(),ae(X2,Dn(Be({key:1},{...a.$attrs,...E(s)})),{default:K(()=>[Ae(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Q2=fe({__name:"MenuPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(t){const e=t;return(n,r)=>(N(),ae(E(pm),Dn(qn(e)),{default:K(()=>[Ae(n.$slots,"default")]),_:3},16))}}),Z2=fe({__name:"MenuAnchor",props:{reference:{},asChild:{type:Boolean},as:{}},setup(t){const e=t;return(n,r)=>(N(),ae(E(ox),Dn(qn(e)),{default:K(()=>[Ae(n.$slots,"default")]),_:3},16))}}),eL=fe({__name:"DialogPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(t){const e=t;return(n,r)=>(N(),ae(E(pm),Dn(qn(e)),{default:K(()=>[Ae(n.$slots,"default")]),_:3},16))}}),[fx,tL]=xn("DropdownMenuRoot"),nL=fe({__name:"DropdownMenuRoot",props:{defaultOpen:{type:Boolean},open:{type:Boolean,default:void 0},dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,r=e;tt();const s=oi(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0}),i=Ee(),{modal:o,dir:a}=er(n),l=_u(a);return tL({open:s,onOpenChange:c=>{s.value=c},onOpenToggle:()=>{s.value=!s.value},triggerId:"",triggerElement:i,contentId:"",modal:o,dir:l}),(c,u)=>(N(),ae(E(H2),{open:E(s),"onUpdate:open":u[0]||(u[0]=d=>Pt(s)?s.value=d:null),dir:E(l),modal:E(o)},{default:K(()=>[Ae(c.$slots,"default",{open:E(s)})]),_:3},8,["open","dir","modal"]))}}),rL=fe({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(t,{emit:e}){const s=il(t,e);tt();const i=fx(),o=Ee(!1);function a(l){l.defaultPrevented||(o.value||setTimeout(()=>{var c;(c=i.triggerElement.value)==null||c.focus()},0),o.value=!1,l.preventDefault())}return i.contentId||(i.contentId=Eo(void 0,"reka-dropdown-menu-content")),(l,c)=>{var u;return N(),ae(E(Y2),Be(E(s),{id:E(i).contentId,"aria-labelledby":(u=E(i))==null?void 0:u.triggerId,style:{"--reka-dropdown-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-dropdown-menu-content-available-width":"var(--reka-popper-available-width)","--reka-dropdown-menu-content-available-height":"var(--reka-popper-available-height)","--reka-dropdown-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-dropdown-menu-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:a,onInteractOutside:c[0]||(c[0]=d=>{var y;if(d.defaultPrevented)return;const f=d.detail.originalEvent,h=f.button===0&&f.ctrlKey===!0,m=f.button===2||h;(!E(i).modal.value||m)&&(o.value=!0),(y=E(i).triggerElement.value)!=null&&y.contains(d.target)&&d.preventDefault()})}),{default:K(()=>[Ae(l.$slots,"default")]),_:3},16,["id","aria-labelledby"])}}}),sL=fe({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(t,{emit:e}){const n=t,s=sl(e);return tt(),(i,o)=>(N(),ae(E(G2),Dn(qn({...n,...E(s)})),{default:K(()=>[Ae(i.$slots,"default")]),_:3},16))}}),iL=fe({__name:"DropdownMenuPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(t){const e=t;return(n,r)=>(N(),ae(E(Q2),Dn(qn(e)),{default:K(()=>[Ae(n.$slots,"default")]),_:3},16))}}),oL=fe({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"button"}},setup(t){const e=t,n=fx(),{forwardRef:r,currentElement:s}=tt();return sn(()=>{n.triggerElement=s}),n.triggerId||(n.triggerId=Eo(void 0,"reka-dropdown-menu-trigger")),(i,o)=>(N(),ae(E(Z2),{"as-child":""},{default:K(()=>[z(E(St),{id:E(n).triggerId,ref:E(r),type:i.as==="button"?"button":void 0,"as-child":e.asChild,as:i.as,"aria-haspopup":"menu","aria-expanded":E(n).open.value,"aria-controls":E(n).open.value?E(n).contentId:void 0,"data-disabled":i.disabled?"":void 0,disabled:i.disabled,"data-state":E(n).open.value?"open":"closed",onClick:o[0]||(o[0]=async a=>{var l;!i.disabled&&a.button===0&&a.ctrlKey===!1&&((l=E(n))==null||l.onOpenToggle(),await Ft(),E(n).open.value&&a.preventDefault())}),onKeydown:o[1]||(o[1]=Y_(a=>{i.disabled||(["Enter"," "].includes(a.key)&&E(n).onOpenToggle(),a.key==="ArrowDown"&&E(n).onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())},["enter","space","arrow-down"]))},{default:K(()=>[Ae(i.$slots,"default")]),_:3},8,["id","type","as-child","as","aria-expanded","aria-controls","data-disabled","disabled","data-state"])]),_:3}))}}),aL=fe({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{default:"label"}},setup(t){const e=t;return tt(),(n,r)=>(N(),ae(E(St),Be(e,{onMousedown:r[0]||(r[0]=s=>{!s.defaultPrevented&&s.detail>1&&s.preventDefault()})}),{default:K(()=>[Ae(n.$slots,"default")]),_:3},16))}});function nv(t,e=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY){return Math.min(n,Math.max(e,t))}const lL=[" ","Enter","ArrowUp","ArrowDown"],cL=[" ","Enter"],xr=10;function Rc(t,e,n){return t===void 0?!1:Array.isArray(t)?t.some(r=>Sh(r,e,n)):Sh(t,e,n)}function Sh(t,e,n){return t===void 0||e===void 0?!1:typeof t=="string"?t===e:typeof n=="function"?n(t,e):typeof n=="string"?(t==null?void 0:t[n])===(e==null?void 0:e[n]):zP(t,e)}function uL(t){return t==null||t===""||Array.isArray(t)&&t.length===0}const dL=fe({__name:"BubbleSelect",props:{autocomplete:{},autofocus:{type:Boolean},disabled:{type:Boolean},form:{},multiple:{type:Boolean},name:{},required:{type:Boolean},size:{},value:{}},setup(t){const e=t,n=Ee();return ut(()=>e.value,(r,s)=>{const i=window.HTMLSelectElement.prototype,a=Object.getOwnPropertyDescriptor(i,"value").set;if(r!==s&&a&&n.value){const l=new Event("change",{bubbles:!0});a.call(n.value,r),n.value.dispatchEvent(l)}}),(r,s)=>(N(),ae(E(vu),{"as-child":""},{default:K(()=>[me("select",Be({ref_key:"selectElement",ref:n},e),[Ae(r.$slots,"default")],16)]),_:3}))}}),fL={key:0,value:""},[Ui,hx]=xn("SelectRoot"),hL=fe({inheritAttrs:!1,__name:"SelectRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean},defaultValue:{},modelValue:{default:void 0},by:{},dir:{},multiple:{type:Boolean},autocomplete:{},disabled:{type:Boolean},name:{},required:{type:Boolean}},emits:["update:modelValue","update:open"],setup(t,{emit:e}){const n=t,r=e,{required:s,disabled:i,multiple:o,dir:a}=er(n),l=oi(n,"modelValue",r,{defaultValue:n.defaultValue??(o.value?[]:void 0),passive:n.modelValue===void 0,deep:!0}),c=oi(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0}),u=Ee(),d=Ee(),f=Ee({x:0,y:0}),h=re(()=>{var w;return o.value&&Array.isArray(l.value)?((w=l.value)==null?void 0:w.length)===0:Jb(l.value)});ts({isProvider:!0});const m=_u(a),y=rx(u),S=Ee(new Set),_=re(()=>Array.from(S.value).map(w=>w.value).join(";"));function x(w){if(o.value){const p=Array.isArray(l.value)?[...l.value]:[],b=p.findIndex(A=>Sh(A,w,n.by));b===-1?p.push(w):p.splice(b,1),l.value=[...p]}else l.value=w}return hx({triggerElement:u,onTriggerChange:w=>{u.value=w},valueElement:d,onValueElementChange:w=>{d.value=w},contentId:"",modelValue:l,onValueChange:x,by:n.by,open:c,multiple:o,required:s,onOpenChange:w=>{c.value=w},dir:m,triggerPointerDownPosRef:f,disabled:i,isEmptyModelValue:h,optionsSet:S,onOptionAdd:w=>S.value.add(w),onOptionRemove:w=>S.value.delete(w)}),(w,p)=>(N(),ae(E(ix),null,{default:K(()=>[Ae(w.$slots,"default",{modelValue:E(l),open:E(c)}),E(y)?(N(),ae(dL,{key:_.value,"aria-hidden":"true",tabindex:"-1",multiple:E(o),required:E(s),name:w.name,autocomplete:w.autocomplete,disabled:E(i),value:E(l)},{default:K(()=>[E(Jb)(E(l))?(N(),_e("option",fL)):We("",!0),(N(!0),_e(Je,null,Ln(Array.from(S.value),b=>(N(),_e("option",Be({key:b.value??"",ref_for:!0},b),null,16))),128))]),_:1},8,["multiple","required","name","autocomplete","disabled","value"])):We("",!0)]),_:3}))}}),[pL,mL]=xn("SelectItemAlignedPosition"),gL=fe({inheritAttrs:!1,__name:"SelectItemAlignedPosition",props:{asChild:{type:Boolean},as:{}},emits:["placed"],setup(t,{emit:e}){const n=t,r=e,{getItems:s}=ts(),i=Ui(),o=Eu(),a=Ee(!1),l=Ee(!0),c=Ee(),{forwardRef:u,currentElement:d}=tt(),{viewport:f,selectedItem:h,selectedItemText:m,focusSelectedItem:y}=o;function S(){if(i.triggerElement.value&&i.valueElement.value&&c.value&&d.value&&(f!=null&&f.value)&&(h!=null&&h.value)&&(m!=null&&m.value)){const w=i.triggerElement.value.getBoundingClientRect(),p=d.value.getBoundingClientRect(),b=i.valueElement.value.getBoundingClientRect(),A=m.value.getBoundingClientRect();if(i.dir.value!=="rtl"){const O=A.left-p.left,Q=b.left-O,ie=w.left-Q,ne=w.width+ie,Ie=Math.max(ne,p.width),P=window.innerWidth-xr,k=nv(Q,xr,Math.max(xr,P-Ie));c.value.style.minWidth=`${ne}px`,c.value.style.left=`${k}px`}else{const O=p.right-A.right,Q=window.innerWidth-b.right-O,ie=window.innerWidth-w.right-Q,ne=w.width+ie,Ie=Math.max(ne,p.width),P=window.innerWidth-xr,k=nv(Q,xr,Math.max(xr,P-Ie));c.value.style.minWidth=`${ne}px`,c.value.style.right=`${k}px`}const R=s().map(O=>O.ref),I=window.innerHeight-xr*2,T=f.value.scrollHeight,D=window.getComputedStyle(d.value),U=Number.parseInt(D.borderTopWidth,10),J=Number.parseInt(D.paddingTop,10),H=Number.parseInt(D.borderBottomWidth,10),j=Number.parseInt(D.paddingBottom,10),se=U+J+T+j+H,$=Math.min(h.value.offsetHeight*5,se),W=window.getComputedStyle(f.value),B=Number.parseInt(W.paddingTop,10),oe=Number.parseInt(W.paddingBottom,10),q=w.top+w.height/2-xr,le=I-q,de=h.value.offsetHeight/2,ye=h.value.offsetTop+de,Ce=U+J+ye,X=se-Ce;if(Ce<=q){const O=h.value===R[R.length-1];c.value.style.bottom="0px";const Q=d.value.clientHeight-f.value.offsetTop-f.value.offsetHeight,ie=Math.max(le,de+(O?oe:0)+Q+H),ne=Ce+ie;c.value.style.height=`${ne}px`}else{const O=h.value===R[0];c.value.style.top="0px";const ie=Math.max(q,U+f.value.offsetTop+(O?B:0)+de)+X;c.value.style.height=`${ie}px`,f.value.scrollTop=Ce-q+f.value.offsetTop}c.value.style.margin=`${xr}px 0`,c.value.style.minHeight=`${$}px`,c.value.style.maxHeight=`${I}px`,r("placed"),requestAnimationFrame(()=>a.value=!0)}}const _=Ee("");sn(async()=>{await Ft(),S(),d.value&&(_.value=window.getComputedStyle(d.value).zIndex)});function x(w){w&&l.value===!0&&(S(),y==null||y(),l.value=!1)}return BP(i.triggerElement,()=>{S()}),mL({contentWrapper:c,shouldExpandOnScrollRef:a,onScrollButtonChange:x}),(w,p)=>(N(),_e("div",{ref_key:"contentWrapperElement",ref:c,style:Is({display:"flex",flexDirection:"column",position:"fixed",zIndex:_.value})},[z(E(St),Be({ref:E(u),style:{boxSizing:"border-box",maxHeight:"100%"}},{...w.$attrs,...n}),{default:K(()=>[Ae(w.$slots,"default")]),_:3},16)],4))}}),yL=fe({__name:"SelectPopperPosition",props:{side:{},sideOffset:{},align:{default:"start"},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{default:xr},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},setup(t){const n=mm(t);return(r,s)=>(N(),ae(E(lx),Be(E(n),{style:{boxSizing:"border-box","--reka-select-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-select-content-available-width":"var(--reka-popper-available-width)","--reka-select-content-available-height":"var(--reka-popper-available-height)","--reka-select-trigger-width":"var(--reka-popper-anchor-width)","--reka-select-trigger-height":"var(--reka-popper-anchor-height)"}}),{default:K(()=>[Ae(r.$slots,"default")]),_:3},16))}}),bL={onViewportChange:()=>{},itemTextRefCallback:()=>{},itemRefCallback:()=>{}},[Eu,px]=xn("SelectContent"),vL=fe({__name:"SelectContentImpl",props:{position:{default:"item-aligned"},bodyLock:{type:Boolean,default:!0},side:{},sideOffset:{},align:{default:"start"},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(t,{emit:e}){const n=t,r=e,s=Ui();cx(),hm(n.bodyLock);const{CollectionSlot:i,getItems:o}=ts(),a=Ee();fm(a);const{search:l,handleTypeaheadSearch:c}=gm(),u=Ee(),d=Ee(),f=Ee(),h=Ee(!1),m=Ee(!1),y=Ee(!1);function S(){d.value&&a.value&&vh([d.value,a.value])}ut(h,()=>{S()});const{onOpenChange:_,triggerPointerDownPosRef:x}=s;Lt(A=>{if(!a.value)return;let R={x:0,y:0};const I=D=>{var U,J;R={x:Math.abs(Math.round(D.pageX)-(((U=x.value)==null?void 0:U.x)??0)),y:Math.abs(Math.round(D.pageY)-(((J=x.value)==null?void 0:J.y)??0))}},T=D=>{var U;D.pointerType!=="touch"&&(R.x<=10&&R.y<=10?D.preventDefault():(U=a.value)!=null&&U.contains(D.target)||_(!1),document.removeEventListener("pointermove",I),x.value=null)};x.value!==null&&(document.addEventListener("pointermove",I),document.addEventListener("pointerup",T,{capture:!0,once:!0})),A(()=>{document.removeEventListener("pointermove",I),document.removeEventListener("pointerup",T,{capture:!0})})});function w(A){const R=A.ctrlKey||A.altKey||A.metaKey;if(A.key==="Tab"&&A.preventDefault(),!R&&A.key.length===1&&c(A.key,o()),["ArrowUp","ArrowDown","Home","End"].includes(A.key)){let T=[...o().map(D=>D.ref)];if(["ArrowUp","End"].includes(A.key)&&(T=T.slice().reverse()),["ArrowUp","ArrowDown"].includes(A.key)){const D=A.target,U=T.indexOf(D);T=T.slice(U+1)}setTimeout(()=>vh(T)),A.preventDefault()}}const p=re(()=>n.position==="popper"?n:{}),b=mm(p.value);return px({content:a,viewport:u,onViewportChange:A=>{u.value=A},itemRefCallback:(A,R,I)=>{const T=!m.value&&!I,D=Rc(s.modelValue.value,R,s.by);if(s.multiple.value){if(y.value)return;(D||T)&&(d.value=A,D&&(y.value=!0))}else(D||T)&&(d.value=A);T&&(m.value=!0)},selectedItem:d,selectedItemText:f,onItemLeave:()=>{var A;(A=a.value)==null||A.focus()},itemTextRefCallback:(A,R,I)=>{const T=!m.value&&!I;(Rc(s.modelValue.value,R,s.by)||T)&&(f.value=A)},focusSelectedItem:S,position:n.position,isPositioned:h,searchRef:l}),(A,R)=>(N(),ae(E(i),null,{default:K(()=>[z(E(dm),{"as-child":"",onMountAutoFocus:R[6]||(R[6]=Hr(()=>{},["prevent"])),onUnmountAutoFocus:R[7]||(R[7]=I=>{var T;r("closeAutoFocus",I),!I.defaultPrevented&&((T=E(s).triggerElement.value)==null||T.focus({preventScroll:!0}),I.preventDefault())})},{default:K(()=>[z(E(cm),{"as-child":"","disable-outside-pointer-events":"",onFocusOutside:R[2]||(R[2]=Hr(()=>{},["prevent"])),onDismiss:R[3]||(R[3]=I=>E(s).onOpenChange(!1)),onEscapeKeyDown:R[4]||(R[4]=I=>r("escapeKeyDown",I)),onPointerDownOutside:R[5]||(R[5]=I=>r("pointerDownOutside",I))},{default:K(()=>[(N(),ae(Ts(A.position==="popper"?yL:gL),Be({...A.$attrs,...E(b)},{id:E(s).contentId,ref:I=>{a.value=E(gr)(I)},role:"listbox","data-state":E(s).open.value?"open":"closed",dir:E(s).dir.value,style:{display:"flex",flexDirection:"column",outline:"none"},onContextmenu:R[0]||(R[0]=Hr(()=>{},["prevent"])),onPlaced:R[1]||(R[1]=I=>h.value=!0),onKeydown:w}),{default:K(()=>[Ae(A.$slots,"default")]),_:3},16,["id","data-state","dir","onKeydown"]))]),_:3})]),_:3})]),_:3}))}}),wL=fe({inheritAttrs:!1,__name:"SelectProvider",props:{context:{}},setup(t){return hx(t.context),px(bL),(n,r)=>Ae(n.$slots,"default")}}),_L={key:1},xL=fe({inheritAttrs:!1,__name:"SelectContent",props:{forceMount:{type:Boolean},position:{},bodyLock:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(t,{emit:e}){const n=t,s=il(n,e),i=Ui(),o=Ee();sn(()=>{o.value=new DocumentFragment});const a=Ee(),l=re(()=>n.forceMount||i.open.value);return(c,u)=>{var d;return l.value?(N(),ae(E(rl),{key:0,ref_key:"presenceRef",ref:a,present:!0},{default:K(()=>[z(vL,Dn(qn({...E(s),...c.$attrs})),{default:K(()=>[Ae(c.$slots,"default")]),_:3},16)]),_:3},512)):!((d=a.value)!=null&&d.present)&&o.value?(N(),_e("div",_L,[(N(),ae(Rp,{to:o.value},[z(wL,{context:E(i)},{default:K(()=>[Ae(c.$slots,"default")]),_:3},8,["context"])],8,["to"]))])):We("",!0)}}}),EL=fe({__name:"SelectIcon",props:{asChild:{type:Boolean},as:{default:"span"}},setup(t){return(e,n)=>(N(),ae(E(St),{"aria-hidden":"true",as:e.as,"as-child":e.asChild},{default:K(()=>[Ae(e.$slots,"default",{},()=>[n[0]||(n[0]=$e("▼"))])]),_:3},8,["as","as-child"]))}}),[SL,AL]=xn("SelectItem"),IL=fe({__name:"SelectItem",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(t,{emit:e}){const n=t,r=e,{disabled:s}=er(n),i=Ui(),o=Eu(),{forwardRef:a,currentElement:l}=tt(),{CollectionItem:c}=ts(),u=re(()=>{var p;return Rc((p=i.modelValue)==null?void 0:p.value,n.value,i.by)}),d=Ee(!1),f=Ee(n.textValue??""),h=Eo(void 0,"reka-select-item-text"),m="select.select";async function y(p){if(p.defaultPrevented)return;const b={originalEvent:p,value:n.value};lm(m,S,b)}async function S(p){await Ft(),r("select",p),!p.defaultPrevented&&(s.value||(i.onValueChange(n.value),i.multiple.value||i.onOpenChange(!1)))}async function _(p){var b,A;await Ft(),!p.defaultPrevented&&(s.value?(b=o.onItemLeave)==null||b.call(o):(A=p.currentTarget)==null||A.focus({preventScroll:!0}))}async function x(p){var b;await Ft(),!p.defaultPrevented&&p.currentTarget===nn()&&((b=o.onItemLeave)==null||b.call(o))}async function w(p){var A;await Ft(),!(p.defaultPrevented||((A=o.searchRef)==null?void 0:A.value)!==""&&p.key===" ")&&(cL.includes(p.key)&&y(p),p.key===" "&&p.preventDefault())}if(n.value==="")throw new Error("A <SelectItem /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return sn(()=>{l.value&&o.itemRefCallback(l.value,n.value,n.disabled)}),AL({value:n.value,disabled:s,textId:h,isSelected:u,onItemTextChange:p=>{f.value=((f.value||(p==null?void 0:p.textContent))??"").trim()}}),(p,b)=>(N(),ae(E(c),{value:{textValue:f.value}},{default:K(()=>[z(E(St),{ref:E(a),role:"option","aria-labelledby":E(h),"data-highlighted":d.value?"":void 0,"aria-selected":u.value,"data-state":u.value?"checked":"unchecked","aria-disabled":E(s)||void 0,"data-disabled":E(s)?"":void 0,tabindex:E(s)?void 0:-1,as:p.as,"as-child":p.asChild,onFocus:b[0]||(b[0]=A=>d.value=!0),onBlur:b[1]||(b[1]=A=>d.value=!1),onPointerup:y,onPointerdown:b[2]||(b[2]=A=>{A.currentTarget.focus({preventScroll:!0})}),onTouchend:b[3]||(b[3]=Hr(()=>{},["prevent","stop"])),onPointermove:_,onPointerleave:x,onKeydown:w},{default:K(()=>[Ae(p.$slots,"default")]),_:3},8,["aria-labelledby","data-highlighted","aria-selected","data-state","aria-disabled","data-disabled","tabindex","as","as-child"])]),_:3},8,["value"]))}}),CL=fe({inheritAttrs:!1,__name:"SelectItemText",props:{asChild:{type:Boolean},as:{default:"span"}},setup(t){const e=t,n=Ui(),r=Eu(),s=SL(),{forwardRef:i,currentElement:o}=tt(),a=re(()=>{var l,c;return{value:s.value,disabled:s.disabled.value,textContent:((l=o.value)==null?void 0:l.textContent)??((c=s.value)==null?void 0:c.toString())??""}});return sn(()=>{o.value&&(s.onItemTextChange(o.value),r.itemTextRefCallback(o.value,s.value,s.disabled.value),n.onOptionAdd(a.value))}),kp(()=>{n.onOptionRemove(a.value)}),(l,c)=>(N(),ae(E(St),Be({id:E(s).textId,ref:E(i)},{...e,...l.$attrs}),{default:K(()=>[Ae(l.$slots,"default")]),_:3},16,["id"]))}}),RL=fe({__name:"SelectPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(t){const e=t;return(n,r)=>(N(),ae(E(pm),Dn(qn(e)),{default:K(()=>[Ae(n.$slots,"default")]),_:3},16))}}),TL=fe({__name:"SelectTrigger",props:{disabled:{type:Boolean},reference:{},asChild:{type:Boolean},as:{default:"button"}},setup(t){const e=t,n=Ui(),{forwardRef:r,currentElement:s}=tt(),i=re(()=>{var f;return((f=n.disabled)==null?void 0:f.value)||e.disabled});n.contentId||(n.contentId=Eo(void 0,"reka-select-content")),sn(()=>{n.onTriggerChange(s.value)});const{getItems:o}=ts(),{search:a,handleTypeaheadSearch:l,resetTypeahead:c}=gm();function u(){i.value||(n.onOpenChange(!0),c())}function d(f){u(),n.triggerPointerDownPosRef.value={x:Math.round(f.pageX),y:Math.round(f.pageY)}}return(f,h)=>(N(),ae(E(ox),{"as-child":"",reference:f.reference},{default:K(()=>{var m,y,S,_;return[z(E(St),{ref:E(r),role:"combobox",type:f.as==="button"?"button":void 0,"aria-controls":E(n).contentId,"aria-expanded":E(n).open.value||!1,"aria-required":(m=E(n).required)==null?void 0:m.value,"aria-autocomplete":"none",disabled:i.value,dir:(y=E(n))==null?void 0:y.dir.value,"data-state":(S=E(n))!=null&&S.open.value?"open":"closed","data-disabled":i.value?"":void 0,"data-placeholder":E(uL)((_=E(n).modelValue)==null?void 0:_.value)?"":void 0,"as-child":f.asChild,as:f.as,onClick:h[0]||(h[0]=x=>{var w;(w=x==null?void 0:x.currentTarget)==null||w.focus()}),onPointerdown:h[1]||(h[1]=x=>{if(x.pointerType==="touch")return x.preventDefault();const w=x.target;w.hasPointerCapture(x.pointerId)&&w.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&(d(x),x.preventDefault())}),onPointerup:h[2]||(h[2]=Hr(x=>{x.pointerType==="touch"&&d(x)},["prevent"])),onKeydown:h[3]||(h[3]=x=>{const w=E(a)!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&w&&x.key===" "||(E(l)(x.key,E(o)()),E(lL).includes(x.key)&&(u(),x.preventDefault()))})},{default:K(()=>[Ae(f.$slots,"default")]),_:3},8,["type","aria-controls","aria-expanded","aria-required","disabled","dir","data-state","data-disabled","data-placeholder","as-child","as"])]}),_:3},8,["reference"]))}}),rv=fe({__name:"SelectValue",props:{placeholder:{default:""},asChild:{type:Boolean},as:{default:"span"}},setup(t){const e=t,{forwardRef:n,currentElement:r}=tt(),s=Ui();sn(()=>{s.valueElement=r});const i=re(()=>{var u;let a=[];const l=Array.from(s.optionsSet.value),c=d=>l.find(f=>Rc(d,f.value,s.by));return Array.isArray(s.modelValue.value)?a=s.modelValue.value.map(d=>{var f;return((f=c(d))==null?void 0:f.textContent)??""}):a=[((u=c(s.modelValue.value))==null?void 0:u.textContent)??""],a.filter(Boolean)}),o=re(()=>i.value.length?i.value.join(", "):e.placeholder);return(a,l)=>(N(),ae(E(St),{ref:E(n),as:a.as,"as-child":a.asChild,style:{pointerEvents:"none"},"data-placeholder":i.value.length?void 0:e.placeholder},{default:K(()=>[Ae(a.$slots,"default",{selectedLabel:i.value,modelValue:E(s).modelValue.value},()=>[$e(xe(o.value),1)])]),_:3},8,["as","as-child","data-placeholder"]))}}),kL=fe({__name:"SelectViewport",props:{nonce:{},asChild:{type:Boolean},as:{}},setup(t){const e=t,{nonce:n}=er(e),r=U2(n),s=Eu(),i=s.position==="item-aligned"?pL():void 0,{forwardRef:o,currentElement:a}=tt();sn(()=>{s==null||s.onViewportChange(a.value)});const l=Ee(0);function c(u){const d=u.currentTarget,{shouldExpandOnScrollRef:f,contentWrapper:h}=i??{};if(f!=null&&f.value&&(h!=null&&h.value)){const m=Math.abs(l.value-d.scrollTop);if(m>0){const y=window.innerHeight-xr*2,S=Number.parseFloat(h.value.style.minHeight),_=Number.parseFloat(h.value.style.height),x=Math.max(S,_);if(x<y){const w=x+m,p=Math.min(y,w),b=w-p;h.value.style.height=`${p}px`,h.value.style.bottom==="0px"&&(d.scrollTop=b>0?b:0,h.value.style.justifyContent="flex-end")}}}l.value=d.scrollTop}return(u,d)=>(N(),_e(Je,null,[z(E(St),Be({ref:E(o),"data-reka-select-viewport":"",role:"presentation"},{...u.$attrs,...e},{style:{position:"relative",flex:1,overflow:"hidden auto"},onScroll:c}),{default:K(()=>[Ae(u.$slots,"default")]),_:3},16),z(E(St),{as:"style",nonce:E(r)},{default:K(()=>d[0]||(d[0]=[$e(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-reka-select-viewport] { scrollbar-width:none; -ms-overflow-style: none; -webkit-overflow-scrolling: touch; } [data-reka-select-viewport]::-webkit-scrollbar { display: none; } ")])),_:1},8,["nonce"])],64))}}),[$L,DL]=xn("SwitchRoot"),OL=fe({__name:"SwitchRoot",props:{defaultValue:{type:Boolean},modelValue:{type:[Boolean,null],default:void 0},disabled:{type:Boolean},id:{},value:{default:"on"},asChild:{type:Boolean},as:{default:"button"},name:{},required:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,{disabled:s}=er(n),i=oi(n,"modelValue",r,{defaultValue:n.defaultValue,passive:n.modelValue===void 0});function o(){s.value||(i.value=!i.value)}const{forwardRef:a,currentElement:l}=tt(),c=rx(l),u=re(()=>{var d;return n.id&&l.value?(d=document.querySelector(`[for="${n.id}"]`))==null?void 0:d.innerText:void 0});return DL({modelValue:i,toggleCheck:o,disabled:s}),(d,f)=>(N(),ae(E(St),Be(d.$attrs,{id:d.id,ref:E(a),role:"switch",type:d.as==="button"?"button":void 0,value:d.value,"aria-label":d.$attrs["aria-label"]||u.value,"aria-checked":E(i),"aria-required":d.required,"data-state":E(i)?"checked":"unchecked","data-disabled":E(s)?"":void 0,"as-child":d.asChild,as:d.as,disabled:E(s),onClick:o,onKeydown:Y_(Hr(o,["prevent"]),["enter"])}),{default:K(()=>[Ae(d.$slots,"default",{modelValue:E(i)}),E(c)&&d.name?(N(),ae(E(D2),{key:0,type:"checkbox",name:d.name,disabled:E(s),required:d.required,value:d.value,checked:!!E(i)},null,8,["name","disabled","required","value","checked"])):We("",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),PL=fe({__name:"SwitchThumb",props:{asChild:{type:Boolean},as:{default:"span"}},setup(t){const e=$L();return tt(),(n,r)=>{var s;return N(),ae(E(St),{"data-state":(s=E(e).modelValue)!=null&&s.value?"checked":"unchecked","data-disabled":E(e).disabled.value?"":void 0,"as-child":n.asChild,as:n.as},{default:K(()=>[Ae(n.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"])}}}),LL=fe({__name:"ToastAnnounceExclude",props:{altText:{},asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(N(),ae(E(St),{as:e.as,"as-child":e.asChild,"data-reka-toast-announce-exclude":"","data-reka-toast-announce-alt":e.altText||void 0},{default:K(()=>[Ae(e.$slots,"default")]),_:3},8,["as","as-child","data-reka-toast-announce-alt"]))}}),[Su,ML]=xn("ToastProvider"),NL=fe({inheritAttrs:!1,__name:"ToastProvider",props:{label:{default:"Notification"},duration:{default:5e3},swipeDirection:{default:"right"},swipeThreshold:{default:50}},setup(t){const e=t,{label:n,duration:r,swipeDirection:s,swipeThreshold:i}=er(e);ts({isProvider:!0});const o=Ee(),a=Ee(0),l=Ee(!1),c=Ee(!1);if(e.label&&typeof e.label=="string"&&!e.label.trim()){const u="Invalid prop `label` supplied to `ToastProvider`. Expected non-empty `string`.";throw new Error(u)}return ML({label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:a,viewport:o,onViewportChange(u){o.value=u},onToastAdd(){a.value++},onToastRemove(){a.value--},isFocusedToastEscapeKeyDownRef:l,isClosePausedRef:c}),(u,d)=>Ae(u.$slots,"default")}}),FL=fe({__name:"ToastAnnounce",setup(t){const e=Su(),n=MP(1e3),r=Ee(!1);return J1(()=>{r.value=!0}),(s,i)=>E(n)||r.value?(N(),ae(E(vu),{key:0},{default:K(()=>[$e(xe(E(e).label.value)+" ",1),Ae(s.$slots,"default")]),_:3})):We("",!0)}}),jL="toast.swipeStart",UL="toast.swipeMove",BL="toast.swipeCancel",qL="toast.swipeEnd",Ah="toast.viewportPause",Ih="toast.viewportResume";function $l(t,e,n){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),r.dispatchEvent(s)}function sv(t,e,n=0){const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n}function zL(t){return t.nodeType===t.ELEMENT_NODE}function mx(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),zL(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.rekaToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.rekaToastAnnounceAlt;o&&e.push(o)}else e.push(...mx(r))}}),e}const[VL,HL]=xn("ToastRoot"),KL=fe({inheritAttrs:!1,__name:"ToastRootImpl",props:{type:{},open:{type:Boolean,default:!1},duration:{},asChild:{type:Boolean},as:{default:"li"}},emits:["close","escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s,currentElement:i}=tt(),{CollectionItem:o}=ts(),a=Su(),l=Ee(null),c=Ee(null),u=re(()=>typeof n.duration=="number"?n.duration:a.duration.value),d=Ee(0),f=Ee(u.value),h=Ee(0),m=Ee(u.value),y=J1(()=>{const w=new Date().getTime()-d.value;m.value=Math.max(f.value-w,0)},{fpsLimit:60});function S(w){w<=0||w===Number.POSITIVE_INFINITY||es&&(window.clearTimeout(h.value),d.value=new Date().getTime(),h.value=window.setTimeout(_,w))}function _(w){var A,R;const p=(w==null?void 0:w.pointerType)==="";((A=i.value)==null?void 0:A.contains(nn()))&&p&&((R=a.viewport.value)==null||R.focus()),p&&(a.isClosePausedRef.value=!1),r("close")}const x=re(()=>i.value?mx(i.value):null);if(n.type&&!["foreground","background"].includes(n.type)){const w="Invalid prop `type` supplied to `Toast`. Expected `foreground | background`.";throw new Error(w)}return Lt(w=>{const p=a.viewport.value;if(p){const b=()=>{S(f.value),y.resume(),r("resume")},A=()=>{const R=new Date().getTime()-d.value;f.value=f.value-R,window.clearTimeout(h.value),y.pause(),r("pause")};return p.addEventListener(Ah,A),p.addEventListener(Ih,b),()=>{p.removeEventListener(Ah,A),p.removeEventListener(Ih,b)}}}),ut(()=>[n.open,u.value],()=>{f.value=u.value,n.open&&!a.isClosePausedRef.value&&S(u.value)},{immediate:!0}),am("Escape",w=>{r("escapeKeyDown",w),w.defaultPrevented||(a.isFocusedToastEscapeKeyDownRef.value=!0,_())}),sn(()=>{a.onToastAdd()}),vr(()=>{a.onToastRemove()}),HL({onClose:_}),(w,p)=>(N(),_e(Je,null,[x.value?(N(),ae(FL,{key:0,role:"alert","aria-live":w.type==="foreground"?"assertive":"polite","aria-atomic":"true"},{default:K(()=>[$e(xe(x.value),1)]),_:1},8,["aria-live"])):We("",!0),E(a).viewport.value?(N(),ae(Rp,{key:1,to:E(a).viewport.value},[z(E(o),null,{default:K(()=>[z(E(St),Be({ref:E(s),role:"alert","aria-live":"off","aria-atomic":"true",tabindex:"0"},w.$attrs,{as:w.as,"as-child":w.asChild,"data-state":w.open?"open":"closed","data-swipe-direction":E(a).swipeDirection.value,style:{userSelect:"none",touchAction:"none"},onPointerdown:p[0]||(p[0]=Hr(b=>{l.value={x:b.clientX,y:b.clientY}},["left"])),onPointermove:p[1]||(p[1]=b=>{if(!l.value)return;const A=b.clientX-l.value.x,R=b.clientY-l.value.y,I=!!c.value,T=["left","right"].includes(E(a).swipeDirection.value),D=["left","up"].includes(E(a).swipeDirection.value)?Math.min:Math.max,U=T?D(0,A):0,J=T?0:D(0,R),H=b.pointerType==="touch"?10:2,j={x:U,y:J},se={originalEvent:b,delta:j};I?(c.value=j,E($l)(E(UL),$=>r("swipeMove",$),se)):E(sv)(j,E(a).swipeDirection.value,H)?(c.value=j,E($l)(E(jL),$=>r("swipeStart",$),se),b.target.setPointerCapture(b.pointerId)):(Math.abs(A)>H||Math.abs(R)>H)&&(l.value=null)}),onPointerup:p[2]||(p[2]=b=>{const A=c.value,R=b.target;if(R.hasPointerCapture(b.pointerId)&&R.releasePointerCapture(b.pointerId),c.value=null,l.value=null,A){const I=b.currentTarget,T={originalEvent:b,delta:A};E(sv)(A,E(a).swipeDirection.value,E(a).swipeThreshold.value)?E($l)(E(qL),D=>r("swipeEnd",D),T):E($l)(E(BL),D=>r("swipeCancel",D),T),I==null||I.addEventListener("click",D=>D.preventDefault(),{once:!0})}})}),{default:K(()=>[Ae(w.$slots,"default",{remaining:m.value,duration:u.value})]),_:3},16,["as","as-child","data-state","data-swipe-direction"])]),_:3})],8,["to"])):We("",!0)],64))}}),WL=fe({__name:"ToastClose",props:{asChild:{type:Boolean},as:{default:"button"}},setup(t){const e=t,n=VL(),{forwardRef:r}=tt();return(s,i)=>(N(),ae(LL,{"as-child":""},{default:K(()=>[z(E(St),Be(e,{ref:E(r),type:s.as==="button"?"button":void 0,onClick:E(n).onClose}),{default:K(()=>[Ae(s.$slots,"default")]),_:3},16,["type","onClick"])]),_:3}))}}),GL=fe({__name:"ToastRoot",props:{defaultOpen:{type:Boolean,default:!0},forceMount:{type:Boolean},type:{default:"foreground"},open:{type:Boolean,default:void 0},duration:{},asChild:{type:Boolean},as:{default:"li"}},emits:["escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd","update:open"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s}=tt(),i=oi(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0});return(o,a)=>(N(),ae(E(rl),{present:o.forceMount||E(i)},{default:K(()=>[z(KL,Be({ref:E(s),open:E(i),type:o.type,as:o.as,"as-child":o.asChild,duration:o.duration},o.$attrs,{onClose:a[0]||(a[0]=l=>i.value=!1),onPause:a[1]||(a[1]=l=>r("pause")),onResume:a[2]||(a[2]=l=>r("resume")),onEscapeKeyDown:a[3]||(a[3]=l=>r("escapeKeyDown",l)),onSwipeStart:a[4]||(a[4]=l=>{r("swipeStart",l),l.defaultPrevented||l.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:a[5]||(a[5]=l=>{if(r("swipeMove",l),!l.defaultPrevented){const{x:c,y:u}=l.detail.delta,d=l.currentTarget;d.setAttribute("data-swipe","move"),d.style.setProperty("--reka-toast-swipe-move-x",`${c}px`),d.style.setProperty("--reka-toast-swipe-move-y",`${u}px`)}}),onSwipeCancel:a[6]||(a[6]=l=>{if(r("swipeCancel",l),!l.defaultPrevented){const c=l.currentTarget;c.setAttribute("data-swipe","cancel"),c.style.removeProperty("--reka-toast-swipe-move-x"),c.style.removeProperty("--reka-toast-swipe-move-y"),c.style.removeProperty("--reka-toast-swipe-end-x"),c.style.removeProperty("--reka-toast-swipe-end-y")}}),onSwipeEnd:a[7]||(a[7]=l=>{if(r("swipeEnd",l),!l.defaultPrevented){const{x:c,y:u}=l.detail.delta,d=l.currentTarget;d.setAttribute("data-swipe","end"),d.style.removeProperty("--reka-toast-swipe-move-x"),d.style.removeProperty("--reka-toast-swipe-move-y"),d.style.setProperty("--reka-toast-swipe-end-x",`${c}px`),d.style.setProperty("--reka-toast-swipe-end-y",`${u}px`),i.value=!1}})}),{default:K(({remaining:l,duration:c})=>[Ae(o.$slots,"default",{remaining:l,duration:c,open:E(i)})]),_:3},16,["open","type","as","as-child","duration"])]),_:3},8,["present"]))}}),JL=fe({__name:"DismissableLayerBranch",props:{asChild:{type:Boolean},as:{}},setup(t){const e=t,{forwardRef:n,currentElement:r}=tt();return sn(()=>{_r.branches.add(r.value)}),vr(()=>{_r.branches.delete(r.value)}),(s,i)=>(N(),ae(E(St),Be({ref:E(n)},e),{default:K(()=>[Ae(s.$slots,"default")]),_:3},16))}}),iv=fe({__name:"FocusProxy",emits:["focusFromOutsideViewport"],setup(t,{emit:e}){const n=e,r=Su();return(s,i)=>(N(),ae(E(vu),{"aria-hidden":"true",tabindex:"0",style:{position:"fixed"},onFocus:i[0]||(i[0]=o=>{var c;const a=o.relatedTarget;!((c=E(r).viewport.value)!=null&&c.contains(a))&&n("focusFromOutsideViewport")})},{default:K(()=>[Ae(s.$slots,"default")]),_:3}))}}),XL=fe({inheritAttrs:!1,__name:"ToastViewport",props:{hotkey:{default:()=>["F8"]},label:{type:[String,Function],default:"Notifications ({hotkey})"},asChild:{type:Boolean},as:{default:"ol"}},setup(t){const e=t,{hotkey:n,label:r}=er(e),{forwardRef:s,currentElement:i}=tt(),{CollectionSlot:o,getItems:a}=ts(),l=Su(),c=re(()=>l.toastCount.value>0),u=Ee(),d=Ee(),f=re(()=>n.value.join("+").replace(/Key/g,"").replace(/Digit/g,""));am(n.value,()=>{i.value.focus()}),sn(()=>{l.onViewportChange(i.value)}),Lt(m=>{const y=i.value;if(c.value&&y){const S=()=>{if(!l.isClosePausedRef.value){const b=new CustomEvent(Ah);y.dispatchEvent(b),l.isClosePausedRef.value=!0}},_=()=>{if(l.isClosePausedRef.value){const b=new CustomEvent(Ih);y.dispatchEvent(b),l.isClosePausedRef.value=!1}},x=b=>{!y.contains(b.relatedTarget)&&_()},w=()=>{y.contains(nn())||_()},p=b=>{var I,T,D;const A=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!A){const U=nn(),J=b.shiftKey;if(b.target===y&&J){(I=u.value)==null||I.focus();return}const se=h({tabbingDirection:J?"backwards":"forwards"}),$=se.findIndex(W=>W===U);Zl(se.slice($+1))?b.preventDefault():J?(T=u.value)==null||T.focus():(D=d.value)==null||D.focus()}};y.addEventListener("focusin",S),y.addEventListener("focusout",x),y.addEventListener("pointermove",S),y.addEventListener("pointerleave",w),y.addEventListener("keydown",p),window.addEventListener("blur",S),window.addEventListener("focus",_),m(()=>{y.removeEventListener("focusin",S),y.removeEventListener("focusout",x),y.removeEventListener("pointermove",S),y.removeEventListener("pointerleave",w),y.removeEventListener("keydown",p),window.removeEventListener("blur",S),window.removeEventListener("focus",_)})}});function h({tabbingDirection:m}){const S=a().map(_=>_.ref).map(_=>{const x=[_,...um(_)];return m==="forwards"?x:x.reverse()});return(m==="forwards"?S.reverse():S).flat()}return(m,y)=>(N(),ae(E(JL),{role:"region","aria-label":typeof E(r)=="string"?E(r).replace("{hotkey}",f.value):E(r)(f.value),tabindex:"-1",style:Is({pointerEvents:c.value?void 0:"none"})},{default:K(()=>[c.value?(N(),ae(iv,{key:0,ref:S=>{u.value=E(gr)(S)},onFocusFromOutsideViewport:y[0]||(y[0]=()=>{const S=h({tabbingDirection:"forwards"});E(Zl)(S)})},null,512)):We("",!0),z(E(o),null,{default:K(()=>[z(E(St),Be({ref:E(s),tabindex:"-1",as:m.as,"as-child":m.asChild},m.$attrs),{default:K(()=>[Ae(m.$slots,"default")]),_:3},16,["as","as-child"])]),_:3}),c.value?(N(),ae(iv,{key:1,ref:S=>{d.value=E(gr)(S)},onFocusFromOutsideViewport:y[1]||(y[1]=()=>{const S=h({tabbingDirection:"backwards"});E(Zl)(S)})},null,512)):We("",!0)]),_:3},8,["aria-label","style"]))}}),gx=fe({__name:"HeadlessButton",props:{class:{},disabled:{type:Boolean},href:{},route:{},routeParams:{},routeQuery:{},size:{},submit:{type:Boolean},variant:{},asChild:{type:Boolean},as:{}},setup(t){const e=re(()=>t.as?{as:t.as}:t.route?{as:It.resolveComponent("router-link")??"a",to:kn({name:t.route,params:t.routeParams,query:t.routeQuery})}:t.href?{as:"a",target:"_blank",href:t.href}:{as:"button",type:t.submit?"submit":"button"});return(n,r)=>(N(),ae(E(St),Be({class:t.class,"as-child":n.asChild,disabled:n.disabled},e.value),{default:K(()=>[Ae(n.$slots,"default")]),_:3},16,["class","as-child","disabled"]))}}),st=fe({__name:"Button",props:{class:{},disabled:{type:Boolean},href:{},route:{},routeParams:{},routeQuery:{},size:{},submit:{type:Boolean},variant:{},asChild:{type:Boolean},as:{}},setup(t){const e=ui(t,["class","size","variant","disabled"]),n=re(()=>g1({baseClasses:t.class,variant:t.variant,size:t.size,disabled:t.disabled},{baseClasses:"focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",variants:{variant:{default:"bg-primary-600 text-white focus-visible:outline-primary-600",secondary:"bg-background text-gray-900 ring-gray-300",danger:"bg-red-600 text-white focus-visible:outline-red-600",ghost:"bg-transparent",outline:"bg-transparent text-primary-600 ring-primary-600",link:"text-links"},size:{small:"text-xs min-h-6",default:"text-sm min-h-8",large:"text-base min-h-10",icon:"rounded-full p-2.5"},disabled:{false:null,true:"opacity-50 cursor-not-allowed"}},compoundVariants:[{variant:["default","secondary","danger","ghost","outline"],class:"flex items-center justify-center gap-1 font-medium"},{variant:["default","danger"],class:"shadow-sm"},{variant:["secondary","outline"],class:"ring-1 ring-inset"},{variant:["default","secondary","danger","ghost","outline"],size:"small",class:"rounded px-2 py-1"},{variant:["default","secondary","danger","ghost","outline"],size:"default",class:"rounded-md px-2.5 py-1.5"},{variant:["default","secondary","danger","ghost","outline"],size:"large",class:"rounded-md px-3 py-2"},{variant:"default",disabled:!1,class:"hover:bg-primary-500"},{variant:["secondary","ghost","outline"],disabled:!1,class:"hover:bg-gray-50"},{variant:"danger",disabled:!1,class:"hover:bg-red-500"},{variant:"link",disabled:!1,class:"hover:underline"},{variant:"link",size:"small",class:"leading-6"},{variant:"link",size:"default",class:"leading-8"},{variant:"link",size:"large",class:"leading-10"}],defaultVariants:{variant:"default",size:"default",disabled:!1}}));return(r,s)=>(N(),ae(gx,Be({class:n.value,disabled:r.disabled},e),{default:K(()=>[Ae(r.$slots,"default")]),_:3},16,["class","disabled"]))}});function YL(t){return typeof t=="object"&&t!==null&&"label"in t}const yx=fe({__name:"HeadlessSelectValue",setup(t){const e=dn("select","<HeadlessSelectValue> must be a child of a <HeadlessSelect>");return(n,r)=>n.$slots.default?(N(),ae(E(rv),{key:0,placeholder:E(e).placeholder},{default:K(()=>[Ae(n.$slots,"default")]),_:3},8,["placeholder"])):(N(),ae(E(rv),{key:1,placeholder:E(e).placeholder},null,8,["placeholder"]))}}),bx=fe({__name:"HeadlessSelectTrigger",setup(t){const e=dn("select","<HeadlessSelectTrigger> must be a child of a <HeadlessSelect>");return(n,r)=>(N(),ae(E(TL),{id:E(e).id},{default:K(()=>[Ae(n.$slots,"default",{},()=>[z(yx,{placeholder:E(e).placeholder},null,8,["placeholder"]),z(E(EL))])]),_:3},8,["id"]))}}),vx=fe({__name:"HeadlessSelectOption",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(t){const e=dn("select","<HeadlessSelectOption> must be a child of a <HeadlessSelect>"),n=re(()=>{var s;const r=(s=e.options)==null?void 0:s.find(i=>i.value===t.value);return r?r.label:Tt(t.value)});return(r,s)=>(N(),ae(E(IL),Dn(qn(r.$props)),{default:K(()=>[z(E(CL),null,{default:K(()=>[Ae(r.$slots,"default",{},()=>[$e(xe(n.value),1)])]),_:3})]),_:3},16))}}),wx=fe({__name:"HeadlessSelectOptions",props:{class:{},innerClass:{}},setup(t){const e=dn("select","<HeadlessSelectOptions> must be a child of a <HeadlessSelect>"),n=re(()=>kt("min-w-(--reka-select-trigger-width) max-h-(--reka-select-content-available-height)",t.class));return(r,s)=>(N(),ae(E(RL),null,{default:K(()=>[z(E(xL),{position:"popper",class:Ye(n.value),align:E(e).align,side:E(e).side,"side-offset":4},{default:K(()=>[z(E(kL),{class:Ye(r.innerClass)},{default:K(()=>[Ae(r.$slots,"default",{},()=>[(N(!0),_e(Je,null,Ln(E(e).options??[],i=>(N(),ae(vx,{key:i.key,value:i.value},null,8,["value"]))),128))])]),_:3},8,["class"])]),_:3},8,["class","align","side"])]),_:3}))}}),QL=fe({inheritAttrs:!1,__name:"HeadlessSelect",props:{as:{default:"div"},options:{},placeholder:{},renderOption:{type:Function},compareOptions:{type:Function,default:(t,e)=>t===e},labelClass:{},optionsClass:{},align:{},side:{},name:{},label:{},description:{},modelValue:{}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=n,s=qt("form",null),i=re(()=>s&&t.name?s.getFieldValue(t.name):t.modelValue),o=re(()=>i.value),a=re(()=>!s||!t.name?null:s.errors[t.name]??null),l=re(()=>t.options?t.options.map(d=>({key:$n(),label:t.renderOption?t.renderOption(d):YL(d)?fA(d.label):Tt(d),value:d})):null),c={labelClass:t.labelClass,optionsClass:t.optionsClass,align:t.align,side:t.side,value:i,id:`select-${$n()}`,name:re(()=>t.name),label:re(()=>t.label),description:re(()=>t.description),placeholder:re(()=>t.placeholder??Ne("ui.select","Select an option")),options:l,selectedOption:re(()=>{var d;return(d=l.value)==null?void 0:d.find(f=>f.value===t.modelValue)}),errors:Cs(a),required:re(()=>{if(!(!t.name||!s))return s.getFieldRules(t.name).includes("required")}),update(d){if(s&&t.name){s.setFieldValue(t.name,d);return}r("update:modelValue",d)}};function u(d){c.update(d)}return fr("select",c),e(c),(d,f)=>(N(),ae(E(hL),{"model-value":o.value,by:d.compareOptions,"onUpdate:modelValue":f[0]||(f[0]=h=>u(h))},{default:K(({open:h})=>[(N(),ae(Ts(d.as),Dn(qn(d.$attrs)),{default:K(()=>[Ae(d.$slots,"default",{modelValue:d.modelValue,open:h},()=>[z(bx),z(wx)])]),_:2},1040))]),_:3},8,["model-value","by"]))}}),ov=fe({__name:"HeadlessSelectLabel",props:{asChild:{type:Boolean},as:{}},setup(t){const e=dn("select","<HeadlessSelectLabel> must be a child of a <HeadlessSelect>"),n=Pp(),r=re(()=>!!(e.label||n.default));return(s,i)=>r.value?(N(),ae(E(aL),Be({key:0,for:E(e).id},s.$props),{default:K(()=>[Ae(s.$slots,"default",{},()=>[$e(xe(E(e).label),1)])]),_:3},16,["for"])):We("",!0)}}),_x=fe({__name:"SelectLabel",props:{class:{}},setup(t){const e=dn("select","<SelectLabel> must be a child of a <Select>"),n=re(()=>kt("block text-sm leading-6 font-medium text-gray-900",e.labelClass,t.class));return(r,s)=>r.$slots.default?(N(),ae(ov,{key:0,class:Ye(n.value)},{default:K(()=>[Ae(r.$slots,"default")]),_:3},8,["class"])):(N(),ae(ov,{key:1,class:Ye(n.value)},null,8,["class"]))}}),av=fe({__name:"SelectOption",props:{value:{},class:{},innerClass:{}},setup(t){const e=re(()=>kt("group p-1 outline-none",t.class)),n=re(()=>kt("relative flex max-w-[calc(100vw-2rem)] cursor-pointer items-center truncate rounded-md gap-2 px-2 py-1 text-sm select-none *:truncate group-data-[highlighted]:bg-gray-100 group-data-[state=checked]:font-semibold group-data-[state=unchecked]:opacity-50",t.innerClass));return(r,s)=>(N(),ae(vx,{class:Ye(e.value),value:r.value},{default:K(()=>[me("div",{class:Ye(n.value)},[Ae(r.$slots,"default")],2)]),_:3},8,["class","value"]))}}),xx=fe({__name:"SelectOptions",props:{class:{}},setup(t){const e=dn("select","<SelectOptions> must be a child of a <Select>"),n=re(()=>kt("z-50 overflow-auto rounded-lg bg-white text-base shadow-lg ring-1 ring-black/5 focus:outline-hidden",e.optionsClass,t.class));return(r,s)=>(N(),ae(wx,{class:Ye(n.value)},{default:K(()=>{var i;return[(i=E(e).options)!=null&&i.length?Ae(r.$slots,"default",{key:0},()=>{var o;return[(N(!0),_e(Je,null,Ln(((o=E(e))==null?void 0:o.options)??[],a=>(N(),ae(av,{key:a.key,value:a.value},{default:K(()=>[$e(xe(a.label),1)]),_:2},1032,["value"]))),128))]}):Ae(r.$slots,"default",{key:1},()=>[z(av,{disabled:"",value:null},{default:K(()=>[$e(xe(r.$td("ui.selectEmpty","No options available")),1)]),_:1})])]}),_:3},8,["class"]))}}),ZL={viewBox:"0 0 20 20","aria-hidden":"true",width:"1.2em",height:"1.2em"};function eM(t,e){return N(),_e("svg",ZL,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"m9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828L5.757 6.586L4.343 8z"},null,-1)]))}const tM=it({name:"zondicons-cheveron-down",render:eM}),Ex=fe({__name:"SelectTrigger",props:{class:{}},setup(t){const e=dn("select","<SelectTrigger> must be a child of a <Select>"),n=re(()=>kt("focus:outline-primary-600 data-[state=open]:outline-primary-600 grid w-full cursor-default grid-cols-1 rounded-md bg-white py-1.5 pr-2 pl-3 text-left text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus:outline-2 focus:-outline-offset-2 sm:text-sm/6",{"mt-1":e.label},t.class));return(r,s)=>(N(),ae(bx,{class:Ye(n.value)},{default:K(()=>[z(yx,{class:"col-start-1 row-start-1 truncate pr-6"}),z(E(tM),{class:"col-start-1 row-start-1 size-5 self-center justify-self-end text-gray-500 sm:size-4"})]),_:1},8,["class"]))}}),bm=fe({__name:"Select",props:{as:{},options:{},placeholder:{},renderOption:{type:Function},compareOptions:{type:Function},labelClass:{},optionsClass:{},align:{},side:{},name:{},label:{},description:{},modelValue:{}},emits:["update:modelValue"],setup(t){const{forwardRef:e}=tt();return(n,r)=>(N(),ae(QL,Be({ref:E(e)},n.$props,{"onUpdate:modelValue":r[0]||(r[0]=s=>n.$emit("update:modelValue",s))}),{default:K(()=>[z(_x),Ae(n.$slots,"default",{},()=>[z(Ex),z(xx)])]),_:3},16))}}),nM={class:"grow"},rM=fe({__name:"Language",setup(t){const e=ni.getBrowserLocale(),n=re(()=>[null,...ni.locales]);function r(s){return(s&&Sr.locales[s])??Ne("settings.localeDefault","{locale} (default)",{locale:Sr.locales[e]??e})}return(s,i)=>(N(),ae(bm,{modelValue:s.$lang.locale,"onUpdate:modelValue":i[0]||(i[0]=o=>s.$lang.locale=o),class:"flex flex-col items-start md:flex-row",as:"div",options:n.value,"render-option":r},{default:K(()=>[me("div",nM,[z(_x,{class:"text-base font-semibold"},{default:K(()=>[$e(xe(s.$td("settings.locale","Language")),1)]),_:1}),z(bt,{"lang-key":"settings.localeDescription","lang-default":"Choose the application's language.",class:"mt-1 text-sm text-gray-500"})]),z(st,{variant:"ghost",as:Ex,class:"grid w-auto outline-none"}),z(xx)]),_:1},8,["modelValue","options"]))}}),sM=[{priority:100,component:rM}],iM={$lang:ni},oM={async install(t){var e;(e=t.config.globalProperties).$t??(e.$t=el),t.config.globalProperties.$td=Ne,sM.forEach(n=>lt.addSetting(n)),await Fi(t,iM)}},aM=fe({__name:"Markdown",props:{as:{},inline:{type:Boolean},langKey:{},langParams:{},langDefault:{},text:{},actions:{}},setup(t){const e=S_(),n=Pp(),r=re(()=>n.default?n.default().map(r1).join(""):t.text??(t.langKey&&(t.langDefault?Ne(t.langKey,t.langDefault,t.langParams??{}):el(t.langKey,t.langParams??{})))),s=re(()=>{if(!r.value)return null;let a=yO(r.value);return t.inline&&(a=a.replace("<p>","<span>").replace("</p>","</span>")),a}),i=()=>Gn(t.as??(t.inline?"span":"div"),{innerHTML:s.value,onClick:o,...e,class:`${e.class??""} ${t.inline?"":"prose"}`});async function o(a){var c,u;const{target:l}=a;if(cn(l,HTMLElement)&&l.dataset.markdownAction){(u=(c=t.actions)==null?void 0:c[l.dataset.markdownAction])==null||u.call(c);return}if(cn(l,HTMLAnchorElement)&&l.dataset.markdownRoute){const d=mO();d&&(a.preventDefault(),d.visit(l.dataset.markdownRoute));return}}return(a,l)=>(N(),ae(i))}}),ks=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},bt=ks(aM,[["__scopeId","data-v-db090a3b"]]),lM={class:"flex-grow"},cM=["id"],uM=fe({__name:"Setting",props:{title:{},titleId:{},description:{},class:{},layout:{default:"horizontal"}},setup(t){const e=re(()=>kt(t.class,"flex flex-col justify-center gap-1"));return(n,r)=>(N(),_e("div",{class:Ye(["mt-4 flex",{"flex-col":n.layout==="vertical"}])},[me("div",lM,[me("h3",{id:n.titleId,class:"text-base font-semibold"},xe(n.title),9,cM),n.description?(N(),ae(bt,{key:0,text:n.description,class:"mt-1 text-sm text-gray-500"},null,8,["text"])):We("",!0)]),me("div",{class:Ye(e.value)},[Ae(n.$slots,"default")],2)],2))}}),dM=["for"],fM=fe({inheritAttrs:!1,__name:"HeadlessSwitch",props:{name:{},label:{},description:{},modelValue:{},class:{},labelClass:{},inputClass:{},thumbClass:{}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=n,s=qt("form",null),i=re(()=>!s||!t.name?null:s.errors[t.name]??null),o={id:`switch-${$n()}`,name:re(()=>t.name),label:re(()=>t.label),description:re(()=>t.description),value:re(()=>s&&t.name?s.getFieldValue(t.name):t.modelValue),errors:Cs(i),required:re(()=>{if(!(!t.name||!s))return s.getFieldRules(t.name).includes("required")}),update(a){if(s&&t.name){s.setFieldValue(t.name,a);return}r("update:modelValue",a)}};return e(o),Lt(()=>{!t.description&&!i.value||console.warn("Errors and description not implemented in <HeadlessSwitch>")}),(a,l)=>(N(),_e("div",{class:Ye(t.class)},[a.label?(N(),_e("label",{key:0,for:o.id,class:Ye(a.labelClass)},xe(a.label),11,dM)):We("",!0),z(E(OL),Be({id:o.id,name:a.name,"model-value":o.value.value},a.$attrs,{class:a.inputClass,"onUpdate:modelValue":l[0]||(l[0]=c=>a.$emit("update:modelValue",c))}),{default:K(()=>[z(E(PL),{class:Ye(a.thumbClass)},null,8,["class"])]),_:1},16,["id","name","model-value","class"])],2))}}),Sx=fe({__name:"Switch",setup(t){return(e,n)=>(N(),ae(fM,{class:"flex flex-row items-center gap-1","input-class":"disabled:opacity-50 disabled:cursor-not-allowed data-[state=checked]:bg-primary-600 data-[state=unchecked]:bg-gray-200 relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focusdisabled:opacity-50 disabled:cursor-not-allowed :ring-2 focus:ring-primary-600 focus:ring-offset-2 focus:outline-hidden","thumb-class":"data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0 pointer-events-none inline-block size-5 transform rounded-full bg-white shadow-sm ring-0 transition duration-200 ease-in-out"}))}}),hM=fe({__name:"Debug",setup(t){return(e,n)=>(N(),ae(uM,{"title-id":"debug-setting",title:e.$td("settings.debug","Debugging"),description:e.$td("settings.debugDescription","Enable debugging with [Eruda](https://eruda.liriliri.io/).")},{default:K(()=>[z(Sx,{modelValue:e.$errors.debug,"onUpdate:modelValue":n[0]||(n[0]=r=>e.$errors.debug=r),"aria-labelledby":"debug-setting"},null,8,["modelValue"])]),_:1},8,["title","description"]))}}),pM=[{priority:10,component:hM}],Ax=[];function mM(t){Ax.push(t)}function gM(t){for(const e of Ax){const n=e(t);if(n)return n}return typeof t=="string"?t:t instanceof Error||t instanceof Yn?t.message:yt(t)?Tt(t.message??t.description??"Unknown error object"):Ne("errors.unknown","Unknown Error")}class lv extends Yn{}const yM={$errors:ri},bM=t=>(ri.report(t),!0);function vM(t,e=()=>!1){const n=r=>e(r)||bM(r);t.config.errorHandler=n,globalThis.onerror=(r,s,i,o,a)=>n(a??r),globalThis.onunhandledrejection=r=>n(r.reason)}const wM={async install(t,e){vM(t,e.handleError),pM.forEach(n=>lt.addSetting(n)),await Fi(t,yM)}},_M={async install(){Ia()&&(globalThis.testingRuntime={on:(...t)=>He.on(...t),service:t=>lt.service(t)})}},xM={viewBox:"0 0 20 20","aria-hidden":"true",width:"1.2em",height:"1.2em"};function EM(t,e){return N(),_e("svg",xM,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M10 8.586L2.929 1.515L1.515 2.929L8.586 10l-7.071 7.071l1.414 1.414L10 11.414l7.071 7.071l1.414-1.414L11.414 10l7.071-7.071l-1.414-1.414z"},null,-1)]))}const Ix=it({name:"zondicons-close",render:EM}),SM=fe({__name:"HeadlessModal",props:{persistent:{type:Boolean},title:{},titleHidden:{type:Boolean},description:{},descriptionHidden:{type:Boolean}},setup(t,{expose:e}){const n=Ee(null),{modal:r}=dn("modal","could not obtain modal reference from <HeadlessModal>, did you render this component manually? Show it using $ui.modal() instead");e({close:o,$content:n});const{forwardRef:s}=tt(),i=Ee(!1);fr("$modalContentRef",n),fu("close-modal",async({id:a,result:l})=>{a===r.id&&await o(l)});async function o(a){i.value||(await He.emit("modal-will-close",{modal:r,result:a}),i.value=!0,await He.emit("modal-has-closed",{modal:r,result:a}))}return(a,l)=>(N(),ae(E(XP),{ref:E(s),open:"","onUpdate:open":l[0]||(l[0]=c=>a.persistent||o())},{default:K(()=>[z(E(eL),null,{default:K(()=>[Ae(a.$slots,"default",{close:o})]),_:3})]),_:3},512))}}),Cx=fe({__name:"ModalContext",props:{modal:{},childIndex:{}},setup(t){const e=t,n=re(()=>{const r={};for(const s in e.modal.properties)r[s]=E(e.modal.properties[s]);return r});return fr("modal",{modal:Wf(e,"modal"),childIndex:Wf(e,"childIndex")}),(r,s)=>(N(),ae(Ts(r.modal.component),Dn(qn(n.value)),null,16))}}),AM=fe({__name:"HeadlessModalContent",setup(t){const{childIndex:e=0}=dn("modal","could not obtain modal reference from <HeadlessModalContent>, did you render this component manually? Show it using $ui.modal() instead"),n=y$("$modalContentRef"),r=ci("$contentRef"),s=re(()=>It.modals[e]??null);return Lt(()=>n.value=r.value),(i,o)=>(N(),ae(E(b2),{ref:"$contentRef"},{default:K(()=>[Ae(i.$slots,"default"),s.value?(N(),ae(Cx,{key:0,"child-index":E(e)+1,modal:s.value},null,8,["child-index","modal"])):We("",!0)]),_:3},512))}}),IM=fe({__name:"HeadlessModalDescription",props:{asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(N(),ae(E(v2),Dn(qn(e.$props)),{default:K(()=>[Ae(e.$slots,"default")]),_:3},16))}}),CM=fe({__name:"HeadlessModalOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(N(),ae(E(A2),Dn(qn(e.$props)),{default:K(()=>[Ae(e.$slots,"default")]),_:3},16))}}),Rx=fe({__name:"HeadlessModalTitle",props:{asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(N(),ae(E(I2),Dn(qn(e.$props)),{default:K(()=>[Ae(e.$slots,"default")]),_:3},16))}}),RM={key:0,class:"absolute top-0 right-0 hidden pt-3.5 pr-2.5 sm:block"},TM=["onClick"],kM={class:"sr-only"},Mr=fe({__name:"Modal",props:{persistent:{type:Boolean},title:{},titleHidden:{type:Boolean},description:{},descriptionHidden:{type:Boolean},wrapperClass:{default:""},class:{default:""},closeHidden:{type:Boolean}},setup(t,{expose:e}){const n=ui(t,["class","wrapperClass","title","titleHidden","description","persistent","closeHidden"]);e({close:async d=>{var f;return(f=i.value)==null?void 0:f.close(d)},$content:re(()=>{var d;return(d=i.value)==null?void 0:d.$content})});const{forwardRef:r,currentRef:s}=tt(),i=s,o=dn("modal"),a=re(()=>!o.modal.closing&&o.childIndex===It.openModals.length),l=re(()=>t.description?{}:{"aria-describedby":void 0}),c=re(()=>kt("max-h-[90vh] overflow-auto px-4 pb-4",{"pt-4":!t.title||t.titleHidden},t.class)),u=re(()=>kt("isolate fixed top-1/2 left-1/2 z-50 w-full max-w-[calc(100%-2rem)] -translate-x-1/2 -translate-y-1/2","overflow-hidden rounded-lg bg-white text-left shadow-xl sm:max-w-lg","animate-[fade-in_var(--tw-duration)_ease-in-out,grow_var(--tw-duration)_ease-in-out]","transition-[scale,opacity] will-change-[scale,opacity] duration-300",{"scale-50 opacity-0":!a.value,"scale-100 opacity-100":a.value},t.wrapperClass));return fu("modal-will-close",async({modal:{id:d}})=>{d===o.modal.id&&await ln({ms:300})}),(d,f)=>(N(),ae(SM,Be(n,{ref:h=>E(r)(h),persistent:d.persistent}),{default:K(({close:h})=>[z(CM,{class:Ye(["fixed inset-0 animate-[fade-in_var(--tw-duration)_ease-in-out] transition-opacity duration-300 will-change-[opacity]",{"bg-black/30":E(o).childIndex===1,"opacity-0":E(o).childIndex===1&&E(o).modal.closing}])},null,8,["class"]),z(AM,Be(l.value,{class:u.value}),{default:K(()=>[!d.persistent&&!d.closeHidden?(N(),_e("div",RM,[me("button",{type:"button",class:"clickable z-10 rounded-full p-2.5 text-gray-400 hover:text-gray-500",onClick:m=>h()},[me("span",kM,xe(d.$td("ui.close","Close")),1),z(E(Ix),{class:"size-4"})],8,TM)])):We("",!0),d.title?(N(),ae(Rx,{key:1,class:Ye(["px-4 pt-5 text-base font-semibold text-gray-900",{"sr-only":d.titleHidden,"pb-0":d.description&&!d.descriptionHidden,"pb-2":!d.description||d.descriptionHidden}])},{default:K(()=>[z(bt,{text:d.title,inline:""},null,8,["text"])]),_:1},8,["class"])):We("",!0),d.description?(N(),ae(IM,{key:2,class:Ye(["px-4 pt-1 pb-2",{"sr-only":d.descriptionHidden}])},{default:K(()=>[z(bt,{text:d.description,class:"text-sm leading-6 text-gray-500"},null,8,["text"])]),_:1},8,["class"])):We("",!0),me("div",{class:Ye(c.value)},[Ae(d.$slots,"default",{close:h})],2)]),_:2},1040,["class"])]),_:3},16,["persistent"]))}});function $M(t){const e=re(()=>t.title??Ne("ui.alert","Alert")),n=re(()=>!t.title);return{renderedTitle:e,titleHidden:n}}const DM=fe({__name:"AlertModal",props:{title:{},message:{}},setup(t,{expose:e}){const n=t,{renderedTitle:r,titleHidden:s}=$M(n);return e(),(i,o)=>(N(),ae(Mr,{title:E(r),"title-hidden":E(s)},{default:K(()=>[z(bt,{text:i.message},null,8,["text"])]),_:1},8,["title","title-hidden"]))}}),ol=fe({__name:"Form",props:{form:{}},emits:["submit"],setup(t,{emit:e}){let n;const r=e;return Lt(s=>{var i;n==null||n(),n=(i=t.form)==null?void 0:i.on("submit",()=>r("submit")),s(()=>n==null?void 0:n())}),fr("form",t.form),(s,i)=>(N(),_e("form",{onSubmit:i[0]||(i[0]=Hr(o=>s.form?s.form.submit():s.$emit("submit"),["prevent"]))},[Ae(s.$slots,"default")],32))}});function OM(t){const e=Qa(Object.entries(t.checkboxes??{}).reduce((o,[a,l])=>({[a]:{type:"boolean",default:l.default,required:l.required?"required":void 0},...o}),{})),n=re(()=>t.title??Ne("ui.confirm","Confirm")),r=re(()=>!t.title),s=re(()=>t.acceptText??Ne("ui.accept","Ok")),i=re(()=>t.cancelText??Ne("ui.cancel","Cancel"));return{form:e,renderedTitle:n,titleHidden:r,renderedAcceptText:s,renderedCancelText:i}}const PM={key:0,class:"mt-4 flex flex-col text-sm text-gray-600"},LM={class:"flex items-center"},MM=["onUpdate:modelValue","required"],NM={class:"ml-1.5"},FM={class:"mt-4 flex flex-row-reverse gap-2"},jM=fe({__name:"ConfirmModal",props:{title:{},message:{},acceptText:{},acceptVariant:{},cancelText:{},cancelVariant:{default:"secondary"},checkboxes:{},actions:{},required:{type:Boolean}},setup(t,{expose:e}){const n=ui(t,["cancelVariant"]),{form:r,renderedTitle:s,titleHidden:i,renderedAcceptText:o,renderedCancelText:a}=OM(n);return e(),(l,c)=>(N(),ae(Mr,{title:E(s),"title-hidden":E(i),persistent:""},{default:K(({close:u})=>[z(ol,{form:E(r),onSubmit:d=>u([!0,E(r).data()])},{default:K(()=>[z(bt,{text:l.message,actions:l.actions},null,8,["text","actions"]),l.checkboxes?(N(),_e("ul",PM,[(N(!0),_e(Je,null,Ln(l.checkboxes,(d,f)=>(N(),_e("li",{key:f},[me("label",LM,[Cp(me("input",{"onUpdate:modelValue":h=>E(r)[f]=h,type:"checkbox",required:d.required,class:"border-primary-600 text-primary-600 hover:bg-primary-50 hover:checked:bg-primary-500 focus:ring-primary-600 focus-visible:ring-primary-600 rounded border-2"},null,8,MM),[[Hk,E(r)[f]]]),me("span",NM,xe(d.label),1)])]))),128))])):We("",!0),me("div",FM,[z(st,{variant:l.acceptVariant,submit:""},{default:K(()=>[$e(xe(E(o)),1)]),_:1},8,["variant"]),l.required?We("",!0):(N(),ae(st,{key:0,variant:l.cancelVariant,onClick:d=>u(!1)},{default:K(()=>[$e(xe(E(a)),1)]),_:2},1032,["variant","onClick"]))])]),_:2},1032,["form","onSubmit"])]),_:1},8,["title","title-hidden"]))}}),UM={viewBox:"0 0 20 20","aria-hidden":"true",width:"1.2em",height:"1.2em"};function BM(t,e){return N(),_e("svg",UM,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M7.05 9.293L6.343 10L12 15.657l1.414-1.414L9.172 10l4.242-4.243L12 4.343z"},null,-1)]))}const qM=it({name:"zondicons-cheveron-left",render:BM}),zM={viewBox:"0 0 20 20","aria-hidden":"true",width:"1.2em",height:"1.2em"};function VM(t,e){return N(),_e("svg",zM,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"m12.95 10.707l.707-.707L8 4.343L6.586 5.757L10.828 10l-4.242 4.243L8 15.657z"},null,-1)]))}const Tx=it({name:"zondicons-cheveron-right",render:VM}),HM={viewBox:"0 0 20 20","aria-hidden":"true",width:"1.2em",height:"1.2em"};function KM(t,e){return N(),_e("svg",HM,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M2.93 17.07A10 10 0 1 1 17.07 2.93A10 10 0 0 1 2.93 17.07M9 5v6h2V5zm0 8v2h2v-2z"},null,-1)]))}const vm=it({name:"zondicons-exclamation-solid",render:KM}),WM={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function GM(t,e){return N(),_e("svg",WM,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M20 19V7H4v12zm0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-7 14v-2h5v2zm-3.42-4L5.57 9H8.4l3.3 3.3c.39.39.39 1.03 0 1.42L8.42 17H5.59z"},null,-1)]))}const JM=it({name:"mdi-console",render:GM}),XM={viewBox:"0 0 20 20","aria-hidden":"true",width:"1.2em",height:"1.2em"};function YM(t,e){return N(),_e("svg",XM,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M6 6V2c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-4v4a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8c0-1.1.9-2 2-2zm2 0h4a2 2 0 0 1 2 2v4h4V2H8zM2 8v10h10V8z"},null,-1)]))}const QM=it({name:"zondicons-copy",render:YM}),ZM={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function eN(t,e){return N(),_e("svg",ZM,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"},null,-1)]))}const kx=it({name:"mdi-github",render:eN}),tN={class:"flex"},nN={class:"sr-only"},rN=fe({__name:"ErrorReportModalButtons",props:{report:{}},setup(t){const e=t,n=re(()=>e.report.description?`${e.report.title}: ${e.report.description}`:e.report.title),r=re(()=>{if(!lt.sourceUrl)return!1;const i=encodeURIComponent(n.value),o=encodeURIComponent(["[Please, explain here what you were trying to do when this error appeared]","","Error details:","```",eA(e.report.details??"Details missing from report",1800-i.length-lt.sourceUrl.length).trim(),"```"].join(`
`));return`${lt.sourceUrl}/issues/new?title=${i}&body=${o}`}),s=re(()=>je([{id:"clipboard",description:"Copy to clipboard",iconComponent:QM,async click(){await navigator.clipboard.writeText(`${n.value}

${e.report.details}`),It.toast(Ne("errors.copiedToClipboard","Debug information copied to clipboard"))}},{id:"console",description:"Log to console",iconComponent:JM,click(){const i=e.report.error??e.report;window.error=i,console.error(i),It.toast(Ne("errors.addedToConsole","You can now use the **error** variable in the console"))}}],i=>{r.value&&i.push({id:"github",description:"Report in GitHub",iconComponent:kx,url:r.value})}));return(i,o)=>(N(),_e("div",tN,[(N(!0),_e(Je,null,Ln(s.value,a=>Ae(i.$slots,"default",Be({ref_for:!0},a),()=>[z(st,{size:"icon",variant:"ghost",class:"group whitespace-nowrap",href:a.url,title:i.$td(`errors.report_${a.id}`,a.description),onClick:a.click},{default:K(()=>[me("span",nN,xe(i.$td(`errors.report_${a.id}`,a.description)),1),(N(),ae(Ts(a.iconComponent),{class:"size-4","aria-hidden":"true"}))]),_:2},1032,["href","title","onClick"])])),256))]))}}),sN=fe({__name:"ErrorReportModalTitle",props:{report:{},currentReport:{},totalReports:{}},setup(t){const e=re(()=>!t.totalReports||t.totalReports<=1?t.report.title:`${t.report.title} (${t.currentReport}/${t.totalReports})`);return(n,r)=>(N(),ae(bt,{text:e.value,inline:""},null,8,["text"]))}});function iN(t){const e=Ee(t.reports.includes(t.report)?t.reports.indexOf(t.report):0),n=re(()=>t.reports[e.value]),r=re(()=>{var o;return((o=n.value.details)==null?void 0:o.trim())||Ne("errors.detailsEmpty","This error is missing a stacktrace.")}),s=Ne("errors.previousReport","Show previous report"),i=Ne("errors.nextReport","Show next report");return{activeReportIndex:e,details:r,nextReportText:i,previousReportText:s,activeReport:n}}const oN={class:"px-4 pt-5 pb-4"},aN={class:"flex justify-between gap-4"},lN={class:"flex items-center gap-2"},cN={key:0,class:"flex gap-0.5"},uN={class:"-mt-2 max-h-[75vh] overflow-auto bg-red-800/10"},dN=["textContent"],fN=fe({__name:"ErrorReportModal",props:{report:{},reports:{}},setup(t,{expose:e}){const n=t,{activeReportIndex:r,details:s,nextReportText:i,previousReportText:o,activeReport:a}=iN(n);return e(),(l,c)=>(N(),ae(Mr,{title:l.$td("errors.report","Error report"),"title-hidden":"","close-hidden":"",class:"p-0","wrapper-class":"sm:w-auto sm:min-w-lg sm:max-w-[80vw]"},{default:K(()=>[me("div",oN,[me("h2",aN,[me("div",lN,[z(E(vm),{class:"size-5 text-red-600"}),z(sN,{class:"text-lg leading-6 font-semibold text-gray-900",report:E(a),"current-report":E(r)+1,"total-reports":l.reports.length},null,8,["report","current-report","total-reports"]),l.reports.length>1?(N(),_e("span",cN,[z(st,{size:"icon",variant:"ghost",disabled:E(r)===0,"aria-label":E(o),title:E(o),onClick:c[0]||(c[0]=u=>r.value--)},{default:K(()=>[z(E(qM),{class:"size-4"})]),_:1},8,["disabled","aria-label","title"]),z(st,{size:"icon",variant:"ghost",disabled:E(r)===l.reports.length-1,"aria-label":E(i),title:E(i),onClick:c[1]||(c[1]=u=>r.value++)},{default:K(()=>[z(E(Tx),{class:"size-4"})]),_:1},8,["disabled","aria-label","title"])])):We("",!0)]),z(rN,{report:E(a),class:"gap-0.5"},null,8,["report"])]),E(a).description?(N(),ae(bt,{key:0,text:E(a).description,class:"text-gray-600"},null,8,["text"])):We("",!0)]),me("div",uN,[me("pre",{class:"p-4 text-xs text-red-800",textContent:xe(E(s))},null,8,dN)])]),_:1},8,["title"]))}}),hN={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function pN(t,e){return N(),_e("svg",hN,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z",opacity:".25"},null,-1),me("path",{fill:"currentColor",d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z"},[me("animateTransform",{attributeName:"transform",dur:"0.75s",repeatCount:"indefinite",type:"rotate",values:"0 12 12;360 12 12"})],-1)]))}const mN=it({name:"svg-spinners-90-ring-with-bg",render:pN}),gN={class:"mt-1 h-2 w-full overflow-hidden rounded-full bg-gray-200"},yN={class:"sr-only"},$x=fe({__name:"ProgressBar",props:{filledClass:{},progress:{},job:{}},setup(t){let e;const n=Ee(0),r=re(()=>kt("size-full transition-transform duration-500 rounded-r-full ease-linear bg-primary-600",t.filledClass)),s=re(()=>typeof t.progress=="number"?t.progress:n.value);return ut(()=>t.job,()=>{e&&e(),n.value=t.job?t.job.progress:0,e=t.job&&t.job.listeners.add({onUpdated:i=>n.value=i})},{immediate:!0}),vr(()=>e&&e()),(i,o)=>(N(),_e("div",gN,[me("div",{class:Ye(r.value),style:Is(`transform:translateX(-${(1-s.value)*100}%)`)},null,6),me("span",yN,xe(i.$td("ui.progress","{progress}% complete",{progress:s.value*100})),1)]))}});function bN(t){const e=re(()=>t.title??Ne("ui.loading","Loading")),n=re(()=>t.message??Ne("ui.loadingInProgress","Loading in progress...")),r=re(()=>typeof t.progress=="number"||!!t.job),s=re(()=>!t.title);return{renderedTitle:e,renderedMessage:n,titleHidden:s,showProgress:r}}const vN=fe({__name:"LoadingModal",props:{title:{},message:{},progress:{},job:{}},setup(t,{expose:e}){const n=t,{renderedTitle:r,renderedMessage:s,titleHidden:i,showProgress:o}=bN(n);return e(),(a,l)=>(N(),ae(Mr,{persistent:"",class:Ye(["flex",{"flex-col-reverse":E(o),"items-center justify-center gap-2":!E(o)}]),"wrapper-class":"w-auto",title:E(r),"title-hidden":E(i)},{default:K(()=>[E(o)?(N(),ae($x,{key:0,progress:a.progress,job:a.job,class:"min-w-[min(400px,80vw)]"},null,8,["progress","job"])):(N(),ae(E(mN),{key:1,class:"text-primary-600 mr-1 size-6"})),z(bt,{text:E(s)},null,8,["text"])]),_:1},8,["title","title-hidden","class"]))}}),wm=fe({__name:"HeadlessInput",props:{name:{},label:{},description:{},modelValue:{},as:{default:"div"}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=n,s=qt("form",null),i=re(()=>!s||!t.name?null:s.errors[t.name]??null),o={id:`input-${$n()}`,name:re(()=>t.name),label:re(()=>t.label),description:re(()=>t.description),value:re(()=>s&&t.name?s.getFieldValue(t.name):t.modelValue),errors:Cs(i),required:re(()=>{if(!(!t.name||!s))return s.getFieldRules(t.name).includes("required")}),update(a){if(s&&t.name){s.setFieldValue(t.name,a);return}r("update:modelValue",a)}};return fr("input",o),e(o),(a,l)=>(N(),ae(Ts(a.as),null,{default:K(()=>[Ae(a.$slots,"default")]),_:3}))}}),wN=["for"],Tc=fe({__name:"HeadlessInputLabel",setup(t){const e=dn("input","<HeadlessInputLabel> must be a child of a <HeadlessInput>"),n=Pp(),r=re(()=>!!(e.label||n.default));return(s,i)=>r.value?(N(),_e("label",{key:0,for:E(e).id},[Ae(s.$slots,"default",{},()=>[$e(xe(E(e).label),1)])],8,wN)):We("",!0)}}),_N=["id","name","checked","type","required","aria-invalid","aria-describedby"],Dx=fe({__name:"HeadlessInputInput",props:{type:{}},setup(t){const e=ci("$inputRef"),n=dn("input","<HeadlessInputInput> must be a child of a <HeadlessInput>"),r=qt("form",null),s=re(()=>n.name??void 0),i=re(()=>n.value),o=re(()=>{if(t.type)return t.type;const u=(s.value&&(r==null?void 0:r.getFieldType(s.value)))??"";return["text","email","number","tel","url"].includes(u)?u:"text"}),a=re(()=>{if(t.type==="checkbox")return!!i.value});function l(){e.value&&n.update(c())}function c(){if(!e.value)return null;switch(t.type){case"checkbox":return e.value.checked;case"date":return e.value.valueAsDate;default:return e.value.value}}return y1(n,()=>{var u;return(u=e.value)==null?void 0:u.focus()}),Lt(()=>{if(e.value){if(t.type==="date"&&i.value instanceof Date){e.value.valueAsDate=i.value;return}e.value.value=i.value??null}}),(u,d)=>(N(),_e("input",{id:E(n).id,ref:"$inputRef",name:s.value,checked:a.value,type:o.value,required:E(n).required??void 0,"aria-invalid":E(n).errors?"true":"false","aria-describedby":E(n).errors?`${E(n).id}-error`:E(n).description?`${E(n).id}-description`:void 0,onInput:l},null,40,_N))}}),Ox=fe({inheritAttrs:!1,__name:"HeadlessInputDescription",setup(t){const e=dn("input","<HeadlessInputDescription> must be a child of a <HeadlessInput>"),n=re(()=>typeof e.description=="string"?e.description:""),r=re(()=>!!e.description);return(s,i)=>Ae(s.$slots,"default",{id:`${E(e).id}-description`},()=>[r.value?(N(),ae(bt,Be({key:0},s.$attrs,{id:`${E(e).id}-description`,text:n.value}),null,16,["id","text"])):We("",!0)])}}),xN=["id"],kc=fe({__name:"HeadlessInputError",setup(t){const e=dn("input","<HeadlessInputError> must be a child of a <HeadlessInput>"),n=re(()=>e.errors?Ne(`errors.${e.errors[0]}`,`Error: ${e.errors[0]}`):null);return(r,s)=>n.value?(N(),_e("p",{key:0,id:`${E(e).id}-error`},xe(n.value),9,xN)):We("",!0)}}),EN={key:0,class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},al=fe({inheritAttrs:!1,__name:"Input",props:{name:{},label:{},description:{},modelValue:{},inputClass:{},wrapperClass:{}},emits:["update:modelValue"],setup(t){const e=ui(t,["label","inputClass","wrapperClass"]),n=ci("$inputRef"),[r,s]=qp(),i=re(()=>kt("relative rounded-md shadow-2xs",{"mt-1":t.label},t.wrapperClass)),o=re(()=>{var a,l,c;return kt("block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6",{"focus:ring-primary-600":!((a=n.value)!=null&&a.errors),"text-gray-900 shadow-2xs ring-gray-900/10 placeholder:text-gray-400":!((l=n.value)!=null&&l.errors),"pr-10 text-red-900 ring-red-900/10 placeholder:text-red-300 focus:ring-red-500":(c=n.value)==null?void 0:c.errors},t.inputClass)});return(a,l)=>(N(),ae(wm,Be({ref:"$inputRef",label:a.label,class:E(s)},e,{"onUpdate:modelValue":l[0]||(l[0]=c=>a.$emit("update:modelValue",c))}),{default:K(()=>{var c;return[z(Tc,{class:"block text-sm leading-6 font-medium text-gray-900"}),me("div",{class:Ye(i.value)},[z(Dx,Be(E(r),{class:o.value}),null,16,["class"]),(c=n.value)!=null&&c.errors?(N(),_e("div",EN,[z(E(vm),{class:"size-5 text-red-500"})])):We("",!0)],2),z(Ox,{class:"mt-2 text-sm text-gray-600"}),z(kc,{class:"mt-2 text-sm text-red-600"})]}),_:1},16,["label","class"]))}});function SN(t){return{default:t,type:"boolean",rules:"required"}}function Au(t){return{default:t,type:"string",rules:"required"}}function AN(t,e={}){return{default:t,type:"string",rules:e.rules}}function IN(t){const e=Qa({draft:Au(t.defaultValue??"")}),n=re(()=>t.title??t.message),r=re(()=>t.title?t.message:null),s=re(()=>t.acceptText??Ne("ui.accept","Ok")),i=re(()=>t.cancelText??Ne("ui.cancel","Cancel"));return{form:e,renderedTitle:n,renderedMessage:r,renderedAcceptText:s,renderedCancelText:i}}const CN={class:"mt-4 flex flex-row-reverse gap-2"},RN=fe({__name:"PromptModal",props:{title:{},message:{},label:{},defaultValue:{},placeholder:{},acceptText:{},acceptVariant:{},cancelText:{},cancelVariant:{default:"secondary"}},setup(t,{expose:e}){const n=ui(t,["cancelVariant"]),{form:r,renderedTitle:s,renderedMessage:i,renderedAcceptText:o,renderedCancelText:a}=IN(n);return e(),(l,c)=>(N(),ae(Mr,{title:E(s),persistent:""},{default:K(({close:u})=>[z(ol,{form:E(r),onSubmit:d=>u(E(r).draft)},{default:K(()=>[E(i)?(N(),ae(bt,{key:0,text:E(i)},null,8,["text"])):We("",!0),z(al,{name:"draft",class:"mt-2",placeholder:l.placeholder,label:l.label},null,8,["placeholder","label"]),me("div",CN,[z(st,{variant:l.acceptVariant,submit:""},{default:K(()=>[$e(xe(E(o)),1)]),_:1},8,["variant"]),z(st,{variant:l.cancelVariant,onClick:d=>u()},{default:K(()=>[$e(xe(E(a)),1)]),_:2},1032,["variant","onClick"])])]),_:2},1032,["form","onSubmit"])]),_:1},8,["title"]))}}),TN={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function kN(t,e){return N(),_e("svg",TN,e[0]||(e[0]=[me("g",{fill:"none"},[me("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.378 4.661c1.143-2.057 4.101-2.057 5.245 0l6.6 11.882c1.111 2-.335 4.457-2.622 4.457H5.399c-2.287 0-3.733-2.457-2.622-4.457l6.6-11.882zM12 8a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V9a1 1 0 0 1 1-1zm1 9a1 1 0 1 1-2 0a1 1 0 0 1 2 0z",fill:"currentColor"})],-1)]))}const $N=it({name:"majesticons-exclamation",render:kN}),DN={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function ON(t,e){return N(),_e("svg",DN,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M12 21q-1.625 0-3.012-.8T6.8 18H4v-2h2.1q-.075-.5-.088-1T6 14H4v-2h2q0-.5.012-1t.088-1H4V8h2.8q.35-.575.788-1.075T8.6 6.05L7 4.4L8.4 3l2.15 2.15q.7-.225 1.425-.225t1.425.225L15.6 3L17 4.4l-1.65 1.65q.575.375 1.038.862T17.2 8H20v2h-2.1q.075.5.088 1T18 12h2v2h-2q0 .5-.013 1t-.087 1H20v2h-2.8q-.8 1.4-2.187 2.2T12 21m-2-5h4v-2h-4zm0-4h4v-2h-4z"},null,-1)]))}const PN=it({name:"material-symbols-bug-report",render:ON}),LN={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function MN(t,e){return N(),_e("svg",LN,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M7 21q-.825 0-1.412-.587T5 19V6q-.425 0-.712-.288T4 5t.288-.712T5 4h4q0-.425.288-.712T10 3h4q.425 0 .713.288T15 4h4q.425 0 .713.288T20 5t-.288.713T19 6v13q0 .825-.587 1.413T17 21zm5-7.1l1.9 1.9q.275.275.7.275t.7-.275t.275-.7t-.275-.7l-1.9-1.9l1.9-1.9q.275-.275.275-.7t-.275-.7t-.7-.275t-.7.275L12 11.1l-1.9-1.9q-.275-.275-.7-.275t-.7.275t-.275.7t.275.7l1.9 1.9l-1.9 1.9q-.275.275-.275.7t.275.7t.7.275t.7-.275z"},null,-1)]))}const NN=it({name:"material-symbols-delete-forever-rounded",render:MN}),FN={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function jN(t,e){return N(),_e("svg",FN,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M11.25 13.5q.95 0 1.6-.65t.65-1.6t-.65-1.6t-1.6-.65t-1.6.65t-.65 1.6t.65 1.6t1.6.65m4.825 4l-2.625-2.625q-.5.325-1.062.475t-1.138.15q-1.775 0-3.012-1.237T7 11.25t1.238-3.012T11.25 7t3.013 1.238T15.5 11.25q0 .575-.162 1.138t-.488 1.062l2.65 2.65zM5 21q-.825 0-1.412-.587T3 19v-4h2v4h4v2zm10 0v-2h4v-4h2v4q0 .825-.587 1.413T19 21zM3 9V5q0-.825.588-1.412T5 3h4v2H5v4zm16 0V5h-4V3h4q.825 0 1.413.588T21 5v4z"},null,-1)]))}const UN=it({name:"material-symbols-frame-inspect",render:jN}),BN={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function qN(t,e){return N(),_e("svg",BN,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M12 20q-3.35 0-5.675-2.325T4 12t2.325-5.675T12 4q1.725 0 3.3.712T18 6.75V5q0-.425.288-.712T19 4t.713.288T20 5v5q0 .425-.288.713T19 11h-5q-.425 0-.712-.288T13 10t.288-.712T14 9h3.2q-.8-1.4-2.187-2.2T12 6Q9.5 6 7.75 7.75T6 12t1.75 4.25T12 18q1.7 0 3.113-.862t2.187-2.313q.2-.35.563-.487t.737-.013q.4.125.575.525t-.025.75q-1.025 2-2.925 3.2T12 20"},null,-1)]))}const zN=it({name:"material-symbols-refresh-rounded",render:qN}),VN={class:"grid grow place-items-center"},HN={class:"flex flex-col items-center p-8"},KN={class:"mt-0 mb-0 text-center text-4xl font-medium text-red-600"},WN={class:"mt-4 grid grid-cols-1 gap-2 sm:grid-cols-2 [&_button]:justify-start sm:[&_button]:size-32 sm:[&_button]:flex-col sm:[&_button]:justify-center [&_svg]:size-6 sm:[&_svg]:size-8"},GN=fe({__name:"StartupCrash",setup(t){async function e(){await It.confirm(Ne("startupCrash.purgeConfirmTitle","Delete everything?"),Ne("startupCrash.purgeConfirmMessage",`If the problem persists, one drastic solution may be to wipe the storage in this device to start from scratch. However, keep in mind that **all the data that you haven't synchronized will be deleted forever**.

Do you still want to proceed?`),{acceptVariant:"danger",acceptText:Ne("startupCrash.purgeConfirmAccept","Purge device")})&&(await mu.purge(),await lt.reload())}return(n,r)=>{const s=$N;return N(),_e("div",VN,[me("div",HN,[z(s,{class:"size-20 text-red-600"}),me("h1",KN,xe(n.$td("startupCrash.title","Oops, something went wrong!")),1),z(bt,{text:n.$td("startupCrash.message","There was a problem starting the application, but here's some things you can do:"),class:"mt-4 text-center"},null,8,["text"]),me("div",WN,[z(st,{variant:"danger",onClick:r[0]||(r[0]=i=>n.$app.reload())},{default:K(()=>[z(E(zN)),$e(" "+xe(n.$td("startupCrash.reload","Try again")),1)]),_:1}),z(st,{variant:"danger",onClick:r[1]||(r[1]=i=>n.$errors.inspect(n.$errors.startupErrors))},{default:K(()=>[z(E(PN)),$e(" "+xe(n.$td("startupCrash.inspect","View error details")),1)]),_:1}),z(st,{variant:"danger",onClick:r[2]||(r[2]=i=>e())},{default:K(()=>[z(E(NN)),$e(" "+xe(n.$td("startupCrash.purge","Purge device")),1)]),_:1}),z(st,{variant:"danger",onClick:r[3]||(r[3]=i=>n.$errors.debug=!n.$errors.debug)},{default:K(()=>[z(E(UN)),$e(" "+xe(n.$td("startupCrash.debug","Toggle debugging")),1)]),_:1})])])])}}}),Px=fe({__name:"HeadlessToastAction",props:{action:{}},setup(t){return(e,n)=>(N(),ae(Ts(e.action.dismiss?E(WL):"button"),{type:"button",onClick:e.action.click},{default:K(()=>[$e(xe(e.action.label),1)]),_:1},8,["onClick"]))}}),JN={key:0},XN=fe({__name:"HeadlessToast",props:{message:{},actions:{},variant:{}},setup(t){return(e,n)=>(N(),ae(E(GL),null,{default:K(()=>[Ae(e.$slots,"default",{},()=>[e.message?(N(),_e("span",JN,xe(e.message),1)):We("",!0),(N(!0),_e(Je,null,Ln(e.actions,(r,s)=>(N(),ae(Px,{key:s,action:r},null,8,["action"]))),128))])]),_:3}))}}),YN=fe({__name:"Toast",props:{message:{},actions:{},variant:{default:"secondary"},class:{}},setup(t,{expose:e}){const n=re(()=>g1({baseClasses:t.class,variant:t.variant},{baseClasses:"flex items-center gap-2 rounded-md p-2 ring-1 shadow-lg border-gray-200",variants:{variant:{secondary:"bg-gray-900 text-white ring-black",danger:"bg-red-50 text-red-900 ring-red-100"}},defaultVariants:{variant:"secondary"}}));return e(),(r,s)=>(N(),ae(XN,{class:Ye(n.value)},{default:K(()=>[r.message?(N(),ae(bt,{key:0,text:r.message,inline:""},null,8,["text"])):We("",!0),(N(!0),_e(Je,null,Ln(r.actions,(i,o)=>(N(),ae(st,{key:o,action:i,variant:r.variant,as:Px},null,8,["action","variant"]))),128))]),_:1},8,["class"]))}}),QN={$ui:It},ZN={async install(t,e){const n={"alert-modal":DM,"confirm-modal":jM,"error-report-modal":fN,"loading-modal":vN,"prompt-modal":RN,"startup-crash":GN,toast:YN,...e.components};for(const[r,s]of Object.entries(n))It.registerComponent(r,s);await Fi(t,QN)}};async function eF(t,e={}){var r;const n=[_M,wO,wM,oM,SO,ZN,...e.plugins??[]];lt.instance=t,await p$(n,t,e),await((r=e.install)==null?void 0:r.call(e,t)),await He.emit("application-ready")}async function tF(t,e={}){var r;const n=Qk(t);ei()&&(window.$aerogel=n),await eF(n,e),n.mount("#app"),(r=n._container)==null||r.classList.remove("loading"),await He.emit("application-mounted")}const nF={key:0},rF=fe({__name:"AppModals",setup(t){const e=re(()=>It.modals[0]??null);return(n,r)=>e.value?(N(),_e("aside",nF,[z(Cx,{"child-index":1,modal:e.value},null,8,["modal"])])):We("",!0)}}),sF=fe({__name:"AppToasts",setup(t){return(e,n)=>(N(),ae(E(NL),null,{default:K(()=>[(N(!0),_e(Je,null,Ln(e.$ui.toasts,r=>(N(),ae(Ts(r.component),Be({id:r.id,key:r.id,ref_for:!0},r.properties),null,16,["id"]))),128)),z(E(XL),{class:"fixed right-0 bottom-0 z-50 flex flex-col items-end space-y-4 px-4 py-6 sm:p-6"})]),_:1}))}}),iF=fe({__name:"AppOverlays",setup(t){return(e,n)=>(N(),_e(Je,null,[z(rF),z(sF)],64))}}),oF={class:"flex min-h-full flex-col text-base leading-tight font-normal text-gray-900 antialiased"},aF=fe({__name:"AppLayout",setup(t){return(e,n)=>(N(),_e("div",oF,[e.$errors.hasStartupErrors?Ae(e.$slots,"startup-crash",{key:0},()=>[(N(),ae(Ts(e.$ui.requireComponent("startup-crash"))))]):Ae(e.$slots,"default",{key:1}),z(iF)]))}}),lF=["id","name","value","required","aria-invalid","aria-describedby"],cF=fe({__name:"HeadlessInputTextArea",setup(t){const e=ci("$textAreaRef"),n=dn("input","<HeadlessInputTextArea> must be a child of a <HeadlessInput>"),r=re(()=>n.name??void 0),s=re(()=>n.value);function i(){e.value&&n.update(e.value.value)}return y1(n,()=>{var o;return(o=e.value)==null?void 0:o.focus()}),(o,a)=>(N(),_e("textarea",{id:E(n).id,ref:"$textAreaRef",name:r.value,value:s.value,required:E(n).required??void 0,"aria-invalid":E(n).errors?"true":"false","aria-describedby":E(n).errors?`${E(n).id}-error`:E(n).description?`${E(n).id}-description`:void 0,onInput:i},null,40,lF))}}),uF={class:"group"},dF={class:"-ml-2 flex w-[max-content] items-center rounded-lg py-2 pr-3 pl-1 hover:bg-gray-100 focus-visible:outline focus-visible:outline-gray-700"},fF={class:"pt-2 pl-4"},hF=fe({__name:"AdvancedOptions",setup(t){return(e,n)=>(N(),_e("details",uF,[me("summary",dF,[z(E(Tx),{class:"size-6 transition-transform group-open:rotate-90"}),me("span",null,xe(e.$td("ui.advancedOptions","Advanced options")),1)]),me("div",fF,[Ae(e.$slots,"default")])]))}}),pF={class:"flex h-6 items-center"},xa=fe({inheritAttrs:!1,__name:"Checkbox",props:{name:{},label:{},description:{},modelValue:{},inputClass:{},labelClass:{}},emits:["update:modelValue"],setup(t){const e=ui(t,["inputClass","labelClass"]),n=ci("$inputRef"),[r,s]=qp(),i=re(()=>kt("relative flex items-start",s.value)),o=re(()=>{var l,c;return kt("size-4 rounded text-primary-600 not-checked:hover:bg-gray-200 checked:hover:text-primary-500 checked:border-0",{"border-gray-300 focus:ring-primary-600":!((l=n.value)!=null&&l.errors),"border-red-400 border-2 focus:ring-red-600":(c=n.value)==null?void 0:c.errors},t.inputClass)}),a=re(()=>kt("ml-2 text-sm leading-6",t.labelClass));return(l,c)=>(N(),ae(wm,Be({ref:"$inputRef",class:i.value},e,{"onUpdate:modelValue":c[0]||(c[0]=u=>l.$emit("update:modelValue",u))}),{default:K(()=>[me("div",pF,[z(Dx,Be(E(r),{type:"checkbox",class:o.value}),null,16,["class"])]),l.$slots.default?(N(),_e("div",{key:0,class:Ye(a.value)},[z(Tc,{class:"text-gray-900"},{default:K(()=>[Ae(l.$slots,"default")]),_:3}),z(kc,{class:"text-red-600"})],2)):l.label?(N(),_e("div",{key:1,class:Ye(a.value)},[z(Tc,{class:"text-gray-900"}),z(kc,{class:"text-red-600"})],2)):We("",!0)]),_:3},16,["class"]))}}),mF=fe({__name:"DropdownMenuOption",props:{class:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(t){const e=ui(t,["class"]),n=re(()=>kt("flex w-full items-center gap-2 rounded-lg px-2 py-2 text-sm text-gray-900 data-[highlighted]:bg-gray-100",t.class));return(r,s)=>(N(),ae(E(sL),Be({class:n.value},e,{onSelect:s[0]||(s[0]=i=>r.$emit("select"))}),{default:K(()=>[Ae(r.$slots,"default")]),_:3},16,["class"]))}}),gF=fe({__name:"DropdownMenuOptions",setup(t){const e=dn("dropdown-menu","<DropdownMenuOptions> must be a child of a <DropdownMenu>");return(n,r)=>(N(),ae(E(rL),{class:"gap-y-0.5 rounded-lg bg-white p-1.5 shadow-lg ring-1 ring-black/5",align:E(e).align,side:E(e).side},{default:K(()=>[Ae(n.$slots,"default",{},()=>[(N(!0),_e(Je,null,Ln(E(e).options,(s,i)=>(N(),ae(mF,Be({key:i,as:s.route||s.href?gx:void 0,class:s.class,ref_for:!0},s.route||s.href?{href:s.href,route:s.route,routeParams:s.routeParams,routeQuery:s.routeQuery}:{},{onSelect:o=>{var a;return(a=s.click)==null?void 0:a.call(s)}}),{default:K(()=>[$e(xe(s.label),1)]),_:2},1040,["as","class","onSelect"]))),128))])]),_:3},8,["align","side"]))}}),yF=fe({__name:"DropdownMenu",props:{align:{},side:{},options:{}},setup(t,{expose:e}){const n={align:t.align,side:t.side,options:re(()=>{var r;return(r=t.options)==null?void 0:r.filter(Boolean)})};return fr("dropdown-menu",n),e(n),(r,s)=>(N(),ae(E(nL),null,{default:K(()=>[z(E(oL),null,{default:K(()=>[Ae(r.$slots,"default")]),_:3}),z(E(iL),null,{default:K(()=>[Ae(r.$slots,"options",{},()=>[z(gF)])]),_:3})]),_:3}))}}),bF=["aria-hidden"],vF=["tabindex","aria-label","type"],wF=fe({__name:"EditableContent",props:{type:{default:"text"},contentClass:{},ariaLabel:{},formAriaHidden:{type:Boolean},tabindex:{},text:{},disabled:{type:Boolean}},emits:["update","save"],setup(t,{emit:e}){const n=e,r=ci("$inputRef"),s=Ee(null),i=Ee(t.text),o=re(()=>kt("inline whitespace-pre",t.contentClass)),a=re(()=>kt("invisible whitespace-pre",t.contentClass)),l=re(()=>kt("absolute inset-0 h-full w-full resize-none border-0 bg-transparent p-0 focus:ring-0",t.contentClass));function c(){s.value=t.text}function u(){s.value&&(t.type!=="number"&&i.value.trim().length===0&&(i.value=s.value,n("update",i.value)),s.value=null,n("save"))}return Lt(()=>i.value=t.text),(d,f)=>(N(),_e("div",{class:Ye(["relative",{"pointer-events-none!":d.disabled&&!s.value}])},[s.value?(N(),_e("span",{key:1,class:Ye(a.value)},xe(i.value),3)):(N(),_e("div",{key:0,class:Ye(o.value)},[Ae(d.$slots,"default")],2)),d.type==="number"?(N(),_e("span",{key:2,class:Ye(["inline-block transition-[width]",s.value?"w-5":"w-0"])},null,2)):We("",!0),me("form",{class:"w-full","aria-hidden":d.formAriaHidden,onSubmit:f[4]||(f[4]=Hr(h=>{var m;return(m=r.value)==null?void 0:m.blur()},["prevent"]))},[Cp(me("input",{ref:"$inputRef","onUpdate:modelValue":f[0]||(f[0]=h=>i.value=h),tabindex:d.tabindex??void 0,"aria-label":d.ariaLabel??void 0,type:d.type,class:Ye([l.value,{"opacity-0":!s.value,"appearance-textfield":!s.value&&d.type==="number"}]),onKeyup:f[1]||(f[1]=h=>d.$emit("update",i.value)),onFocus:f[2]||(f[2]=h=>c()),onBlur:f[3]||(f[3]=h=>u())},null,42,vF),[[Vk,i.value]])],40,bF)],2))}}),_F={viewBox:"0 0 512 512","aria-hidden":"true",width:"1.2em",height:"1.2em"};function xF(t,e){return N(),_e("svg",_F,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M449.07 399.08L278.64 82.58c-12.08-22.44-44.26-22.44-56.35 0L51.87 399.08A32 32 0 0 0 80 446.25h340.89a32 32 0 0 0 28.18-47.17m-198.6-1.83a20 20 0 1 1 20-20a20 20 0 0 1-20 20m21.72-201.15l-5.74 122a16 16 0 0 1-32 0l-5.74-121.95a21.73 21.73 0 0 1 21.5-22.69h.21a21.74 21.74 0 0 1 21.73 22.7Z"},null,-1)]))}const oa=it({name:"ion-warning",render:xF}),EF={viewBox:"0 0 20 20","aria-hidden":"true",width:"1.2em",height:"1.2em"};function SF(t,e){return N(),_e("svg",EF,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M.2 10a11 11 0 0 1 19.6 0A11 11 0 0 1 .2 10m9.8 4a4 4 0 1 0 0-8a4 4 0 0 0 0 8m0-2a2 2 0 1 1 0-4a2 2 0 0 1 0 4"},null,-1)]))}const AF=it({name:"zondicons-view-show",render:SF}),IF={class:"font-medium"},CF=["datetime"],RF=fe({__name:"ErrorLogsModal",setup(t){return(e,n)=>(N(),ae(Mr,{title:e.$td("errors.report","Errors ({count})",{count:e.$errors.logs.length})},{default:K(()=>[me("ol",null,[(N(!0),_e(Je,null,Ln(e.$errors.logs,(r,s)=>(N(),_e("li",{key:s,class:"mb-2 flex max-w-prose min-w-56 justify-between py-2 last:mb-0"},[me("div",null,[me("h3",IF,xe(r.report.title),1),me("time",{datetime:r.date.toISOString(),class:"text-xs text-gray-700"},xe(r.date.toLocaleTimeString()),9,CF),z(bt,{class:"text-sm text-gray-500",text:r.report.description??E(gM)(r.report)},null,8,["text"])]),z(st,{size:"icon",variant:"ghost","aria-label":e.$td("errors.viewDetails","View details"),title:e.$td("errors.viewDetails","View details"),class:"self-center",onClick:i=>e.$errors.inspect(r.report,e.$errors.logs.map(({report:o})=>o))},{default:K(()=>[z(E(AF),{class:"size-4","aria-hidden":"true"})]),_:2},1032,["aria-label","title","onClick"])]))),128))])]),_:1},8,["title"]))}}),TF=fe({__name:"ErrorLogs",setup(t){return(e,n)=>e.$errors.logs.length>0?(N(),ae(st,{key:0,size:"icon",variant:"ghost",title:e.$td("errors.viewLogs","View error logs"),"aria-label":e.$td("errors.viewLogs","View error logs"),onClick:n[0]||(n[0]=r=>e.$ui.modal(RF))},{default:K(()=>[z(E(oa),{class:"size-6 text-red-500"})]),_:1},8,["title","aria-label"])):We("",!0)}}),So=fe({__name:"Link",props:{class:{},disabled:{type:Boolean},href:{},route:{},routeParams:{},routeQuery:{},size:{},submit:{type:Boolean},asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(N(),ae(st,Be({variant:"link"},e.$props),{default:K(()=>[Ae(e.$slots,"default")]),_:3},16))}}),Lx=fe({__name:"SettingsModal",setup(t){const e=re(()=>la(lt.settings,"priority","desc"));return(n,r)=>(N(),ae(Mr,{title:n.$td("settings.title","Settings")},{default:K(()=>[(N(!0),_e(Je,null,Ln(e.value,(s,i)=>(N(),ae(Ts(s.component),{key:i}))),128))]),_:1},8,["title"]))}}),kF={key:0,class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},$F=fe({inheritAttrs:!1,__name:"TextArea",props:{name:{},label:{},description:{},modelValue:{},inputClass:{},wrapperClass:{}},emits:["update:modelValue"],setup(t){const e=ui(t,["label","inputClass","wrapperClass"]),n=ci("$inputRef"),[r,s]=qp(),i=re(()=>kt("relative rounded-md shadow-2xs",{"mt-1":t.label},t.wrapperClass)),o=re(()=>{var a,l,c;return kt("block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6",{"focus:ring-primary-600":!((a=n.value)!=null&&a.errors),"text-gray-900 shadow-2xs ring-gray-900/10 placeholder:text-gray-400":!((l=n.value)!=null&&l.errors),"pr-10 text-red-900 ring-red-900/10 placeholder:text-red-300 focus:ring-red-500":(c=n.value)==null?void 0:c.errors},t.inputClass)});return(a,l)=>(N(),ae(wm,Be({ref:"$inputRef",label:a.label,class:E(s)},e,{"onUpdate:modelValue":l[0]||(l[0]=c=>a.$emit("update:modelValue",c))}),{default:K(()=>{var c;return[z(Tc,{class:"block text-sm leading-6 font-medium text-gray-900"}),me("div",{class:Ye(i.value)},[z(cF,Be(E(r),{class:o.value}),null,16,["class"]),(c=n.value)!=null&&c.errors?(N(),_e("div",kF,[z(E(vm),{class:"size-5 text-red-500"})])):We("",!0)],2),z(Ox,{class:"mt-2 text-sm text-gray-600"}),z(kc,{class:"mt-2 text-sm text-red-600"})]}),_:1},16,["label","class"]))}});class _m{constructor(){Se(this,"status");Se(this,"_listeners");Se(this,"_progress");Se(this,"_cancelled");Se(this,"_started");Se(this,"_completed");this.status=this.getInitialStatus(),this._listeners=new bw,this._started=new Ir,this._completed=new Ir}async start(){this.beforeStart(),this._started.resolve();try{await this.updateProgress(),await this.run(),await this.updateProgress(),this._completed.resolve()}catch(e){if(e instanceof lv)return;throw je(wS(e),n=>{this._completed.reject(n)})}}async cancel(){this._cancelled=new Ir,await this._cancelled}serialize(){return this.serializeStatus(this.status)}get listeners(){return this._listeners}get progress(){return this._progress??0}get cancelled(){var e;return!!((e=this._cancelled)!=null&&e.isResolved())}get started(){return this._started}get completed(){return this._completed}getInitialStatus(){return{completed:!1}}beforeStart(){if(this._started.isResolved()){if(this._cancelled){delete this._progress,delete this._cancelled;return}throw new Error("Job already started!")}}assertNotCancelled(){if(this._cancelled)throw this._cancelled.resolve(),new lv}calculateCurrentProgress(e){return e??(e=this.status),e.completed?1:e.children?Cw(e.children.reduce((n,r)=>n+this.calculateCurrentProgress(r),0)/e.children.length,2):0}async updateProgress(e){await(e==null?void 0:e(this.status));const n=this.calculateCurrentProgress();n!==this._progress&&(this._progress=n,await this._listeners.emit("onUpdated",n))}serializeStatus(e){return{...e}}}async function ff(t){await t.start()}class DF{constructor(e,n){this.i18n=e,this.messages=n,this.messages.addListener((r,s)=>this.i18n.setLocaleMessage(r,s))}getLocale(){return this.i18n.locale.value}async setLocale(e){await this.messages.loadLocale(e),this.i18n.locale.value=e}getFallbackLocale(){const e=this.i18n.fallbackLocale.value;return typeof e!="string"?"":e}async setFallbackLocale(e){await this.messages.loadLocale(e),this.i18n.fallbackLocale.value=e}getLocales(){return this.messages.getLocales()}translate(e,n){return this.i18n.t(e,n??{})}translateWithDefault(e,n,r){const s=this.i18n.t(e,r??{},{missingWarn:!1});return s===e?this.replaceParameters(n,r):s}replaceParameters(e,n={}){if(typeof n=="number"){const r=e.split("|").map(i=>i.trim()),s=r[n]??r[2]??e;return this.replaceParameters(s,{n})}return Object.entries(n).reduce((r,[s,i])=>r.replace(new RegExp(`\\{.*${s}[^}]*\\}`),Tt(i)),e)}}class OF{constructor(e){Se(this,"listeners",[]);Se(this,"messages",{});Se(this,"loaders");this.loaders=Object.entries(e).reduce((n,[r,s])=>{var o;const i=(o=Tw(r,/.*\/lang\/(.+)\.yaml/))==null?void 0:o[1];return i&&(n[i]=()=>s().then(({default:a})=>a)),n},{})}getMessages(){return Object.assign({},this.messages)}getLocales(){return Object.keys(this.loaders)}addListener(e){this.listeners.push(e)}async loadLocale(e){if(e in this.messages)return this.messages[e];const r=await(this.loaders[e]??Xe(`Couldn't load messages for '${e}' locale`))();return this.messages[e]=r,this.listeners.forEach(s=>s(e,r)),r}}/*!
  * shared v11.1.4
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const $c=typeof window<"u",hi=(t,e=!1)=>e?Symbol.for(t):Symbol(t),PF=(t,e,n)=>LF({l:t,k:e,s:n}),LF=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Ht=t=>typeof t=="number"&&isFinite(t),MF=t=>Em(t)==="[object Date]",Dc=t=>Em(t)==="[object RegExp]",Iu=t=>ot(t)&&Object.keys(t).length===0,rn=Object.assign,NF=Object.create,Et=(t=null)=>NF(t);let cv;const xm=()=>cv||(cv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:Et());function uv(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const FF=Object.prototype.hasOwnProperty;function Ar(t,e){return FF.call(t,e)}const Bt=Array.isArray,Mt=t=>typeof t=="function",Me=t=>typeof t=="string",Nt=t=>typeof t=="boolean",ct=t=>t!==null&&typeof t=="object",jF=t=>ct(t)&&Mt(t.then)&&Mt(t.catch),Mx=Object.prototype.toString,Em=t=>Mx.call(t),ot=t=>Em(t)==="[object Object]",UF=t=>t==null?"":Bt(t)||ot(t)&&t.toString===Mx?JSON.stringify(t,null,2):String(t);function Sm(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}function BF(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const Dl=t=>!ct(t)||Bt(t);function ec(t,e){if(Dl(t)||Dl(e))throw new Error("Invalid value");const n=[{src:t,des:e}];for(;n.length;){const{src:r,des:s}=n.pop();Object.keys(r).forEach(i=>{i!=="__proto__"&&(ct(r[i])&&!ct(s[i])&&(s[i]=Array.isArray(r[i])?[]:Et()),Dl(s[i])||Dl(r[i])?s[i]=r[i]:n.push({src:r[i],des:s[i]}))})}}/*!
  * message-compiler v11.1.4
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function qF(t,e,n){return{line:t,column:e,offset:n}}function Ch(t,e,n){return{start:t,end:e}}const gt={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14},zF=17;function Cu(t,e,n={}){const{domain:r,messages:s,args:i}=n,o=t,a=new SyntaxError(String(o));return a.code=t,e&&(a.location=e),a.domain=r,a}function VF(t){throw t}const os=" ",HF="\r",An=`
`,KF="\u2028",WF="\u2029";function GF(t){const e=t;let n=0,r=1,s=1,i=0;const o=R=>e[R]===HF&&e[R+1]===An,a=R=>e[R]===An,l=R=>e[R]===WF,c=R=>e[R]===KF,u=R=>o(R)||a(R)||l(R)||c(R),d=()=>n,f=()=>r,h=()=>s,m=()=>i,y=R=>o(R)||l(R)||c(R)?An:e[R],S=()=>y(n),_=()=>y(n+i);function x(){return i=0,u(n)&&(r++,s=0),o(n)&&n++,n++,s++,e[n]}function w(){return o(n+i)&&i++,i++,e[n+i]}function p(){n=0,r=1,s=1,i=0}function b(R=0){i=R}function A(){const R=n+i;for(;R!==n;)x();i=0}return{index:d,line:f,column:h,peekOffset:m,charAt:y,currentChar:S,currentPeek:_,next:x,peek:w,reset:p,resetPeek:b,skipToPeek:A}}const Ds=void 0,JF=".",dv="'",XF="tokenizer";function YF(t,e={}){const n=e.location!==!1,r=GF(t),s=()=>r.index(),i=()=>qF(r.line(),r.column(),r.index()),o=i(),a=s(),l={currentType:13,offset:a,startLoc:o,endLoc:o,lastType:13,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:u}=e;function d(M,F,te,...ue){const Re=c();if(F.column+=te,F.offset+=te,u){const we=n?Ch(Re.startLoc,F):null,ee=Cu(M,we,{domain:XF,args:ue});u(ee)}}function f(M,F,te){M.endLoc=i(),M.currentType=F;const ue={type:F};return n&&(ue.loc=Ch(M.startLoc,M.endLoc)),te!=null&&(ue.value=te),ue}const h=M=>f(M,13);function m(M,F){return M.currentChar()===F?(M.next(),F):(d(gt.EXPECTED_TOKEN,i(),0,F),"")}function y(M){let F="";for(;M.currentPeek()===os||M.currentPeek()===An;)F+=M.currentPeek(),M.peek();return F}function S(M){const F=y(M);return M.skipToPeek(),F}function _(M){if(M===Ds)return!1;const F=M.charCodeAt(0);return F>=97&&F<=122||F>=65&&F<=90||F===95}function x(M){if(M===Ds)return!1;const F=M.charCodeAt(0);return F>=48&&F<=57}function w(M,F){const{currentType:te}=F;if(te!==2)return!1;y(M);const ue=_(M.currentPeek());return M.resetPeek(),ue}function p(M,F){const{currentType:te}=F;if(te!==2)return!1;y(M);const ue=M.currentPeek()==="-"?M.peek():M.currentPeek(),Re=x(ue);return M.resetPeek(),Re}function b(M,F){const{currentType:te}=F;if(te!==2)return!1;y(M);const ue=M.currentPeek()===dv;return M.resetPeek(),ue}function A(M,F){const{currentType:te}=F;if(te!==7)return!1;y(M);const ue=M.currentPeek()===".";return M.resetPeek(),ue}function R(M,F){const{currentType:te}=F;if(te!==8)return!1;y(M);const ue=_(M.currentPeek());return M.resetPeek(),ue}function I(M,F){const{currentType:te}=F;if(!(te===7||te===11))return!1;y(M);const ue=M.currentPeek()===":";return M.resetPeek(),ue}function T(M,F){const{currentType:te}=F;if(te!==9)return!1;const ue=()=>{const we=M.currentPeek();return we==="{"?_(M.peek()):we==="@"||we==="|"||we===":"||we==="."||we===os||!we?!1:we===An?(M.peek(),ue()):U(M,!1)},Re=ue();return M.resetPeek(),Re}function D(M){y(M);const F=M.currentPeek()==="|";return M.resetPeek(),F}function U(M,F=!0){const te=(Re=!1,we="")=>{const ee=M.currentPeek();return ee==="{"||ee==="@"||!ee?Re:ee==="|"?!(we===os||we===An):ee===os?(M.peek(),te(!0,os)):ee===An?(M.peek(),te(!0,An)):!0},ue=te();return F&&M.resetPeek(),ue}function J(M,F){const te=M.currentChar();return te===Ds?Ds:F(te)?(M.next(),te):null}function H(M){const F=M.charCodeAt(0);return F>=97&&F<=122||F>=65&&F<=90||F>=48&&F<=57||F===95||F===36}function j(M){return J(M,H)}function se(M){const F=M.charCodeAt(0);return F>=97&&F<=122||F>=65&&F<=90||F>=48&&F<=57||F===95||F===36||F===45}function $(M){return J(M,se)}function W(M){const F=M.charCodeAt(0);return F>=48&&F<=57}function B(M){return J(M,W)}function oe(M){const F=M.charCodeAt(0);return F>=48&&F<=57||F>=65&&F<=70||F>=97&&F<=102}function q(M){return J(M,oe)}function le(M){let F="",te="";for(;F=B(M);)te+=F;return te}function de(M){let F="";for(;;){const te=M.currentChar();if(te==="{"||te==="}"||te==="@"||te==="|"||!te)break;if(te===os||te===An)if(U(M))F+=te,M.next();else{if(D(M))break;F+=te,M.next()}else F+=te,M.next()}return F}function ye(M){S(M);let F="",te="";for(;F=$(M);)te+=F;return M.currentChar()===Ds&&d(gt.UNTERMINATED_CLOSING_BRACE,i(),0),te}function Ce(M){S(M);let F="";return M.currentChar()==="-"?(M.next(),F+=`-${le(M)}`):F+=le(M),M.currentChar()===Ds&&d(gt.UNTERMINATED_CLOSING_BRACE,i(),0),F}function X(M){return M!==dv&&M!==An}function G(M){S(M),m(M,"'");let F="",te="";for(;F=J(M,X);)F==="\\"?te+=O(M):te+=F;const ue=M.currentChar();return ue===An||ue===Ds?(d(gt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),ue===An&&(M.next(),m(M,"'")),te):(m(M,"'"),te)}function O(M){const F=M.currentChar();switch(F){case"\\":case"'":return M.next(),`\\${F}`;case"u":return Q(M,F,4);case"U":return Q(M,F,6);default:return d(gt.UNKNOWN_ESCAPE_SEQUENCE,i(),0,F),""}}function Q(M,F,te){m(M,F);let ue="";for(let Re=0;Re<te;Re++){const we=q(M);if(!we){d(gt.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${F}${ue}${M.currentChar()}`);break}ue+=we}return`\\${F}${ue}`}function ie(M){return M!=="{"&&M!=="}"&&M!==os&&M!==An}function ne(M){S(M);let F="",te="";for(;F=J(M,ie);)te+=F;return te}function Ie(M){let F="",te="";for(;F=j(M);)te+=F;return te}function P(M){const F=te=>{const ue=M.currentChar();return ue==="{"||ue==="@"||ue==="|"||ue==="("||ue===")"||!ue||ue===os?te:(te+=ue,M.next(),F(te))};return F("")}function k(M){S(M);const F=m(M,"|");return S(M),F}function V(M,F){let te=null;switch(M.currentChar()){case"{":return F.braceNest>=1&&d(gt.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),M.next(),te=f(F,2,"{"),S(M),F.braceNest++,te;case"}":return F.braceNest>0&&F.currentType===2&&d(gt.EMPTY_PLACEHOLDER,i(),0),M.next(),te=f(F,3,"}"),F.braceNest--,F.braceNest>0&&S(M),F.inLinked&&F.braceNest===0&&(F.inLinked=!1),te;case"@":return F.braceNest>0&&d(gt.UNTERMINATED_CLOSING_BRACE,i(),0),te=pe(M,F)||h(F),F.braceNest=0,te;default:{let Re=!0,we=!0,ee=!0;if(D(M))return F.braceNest>0&&d(gt.UNTERMINATED_CLOSING_BRACE,i(),0),te=f(F,1,k(M)),F.braceNest=0,F.inLinked=!1,te;if(F.braceNest>0&&(F.currentType===4||F.currentType===5||F.currentType===6))return d(gt.UNTERMINATED_CLOSING_BRACE,i(),0),F.braceNest=0,be(M,F);if(Re=w(M,F))return te=f(F,4,ye(M)),S(M),te;if(we=p(M,F))return te=f(F,5,Ce(M)),S(M),te;if(ee=b(M,F))return te=f(F,6,G(M)),S(M),te;if(!Re&&!we&&!ee)return te=f(F,12,ne(M)),d(gt.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,te.value),S(M),te;break}}return te}function pe(M,F){const{currentType:te}=F;let ue=null;const Re=M.currentChar();switch((te===7||te===8||te===11||te===9)&&(Re===An||Re===os)&&d(gt.INVALID_LINKED_FORMAT,i(),0),Re){case"@":return M.next(),ue=f(F,7,"@"),F.inLinked=!0,ue;case".":return S(M),M.next(),f(F,8,".");case":":return S(M),M.next(),f(F,9,":");default:return D(M)?(ue=f(F,1,k(M)),F.braceNest=0,F.inLinked=!1,ue):A(M,F)||I(M,F)?(S(M),pe(M,F)):R(M,F)?(S(M),f(F,11,Ie(M))):T(M,F)?(S(M),Re==="{"?V(M,F)||ue:f(F,10,P(M))):(te===7&&d(gt.INVALID_LINKED_FORMAT,i(),0),F.braceNest=0,F.inLinked=!1,be(M,F))}}function be(M,F){let te={type:13};if(F.braceNest>0)return V(M,F)||h(F);if(F.inLinked)return pe(M,F)||h(F);switch(M.currentChar()){case"{":return V(M,F)||h(F);case"}":return d(gt.UNBALANCED_CLOSING_BRACE,i(),0),M.next(),f(F,3,"}");case"@":return pe(M,F)||h(F);default:{if(D(M))return te=f(F,1,k(M)),F.braceNest=0,F.inLinked=!1,te;if(U(M))return f(F,0,de(M));break}}return te}function ge(){const{currentType:M,offset:F,startLoc:te,endLoc:ue}=l;return l.lastType=M,l.lastOffset=F,l.lastStartLoc=te,l.lastEndLoc=ue,l.offset=s(),l.startLoc=i(),r.currentChar()===Ds?f(l,13):be(r,l)}return{nextToken:ge,currentOffset:s,currentPosition:i,context:c}}const QF="parser",ZF=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function e3(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):"�"}}}function t3(t={}){const e=t.location!==!1,{onError:n}=t;function r(_,x,w,p,...b){const A=_.currentPosition();if(A.offset+=p,A.column+=p,n){const R=e?Ch(w,A):null,I=Cu(x,R,{domain:QF,args:b});n(I)}}function s(_,x,w){const p={type:_};return e&&(p.start=x,p.end=x,p.loc={start:w,end:w}),p}function i(_,x,w,p){e&&(_.end=x,_.loc&&(_.loc.end=w))}function o(_,x){const w=_.context(),p=s(3,w.offset,w.startLoc);return p.value=x,i(p,_.currentOffset(),_.currentPosition()),p}function a(_,x){const w=_.context(),{lastOffset:p,lastStartLoc:b}=w,A=s(5,p,b);return A.index=parseInt(x,10),_.nextToken(),i(A,_.currentOffset(),_.currentPosition()),A}function l(_,x){const w=_.context(),{lastOffset:p,lastStartLoc:b}=w,A=s(4,p,b);return A.key=x,_.nextToken(),i(A,_.currentOffset(),_.currentPosition()),A}function c(_,x){const w=_.context(),{lastOffset:p,lastStartLoc:b}=w,A=s(9,p,b);return A.value=x.replace(ZF,e3),_.nextToken(),i(A,_.currentOffset(),_.currentPosition()),A}function u(_){const x=_.nextToken(),w=_.context(),{lastOffset:p,lastStartLoc:b}=w,A=s(8,p,b);return x.type!==11?(r(_,gt.UNEXPECTED_EMPTY_LINKED_MODIFIER,w.lastStartLoc,0),A.value="",i(A,p,b),{nextConsumeToken:x,node:A}):(x.value==null&&r(_,gt.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,jr(x)),A.value=x.value||"",i(A,_.currentOffset(),_.currentPosition()),{node:A})}function d(_,x){const w=_.context(),p=s(7,w.offset,w.startLoc);return p.value=x,i(p,_.currentOffset(),_.currentPosition()),p}function f(_){const x=_.context(),w=s(6,x.offset,x.startLoc);let p=_.nextToken();if(p.type===8){const b=u(_);w.modifier=b.node,p=b.nextConsumeToken||_.nextToken()}switch(p.type!==9&&r(_,gt.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,jr(p)),p=_.nextToken(),p.type===2&&(p=_.nextToken()),p.type){case 10:p.value==null&&r(_,gt.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,jr(p)),w.key=d(_,p.value||"");break;case 4:p.value==null&&r(_,gt.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,jr(p)),w.key=l(_,p.value||"");break;case 5:p.value==null&&r(_,gt.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,jr(p)),w.key=a(_,p.value||"");break;case 6:p.value==null&&r(_,gt.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,jr(p)),w.key=c(_,p.value||"");break;default:{r(_,gt.UNEXPECTED_EMPTY_LINKED_KEY,x.lastStartLoc,0);const b=_.context(),A=s(7,b.offset,b.startLoc);return A.value="",i(A,b.offset,b.startLoc),w.key=A,i(w,b.offset,b.startLoc),{nextConsumeToken:p,node:w}}}return i(w,_.currentOffset(),_.currentPosition()),{node:w}}function h(_){const x=_.context(),w=x.currentType===1?_.currentOffset():x.offset,p=x.currentType===1?x.endLoc:x.startLoc,b=s(2,w,p);b.items=[];let A=null;do{const T=A||_.nextToken();switch(A=null,T.type){case 0:T.value==null&&r(_,gt.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,jr(T)),b.items.push(o(_,T.value||""));break;case 5:T.value==null&&r(_,gt.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,jr(T)),b.items.push(a(_,T.value||""));break;case 4:T.value==null&&r(_,gt.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,jr(T)),b.items.push(l(_,T.value||""));break;case 6:T.value==null&&r(_,gt.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,jr(T)),b.items.push(c(_,T.value||""));break;case 7:{const D=f(_);b.items.push(D.node),A=D.nextConsumeToken||null;break}}}while(x.currentType!==13&&x.currentType!==1);const R=x.currentType===1?x.lastOffset:_.currentOffset(),I=x.currentType===1?x.lastEndLoc:_.currentPosition();return i(b,R,I),b}function m(_,x,w,p){const b=_.context();let A=p.items.length===0;const R=s(1,x,w);R.cases=[],R.cases.push(p);do{const I=h(_);A||(A=I.items.length===0),R.cases.push(I)}while(b.currentType!==13);return A&&r(_,gt.MUST_HAVE_MESSAGES_IN_PLURAL,w,0),i(R,_.currentOffset(),_.currentPosition()),R}function y(_){const x=_.context(),{offset:w,startLoc:p}=x,b=h(_);return x.currentType===13?b:m(_,w,p,b)}function S(_){const x=YF(_,rn({},t)),w=x.context(),p=s(0,w.offset,w.startLoc);return e&&p.loc&&(p.loc.source=_),p.body=y(x),t.onCacheKey&&(p.cacheKey=t.onCacheKey(_)),w.currentType!==13&&r(x,gt.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,_[w.offset]||""),i(p,x.currentOffset(),x.currentPosition()),p}return{parse:S}}function jr(t){if(t.type===13)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function n3(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:i=>(n.helpers.add(i),i)}}function fv(t,e){for(let n=0;n<t.length;n++)Am(t[n],e)}function Am(t,e){switch(t.type){case 1:fv(t.cases,e),e.helper("plural");break;case 2:fv(t.items,e);break;case 6:{Am(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function r3(t,e={}){const n=n3(t);n.helper("normalize"),t.body&&Am(t.body,n);const r=n.context();t.helpers=Array.from(r.helpers)}function s3(t){const e=t.body;return e.type===2?hv(e):e.cases.forEach(n=>hv(n)),t}function hv(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const r=t.items[n];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===t.items.length){t.static=Sm(e);for(let n=0;n<t.items.length;n++){const r=t.items[n];(r.type===3||r.type===9)&&delete r.value}}}}function Zi(t){switch(t.t=t.type,t.type){case 0:{const e=t;Zi(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,n=e.cases;for(let r=0;r<n.length;r++)Zi(n[r]);e.c=n,delete e.cases;break}case 2:{const e=t,n=e.items;for(let r=0;r<n.length;r++)Zi(n[r]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;Zi(e.key),e.k=e.key,delete e.key,e.modifier&&(Zi(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}}delete t.type}function i3(t,e){const{filename:n,breakLineCode:r,needIndent:s}=e,i=e.location!==!1,o={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:s,indentLevel:0};i&&t.loc&&(o.source=t.loc.source);const a=()=>o;function l(y,S){o.code+=y}function c(y,S=!0){const _=S?r:"";l(s?_+"  ".repeat(y):_)}function u(y=!0){const S=++o.indentLevel;y&&c(S)}function d(y=!0){const S=--o.indentLevel;y&&c(S)}function f(){c(o.indentLevel)}return{context:a,push:l,indent:u,deindent:d,newline:f,helper:y=>`_${y}`,needIndent:()=>o.needIndent}}function o3(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),Ao(t,e.key),e.modifier?(t.push(", "),Ao(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function a3(t,e){const{helper:n,needIndent:r}=t;t.push(`${n("normalize")}([`),t.indent(r());const s=e.items.length;for(let i=0;i<s&&(Ao(t,e.items[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}function l3(t,e){const{helper:n,needIndent:r}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(r());const s=e.cases.length;for(let i=0;i<s&&(Ao(t,e.cases[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}}function c3(t,e){e.body?Ao(t,e.body):t.push("null")}function Ao(t,e){const{helper:n}=t;switch(e.type){case 0:c3(t,e);break;case 1:l3(t,e);break;case 2:a3(t,e);break;case 6:o3(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break}}const u3=(t,e={})=>{const n=Me(e.mode)?e.mode:"normal",r=Me(e.filename)?e.filename:"message.intl";e.sourceMap;const s=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,i=e.needIndent?e.needIndent:n!=="arrow",o=t.helpers||[],a=i3(t,{filename:r,breakLineCode:s,needIndent:i});a.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),a.indent(i),o.length>0&&(a.push(`const { ${Sm(o.map(u=>`${u}: _${u}`),", ")} } = ctx`),a.newline()),a.push("return "),Ao(a,t),a.deindent(i),a.push("}"),delete t.helpers;const{code:l,map:c}=a.context();return{ast:t,code:l,map:c?c.toJSON():void 0}};function d3(t,e={}){const n=rn({},e),r=!!n.jit,s=!!n.minify,i=n.optimize==null?!0:n.optimize,a=t3(n).parse(t);return r?(i&&s3(a),s&&Zi(a),{ast:a,code:""}):(r3(a,n),u3(a,n))}/*!
  * core-base v11.1.4
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function f3(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(xm().__INTLIFY_PROD_DEVTOOLS__=!1)}function Wr(t){return ct(t)&&Im(t)===0&&(Ar(t,"b")||Ar(t,"body"))}const Nx=["b","body"];function h3(t){return pi(t,Nx)}const Fx=["c","cases"];function p3(t){return pi(t,Fx,[])}const jx=["s","static"];function m3(t){return pi(t,jx)}const Ux=["i","items"];function g3(t){return pi(t,Ux,[])}const Bx=["t","type"];function Im(t){return pi(t,Bx)}const qx=["v","value"];function Ol(t,e){const n=pi(t,qx);if(n!=null)return n;throw Ma(e)}const zx=["m","modifier"];function y3(t){return pi(t,zx)}const Vx=["k","key"];function b3(t){const e=pi(t,Vx);if(e)return e;throw Ma(6)}function pi(t,e,n){for(let r=0;r<e.length;r++){const s=e[r];if(Ar(t,s)&&t[s]!=null)return t[s]}return n}const Hx=[...Nx,...Fx,...jx,...Ux,...Vx,...zx,...qx,...Bx];function Ma(t){return new Error(`unhandled node type: ${t}`)}function hf(t){return n=>v3(n,t)}function v3(t,e){const n=h3(e);if(n==null)throw Ma(0);if(Im(n)===1){const i=p3(n);return t.plural(i.reduce((o,a)=>[...o,pv(t,a)],[]))}else return pv(t,n)}function pv(t,e){const n=m3(e);if(n!=null)return t.type==="text"?n:t.normalize([n]);{const r=g3(e).reduce((s,i)=>[...s,Rh(t,i)],[]);return t.normalize(r)}}function Rh(t,e){const n=Im(e);switch(n){case 3:return Ol(e,n);case 9:return Ol(e,n);case 4:{const r=e;if(Ar(r,"k")&&r.k)return t.interpolate(t.named(r.k));if(Ar(r,"key")&&r.key)return t.interpolate(t.named(r.key));throw Ma(n)}case 5:{const r=e;if(Ar(r,"i")&&Ht(r.i))return t.interpolate(t.list(r.i));if(Ar(r,"index")&&Ht(r.index))return t.interpolate(t.list(r.index));throw Ma(n)}case 6:{const r=e,s=y3(r),i=b3(r);return t.linked(Rh(t,i),s?Rh(t,s):void 0,t.type)}case 7:return Ol(e,n);case 8:return Ol(e,n);default:throw new Error(`unhandled node on format message part: ${n}`)}}const w3=t=>t;let Pl=Et();function _3(t,e={}){let n=!1;const r=e.onError||VF;return e.onError=s=>{n=!0,r(s)},{...d3(t,e),detectError:n}}function x3(t,e){if(Me(t)){Nt(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||w3)(t),s=Pl[r];if(s)return s;const{ast:i,detectError:o}=_3(t,{...e,location:!1,jit:!0}),a=hf(i);return o?a:Pl[r]=a}else{const n=t.cacheKey;if(n){const r=Pl[n];return r||(Pl[n]=hf(t))}else return hf(t)}}let Na=null;function E3(t){Na=t}function S3(t,e,n){Na&&Na.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:n})}const A3=I3("function:translate");function I3(t){return e=>Na&&Na.emit(t,e)}const gs={INVALID_ARGUMENT:zF,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},C3=24;function ys(t){return Cu(t,null,void 0)}function Cm(t,e){return e.locale!=null?mv(e.locale):mv(t.locale)}let pf;function mv(t){if(Me(t))return t;if(Mt(t)){if(t.resolvedOnce&&pf!=null)return pf;if(t.constructor.name==="Function"){const e=t();if(jF(e))throw ys(gs.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return pf=e}else throw ys(gs.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw ys(gs.NOT_SUPPORT_LOCALE_TYPE)}function R3(t,e,n){return[...new Set([n,...Bt(e)?e:ct(e)?Object.keys(e):Me(e)?[e]:[n]])]}function Kx(t,e,n){const r=Me(n)?n:Oc,s=t;s.__localeChainCache||(s.__localeChainCache=new Map);let i=s.__localeChainCache.get(r);if(!i){i=[];let o=[n];for(;Bt(o);)o=gv(i,o,e);const a=Bt(e)||!ot(e)?e:e.default?e.default:null;o=Me(a)?[a]:a,Bt(o)&&gv(i,o,!1),s.__localeChainCache.set(r,i)}return i}function gv(t,e,n){let r=!0;for(let s=0;s<e.length&&Nt(r);s++){const i=e[s];Me(i)&&(r=T3(t,e[s],n))}return r}function T3(t,e,n){let r;const s=e.split("-");do{const i=s.join("-");r=k3(t,i,n),s.splice(-1,1)}while(s.length&&r===!0);return r}function k3(t,e,n){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),(Bt(n)||ot(n))&&n[s]&&(r=n[s])}return r}const mi=[];mi[0]={w:[0],i:[3,0],"[":[4],o:[7]};mi[1]={w:[1],".":[2],"[":[4],o:[7]};mi[2]={w:[2],i:[3,0],0:[3,0]};mi[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};mi[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};mi[5]={"'":[4,0],o:8,l:[5,0]};mi[6]={'"':[4,0],o:8,l:[6,0]};const $3=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function D3(t){return $3.test(t)}function O3(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function P3(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function L3(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:D3(e)?O3(e):"*"+e}function M3(t){const e=[];let n=-1,r=0,s=0,i,o,a,l,c,u,d;const f=[];f[0]=()=>{o===void 0?o=a:o+=a},f[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},f[2]=()=>{f[0](),s++},f[3]=()=>{if(s>0)s--,r=4,f[0]();else{if(s=0,o===void 0||(o=L3(o),o===!1))return!1;f[1]()}};function h(){const m=t[n+1];if(r===5&&m==="'"||r===6&&m==='"')return n++,a="\\"+m,f[0](),!0}for(;r!==null;)if(n++,i=t[n],!(i==="\\"&&h())){if(l=P3(i),d=mi[r],c=d[l]||d.l||8,c===8||(r=c[0],c[1]!==void 0&&(u=f[c[1]],u&&(a=i,u()===!1))))return;if(r===7)return e}}const yv=new Map;function N3(t,e){return ct(t)?t[e]:null}function F3(t,e){if(!ct(t))return null;let n=yv.get(e);if(n||(n=M3(e),n&&yv.set(e,n)),!n)return null;const r=n.length;let s=t,i=0;for(;i<r;){const o=n[i];if(Hx.includes(o)&&Wr(s))return null;const a=s[o];if(a===void 0||Mt(s))return null;s=a,i++}return s}const j3="11.1.4",Ru=-1,Oc="en-US",bv="",vv=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function U3(){return{upper:(t,e)=>e==="text"&&Me(t)?t.toUpperCase():e==="vnode"&&ct(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&Me(t)?t.toLowerCase():e==="vnode"&&ct(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&Me(t)?vv(t):e==="vnode"&&ct(t)&&"__v_isVNode"in t?vv(t.children):t}}let Wx;function B3(t){Wx=t}let Gx;function q3(t){Gx=t}let Jx;function z3(t){Jx=t}let Xx=null;const V3=t=>{Xx=t},H3=()=>Xx;let Yx=null;const wv=t=>{Yx=t},K3=()=>Yx;let _v=0;function W3(t={}){const e=Mt(t.onWarn)?t.onWarn:BF,n=Me(t.version)?t.version:j3,r=Me(t.locale)||Mt(t.locale)?t.locale:Oc,s=Mt(r)?Oc:r,i=Bt(t.fallbackLocale)||ot(t.fallbackLocale)||Me(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s,o=ot(t.messages)?t.messages:mf(s),a=ot(t.datetimeFormats)?t.datetimeFormats:mf(s),l=ot(t.numberFormats)?t.numberFormats:mf(s),c=rn(Et(),t.modifiers,U3()),u=t.pluralRules||Et(),d=Mt(t.missing)?t.missing:null,f=Nt(t.missingWarn)||Dc(t.missingWarn)?t.missingWarn:!0,h=Nt(t.fallbackWarn)||Dc(t.fallbackWarn)?t.fallbackWarn:!0,m=!!t.fallbackFormat,y=!!t.unresolving,S=Mt(t.postTranslation)?t.postTranslation:null,_=ot(t.processor)?t.processor:null,x=Nt(t.warnHtmlMessage)?t.warnHtmlMessage:!0,w=!!t.escapeParameter,p=Mt(t.messageCompiler)?t.messageCompiler:Wx,b=Mt(t.messageResolver)?t.messageResolver:Gx||N3,A=Mt(t.localeFallbacker)?t.localeFallbacker:Jx||R3,R=ct(t.fallbackContext)?t.fallbackContext:void 0,I=t,T=ct(I.__datetimeFormatters)?I.__datetimeFormatters:new Map,D=ct(I.__numberFormatters)?I.__numberFormatters:new Map,U=ct(I.__meta)?I.__meta:{};_v++;const J={version:n,cid:_v,locale:r,fallbackLocale:i,messages:o,modifiers:c,pluralRules:u,missing:d,missingWarn:f,fallbackWarn:h,fallbackFormat:m,unresolving:y,postTranslation:S,processor:_,warnHtmlMessage:x,escapeParameter:w,messageCompiler:p,messageResolver:b,localeFallbacker:A,fallbackContext:R,onWarn:e,__meta:U};return J.datetimeFormats=a,J.numberFormats=l,J.__datetimeFormatters=T,J.__numberFormatters=D,__INTLIFY_PROD_DEVTOOLS__&&S3(J,n,U),J}const mf=t=>({[t]:Et()});function Rm(t,e,n,r,s){const{missing:i,onWarn:o}=t;if(i!==null){const a=i(t,n,e,s);return Me(a)?a:e}else return e}function ea(t,e,n){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function G3(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function J3(t,e){const n=e.indexOf(t);if(n===-1)return!1;for(let r=n+1;r<e.length;r++)if(G3(t,e[r]))return!0;return!1}function xv(t,...e){const{datetimeFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__datetimeFormatters:a}=t,[l,c,u,d]=Th(...e),f=Nt(u.missingWarn)?u.missingWarn:t.missingWarn;Nt(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const h=!!u.part,m=Cm(t,u),y=o(t,s,m);if(!Me(l)||l==="")return new Intl.DateTimeFormat(m,d).format(c);let S={},_,x=null;const w="datetime format";for(let A=0;A<y.length&&(_=y[A],S=n[_]||{},x=S[l],!ot(x));A++)Rm(t,l,_,f,w);if(!ot(x)||!Me(_))return r?Ru:l;let p=`${_}__${l}`;Iu(d)||(p=`${p}__${JSON.stringify(d)}`);let b=a.get(p);return b||(b=new Intl.DateTimeFormat(_,rn({},x,d)),a.set(p,b)),h?b.formatToParts(c):b.format(c)}const Qx=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function Th(...t){const[e,n,r,s]=t,i=Et();let o=Et(),a;if(Me(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw ys(gs.INVALID_ISO_DATE_ARGUMENT);const c=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(c);try{a.toISOString()}catch{throw ys(gs.INVALID_ISO_DATE_ARGUMENT)}}else if(MF(e)){if(isNaN(e.getTime()))throw ys(gs.INVALID_DATE_ARGUMENT);a=e}else if(Ht(e))a=e;else throw ys(gs.INVALID_ARGUMENT);return Me(n)?i.key=n:ot(n)&&Object.keys(n).forEach(l=>{Qx.includes(l)?o[l]=n[l]:i[l]=n[l]}),Me(r)?i.locale=r:ot(r)&&(o=r),ot(s)&&(o=s),[i.key||"",a,i,o]}function Ev(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__datetimeFormatters.has(i)&&r.__datetimeFormatters.delete(i)}}function Sv(t,...e){const{numberFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__numberFormatters:a}=t,[l,c,u,d]=kh(...e),f=Nt(u.missingWarn)?u.missingWarn:t.missingWarn;Nt(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const h=!!u.part,m=Cm(t,u),y=o(t,s,m);if(!Me(l)||l==="")return new Intl.NumberFormat(m,d).format(c);let S={},_,x=null;const w="number format";for(let A=0;A<y.length&&(_=y[A],S=n[_]||{},x=S[l],!ot(x));A++)Rm(t,l,_,f,w);if(!ot(x)||!Me(_))return r?Ru:l;let p=`${_}__${l}`;Iu(d)||(p=`${p}__${JSON.stringify(d)}`);let b=a.get(p);return b||(b=new Intl.NumberFormat(_,rn({},x,d)),a.set(p,b)),h?b.formatToParts(c):b.format(c)}const Zx=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function kh(...t){const[e,n,r,s]=t,i=Et();let o=Et();if(!Ht(e))throw ys(gs.INVALID_ARGUMENT);const a=e;return Me(n)?i.key=n:ot(n)&&Object.keys(n).forEach(l=>{Zx.includes(l)?o[l]=n[l]:i[l]=n[l]}),Me(r)?i.locale=r:ot(r)&&(o=r),ot(s)&&(o=s),[i.key||"",a,i,o]}function Av(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__numberFormatters.has(i)&&r.__numberFormatters.delete(i)}}const X3=t=>t,Y3=t=>"",Q3="text",Z3=t=>t.length===0?"":Sm(t),ej=UF;function Iv(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function tj(t){const e=Ht(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(Ht(t.named.count)||Ht(t.named.n))?Ht(t.named.count)?t.named.count:Ht(t.named.n)?t.named.n:e:e}function nj(t,e){e.count||(e.count=t),e.n||(e.n=t)}function rj(t={}){const e=t.locale,n=tj(t),r=ct(t.pluralRules)&&Me(e)&&Mt(t.pluralRules[e])?t.pluralRules[e]:Iv,s=ct(t.pluralRules)&&Me(e)&&Mt(t.pluralRules[e])?Iv:void 0,i=_=>_[r(n,_.length,s)],o=t.list||[],a=_=>o[_],l=t.named||Et();Ht(t.pluralIndex)&&nj(n,l);const c=_=>l[_];function u(_,x){const w=Mt(t.messages)?t.messages(_,!!x):ct(t.messages)?t.messages[_]:!1;return w||(t.parent?t.parent.message(_):Y3)}const d=_=>t.modifiers?t.modifiers[_]:X3,f=ot(t.processor)&&Mt(t.processor.normalize)?t.processor.normalize:Z3,h=ot(t.processor)&&Mt(t.processor.interpolate)?t.processor.interpolate:ej,m=ot(t.processor)&&Me(t.processor.type)?t.processor.type:Q3,S={list:a,named:c,plural:i,linked:(_,...x)=>{const[w,p]=x;let b="text",A="";x.length===1?ct(w)?(A=w.modifier||A,b=w.type||b):Me(w)&&(A=w||A):x.length===2&&(Me(w)&&(A=w||A),Me(p)&&(b=p||b));const R=u(_,!0)(S),I=b==="vnode"&&Bt(R)&&A?R[0]:R;return A?d(A)(I,b):I},message:u,type:m,interpolate:h,normalize:f,values:rn(Et(),o,l)};return S}const Cv=()=>"",ir=t=>Mt(t);function Rv(t,...e){const{fallbackFormat:n,postTranslation:r,unresolving:s,messageCompiler:i,fallbackLocale:o,messages:a}=t,[l,c]=$h(...e),u=Nt(c.missingWarn)?c.missingWarn:t.missingWarn,d=Nt(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn,f=Nt(c.escapeParameter)?c.escapeParameter:t.escapeParameter,h=!!c.resolvedMessage,m=Me(c.default)||Nt(c.default)?Nt(c.default)?i?l:()=>l:c.default:n?i?l:()=>l:null,y=n||m!=null&&(Me(m)||Mt(m)),S=Cm(t,c);f&&sj(c);let[_,x,w]=h?[l,S,a[S]||Et()]:eE(t,l,S,o,d,u),p=_,b=l;if(!h&&!(Me(p)||Wr(p)||ir(p))&&y&&(p=m,b=p),!h&&(!(Me(p)||Wr(p)||ir(p))||!Me(x)))return s?Ru:l;let A=!1;const R=()=>{A=!0},I=ir(p)?p:tE(t,l,x,p,b,R);if(A)return p;const T=aj(t,x,w,c),D=rj(T),U=ij(t,I,D),J=r?r(U,l):U;if(__INTLIFY_PROD_DEVTOOLS__){const H={timestamp:Date.now(),key:Me(l)?l:ir(p)?p.key:"",locale:x||(ir(p)?p.locale:""),format:Me(p)?p:ir(p)?p.source:"",message:J};H.meta=rn({},t.__meta,H3()||{}),A3(H)}return J}function sj(t){Bt(t.list)?t.list=t.list.map(e=>Me(e)?uv(e):e):ct(t.named)&&Object.keys(t.named).forEach(e=>{Me(t.named[e])&&(t.named[e]=uv(t.named[e]))})}function eE(t,e,n,r,s,i){const{messages:o,onWarn:a,messageResolver:l,localeFallbacker:c}=t,u=c(t,r,n);let d=Et(),f,h=null;const m="translate";for(let y=0;y<u.length&&(f=u[y],d=o[f]||Et(),(h=l(d,e))===null&&(h=d[e]),!(Me(h)||Wr(h)||ir(h)));y++)if(!J3(f,u)){const S=Rm(t,e,f,i,m);S!==e&&(h=S)}return[h,f,d]}function tE(t,e,n,r,s,i){const{messageCompiler:o,warnHtmlMessage:a}=t;if(ir(r)){const c=r;return c.locale=c.locale||n,c.key=c.key||e,c}if(o==null){const c=()=>r;return c.locale=n,c.key=e,c}const l=o(r,oj(t,n,s,r,a,i));return l.locale=n,l.key=e,l.source=r,l}function ij(t,e,n){return e(n)}function $h(...t){const[e,n,r]=t,s=Et();if(!Me(e)&&!Ht(e)&&!ir(e)&&!Wr(e))throw ys(gs.INVALID_ARGUMENT);const i=Ht(e)?String(e):(ir(e),e);return Ht(n)?s.plural=n:Me(n)?s.default=n:ot(n)&&!Iu(n)?s.named=n:Bt(n)&&(s.list=n),Ht(r)?s.plural=r:Me(r)?s.default=r:ot(r)&&rn(s,r),[i,s]}function oj(t,e,n,r,s,i){return{locale:e,key:n,warnHtmlMessage:s,onError:o=>{throw i&&i(o),o},onCacheKey:o=>PF(e,n,o)}}function aj(t,e,n,r){const{modifiers:s,pluralRules:i,messageResolver:o,fallbackLocale:a,fallbackWarn:l,missingWarn:c,fallbackContext:u}=t,f={locale:e,modifiers:s,pluralRules:i,messages:(h,m)=>{let y=o(n,h);if(y==null&&(u||m)){const[,,S]=eE(u||t,h,e,a,l,c);y=o(S,h)}if(Me(y)||Wr(y)){let S=!1;const x=tE(t,h,e,y,h,()=>{S=!0});return S?Cv:x}else return ir(y)?y:Cv}};return t.processor&&(f.processor=t.processor),r.list&&(f.list=r.list),r.named&&(f.named=r.named),Ht(r.plural)&&(f.pluralIndex=r.plural),f}f3();/*!
  * vue-i18n v11.1.4
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const lj="11.1.4";function cj(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(xm().__INTLIFY_PROD_DEVTOOLS__=!1)}const yr={UNEXPECTED_RETURN_TYPE:C3,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32};function Pr(t,...e){return Cu(t,null,void 0)}const Dh=hi("__translateVNode"),Oh=hi("__datetimeParts"),Ph=hi("__numberParts"),uj=hi("__setPluralRules"),dj=hi("__injectWithOption"),Lh=hi("__dispose");function Fa(t){if(!ct(t)||Wr(t))return t;for(const e in t)if(Ar(t,e))if(!e.includes("."))ct(t[e])&&Fa(t[e]);else{const n=e.split("."),r=n.length-1;let s=t,i=!1;for(let o=0;o<r;o++){if(n[o]==="__proto__")throw new Error(`unsafe key: ${n[o]}`);if(n[o]in s||(s[n[o]]=Et()),!ct(s[n[o]])){i=!0;break}s=s[n[o]]}if(i||(Wr(s)?Hx.includes(n[r])||delete t[e]:(s[n[r]]=t[e],delete t[e])),!Wr(s)){const o=s[n[r]];ct(o)&&Fa(o)}}return t}function nE(t,e){const{messages:n,__i18n:r,messageResolver:s,flatJson:i}=e,o=ot(n)?n:Bt(r)?Et():{[t]:Et()};if(Bt(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:c}=a;l?(o[l]=o[l]||Et(),ec(c,o[l])):ec(c,o)}else Me(a)&&ec(JSON.parse(a),o)}),s==null&&i)for(const a in o)Ar(o,a)&&Fa(o[a]);return o}function rE(t){return t.type}function fj(t,e,n){let r=ct(e.messages)?e.messages:Et();"__i18nGlobal"in n&&(r=nE(t.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const s=Object.keys(r);s.length&&s.forEach(i=>{t.mergeLocaleMessage(i,r[i])});{if(ct(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(ct(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function Tv(t){return z(ko,null,t,0)}const kv="__INTLIFY_META__",$v=()=>[],hj=()=>!1;let Dv=0;function Ov(t){return(e,n,r,s)=>t(n,r,tr()||void 0,s)}const pj=()=>{const t=tr();let e=null;return t&&(e=rE(t)[kv])?{[kv]:e}:null};function sE(t={}){const{__root:e,__injectWithOption:n}=t,r=e===void 0,s=t.flatJson,i=$c?Ee:pr;let o=Nt(t.inheritLocale)?t.inheritLocale:!0;const a=i(e&&o?e.locale.value:Me(t.locale)?t.locale:Oc),l=i(e&&o?e.fallbackLocale.value:Me(t.fallbackLocale)||Bt(t.fallbackLocale)||ot(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:a.value),c=i(nE(a.value,t)),u=i(ot(t.datetimeFormats)?t.datetimeFormats:{[a.value]:{}}),d=i(ot(t.numberFormats)?t.numberFormats:{[a.value]:{}});let f=e?e.missingWarn:Nt(t.missingWarn)||Dc(t.missingWarn)?t.missingWarn:!0,h=e?e.fallbackWarn:Nt(t.fallbackWarn)||Dc(t.fallbackWarn)?t.fallbackWarn:!0,m=e?e.fallbackRoot:Nt(t.fallbackRoot)?t.fallbackRoot:!0,y=!!t.fallbackFormat,S=Mt(t.missing)?t.missing:null,_=Mt(t.missing)?Ov(t.missing):null,x=Mt(t.postTranslation)?t.postTranslation:null,w=e?e.warnHtmlMessage:Nt(t.warnHtmlMessage)?t.warnHtmlMessage:!0,p=!!t.escapeParameter;const b=e?e.modifiers:ot(t.modifiers)?t.modifiers:{};let A=t.pluralRules||e&&e.pluralRules,R;R=(()=>{r&&wv(null);const ee={version:lj,locale:a.value,fallbackLocale:l.value,messages:c.value,modifiers:b,pluralRules:A,missing:_===null?void 0:_,missingWarn:f,fallbackWarn:h,fallbackFormat:y,unresolving:!0,postTranslation:x===null?void 0:x,warnHtmlMessage:w,escapeParameter:p,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};ee.datetimeFormats=u.value,ee.numberFormats=d.value,ee.__datetimeFormatters=ot(R)?R.__datetimeFormatters:void 0,ee.__numberFormatters=ot(R)?R.__numberFormatters:void 0;const he=W3(ee);return r&&wv(he),he})(),ea(R,a.value,l.value);function T(){return[a.value,l.value,c.value,u.value,d.value]}const D=re({get:()=>a.value,set:ee=>{R.locale=ee,a.value=ee}}),U=re({get:()=>l.value,set:ee=>{R.fallbackLocale=ee,l.value=ee,ea(R,a.value,ee)}}),J=re(()=>c.value),H=re(()=>u.value),j=re(()=>d.value);function se(){return Mt(x)?x:null}function $(ee){x=ee,R.postTranslation=ee}function W(){return S}function B(ee){ee!==null&&(_=Ov(ee)),S=ee,R.missing=_}const oe=(ee,he,De,C,g,v)=>{T();let L;try{__INTLIFY_PROD_DEVTOOLS__,r||(R.fallbackContext=e?K3():void 0),L=ee(R)}finally{__INTLIFY_PROD_DEVTOOLS__,r||(R.fallbackContext=void 0)}if(De!=="translate exists"&&Ht(L)&&L===Ru||De==="translate exists"&&!L){const[Y,ce]=he();return e&&m?C(e):g(Y)}else{if(v(L))return L;throw Pr(yr.UNEXPECTED_RETURN_TYPE)}};function q(...ee){return oe(he=>Reflect.apply(Rv,null,[he,...ee]),()=>$h(...ee),"translate",he=>Reflect.apply(he.t,he,[...ee]),he=>he,he=>Me(he))}function le(...ee){const[he,De,C]=ee;if(C&&!ct(C))throw Pr(yr.INVALID_ARGUMENT);return q(he,De,rn({resolvedMessage:!0},C||{}))}function de(...ee){return oe(he=>Reflect.apply(xv,null,[he,...ee]),()=>Th(...ee),"datetime format",he=>Reflect.apply(he.d,he,[...ee]),()=>bv,he=>Me(he)||Bt(he))}function ye(...ee){return oe(he=>Reflect.apply(Sv,null,[he,...ee]),()=>kh(...ee),"number format",he=>Reflect.apply(he.n,he,[...ee]),()=>bv,he=>Me(he)||Bt(he))}function Ce(ee){return ee.map(he=>Me(he)||Ht(he)||Nt(he)?Tv(String(he)):he)}const G={normalize:Ce,interpolate:ee=>ee,type:"vnode"};function O(...ee){return oe(he=>{let De;const C=he;try{C.processor=G,De=Reflect.apply(Rv,null,[C,...ee])}finally{C.processor=null}return De},()=>$h(...ee),"translate",he=>he[Dh](...ee),he=>[Tv(he)],he=>Bt(he))}function Q(...ee){return oe(he=>Reflect.apply(Sv,null,[he,...ee]),()=>kh(...ee),"number format",he=>he[Ph](...ee),$v,he=>Me(he)||Bt(he))}function ie(...ee){return oe(he=>Reflect.apply(xv,null,[he,...ee]),()=>Th(...ee),"datetime format",he=>he[Oh](...ee),$v,he=>Me(he)||Bt(he))}function ne(ee){A=ee,R.pluralRules=A}function Ie(ee,he){return oe(()=>{if(!ee)return!1;const De=Me(he)?he:a.value,C=V(De),g=R.messageResolver(C,ee);return Wr(g)||ir(g)||Me(g)},()=>[ee],"translate exists",De=>Reflect.apply(De.te,De,[ee,he]),hj,De=>Nt(De))}function P(ee){let he=null;const De=Kx(R,l.value,a.value);for(let C=0;C<De.length;C++){const g=c.value[De[C]]||{},v=R.messageResolver(g,ee);if(v!=null){he=v;break}}return he}function k(ee){const he=P(ee);return he??(e?e.tm(ee)||{}:{})}function V(ee){return c.value[ee]||{}}function pe(ee,he){if(s){const De={[ee]:he};for(const C in De)Ar(De,C)&&Fa(De[C]);he=De[ee]}c.value[ee]=he,R.messages=c.value}function be(ee,he){c.value[ee]=c.value[ee]||{};const De={[ee]:he};if(s)for(const C in De)Ar(De,C)&&Fa(De[C]);he=De[ee],ec(he,c.value[ee]),R.messages=c.value}function ge(ee){return u.value[ee]||{}}function M(ee,he){u.value[ee]=he,R.datetimeFormats=u.value,Ev(R,ee,he)}function F(ee,he){u.value[ee]=rn(u.value[ee]||{},he),R.datetimeFormats=u.value,Ev(R,ee,he)}function te(ee){return d.value[ee]||{}}function ue(ee,he){d.value[ee]=he,R.numberFormats=d.value,Av(R,ee,he)}function Re(ee,he){d.value[ee]=rn(d.value[ee]||{},he),R.numberFormats=d.value,Av(R,ee,he)}Dv++,e&&$c&&(ut(e.locale,ee=>{o&&(a.value=ee,R.locale=ee,ea(R,a.value,l.value))}),ut(e.fallbackLocale,ee=>{o&&(l.value=ee,R.fallbackLocale=ee,ea(R,a.value,l.value))}));const we={id:Dv,locale:D,fallbackLocale:U,get inheritLocale(){return o},set inheritLocale(ee){o=ee,ee&&e&&(a.value=e.locale.value,l.value=e.fallbackLocale.value,ea(R,a.value,l.value))},get availableLocales(){return Object.keys(c.value).sort()},messages:J,get modifiers(){return b},get pluralRules(){return A||{}},get isGlobal(){return r},get missingWarn(){return f},set missingWarn(ee){f=ee,R.missingWarn=f},get fallbackWarn(){return h},set fallbackWarn(ee){h=ee,R.fallbackWarn=h},get fallbackRoot(){return m},set fallbackRoot(ee){m=ee},get fallbackFormat(){return y},set fallbackFormat(ee){y=ee,R.fallbackFormat=y},get warnHtmlMessage(){return w},set warnHtmlMessage(ee){w=ee,R.warnHtmlMessage=ee},get escapeParameter(){return p},set escapeParameter(ee){p=ee,R.escapeParameter=ee},t:q,getLocaleMessage:V,setLocaleMessage:pe,mergeLocaleMessage:be,getPostTranslationHandler:se,setPostTranslationHandler:$,getMissingHandler:W,setMissingHandler:B,[uj]:ne};return we.datetimeFormats=H,we.numberFormats=j,we.rt=le,we.te=Ie,we.tm=k,we.d=de,we.n=ye,we.getDateTimeFormat=ge,we.setDateTimeFormat=M,we.mergeDateTimeFormat=F,we.getNumberFormat=te,we.setNumberFormat=ue,we.mergeNumberFormat=Re,we[dj]=n,we[Dh]=O,we[Oh]=ie,we[Ph]=Q,we}const Tm={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function mj({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,s)=>[...r,...s.type===Je?s.children:[s]],[]):e.reduce((n,r)=>{const s=t[r];return s&&(n[r]=s()),n},Et())}function iE(){return Je}const gj=fe({name:"i18n-t",props:rn({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>Ht(t)||!isNaN(t)}},Tm),setup(t,e){const{slots:n,attrs:r}=e,s=t.i18n||km({useScope:t.scope,__useComponent:!0});return()=>{const i=Object.keys(n).filter(d=>d[0]!=="_"),o=Et();t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=Me(t.plural)?+t.plural:t.plural);const a=mj(e,i),l=s[Dh](t.keypath,a,o),c=rn(Et(),r),u=Me(t.tag)||ct(t.tag)?t.tag:iE();return Gn(u,c,l)}}}),Pv=gj;function yj(t){return Bt(t)&&!Me(t[0])}function oE(t,e,n,r){const{slots:s,attrs:i}=e;return()=>{const o={part:!0};let a=Et();t.locale&&(o.locale=t.locale),Me(t.format)?o.key=t.format:ct(t.format)&&(Me(t.format.key)&&(o.key=t.format.key),a=Object.keys(t.format).reduce((f,h)=>n.includes(h)?rn(Et(),f,{[h]:t.format[h]}):f,Et()));const l=r(t.value,o,a);let c=[o.key];Bt(l)?c=l.map((f,h)=>{const m=s[f.type],y=m?m({[f.type]:f.value,index:h,parts:l}):[f.value];return yj(y)&&(y[0].key=`${f.type}-${h}`),y}):Me(l)&&(c=[l]);const u=rn(Et(),i),d=Me(t.tag)||ct(t.tag)?t.tag:iE();return Gn(d,u,c)}}const bj=fe({name:"i18n-n",props:rn({value:{type:Number,required:!0},format:{type:[String,Object]}},Tm),setup(t,e){const n=t.i18n||km({useScope:t.scope,__useComponent:!0});return oE(t,e,Zx,(...r)=>n[Ph](...r))}}),Lv=bj;function vj(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const r=n.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function wj(t){const e=o=>{const{instance:a,value:l}=o;if(!a||!a.$)throw Pr(yr.UNEXPECTED_ERROR);const c=vj(t,a.$),u=Mv(l);return[Reflect.apply(c.t,c,[...Nv(u)]),c]};return{created:(o,a)=>{const[l,c]=e(a);$c&&t.global===c&&(o.__i18nWatcher=ut(c.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=c,o.textContent=l},unmounted:o=>{$c&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const l=o.__composer,c=Mv(a);o.textContent=Reflect.apply(l.t,l,[...Nv(c)])}},getSSRProps:o=>{const[a]=e(o);return{textContent:a}}}}function Mv(t){if(Me(t))return{path:t};if(ot(t)){if(!("path"in t))throw Pr(yr.REQUIRED_VALUE,"path");return t}else throw Pr(yr.INVALID_VALUE)}function Nv(t){const{path:e,locale:n,args:r,choice:s,plural:i}=t,o={},a=r||{};return Me(n)&&(o.locale=n),Ht(s)&&(o.plural=s),Ht(i)&&(o.plural=i),[e,a,o]}function _j(t,e,...n){const r=ot(n[0])?n[0]:{};(Nt(r.globalInstall)?r.globalInstall:!0)&&([Pv.name,"I18nT"].forEach(i=>t.component(i,Pv)),[Lv.name,"I18nN"].forEach(i=>t.component(i,Lv)),[jv.name,"I18nD"].forEach(i=>t.component(i,jv))),t.directive("t",wj(e))}const xj=hi("global-vue-i18n");function Ej(t={}){const e=Nt(t.globalInjection)?t.globalInjection:!0,n=new Map,[r,s]=Sj(t),i=hi("");function o(u){return n.get(u)||null}function a(u,d){n.set(u,d)}function l(u){n.delete(u)}const c={get mode(){return"composition"},async install(u,...d){if(u.__VUE_I18N_SYMBOL__=i,u.provide(u.__VUE_I18N_SYMBOL__,c),ot(d[0])){const m=d[0];c.__composerExtend=m.__composerExtend,c.__vueI18nExtend=m.__vueI18nExtend}let f=null;e&&(f=Dj(u,c.global)),_j(u,c,...d);const h=u.unmount;u.unmount=()=>{f&&f(),c.dispose(),h()}},get global(){return s},dispose(){r.stop()},__instances:n,__getInstance:o,__setInstance:a,__deleteInstance:l};return c}function km(t={}){const e=tr();if(e==null)throw Pr(yr.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw Pr(yr.NOT_INSTALLED);const n=Aj(e),r=Cj(n),s=rE(e),i=Ij(t,s);if(i==="global")return fj(r,t,s),r;if(i==="parent"){let l=Rj(n,e,t.__useComponent);return l==null&&(l=r),l}const o=n;let a=o.__getInstance(e);if(a==null){const l=rn({},t);"__i18n"in s&&(l.__i18n=s.__i18n),r&&(l.__root=r),a=sE(l),o.__composerExtend&&(a[Lh]=o.__composerExtend(a)),kj(o,e,a),o.__setInstance(e,a)}return a}function Sj(t,e){const n=Ka(),r=n.run(()=>sE(t));if(r==null)throw Pr(yr.UNEXPECTED_ERROR);return[n,r]}function Aj(t){const e=qt(t.isCE?xj:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw Pr(t.isCE?yr.NOT_INSTALLED_WITH_PROVIDE:yr.UNEXPECTED_ERROR);return e}function Ij(t,e){return Iu(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function Cj(t){return t.mode==="composition"?t.global:t.global.__composer}function Rj(t,e,n=!1){let r=null;const s=e.root;let i=Tj(e,n);for(;i!=null;){const o=t;if(t.mode==="composition"&&(r=o.__getInstance(i)),r!=null||s===i)break;i=i.parent}return r}function Tj(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function kj(t,e,n){sn(()=>{},e),vr(()=>{const r=n;t.__deleteInstance(e);const s=r[Lh];s&&(s(),delete r[Lh])},e)}const $j=["locale","fallbackLocale","availableLocales"],Fv=["t","rt","d","n","tm","te"];function Dj(t,e){const n=Object.create(null);return $j.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i)throw Pr(yr.UNEXPECTED_ERROR);const o=Pt(i.value)?{get(){return i.value.value},set(a){i.value.value=a}}:{get(){return i.get&&i.get()}};Object.defineProperty(n,s,o)}),t.config.globalProperties.$i18n=n,Fv.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i||!i.value)throw Pr(yr.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${s}`,i)}),()=>{delete t.config.globalProperties.$i18n,Fv.forEach(s=>{delete t.config.globalProperties[`$${s}`]})}}const Oj=fe({name:"i18n-d",props:rn({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Tm),setup(t,e){const n=t.i18n||km({useScope:t.scope,__useComponent:!0});return oE(t,e,Qx,(...r)=>n[Oh](...r))}}),jv=Oj;cj();B3(x3);q3(F3);z3(Kx);if(__INTLIFY_PROD_DEVTOOLS__){const t=xm();t.__INTLIFY__=!0,E3(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}async function Pj(t){const e=t.defaultLocale??"en",n=t.fallbackLocale??"en";return await t.messages.loadLocale(e),await t.messages.loadLocale(n),Ej({warnHtmlMessage:!1,locale:e,fallbackLocale:n,messages:t.messages.getMessages()})}function Lj(t){return{async install(e){const n=new OF(t.messages),r=await Pj({...t,messages:n});e.use(r),ni.setProvider(new DF(r.global,n))}}}class Mj extends Yn{}function Nj(t,e){return t}class Pc extends Yn{constructor(n,r,s){super(Nj(n),s);Se(this,"description");this.description=r}}class Fj extends Yn{constructor(e,n){super(`Container at ${e.url} is already in use`,n)}}const Ll={clientID:{client_id:"https://aerogel.js.org/playground/clientid.jsonld",client_name:"Aerogel Playground",redirect_uris:["https://aerogel.js.org/playground/"]}};class aE{constructor(){Se(this,"name");Se(this,"authenticatedFetch");Se(this,"booted");Se(this,"listeners",Fw([]));Se(this,"_engine")}get engine(){return this._engine=this._engine??new cp(this.requireAuthenticatedFetch()),this._engine}getAuthenticatedFetch(){return this.authenticatedFetch??null}requireAuthenticatedFetch(){return this.authenticatedFetch??Xe("Authenticated fetch is not ready")}addListener(e){return this.listeners.includes(e)||this.listeners.push(e),()=>{this.removeListener(e)}}removeListener(e){this.listeners.includes(e)&&this.listeners.remove(e)}async boot(){if(this.booted)return this.booted;this.booted=new Ir,await this.restoreSession(),this.booted.resolve()}async initAuthenticatedFetch(e){this.authenticatedFetch=e,await this.notifyListeners("onAuthenticatedFetchReady",e)}async startSession(e){const n={authenticator:this,...e};return await this.notifyListeners("onSessionStarted",n),n}async failSession(e,n){await this.notifyListeners("onSessionFailed",e,n)}async endSession(){await this.notifyListeners("onSessionEnded")}async notifyListeners(e,...n){await Promise.all(this.listeners.toArray().map(async r=>{const s=r[e];await(s==null?void 0:s(...n))}))}}const gf="inrupt-authenticator";class jj extends aE{constructor(){super(...arguments);Se(this,"_events");Se(this,"_fetch");Se(this,"_login");Se(this,"_logout");Se(this,"_handleIncomingRedirect")}async login(n){sr.set(gf,n);const r={oidcIssuer:n};return Ll.clientID&&(r.clientId=Ll.clientID.client_id,r.clientName=Ll.clientID.client_name,r.redirectUrl=Ll.clientID.redirect_uris[0]),await this._login(r),await ln({seconds:60}),Xe("Browser should have redirected, but it didn't")}async logout(){await this._logout(),await this.endSession()}async restoreSession(){const{events:n,fetch:r,handleIncomingRedirect:s,login:i,logout:o}=await to(async()=>{const{events:a,fetch:l,handleIncomingRedirect:c,login:u,logout:d}=await import("./InruptAuthenticator.lazy-BwIu41a7.js");return{events:a,fetch:l,handleIncomingRedirect:c,login:u,logout:d}},[]);this._fetch=r,this._login=i,this._logout=o,this._events=n,this._handleIncomingRedirect=s,await this.loginFromRedirect()}async loginFromRedirect(){const n=sr.get(gf);if(!n)return;this._events().on("error",(s,i)=>{s??(s="Error using Inrupt Authenticator method"),typeof i=="object"?this.failSession(n,new Pc(s,null,{cause:i})):this.failSession(n,new Pc(s,i))});const r=await this._handleIncomingRedirect(globalThis.location.href);sr.remove(gf),r!=null&&r.isLoggedIn&&r.webId&&await this.initSession(r.webId)}async initSession(n){await this.initAuthenticatedFetch(this._fetch);try{const r=await at.requireUserProfile(n);await this.startSession({user:r,loginUrl:n})}catch(r){await this.failSession(n,r)}}}class Uj extends aE{constructor(){super();Se(this,"store");this.store=aD("legacy-authenticator",{})}async login(n,r){const{SolidAuthClient:s}=await to(async()=>{const{SolidAuthClient:o}=await import("./LegacyAuthenticator.lazy-fEyVZtsj.js");return{SolidAuthClient:o}},[]);throw this.store.webId=r==null?void 0:r.webId,this.store.loginUrl=(r==null?void 0:r.oidcIssuerUrl)??n,await s.login(this.store.loginUrl)===null?(delete this.store.webId,delete this.store.loginUrl,new Pc("Could not log in with Solid using the legacy authenticator")):(await ln({seconds:60}),new Error("Browser should have redirected, but it didn't"))}async logout(){const{SolidAuthClient:n}=await to(async()=>{const{SolidAuthClient:r}=await import("./LegacyAuthenticator.lazy-fEyVZtsj.js");return{SolidAuthClient:r}},[]);delete this.store.webId,delete this.store.loginUrl,await n.logout(),await this.endSession()}async restoreSession(){if(!this.store.loginUrl)return;const{SolidAuthClient:n}=await to(async()=>{const{SolidAuthClient:i}=await import("./LegacyAuthenticator.lazy-fEyVZtsj.js");return{SolidAuthClient:i}},[]),r=await n.currentSession(),s=Nn(this.store.loginUrl);await this.initAuthenticatedFetch((i,o)=>n.fetch(i,o));try{const i=await at.requireUserProfile(Nn((r==null?void 0:r.webId)??this.store.webId));await this.startSession({user:i,loginUrl:s})}catch(i){await this.failSession(s,i)}}}const $m={},Bj={inrupt:new jj,legacy:new Uj};function qj(t){$m.default=t}function lE(t){return $m[t]}function zj(t){Object.entries(t).forEach(([e,n])=>Vj(e,n))}function Vj(t,e){$m[t]=e,e.name=e.name??t}function Hj(t){return zt(t)}const Kj=Object.freeze(Object.defineProperty({__proto__:null,model:Hj},Symbol.toStringTag,{value:"Module"}));let Dm=new WeakMap;function Wj(t){const e=pr(Vt([],"id")),n=re(()=>e.value.getItems()),r=new Set([t.collection]),s={modelsMap:e,modelsArray:n,collectionsSet:r,async refresh(){const i=Vt([],"id");for(const o of r)(await t.withCollection(o,()=>t.all())).forEach(l=>i.add(l));e.value=i}};return Dm.set(t,s),t.on("created",i=>(e.value.add(rt(i)),zd(e))),t.on("deleted",i=>(e.value.delete(rt(i)),zd(e))),t.on("updated",i=>(e.value.add(rt(i)),zd(e))),He.on("purge-storage",()=>e.value=Vt([],"id")),He.on("cloud:migration-completed",()=>s.refresh()),He.on("cloud:migration-cancelled",()=>s.refresh()),He.on("cloud:backup-completed",()=>s.refresh()),He.emit("soukai:track-models",t),s}function cE(t){return"isSoftDeleted"in t?t.isSoftDeleted():!1}function ll(){return Dm}function uE(t){return Dm.get(t)??Wj(t)}function Gj(t){return Ap((e,n)=>{let r;const s=[],i=a=>r instanceof Ci&&a.id===r.id&&n(),o=()=>{s.forEach(a=>a()),s.splice(0,s.length)};return Wa()&&nu(o),Lt(()=>{const a=t();r instanceof Ci&&(!cn(a,Ci)||a.static()!==r.static())&&o(),r=a,n(),r instanceof Ci&&!s.length&&(s.push(He.on("cloud:migration-completed",n)),s.push(He.on("cloud:migration-cancelled",n)),s.push(r.static().on("modified",i)),s.push(r.static().on("updated",i)),s.push(r.static().on("relation-loaded",i)))}),{get:()=>je(r,()=>e()),set:()=>console.warn("Computed model ref was not set (it is immutable).")}})}function Om(t,e={}){const n=pr([]),r=uE(t);return Lt(()=>n.value=r.modelsArray.value),oD(()=>t.on("updated",()=>n.value=n.value.slice(0))),re(()=>e.includeSoftDeleted?n.value:n.value.filter(s=>!cE(s)))}function Pm(t,e={}){var r;const n=((r=ll().get(t))==null?void 0:r.modelsArray.value)??[];return e.includeSoftDeleted?n:n.filter(s=>!cE(s))}function Jj(t){return ll().has(t)}function Xj(t,e){Nn(ll().get(t),"Failed ignoring models collection, please track the model first using trackModels()").collectionsSet.delete(e)}async function $i(t,e,n={}){const r=n.refresh??!0,s=Nn(ll().get(t),"Failed tracking models collection, please track the model first using trackModels()");if(!s.collectionsSet.has(e)&&(s.collectionsSet.add(e),r)){const i=s.modelsArray.value;(await t.withCollection(e,()=>t.all())).forEach(a=>i.push(a)),s.modelsMap.value=Vt(i,"id")}}async function Yj(t,e){const{service:n,property:r,transform:s,...i}=e??{},o=s??(c=>c),a=ll().has(t),l=uE(t);for(const[c,u]of Object.entries(i))t.on(c,u);n&&r&&Lt(()=>n.setState(r,o(l.modelsArray.value))),a||await l.refresh()}function Qj(){globalThis.testingRuntime&&Object.assign(globalThis.testingRuntime,Kj)}function Zj(t){return{install(){const e=new $A(jp());Qj(),jw(e),FA(t.models),He.on("purge-storage",()=>e.purgeDatabase())}}}const Lm={autoReconnect:!0},eU=di({name:"solid",persist:["autoReconnect","dismissed","previousSession","profiles","staleProfiles","collections"],initialState:{autoReconnect:Lm.autoReconnect,dismissed:!1,ignorePreviousSessionError:!1,loginStartupError:null,loginOngoing:!1,preferredAuthenticator:null,previousSession:null,profiles:{},session:null,loginStale:!1,staleProfiles:[],collections:{}},serialize(t){var e;return((e=t.previousSession)==null?void 0:e.error)instanceof Error&&(t.previousSession.error=t.previousSession.error.message),t},computed:{user:t=>{var e,n;return((e=t.session)==null?void 0:e.user)??((n=t.previousSession)==null?void 0:n.profile)??null},authenticator:t=>{var e;return((e=t.session)==null?void 0:e.authenticator)??null},fetch(){var t;return((t=this.authenticator)==null?void 0:t.getAuthenticatedFetch())??globalThis.fetch.bind(globalThis)},error(t){var e;return t.loginStartupError?t.loginStartupError??null:t.ignorePreviousSessionError?null:((e=t.previousSession)==null?void 0:e.error)??null}}});class tU extends eU{isLoggedIn(){return!!this.session}wasLoggedIn(){return!!this.previousSession}hasLoggedIn(){return!!(this.session||this.previousSession)}requireAuthenticator(){return this.authenticator??Xe("Could not get authenticator")}requireUser(){return this.user??Xe("Could not get user profile (are you logged in?)")}requireUserProfile(e){return this.getUserProfile(e,{required:!0})}async getUserProfile(e,n={}){var o;let r=null;const s=n.markStale??!((o=this.authenticator)!=null&&o.getAuthenticatedFetch()),i=this.profiles[e]??await je(await rC(e,{fetch:this.fetch,required:n.required??!1,onLoaded(a){r=a}}),async a=>{a&&(r&&await He.emit("solid:user-profile-loaded",[a,r]),this.rememberProfile(a))});return i&&s&&this.setState({staleProfiles:Vn(this.staleProfiles.concat([i.webId]))}),i}async refreshUserProfile(){if(!this.isLoggedIn())return;this.setState({profiles:vs(this.profiles,[this.user.webId])});const e=await this.requireUserProfile(this.user.webId);this.setState({session:{...this.session,user:e}})}async login(e,n={}){if(ei()&&e==="dev"&&(e="http://localhost:3000"),/^https?:\/\//.test(e)||(n.fallbackUrl??(n.fallbackUrl=`http://${e}`),e=`https://${e}`),this.isLoggedIn())return!0;if(this.loginOngoing)throw new Error("Authentication already in progress");return n.loading?It.loading(Ne("solid.loginOngoing","Logging in..."),()=>this.attemptLogin(e,n)):this.attemptLogin(e,n)}async reconnect(e={}){const{force:n,...r}=e;this.isLoggedIn()||!this.previousSession||this.previousSession.error!==null&&!n||await this.login(this.previousSession.loginUrl,{authenticator:this.previousSession.authenticator,...r,loading:r.loading??!1})}async logout(e=!1){var o,a;const n=!lt.plugin("@aerogel/local-first")||!!((o=lt.service("$cloud"))!=null&&o.ready),r=!lt.plugin("@aerogel/local-first")||!!((a=lt.service("$cloud"))!=null&&a.dirty),[s,i]=e?[!0,{wipeLocalData:n}]:await It.confirm(n?Ne("solid.logoutConfirmTitle","Log out from this device?"):Ne("solid.disconnectConfirmTitle","Disconnect account?"),n?r?Ne("solid.logoutConfirmMessageWithLocalChanges","There are some changes that haven't been synchronized and will be lost, but the rest of the data will remain in your Solid POD."):Ne("solid.logoutConfirmMessage","Logging out will remove all the data from this device, but you'll still have it in your Solid POD."):Ne("solid.disconnectConfirmMessage","You'll need to introduce your credentials again to connect to your Solid POD."),{acceptText:Ne("solid.logoutConfirmAccept","Log out"),acceptVariant:"danger",cancelText:Ne("solid.logoutConfirmCancel",Ne("ui.cancel","Cancel")),checkboxes:n?r?{wipeLocalData:{label:Ne("solid.logoutConfirmWipeNotice","I understand that changes that haven't been synchronized will be lost."),default:!1,required:!0}}:void 0:{wipeLocalData:{label:Ne("solid.logoutConfirmWipe","Also remove all existing data"),default:!1}}});s&&this.previousSession&&await It.loading(Ne("solid.logoutOngoing","Logging out..."),async()=>{this.setState({dismissed:!1,ignorePreviousSessionError:!1,loginStartupError:null,previousSession:null,...Lm}),this.isLoggedIn()&&await this.authenticator.logout(),(i.wipeLocalData??!0)&&await mu.purge(),await He.emit("auth:logout"),await He.emit("auth:after-logout")})}async whenLoggedIn(e){return this.isLoggedIn()?e(this.session):new Promise(n=>{const r=s=>n(e(s));He.once("auth:login",r)})}dismiss(){this.setState({dismissed:!0})}async findOrCreatePrivateTypeIndex(){return await this.findPrivateTypeIndex()??await this.createPrivateTypeIndex()}async findPrivateTypeIndex(e={}){const{webId:n,privateTypeIndexUrl:r}=this.requireUser(),s=this.requireAuthenticator().engine;return r?(e.fresh&&cg(`${n}-privateTypeIndex`),og(`${n}-privateTypeIndex`,()=>us.withEngine(s).find(r))):null}async findOrCreatePublicTypeIndex(){return await this.findPublicTypeIndex()??await this.createPublicTypeIndex()}async findPublicTypeIndex(e={}){const{webId:n,publicTypeIndexUrl:r}=this.requireUser(),s=this.requireAuthenticator().engine;return r?(e.fresh&&cg(`${n}-publicTypeIndex`),og(`${n}-publicTypeIndex`,()=>us.withEngine(s).find(r))):null}async createPrivateContainer(e){const n=this.requireAuthenticator().engine;return Wn.withEngine(n,async()=>{const r=await Wn.find(e.url);if(r&&!e.reuseExisting)throw new Fj(r);const s=r??new Wn({url:e.url,name:e.name});if(await s.save(),e.registerFor){const i=await this.findOrCreatePrivateTypeIndex();await s.register(i,e.registerFor)}return s})}async boot(){var e,n;await ri.booted,Si("authenticator")&&this.setState({preferredAuthenticator:ca("authenticator")}),Si("refreshProfile")&&this.setState({staleProfiles:Vn(this.staleProfiles.concat(en([(e=this.session)==null?void 0:e.user.webId,(n=this.previousSession)==null?void 0:n.loginUrl])))}),await this.restorePreviousSession(),await this.startupReconnect(),await this.trackSolidModels()}async createPrivateTypeIndex(){const e=this.requireUser(),n=this.requireAuthenticator(),r=await us.withEngine(n.engine).createPrivate(e);return je(r,()=>{e.privateTypeIndexUrl=r.url,dg(`${e.webId}-privateTypeIndex`,r),this.rememberProfile(e)})}async createPublicTypeIndex(){const e=this.requireUser(),n=this.requireAuthenticator(),r=await us.withEngine(n.engine).createPublic(e);return je(r,()=>{e.privateTypeIndexUrl=r.url,dg(`${e.webId}-publicTypeIndex`,r),this.rememberProfile(e)})}async attemptLogin(e,n){const r=n.authenticator??this.preferredAuthenticator??"default",s=n.onError??(a=>lt.isMounted()?ri.report(a):this.setState({loginStartupError:a})),i=setTimeout(()=>this.loginStale=!0,1e4),o={dismissed:this.dismissed,ignorePreviousSessionError:this.ignorePreviousSessionError,previousSession:this.previousSession};this.loginOngoing=!0;try{const a=await this.getUserProfile(e,{markStale:!0}),l=(a==null?void 0:a.oidcIssuerUrl)??Yr((a==null?void 0:a.webId)??e),c=await this.bootAuthenticator(r),{domain:u}=iA(e);return this.setState({dismissed:!1,ignorePreviousSessionError:!0,previousSession:kn({profile:a,loginUrl:e,authenticator:r,error:Ne("solid.stuckConnecting","We didn't hear back from the identity provider at `{domain}`, maybe try reconnecting?",{domain:u})})}),await He.emit("auth:before-login"),await c.login(l,a),!0}catch(a){return this.setState(o),a instanceof Mj?!1:n.fallbackUrl?ln().then(()=>this.login(n.fallbackUrl??"",vs(n,"fallbackUrl"))):(s(a),!1)}finally{clearTimeout(i),this.setState({loginOngoing:!1,loginStale:!1})}}async restorePreviousSession(){this.previousSession&&await this.bootAuthenticator(this.previousSession.authenticator)}async startupReconnect(){this.reconnectOnStartup()&&await this.reconnect({force:this.forcingReconnect()})}reconnectOnStartup(){return Si("autoReconnect")?sc(ca("autoReconnect")):this.autoReconnect}forcingReconnect(){return Si("autoReconnect")&&sc(ca("autoReconnect"))}async bootAuthenticator(e){const n=lE(e);return n.addListener({onSessionStarted:async r=>{this.setState({session:r,previousSession:{authenticator:n.name,loginUrl:r.loginUrl,profile:r.user,error:null}}),this.staleProfiles.includes(r.user.webId)&&await this.refreshUserProfile(),lt.plugin("@aerogel/local-first")||jw(r.authenticator.engine),gp.setEngine(r.authenticator.engine),us.setEngine(r.authenticator.engine),Ri.setEngine(r.authenticator.engine),await He.emit("auth:login",r)},onSessionFailed:async(r,s)=>{var i;this.setState({session:null,previousSession:{profile:(i=this.previousSession)==null?void 0:i.profile,authenticator:n.name,loginUrl:r,error:s}})},onSessionEnded:()=>this.setState({session:null}),onAuthenticatedFetchReady:r=>He.emit("auth:fetch-ready",r)}),await n.boot(),n}rememberProfile(e){this.setState({profiles:{...this.profiles,[e.webId]:e},staleProfiles:Xn(this.staleProfiles,e.webId)})}async trackSolidModels(){He.on("purge-storage",()=>this.collections={}),He.on("soukai:track-models",async e=>{var n;D0(e)&&(e.on("created",async r=>{var o;const s=r.getContainerUrl();if(!s||r.static().collection===s||(o=this.collections[r.static().modelName])!=null&&o.includes(s))return;const i=this.collections[r.static().modelName]??[];i.push(s),this.collections={...this.collections,[r.static().modelName]:i},await $i(e,s,{refresh:!1})}),await Promise.all(((n=this.collections[e.modelName])==null?void 0:n.map(r=>$i(e,r),{refresh:!1}))??[]))});for(const[e,n]of Object.entries(this.collections)){const r=Kw().get(e);if(!(!r||!Jj(r)))for(const s of n)await $i(r,s)}}}const at=Qn(tU);function nU(){nD("container_url",t=>{if(!t.endsWith("/"))return"containerEndingSlashMissing"})}const rU={viewBox:"0 0 20 20","aria-hidden":"true",width:"1.2em",height:"1.2em"};function sU(t,e){return N(),_e("svg",rU,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M15 2H5L4 8h12zM0 10s2 1 10 1s10-1 10-1l-4-2H4zm8 4h4v1H8z"},null,-1),me("circle",{cx:"6",cy:"15",r:"3",fill:"currentColor"},null,-1),me("circle",{cx:"14",cy:"15",r:"3",fill:"currentColor"},null,-1)]))}const iU=it({name:"ooui-user-anonymous",render:sU}),oU=["src"],aU=fe({__name:"SolidImage",props:{src:{}},setup(t){const e=b1(async()=>{const r=await rf.get(t.src)??await n(t.src),s=await(r==null?void 0:r.blob());return s&&URL.createObjectURL(s)});async function n(r){try{const s=await at.fetch(r);return s.status!==200?null:(await rf.store(r,s),rf.get(r))}catch{return null}}return(r,s)=>(N(),_e("img",{src:E(e)},null,8,oU))}}),lU={class:"relative flex items-center justify-center rounded-full bg-gray-200"},cU={key:1,class:"text-sm font-semibold tracking-wider text-gray-500","aria-hidden":"true"},dE=fe({__name:"SolidAvatar",setup(t){const e=re(()=>{var r;return(((r=at.user)==null?void 0:r.name)??"").trim().split(" ").map(s=>{var i;return(i=s[0])==null?void 0:i.toUpperCase()}).join("").slice(0,3)});return(n,r)=>{var s,i;return N(),_e("div",lU,[(s=n.$solid.user)!=null&&s.avatarUrl?(N(),ae(aU,{key:0,src:(i=n.$solid.user)==null?void 0:i.avatarUrl,alt:"",class:"absolute inset-0 size-full rounded-full"},null,8,["src"])):e.value?(N(),_e("span",cU,xe(e.value),1)):(N(),ae(E(iU),{key:2,class:"size-6 text-gray-500"}))])}}}),uU={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function dU(t,e){return N(),_e("svg",uU,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M9 2h9c1.1 0 2 .9 2 2v16c0 1.1-.9 2-2 2H9c-1.1 0-2-.9-2-2v-2h2v2h9V4H9v2H7V4c0-1.1.9-2 2-2"},null,-1),me("path",{fill:"currentColor",d:"M10.09 15.59L11.5 17l5-5l-5-5l-1.41 1.41L12.67 11H3v2h9.67z"},null,-1)]))}const fU=it({name:"ic-baseline-log-in",render:dU}),hU={key:2,class:"flex w-full justify-center gap-2"},fE=fe({__name:"SolidLogin",props:{class:{default:""},buttonClass:{},layout:{default:"horizontal"},noLoading:{type:Boolean},allowLegacyAuthenticator:{type:Boolean}},setup(t){const e={inrupt:"Log in using Inrupt's authentication library",legacy:"Log in using the legacy authentication library"},n=Qa({url:Au(),authenticator:AN()}),r=Object.keys(e),s=Ee(!1),i=Ee(!1),o=re(()=>!a.value||i.value),a=re(()=>lt.development&&(!n.url||n.url==="dev"||n.url.trim().length===0)),l=re(()=>kt("flex flex-col items-center gap-2 w-full md:w-auto",t.class)),c=re(()=>kt("w-full whitespace-nowrap",{"md:w-auto":t.layout==="horizontal"&&!n.authenticator},t.buttonClass));function u(f){return Ne(`solid.logIn.switchAuthenticator${f.charAt(0).toUpperCase()+f.slice(1)}`,e[f])}async function d(){if(t.noLoading){await at.login(n.url,{authenticator:n.authenticator});return}await It.loading(Ne("solid.loginOngoing","Logging in..."),at.login(n.url))}return(f,h)=>{const m=NT("measure");return N(),ae(E(ol),{form:E(n),class:Ye(l.value),onSubmit:d},{default:K(()=>[me("div",{class:Ye(["flex w-full flex-col items-center gap-2",{"md:flex-row":f.layout==="horizontal"&&!E(n).authenticator}])},[o.value?(N(),ae(E(al),{key:0,name:"url","aria-label":f.$td("solid.logIn.label","Login url"),placeholder:f.$td("solid.logIn.placeholder","https://me.solidcommunity.net"),class:"w-full md:min-w-96"},null,8,["aria-label","placeholder"])):We("",!0),E(n).authenticator?(N(),ae(E(bm),{key:1,name:"authenticator",class:"w-full max-w-full md:min-w-96","label-class":"sr-only","options-class":"md:w-96 w-full max-w-[calc(100vw-4rem)]",label:f.$td("solid.logIn.switchAuthenticatorLabel","Authentication method"),options:E(r),"render-option":u},null,8,["label","options"])):We("",!0),a.value&&!i.value?(N(),_e("div",hU,[z(E(st),{variant:"secondary",class:"group gap-0",title:f.$td("solid.logIn.manualUrl","Enter url"),onClick:h[0]||(h[0]=y=>i.value=!0)},{default:K(()=>[z(E(fU),{class:"size-4"}),Cp((N(),_e("span",{class:Ye(["overflow-hidden pl-1 whitespace-nowrap",{"opacity-0":!s.value,"w-0 transition-[width] md:group-hover:w-(--width)":s.value}])},[$e(xe(f.$td("solid.logIn.manualUrl","Enter url")),1)],2)),[[m,()=>s.value=!0,void 0,{css:!0}]])]),_:1},8,["title"]),z(E(st),{disabled:f.noLoading&&f.$solid.loginOngoing,submit:"",class:"whitespace-nowrap",onClick:h[1]||(h[1]=y=>E(n).url="dev")},{default:K(()=>[$e(xe(f.$td("solid.logIn.dev","Log in to dev server")),1)]),_:1},8,["disabled"])])):(N(),ae(E(st),{key:3,disabled:f.noLoading&&f.$solid.loginOngoing,submit:"",class:Ye(c.value)},{default:K(()=>[$e(xe(f.$td("solid.logIn.submit","Log in")),1)]),_:1},8,["disabled","class"]))],2),f.allowLegacyAuthenticator&&o.value&&!E(n).authenticator?(N(),ae(E(So),{key:0,class:"text-sm font-normal text-gray-700",onClick:h[2]||(h[2]=y=>E(n).authenticator="inrupt")},{default:K(()=>[$e(xe(f.$td("solid.logIn.switchAuthenticator","Can't log in? Try using a different authentication method")),1)]),_:1})):We("",!0)]),_:1},8,["form","class"])}}}),pU={$solid:at};function mU(t={}){return{async install(e){CR(),zj({...Bj,...t.authenticators??{}}),nU(),qj(lE(t.defaultAuthenticator??"inrupt")),mM(n=>{if(n instanceof Pc)return n.description?`${n.message} (${n.description})`:n.message}),typeof t.autoReconnect=="boolean"&&(Lm.autoReconnect=t.autoReconnect,at.hasPersistedState()||(at.autoReconnect=t.autoReconnect)),t.onUserProfileLoaded&&He.on("solid:user-profile-loaded",([n,r])=>{var s;(s=t.onUserProfileLoaded)==null||s.call(t,n,r)}),await Fi(e,pU)}}}const yf=new WeakMap;function Mh(t){return en(Xr(t).map(e=>{const n=t.instance().requireRelation(e).relatedClass;return wo(n)?!1:n}))}function Xr(t){return yf.has(t)||yf.set(t,t.relations.filter(e=>Dt.reservedRelations.includes(e)?!1:t.instance().requireRelation(e)instanceof $0)),yf.get(t)??[]}function hE(t){return Xr(t.static()).reduce((n,r)=>n.concat(t.getRelationModels(r)??[]),[])}function Uv(t){const e=new Set,n=t.instance();e.add(t);for(const r of t.relations)t.reservedRelations.includes(r)||e.add(n.requireRelation(r).relatedClass);return[...e.values()]}function Di(t){return t.getRelatedModels().filter(e=>!cn(e,gp)&&!cn(e,Ri)&&!cn(e,mp)&&!cn(e,Gc)&&e.static()!==Wn)}function pE(t){if(t.isDirty())return!0;if(!(t instanceof Wn))return!1;const e=n=>{var r;return(r=t.getRelationModels(n))==null?void 0:r.some(s=>pE(s))};return Xr(t.static()).some(e)}async function gU(t,e){const n=["authorizations","metadata","operations","tombstone"];let r;do{r=!1;const s=Di(t);for(const i of s)for(const o of i.static("relations"))if(!(n.includes(o)||i.isRelationLoaded(o)||i.getRelation(o)instanceof R0))try{await i.loadRelation(o),r=!0}catch(a){e(a)}}while(r)}const yU=Nn(()=>lt.service("$cloud"));class bU{constructor(){Se(this,"models",new Set);Se(this,"promises",[])}push(e){this.models.add(e),this.syncAfter(ln({seconds:1}))}clear(e){if(!e){this.models=new Set;return}for(const n of e)this.models.delete(n)}async syncAfter(e){const n=typeof e=="function"?e():e;return this.promises.push(n),n.then(()=>jn(this.promises,n)),this.promises.length===1&&this.schedule(),n}schedule(){Promise.all(this.promises).then(()=>ln()).then(()=>{if(this.promises.length!==0){this.schedule();return}const e=this.consume();e.length!==0&&yU.syncIfOnline(e)})}consume(){const e=[],n=new Set;for(const r of this.models)ds(r)&&(this.models.delete(r),hE(r).forEach(s=>n.add(s)),e.push(r));for(const r of this.models)this.models.delete(r),!n.has(r)&&e.push(r);return e}}const Lc=Qn(bU),vt=Nn(()=>lt.service("$cloud")),mE=new WeakMap,Mm=new WeakMap;function vU(t){const e=t.getRelatedModels().concat([t]);for(const n of e)n.cleanDirty(!0)}function wU(t){const e=Di(t).concat([t]);for(const n of e){if(!n.operations||n.operations.length===0)continue;const r=(n.operations??[]).filter(s=>!(s instanceof ws)||!n.ignoreRdfPropertyHistory(s.property,!0));if(!r.some(s=>!s.isInception(n))){n.setRelationModels("operations",[]);continue}n.setRelationModels("operations",r)}}async function Bv(t){vt.setState({localModelUpdates:{...vt.localModelUpdates,[t.url]:1}}),RU(t.static())&&await Nh(t.static(),Kt(t.url)),vt.autoPush&&vt.ready&&!vt.syncing&&Lc.push(t)}function _U(t,e){var s;const n=Rr(Wn),r=(s=vt.registeredModels.find(({modelClass:i})=>i===t.static()))==null?void 0:s.path;return new n({url:tc(bE(t,e).static(),r)})}async function Nh(t,e){var n,r;(n=vt.modelCollections[t.modelName])!=null&&n.includes(e)||(vt.setState("modelCollections",{...vt.modelCollections,[t.modelName]:(vt.modelCollections[t.modelName]??[]).concat(e)}),(r=vt.modelCollections[t.modelName])!=null&&r.includes(t.collection)||(t.collection=e),await $i(t,e))}async function qv(t){if(xU(t))return;const e=vt.localModelUpdates[t.url]??0;vt.setState({localModelUpdates:t.isSoftDeleted()?vs(vt.localModelUpdates,t.url):{...vt.localModelUpdates,[t.url]:e+1}}),await vt.getDocumentsCache().forget(Kt(t.requireDocumentUrl()),t.requireDocumentUrl()),vt.autoPush&&vt.ready&&!vt.syncing&&Lc.push(t)}function Fh(t,e){const n={},r=Array.from(t);for(const[s,i]of Object.entries(vt.localModelUpdates)){const o=lr(s);(t.has(s)||r.some(l=>l.endsWith("/")&&s.startsWith(l)))&&!(e!=null&&e.has(o))||(n[s]=i)}vt.setState({localModelUpdates:n})}function gE(t,e={}){const n=Array.from(new Set(Di(t).map(r=>r.static()))).map(r=>[r,Rr(r)]);return je(t.clone({constructors:n}),r=>{wU(r),e.clean&&vU(r)})}function yE(t){const e=new Set;e.add(t.static());for(const r of t.static().relations)e.add(t.requireRelation(r).relatedClass);const n=[...e.values()].map(r=>[r,kU(r)]);return t.clone({constructors:n})}async function zv(t,e,n){const r=Rr(Ys),s=e.map(a=>a.url),i=t.filter(a=>!s.includes(a.url)).map(a=>a.requireDocumentUrl()).filter(a=>!n.has(a)),o=await r.all({$in:i});return e.concat(o)}function xU(t){return!t.getDocumentModels().flatMap(r=>{var s;return((s=r.operations)==null?void 0:s.map(i=>[r,i]))??[]}).some(([r,s])=>{var i,o;return s.date.getTime()!==((o=(i=r.metadata)==null?void 0:i.updatedAt)==null?void 0:o.getTime())?!1:s instanceof ws?!r.ignoreRdfPropertyHistory(s.property,!0):!0})}function bE(t,e){return e.get(t.url)??yE(t)}function jh(){return[...vt.registeredModels].map(({modelClass:t})=>Pm(t,{includeSoftDeleted:!0})).flat()}function EU(){return vt.schemaMigrations}function SU(){vt.schemaMigrations.clear()}function Vv(t){return vt.schemaMigrations.get(t)}function Rr(t){return mE.get(t)??TU(t)}function tc(t,e){const n=at.requireUser().storageUrls[0],r=wo(t)&&Xr(t).map(s=>{const i=t.instance().requireRelation(s).relatedClass;return wo(i)?null:i}).filter(Boolean)[0];return e??(e=`/${(r||t).modelName.toLowerCase()}s/`),ic((e.startsWith("/")?n.slice(0,-1):n)+e)}function AU(t,e){return e.get(t.url)??gE(t)}function IU(t){for(const{modelClass:e}of vt.registeredModels)if(Pm(e).some(r=>r.url===t.url))return!0;return!1}function Ea(t){return Mm.has(t.static())}function CU(t){return!Ea(t)}function RU(t){return vt.registeredModels.some(({modelClass:e})=>e===t)}function TU(t){var s;const e=t,n=(i,o)=>{i.timestamps=e.timestamps,i.history=e.history,o(),i.timestamps=[],i.history=!1},r=(s=class extends e{initialize(i,o){n(this._proxy.static(),()=>super.initialize(i,o))}initializeRelations(){super.initializeRelations();for(const i of Object.values(this._relations))i.relatedClass=Rr(i.relatedClass)}fixMalformedAttributes(){n(this.static(),()=>super.fixMalformedAttributes())}},Se(s,"timestamps",!1),Se(s,"history",!1),s);return e.on("schema-updated",async i=>{await r.updateSchema({...i,timestamps:!1,history:!1})}),t.ensureBooted(),Qh({[`Remote${t.modelName}`]:r}),lt.service("$cloud")&&vt.getEngine()&&r.setEngine(vt.requireEngine()),mE.set(e,r),Mm.set(r,e),r}function kU(t){return Mm.get(t)??Xe(`Couldn't find local class for ${t.modelName}`)}class $U extends _m{constructor(){super(...arguments);Se(this,"urlMigrations",[]);Se(this,"collectionMigrations",[])}migrateUrl(n,r,s){this.urlMigrations.push({modelClass:n,local:r,remote:s})}migrateCollection(n,r,s){this.collectionMigrations.push({modelClass:n,local:r,remote:s})}async run(){const n=Xh(),r=await n.getCollections(),s=new Set;for(const i of r){const o=await n.readMany(i);for(const[a,l]of Object.entries(o)){const c=this.replaceUrl(a);await n.create(Kt(c),this.replaceDocumentUrls(l),c),await n.delete(i,a)}}for(const{modelClass:i,remote:o}of this.urlMigrations)$i(i,Kt(o),{refresh:!1});for(const{modelClass:i,local:o,remote:a}of this.collectionMigrations){const l=Object.assign({},at.collections),c=(at.collections[i.modelName]??[]).filter(u=>!o.startsWith(u));Xj(i,o),$i(i,a,{refresh:!1}),at.collections=l,r.filter(u=>o.startsWith(u)).forEach(u=>s.add(u)),c.length>0?l[i.modelName]=c:delete l[i.modelName]}await n.dropCollections(Array.from(s))}replaceDocumentUrls(n){for(const[r,s]of Object.entries(n)){if(r==="@id"&&typeof s=="string"){n[r]=this.replaceUrl(s);continue}typeof s!="object"||s===null||(n[r]=this.replaceDocumentUrls(s))}return n}replaceUrl(n){for(const{local:r,remote:s}of this.urlMigrations)if(n.startsWith(r))return n.replace(r,s);for(const{local:r,remote:s}of this.collectionMigrations)if(n.startsWith(r))return n.replace(r,s);return n}}function DU(t){const e={};return async()=>("value"in e||(e.value=await t()),e.value)}class vE{async loadContainedModels(e,n={}){if(CU(e)){const u=[];for(const d of Xr(e.static())){const f=await e.loadRelationIfUnloaded(d)??[];u.push(...un(f))}return u}const r={},s=[],i=Vt(e.documents,"url"),o=xS(e.resourceUrls,10),a=o.flat().map(u=>({documentUrl:u,completed:!1})),l=Vt(a,"documentUrl");n.status&&(n.status.children=a);for(const u of o)await Promise.all(u.map(async d=>{var m;const{children:f,tombstones:h}=await this.loadDocumentChildren(e,d,i,n.onDocumentError,n.onDocumentRead);s.push(...h);for(const[y,S]of Object.entries(f))(r[y]??(r[y]=[])).push(...S);d.endsWith("/")||(Nn(l.get(d)).completed=!0,await((m=n.onDocumentLoaded)==null?void 0:m.call(n)))}));for(const[u,d]of Object.entries(r))e.setRelationModels(u,d);const c=n.ignoreTombstones?Object.values(r).flat():Object.values(r).flat().concat(s);return n.status&&(n.status.children=c.map(u=>Nn(l.get(u.requireDocumentUrl())))),c}async loadContainedDocuments(e,n={}){var i,o,a;if(!Ea(e))throw Error("Cannot get contained models from local model");const r={},s=e.requireEngine();for(let l=0;l<e.resourceUrls.length;l++){const c=e.resourceUrls[l];if(!c||c.endsWith("/"))continue;r[c]=await s.readOne(e.url,c);const u=(o=(i=n.status)==null?void 0:i.children)==null?void 0:o[l];u&&(u.completed=!0),await((a=n.onDocumentLoaded)==null?void 0:a.call(n))}return r}async loadDocumentChildren(e,n,r,s,i){return this.loadDocumentChildrenFromRemote(e,n,s,i)}async loadDocumentChildrenFromRemote(e,n,r,s){const i={},o=[],a=DU(async()=>{try{const l=e.documents.find(d=>d.url===n),c=await e.requireEngine().readOne(Kt(n),n),u=await Ys.createManyFromEngineDocuments({[n]:c});return o.push(...u),l&&(s==null||s(l)),c}catch(l){if(cn(l,zr))return null;if(!r)throw l;return r(l),null}});for(const l of Xr(e.static())){const c=e.requireRelation(l);if(c.loaded){i[l]=c.getLoadedModels();continue}const u=await a();if(u)try{const d=await c.relatedClass.createManyFromEngineDocuments({[n]:u});i[l]=d}catch(d){if(!r)throw d;r(d)}}return{children:i,tombstones:o}}}const ta=new WeakMap;class wE{async loadTypeIndex(e={}){const n=at.requireUser();return(e.fresh||!ta.has(n))&&ta.set(n,await at.findPrivateTypeIndex({fresh:e.fresh})),e.create&&!ta.get(n)&&ta.set(n,await at.findOrCreatePrivateTypeIndex()),ta.get(n)??null}}class _E{async indexLocalModels(e){for(const n of e)await this.addLocalModel(n)}async addLocalModel(e){if(!this.localModels.hasKey(e.url)){this.localModels.add(e);for(const n of Xr(e.static()))await e.loadRelationIfUnloaded(n);for(const n of Di(e))await this.addLocalModel(n)}}}const OU=_m;class Tu extends Fc(OU,[vE,wE,_E]){constructor(){super();Se(this,"_models");this.localModels=Vt([],"url")}static restore(n){return je(new Tu,r=>{r.status=n})}get models(){return this._models}set models(n){if(!n){delete this._models,this.localModels=Vt([],"url");return}const r=mw(this.status.children??[],"modelUrl");this._models=n,this.localModels=Vt([],"url"),this.status.children=n.map(s=>r[s.url]??{modelUrl:s.url,completed:!1})}async run(){if(!this.models)throw new Error("Cant start migration without models");await this.indexLocalModels(this.models);const n=this.status.children??[],r=await this.loadTypeIndex();for(const s of n){const i=this.models.find(({url:o})=>s.modelUrl===o);!i||s.completed||(await this.migrateRegisteredModel(i,s,r),await this.updateProgress(()=>s.completed=!0))}for(const[s,i]of EU())await s.updateSchema(i);SU()}async migrateRegisteredModel(n,r,s){if(await this.migrate(n,r),!ds(n))return;const i=Mh(n.static()),o=s==null?void 0:s.registrations.find(({instanceContainer:a})=>a===n.url);!s||!o||i.length===0||(o.setAttribute("forClass",i.map(a=>{var l;return((l=Vv(a))==null?void 0:l.rdfsClasses)??a.rdfsClass}).flat()),await s.save())}async migrate(n,r){this.assertNotCancelled(),await this.migrateChildren(n,r);const s=Vv(n.static());if(!s)return;const i=await Rr(n.static()).find(n.url),o=await(i==null?void 0:i.migrateSchema(s));await n.migrateSchema(s,{mintOperationUrl:a=>{var l,c;return(c=(l=o==null?void 0:o.operations)==null?void 0:l.find(u=>!cn(a,ws)||!cn(u,ws)?!1:a.property===u.property&&a.date.getTime()===u.date.getTime()))==null?void 0:c.url}})}async migrateChildren(n,r){if(!ds(n))return;const s=await this.loadContainedModels(n,{ignoreTombstones:!0});r.children??(r.children=s.map(i=>({modelUrl:i.url,completed:!1})));for(const i of r.children){const o=s.find(({url:a})=>i.modelUrl===a);!o||i.completed||(await this.migrate(o,i),await this.updateProgress(()=>i.completed=!0))}}}const na=Nn(()=>lt.service("$cloud")),PU=_m;function LU(t){return!!t&&"root"in t}class MU extends Fc(PU,[vE,wE,_E]){constructor(n){super();Se(this,"documentsWithErrors");Se(this,"models");Se(this,"dirtyRemoteModels");Se(this,"rootLocalModels");Se(this,"tombstones");Se(this,"syncedModelUrls");Se(this,"documentsModifiedAt");Se(this,"screenLock",null);Se(this,"localModels");this.documentsWithErrors=new Set,this.models=n,this.rootLocalModels=[],this.localModels=Vt([],"url"),this.tombstones=Vt([],"resourceUrl"),this.syncedModelUrls=new Set,this.documentsModifiedAt={}}async run(){const n=at.requireAuthenticator().engine,r=(i,{headers:o},a)=>{const l=(o==null?void 0:o.get("last-modified"))??a;!l||i.endsWith("/")||(this.documentsModifiedAt[i]=new Date(l))},s=n.listeners.add({onDocumentRead:(i,o)=>r(i,o),onDocumentUpdated:(i,o)=>r(i,o,new Date)});try{this.lockScreen(),this.rootLocalModels=this.models??jh(),n.setConfig({cachesDocuments:!0,persistentCache:na.getDocumentsCache()}),await this.indexLocalModels(this.rootLocalModels),await this.pullChanges(),await this.pushChanges(),n.clearCache(),n.setConfig({cachesDocuments:!1,persistentCache:void 0})}finally{this.releaseScreen(),s()}}lockScreen(){const n=navigator;if(n.wakeLock)try{this.screenLock=n.wakeLock.request("screen").catch(r=>{ri.reportDevelopmentError(r,"Could not request screen wake lock")})}catch(r){ri.reportDevelopmentError(r,"Could not request screen wake lock")}}releaseScreen(){this.screenLock&&(this.screenLock.then(n=>n==null?void 0:n.release()),this.screenLock=null)}getInitialStatus(){return{root:!0,completed:!1,children:[{completed:!1},{completed:!1}]}}calculateCurrentProgress(n){return n??(n=this.status),LU(n)?Cw(this.calculateCurrentProgress(n.children[0])*.9+this.calculateCurrentProgress(n.children[1])*.1,2):super.calculateCurrentProgress(n)}async pullChanges(){const n=this.models?await this.fetchRemoteModelsForLocal(this.models):await this.fetchRemoteModels(),r=Vt(n,s=>s instanceof Ys?s.resourceUrl:s.url);this.dirtyRemoteModels=await this.synchronizeModels(r),await this.updateProgress(s=>s.children[0].completed=!0)}async pushChanges(){const n=this.dirtyRemoteModels??[],r=this.status.children[1].children=n.map(()=>({completed:!1}));for(let i=0;i<n.length;i++){const o=n[i],a=r[i];if(o.isSoftDeleted()){o.enableHistory(),o.enableTombstone(),await o.forceDelete(),await this.updateProgress(()=>a.completed=!0);return}await this.saveModelAndRelated(o,a),await this.updateTypeRegistrations(o),await this.updateProgress(()=>a.completed=!0)}const s=na.getDocumentsCache();for(const[i,o]of Object.entries(this.documentsModifiedAt))await s.remember(Kt(i),i,o);Fh(this.syncedModelUrls,this.documentsWithErrors),await this.updateProgress(i=>i.children[1].completed=!0)}async fetchRemoteModels(){const n=this.status.children[0],r=await this.loadTypeIndex({fresh:!0});if(!r)return[];const s=[],i=this.getTypeRegistrations(r);n.children=i.map(()=>({completed:!1}));for(let o=0;o<i.length;o++)await this.ignoringDocumentErrors(async()=>{var f;const a=Nn((f=n.children)==null?void 0:f[o]),{registration:l,registeredModel:c}=Nn(i[o]),u=Rr(c.modelClass);if(!l.instanceContainer)return;if(wo(u)){await Nh(c.modelClass,Kt(l.instanceContainer));const h=await u.find(l.instanceContainer);h&&(await this.loadChildren(h,a),s.push(h)),await this.updateProgress(()=>a.completed=!0);return}const d=await this.fetchRemoteModelsFromContainer(a,c.modelClass,u,l.instanceContainer);s.push(...d),await this.updateProgress(()=>a.completed=!0)});for(const o of s)await gU(o,a=>this.handleDocumentError(a));return zv(this.rootLocalModels,s,this.documentsWithErrors)}async fetchRemoteModelsFromContainer(n,r,s,i){var c;const o=await Rr(Wn).find(i);if(!o)return[];n.children=o.resourceUrls.map(()=>({completed:!1}));const a=await this.loadContainedDocuments(o,{status:n,onDocumentError:u=>this.handleDocumentError(u),onDocumentRead:u=>{u.url.endsWith("/")||!u.updatedAt||u.url in this.documentsModifiedAt||(this.documentsModifiedAt[u.url]=u.updatedAt)},onDocumentLoaded:async()=>{this.assertNotCancelled(),await this.updateProgress()}}),l=await s.createManyFromEngineDocuments(a);l.length>0&&await Nh(r,i);for(let u=0;u<o.resourceUrls.length;u++){const d=o.resourceUrls[u];if(!(d!=null&&d.endsWith("/")))break;const f=await this.fetchRemoteModelsFromContainer(Nn((c=n.children)==null?void 0:c[u]),r,s,d);l.push(...f),await this.updateProgress(()=>n.completed=!0)}return l}async fetchRemoteModelsForLocal(n){const r=[],s=this.status.children[0].children=n.map(()=>({completed:!1}));for(let i=0;i<n.length;i++)await this.ignoringDocumentErrors(async()=>{const o=n[i],a=s[i],l=await Rr(o.static()).find(o.url);if(!l){await this.updateProgress(()=>a.completed=!0);return}ds(l)&&await this.loadChildren(l,a),r.push(l),await this.updateProgress(()=>a.completed=!0)});return zv(n,r,this.documentsWithErrors)}getTypeRegistrations(n){const r=new Set,s=[...na.registeredModels].map(({modelClass:a})=>{const l=wo(a)?Mh(a):[];return{modelClass:a,rdfsClasses:l.length>0?l.map(c=>c.rdfsClasses).flat():a.rdfsClasses}}),i=n.registrations.map(a=>{const l=s.find(({rdfsClasses:c})=>!!a.instanceContainer&&c.some(u=>a.forClass.includes(u)));return!l||!a.instanceContainer||r.has(a.instanceContainer)?null:(r.add(a.instanceContainer),{registration:a,registeredModel:l})}).filter(a=>!!a),o=i.map(({registration:a})=>a.instanceContainer);return i.filter(({registration:a})=>!o.some(l=>{var c;return l&&l!==a.instanceContainer&&((c=a.instanceContainer)==null?void 0:c.startsWith(l))}))}async updateTypeRegistrations(n){if(!IU(n))return;const r=ds(n)?n:_U(n,this.localModels),s=ds(n)?Mh(n.static()):[n.static()];if(s.length===0)return;const i=await this.loadTypeIndex({create:!0});i.registrations.some(o=>o.instanceContainer&&n.url.startsWith(o.instanceContainer))||await r.register(i,s)}async loadChildren(n,r){var i,o;if(this.assertNotCancelled(),!ds(n))return;const s=await this.loadContainedModels(n,{status:r,onDocumentError:a=>this.handleDocumentError(a),onDocumentRead:a=>{a.url.endsWith("/")||!a.updatedAt||a.url in this.documentsModifiedAt||(this.documentsModifiedAt[a.url]=a.updatedAt)},onDocumentLoaded:async()=>{this.assertNotCancelled(),await this.updateProgress()}});for(let a=0;a<s.length;a++){const l=s[a];if(l instanceof Ys){this.tombstones.add(l);continue}if(this.tombstones.hasKey(l.url)){await this.deleteChild(n,l);continue}await this.loadChildren(l,(i=r==null?void 0:r.children)==null?void 0:i[a]),(o=r==null?void 0:r.children)!=null&&o[a]&&await this.updateProgress(()=>{var c;return Nn((c=r.children)==null?void 0:c[a]).completed=!0})}}async deleteChild(n,r){for(const s of n.static("relations")){const i=n.requireRelation(s);if(i.related){if(Array.isArray(i.related)){i.related=i.related.filter(o=>o!==r);continue}if(i.related===r){i.related=null;continue}}}await r.forceDelete()}async saveModelAndRelated(n,r,s){if(this.assertNotCancelled(),s??(s=new Set),s.has(n))return;if(s.add(n),Ea(n)&&n.isSoftDeleted()){n.enableHistory(),n.enableTombstone(),await n.forceDelete();return}if(n.getDocumentUrl()&&this.documentsWithErrors.has(n.requireDocumentUrl()))return;const i=n.isDirty();if(await n.save(),(i||Ea(n))&&this.syncedModelUrls.add(n.url),Ea(n)){const l=n.requireDocumentUrl(),c=this.documentsModifiedAt[l];c&&(await na.getDocumentsCache().remember(Kt(l),l,c),delete this.documentsModifiedAt[l])}const o=Xn(Di(n),n),a=r?o.map(()=>({completed:!1})):[];r&&(r.children=a);for(let l=0;l<o.length;l++){const c=o[l],u=a[l];await this.saveModelAndRelated(c,u,s),u&&await this.updateProgress(()=>u.completed=!0)}}async synchronizeModels(n){const r=new Set,s=new Set;for(const o of n.items()){if(o instanceof Ys){const l=this.localModels.get(o.resourceUrl);l&&(await l.forceDelete(),s.add(l));continue}const a=bE(o,this.localModels);a.exists()||this.syncedModelUrls.add(a.url),await this.loadChildren(a),await Dt.synchronize(a,o),await this.reconcileInconsistencies(a,o),await this.saveModelAndRelated(a),await this.addLocalModel(a),this.rootLocalModels.push(a),r.add(a.url)}for(const o of this.rootLocalModels){if(s.has(o)||r.has(o.url))continue;await this.loadChildren(o);const a=AU(o,n);await Dt.synchronize(o,a),n.add(a)}const i=[];for(const o of n.getItems()){if(pE(o)){i.push(o);continue}await this.rememberModelDocuments(o)}return i}async reconcileInconsistencies(n,r,s){n.rebuildAttributesFromHistory(),n.setAttributes(r.getAttributes(!0)),s??(s=new Set),s.add(n);for(const o of Xr(n.static()))await this.synchronizeContainerDocuments(n.requireRelation(o),r.requireRelation(o));const i=Vt(Di(r),"url");for(const o of Di(n))s.has(o)||!o.isRelationLoaded("operations")||!i.hasKey(o.url)||await this.reconcileInconsistencies(o,i.require(o.url),s);n.isDirty()&&await Dt.synchronize(n,r)}async synchronizeContainerDocuments(n,r){const s=Vt(n.related??[],"url"),i=Vt(r.related??[],"url"),o=s.getKeys().filter(l=>!i.hasKey(l)&&!i.hasKey(encodeURI(l))),a=i.getKeys().filter(l=>!s.hasKey(l)&&!s.hasKey(encodeURI(l)));for(const l of o){const c=s.require(l),u=gE(c);r.addRelated(u),i.add(u)}for(const l of a){const c=i.require(l),u=yE(c);n.addRelated(u),s.add(u),this.syncedModelUrls.add(u.url)}for(const l of s.items()){const c=i.require(l.url);await Dt.synchronize(l,c),await this.saveModelAndRelated(l)}}async rememberModelDocuments(n){if(!ds(n)){const s=n.requireDocumentUrl(),i=this.documentsModifiedAt[s];i&&(await na.getDocumentsCache().remember(Kt(s),s,i),delete this.documentsModifiedAt[s]);return}const r=Xr(n.static()).map(s=>n.getRelationModels(s)??[]).flat();for(const s of r)await this.rememberModelDocuments(s)}async ignoringDocumentErrors(n){try{await n()}catch(r){this.handleDocumentError(r)}}handleDocumentError(n){if(cn(n,u0)){console.warn(n.message),n.documentUrl&&this.documentsWithErrors.add(n.documentUrl);return}if(cn(n,qw)){console.warn(n.message);const r=n.attributes[zt(n.modelName).primaryKey],s=r&&lr(Tt(r));s&&this.documentsWithErrors.add(s);return}throw n}}const Ot={Disconnected:"disconnected",Offline:"offline",Online:"online",Syncing:"syncing",Migrating:"migrating"},xE={manualSetup:!1},NU=di({name:"cloud",persist:["localModelUpdates","migrationDismissed","migrationJob","modelCollections","pollingEnabled","pollingMinutes","ready","startupSync"],initialState:()=>({autoPush:!0,localModelUpdates:{},migrationDismissed:!1,migrationJob:null,migrationPostponed:!1,modelCollections:{},pollingEnabled:!0,pollingMinutes:10,ready:!1,manualSetup:xE.manualSetup,registeredModels:[],schemaMigrations:new Map,setupDismissed:!1,setupOngoing:!1,startupSync:!0,status:Ot.Disconnected,syncError:null,syncJob:null}),serialize:t=>{var e;return Fb(t,{migrationJob:(e=t.migrationJob)==null?void 0:e.serialize()})},restore:t=>Fb(t,{migrationJob:t.migrationJob&&Tu.restore(t.migrationJob)}),watch:{migrationJob(t){t==null||t.listeners.add({onUpdated:()=>this.updatePersistedState("migrationJob")})}},computed:{disconnected:({status:t})=>t===Ot.Disconnected,online:({status:t})=>t===Ot.Online,offline:({status:t})=>t===Ot.Offline,syncing:({status:t})=>t===Ot.Syncing,migrating:({status:t})=>t===Ot.Migrating,localChanges({localModelUpdates:t}){return Object.values(t).reduce((e,n)=>e+n,0)},dirty(){return this.localChanges>0},migrationStarted({migrationJob:t}){return!!t},migrationDisabledReason({status:t,ready:e}){return at.isLoggedIn()?e?t===Ot.Syncing||t===Ot.Migrating?Ne("cloud.migrationNotSyncing","Wait for syncing to finish before starting the migration"):this.online?null:Ne("cloud.migrationNotOnline","You need to be online in order to start the migration"):Ne("cloud.migrationNotReady","You need to backup your data before starting the migration"):Ne("cloud.migrationNotLoggedIn","You need to reconnect before starting the migration")}}});class FU extends NU{constructor(){super(...arguments);Se(this,"asyncLock",new Kh);Se(this,"engine",null);Se(this,"pollingInterval",null);Se(this,"documentsCache",null)}async whenReady(n){return this.ready?n():new Promise(r=>{const s=()=>r(n());He.once("cloud:ready",s)})}async setup(n){this.setupOngoing=!0;try{await this.backup(n),await this.setReady(!0),await this.sync()}finally{this.setupOngoing=!1}}getEngine(){return this.engine}requireEngine(){return this.engine??Xe("Could not get required Engine")}dismissSetup(){this.setupDismissed=!0}dismissMigration(){this.migrationDismissed=!0}postponeMigration(){this.migrationPostponed=!0}async syncIfOnline(n={}){this.online&&await this.sync(n)}async sync(n={}){const r=pw(n)?{models:n}:n instanceof Dt?{model:n}:n;!at.isLoggedIn()||!this.ready||!this.online||await this.asyncLock.run(async()=>{let s=r.model?[r.model]:r.models;const i=Date.now();this.syncError=null,this.status=Ot.Syncing,Lc.clear(s);try{await He.emit("cloud:sync-started",s),r.refreshUserProfile&&await at.refreshUserProfile();const o=r.syncDirty??!0;let a=0;do{if(this.syncJob=new MU(s),this.syncJob.listeners.add(r),await ff(this.syncJob),this.syncJob.cancelled)return;a++,s=this.getDirtyLocalModels().filter(l=>{var c;return!((c=this.syncJob)!=null&&c.documentsWithErrors.has(l.requireDocumentUrl()))})}while(o&&s.length>0&&a<3);Ia("unit")||await ln({milliseconds:Math.max(500,1e3-(Date.now()-i))}),this.syncJob=null}catch(o){if(Ia())throw o;this.syncJob=null,this.syncError=o,await ri.report(o,Ne("cloud.syncFailed","Sync failed"))}finally{this.status=Ot.Online,await He.emit("cloud:sync-completed",s)}})}shouldMigrate(){return this.schemaMigrations.size>0}async migrate(n){if(!this.online||!at.isLoggedIn()||!this.ready)throw new Error("Data cannot be migrated at the moment");this.shouldMigrate()&&await this.asyncLock.run(async()=>{var o;this.status=Ot.Migrating,this.migrationJob??(this.migrationJob=new Tu);const r=Date.now(),s=[],i=(o=this.migrationJob).models??(o.models=jh());Lc.clear(i);try{if(n&&s.push(this.migrationJob.listeners.add(n)),await He.emit("cloud:migration-started",i),await ff(this.migrationJob),this.migrationJob.cancelled){await He.emit("cloud:migration-cancelled",i);return}this.migrationJob=null,this.migrationDismissed=!1,this.migrationPostponed=!1,await ln({milliseconds:Math.max(0,1e3-(Date.now()-r))}),await He.emit("cloud:migration-completed",i)}catch(a){await ri.report(a,Ne("cloud.migrationFailed","Migration failed"))}finally{this.status=Ot.Online,s.forEach(a=>a==null?void 0:a())}})}async register(n,r={}){if(this.registeredModels.find(i=>n===i.modelClass))return;const s=this.engine;s&&Uv(n).forEach(i=>Rr(i).setEngine(s)),this.whenReady(()=>{const[i]=this.modelCollections[n.modelName]??[];n.useSoftDeletes(!0),n.collection=i??tc(n,r.path)}),await Yj(n,{created:i=>this.ready&&Bv(i),updated:i=>this.ready&&qv(i),deleted:i=>this.ready&&Fh(new Set([i.url??i.getDeletedPrimaryKey()]))}),wo(n)&&Xr(n).forEach(i=>{const o=n.instance().requireRelation(i).relatedClass;o.on("created",a=>this.ready&&Bv(a)),o.on("updated",a=>this.ready&&qv(a)),o.on("deleted",a=>this.ready&&Fh(new Set([a.url??a.getDeletedPrimaryKey()])))}),this.registeredModels.push({modelClass:n,path:r.path});for(const i of this.modelCollections[n.modelName]??[])await $i(n,i)}registerSchemaMigration(n,r){this.schemaMigrations.set(n,r)}requireRemoteCollection(n){for(const r of this.registeredModels)if(n===r.modelClass)return tc(r.modelClass,r.path);throw new Error(`Failed resolving remote collection for '${n.modelName}' model`)}getDocumentsCache(){return this.documentsCache||(this.documentsCache=new RR(jp(),Xh())),this.documentsCache}async boot(){await at.booted,at.isLoggedIn()&&this.login(at.authenticator),He.on("auth:login",({authenticator:n})=>this.login(n)),He.on("auth:logout",()=>this.logout()),He.once("application-ready",()=>this.onApplicationReady()),He.once("application-mounted",()=>this.onApplicationMounted()),Lt(()=>{if(this.pollingInterval&&clearInterval(this.pollingInterval),!this.pollingEnabled||this.migrationJob){this.pollingInterval=null;return}this.pollingInterval=setInterval(()=>this.sync(),this.pollingMinutes*60*1e3)}),this.watchNetworkStatus(),await this.bustDocumentsCache(),await this.registerModels()}getDirtyLocalModels(){const n=Object.keys(this.localModelUpdates),r=[];for(const{modelClass:s}of this.registeredModels)for(const i of Pm(s,{includeSoftDeleted:!0}))r.push(...this.getModelsIn(n,i));return r}getModelsIn(n,r){const s=[];return n.includes(r.url)&&s.push(r),ds(r)&&s.push(...hE(r).map(i=>this.getModelsIn(n,i)).flat()),s}async setReady(n){this.ready||!n||(await He.emit("cloud:ready"),this.ready=!0)}async backup(n){await He.emit("cloud:backup-started"),n??(n=new WeakMap);const r=new $U;for(const{modelClass:s,path:i}of this.registeredModels){for(const[l,c]of Object.entries(n.get(s)??{}))r.migrateUrl(s,l,c);const o=s.collection,a=tc(s,i);s.collection=a,r.migrateCollection(s,o,a)}await ff(r),await He.emit("cloud:backup-completed")}async onApplicationReady(){this.ready||!at.isLoggedIn()||await this.setReady(!jh().some(n=>n.url.startsWith("solid://")))}async onApplicationMounted(){if(at.isLoggedIn()&&!this.ready&&!this.manualSetup){await this.setup();return}this.syncOnStartup()&&await this.sync()}login(n){const r=[...this.registeredModels].map(({modelClass:s})=>Uv(s)).flat().concat([Ys]);this.status=Ot.Online,this.engine=n.engine,Rr(Wn).setEngine(this.engine);for(const s of r)Rr(s).setEngine(this.engine)}async logout(){this.setState({autoPush:!0,localModelUpdates:{},migrationDismissed:!1,migrationJob:null,migrationPostponed:!1,modelCollections:{},pollingEnabled:!0,pollingMinutes:10,ready:!1,schemaMigrations:new Map,setupDismissed:!1,setupOngoing:!1,startupSync:!0,status:Ot.Disconnected,syncError:null,syncJob:null}),await this.getDocumentsCache().clear()}watchNetworkStatus(){globalThis.addEventListener("online",()=>{this.status===Ot.Offline&&(this.status=Ot.Online)}),globalThis.addEventListener("offline",()=>{this.status===Ot.Online&&(this.status=Ot.Offline)})}syncOnStartup(){return Si("startupSync")?sc(ca("startupSync")):this.migrationJob?!1:this.startupSync}async bustDocumentsCache(){!Si("bustDocumentsCache")||!sc(ca("bustDocumentsCache"))||await this.getDocumentsCache().clear()}async registerModels(){const n=Kw();for(const r of n.values())!D0(r)||!r.cloud||await this.register(r,typeof r.cloud=="boolean"?{}:r.cloud)}}const or=Qn(FU),jU={viewBox:"0 0 20 20","aria-hidden":"true",width:"1.2em",height:"1.2em"};function UU(t,e){return N(),_e("svg",jU,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"m6 2l2-2h4l2 2h4v2H2V2zM3 6h14l-1 14H4zm5 2v10h1V8zm3 0v10h1V8z"},null,-1)]))}const BU=it({name:"zondicons-trash",render:UU}),EE=fe({__name:"AccountLoginModal",setup(t){return(e,n)=>(N(),ae(E(Mr),{title:e.$td("cloud.logIn.title","Connect account")},{default:K(()=>[z(E(bt),{"lang-key":"cloud.logIn.info","lang-default":"Log in to your [Solid account](https://solidproject.org) to keep data safe across devices."}),z(E(So),{class:"text-sm",onClick:n[0]||(n[0]=r=>e.$ui.alert(e.$td("cloud.logIn.learnMore","What is Solid?"),e.$td("cloud.logIn.learnMoreMessage",`Solid is a decentralized storage protocol built on top of web standards. If you want to use this app across devices, you can use Solid to keep changes in sync. Even if you use it in a single device, this will also keep your data secure in case your device is lost.

In any case, Focus works 100% offline and you can connect your Solid POD later on. If you've never heard of Solid and you're just trying things out, you can keep using it without an account.

[Learn more](https://solidproject.org)`)))},{default:K(()=>[$e(xe(e.$td("cloud.logIn.learnMore","What is Solid?")),1)]),_:1}),z(E(fE),{"no-loading":"",class:"mt-4"})]),_:1},8,["title"]))}}),qU={key:0,class:"mt-4"},zU={class:"text-base font-semibold"},VU={class:"ml-1"},HU=fe({__name:"PurgeData",setup(t){async function e(){await It.confirm(Ne("settings.purgeConfirmTitle","Delete everything?"),Ne("settings.purgeConfirmMessage","If you proceed, all your data will be deleted forever. If you want to save it before wiping this device, you can [connect to your Solid account](#action:connect) first."),{acceptVariant:"danger",acceptText:Ne("settings.purgeConfirmAccept","Purge data"),actions:{connect:()=>It.modal(EE)}})&&(await It.closeAllModals(),await mu.purge())}return(n,r)=>n.$solid.hasLoggedIn()?We("",!0):(N(),_e("details",qU,[me("summary",null,[me("span",zU,xe(n.$td("settings.dangerZone","Danger zone")),1)]),z(E(st),{variant:"danger",class:"mt-4",onClick:r[0]||(r[0]=s=>e())},{default:K(()=>[z(E(BU),{class:"size-4"}),me("span",VU,xe(n.$td("settings.purge","Purge data")),1)]),_:1})]))}}),KU=[{priority:0,component:HU}],WU={viewBox:"0 0 20 20","aria-hidden":"true",width:"1.2em",height:"1.2em"};function GU(t,e){return N(),_e("svg",WU,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M2.93 17.07A10 10 0 1 1 17.07 2.93A10 10 0 0 1 2.93 17.07m12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32M6.7 9.29L9 11.6l4.3-4.3l1.4 1.42L9 14.4l-3.7-3.7l1.4-1.42z"},null,-1)]))}const JU=it({name:"zondicons-checkmark-outline",render:GU}),XU={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function YU(t,e){return N(),_e("svg",XU,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5c0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5l5 5z"},null,-1)]))}const QU=it({name:"ic-sharp-cloud-upload",render:YU}),ZU={viewBox:"0 0 20 20","aria-hidden":"true",width:"1.2em",height:"1.2em"};function eB(t,e){return N(),_e("svg",ZU,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M3.94 6.5L2.22 3.64l1.42-1.42L6.5 3.94c.52-.3 1.1-.54 1.7-.7L9 0h2l.8 3.24c.6.16 1.18.4 1.7.7l2.86-1.72l1.42 1.42l-1.72 2.86c.3.52.54 1.1.7 1.7L20 9v2l-3.24.8c-.16.6-.4 1.18-.7 1.7l1.72 2.86l-1.42 1.42l-2.86-1.72c-.52.3-1.1.54-1.7.7L11 20H9l-.8-3.24c-.6-.16-1.18-.4-1.7-.7l-2.86 1.72l-1.42-1.42l1.72-2.86c-.3-.52-.54-1.1-.7-1.7L0 11V9l3.24-.8c.16-.6.4-1.18.7-1.7M10 13a3 3 0 1 0 0-6a3 3 0 0 0 0 6"},null,-1)]))}const SE=it({name:"zondicons-cog",render:eB}),tB={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function nB(t,e){return N(),_e("svg",tB,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h6q.425 0 .713.288T12 4t-.288.713T11 5H5v14h6q.425 0 .713.288T12 20t-.288.713T11 21zm12.175-8H10q-.425 0-.712-.288T9 12t.288-.712T10 11h7.175L15.3 9.125q-.275-.275-.275-.675t.275-.7t.7-.313t.725.288L20.3 11.3q.3.3.3.7t-.3.7l-3.575 3.575q-.3.3-.712.288t-.713-.313q-.275-.3-.262-.712t.287-.688z"},null,-1)]))}const rB=it({name:"material-symbols-logout-rounded",render:nB}),sB={viewBox:"0 0 20 20","aria-hidden":"true",width:"1.2em",height:"1.2em"};function iB(t,e){return N(),_e("svg",sB,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M10 3v2a5 5 0 0 0-3.54 8.54l-1.41 1.41A7 7 0 0 1 10 3m4.95 2.05A7 7 0 0 1 10 17v-2a5 5 0 0 0 3.54-8.54zM10 20l-4-4l4-4zm0-12V0l4 4z"},null,-1)]))}const Ml=it({name:"zondicons-refresh",render:iB}),oB={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function aB(t,e){return N(),_e("svg",oB,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"M6 6h12v12H6z"},null,-1)]))}const lB=it({name:"ic-baseline-stop",render:aB}),cB={class:"relative flex items-center rounded-md bg-gray-100 p-4 pr-12"},uB={class:"flex flex-col overflow-hidden"},dB={class:"font-semibold"},fB={class:"px-2"},hB={key:0,class:"mt-4 flex items-center gap-2"},pB={class:"flex w-full flex-col"},mB={key:1,class:"mt-4 flex items-center gap-2"},gB={key:2,class:"mt-4 flex items-center gap-2"},yB={key:3,class:"mt-4 flex items-center gap-2"},bB={key:4,class:"mt-4 flex items-center gap-2"},vB={key:5,class:"mt-4 flex items-center gap-2"},wB={key:6,class:"mt-4 flex items-center gap-2"},_B={class:"flex flex-col gap-2"},xB={class:"flex items-center"},EB={"aria-hidden":"true"},SB={key:0,"aria-hidden":"true"},AB={key:0,class:"mt-4 flex flex-row-reverse justify-start gap-2"},IB=fe({__name:"AccountModal",setup(t){const e=ci("$modalRef"),n=Ee(!1),r=Ne("cloud.advanced.polling","Synchronize every {minutes} minutes",{minutes:"%%separator%%"}).split("%%separator%%"),s=re(()=>at.error??or.syncError),i=re(()=>{if(s.value)return typeof s.value=="string"?s.value:Ne("cloud.info.error","There has been an error connecting.")}),o=re(()=>s.value&&typeof s.value!="string");async function a(){or.syncJob&&(n.value=!0,await Promise.race([or.syncJob.cancel(),or.syncJob.completed]),n.value=!1)}return fu("auth:logout",()=>{var l;return(l=e.value)==null?void 0:l.close()}),(l,c)=>(N(),ae(E(Mr),{ref:"$modalRef","title-hidden":"","close-hidden":"",title:l.$td("account.title","Account")},{default:K(()=>{var u,d;return[me("div",cB,[z(E(dE),{class:"mr-2 size-16 shrink-0"}),me("div",uB,[me("span",dB,xe(((u=l.$solid.user)==null?void 0:u.name)??l.$td("user.anonymous","Anonymous")),1),z(E(So),{href:(d=l.$solid.user)==null?void 0:d.webId,class:"mt-0.5 truncate text-sm font-light text-gray-500"},{default:K(()=>{var f;return[$e(xe((f=l.$solid.user)==null?void 0:f.webId),1)]}),_:1},8,["href"])]),z(E(st),{size:"icon",variant:"ghost",class:"absolute top-1 right-1 hover:bg-gray-200","aria-label":l.$td("user.settings","Settings"),title:l.$td("user.settings","Settings"),onClick:c[0]||(c[0]=f=>l.$ui.modal(E(Lx)))},{default:K(()=>[z(E(SE),{class:"size-5"})]),_:1},8,["aria-label","title"])]),me("div",fB,[l.$cloud.syncing?(N(),_e("div",hB,[z(E(Ml),{class:"mt-0.5 size-6 shrink-0 animate-spin self-start text-green-500"}),me("div",pB,[z(E(bt),{"lang-key":"cloud.info.syncing","lang-default":"Synchronizing..."}),l.$cloud.syncJob?(N(),ae(E($x),{key:0,job:l.$cloud.syncJob,"filled-class":"bg-green-500"},null,8,["job"])):We("",!0)])])):l.$solid.loginOngoing?(N(),_e("div",mB,[z(E(Ml),{class:"mt-0.5 size-6 shrink-0 animate-spin self-start text-green-500"}),z(E(bt),{"lang-key":"cloud.info.reconnecting","lang-default":"Reconnecting..."})])):s.value?(N(),_e("div",gB,[z(E(oa),{class:"mt-0.5 size-6 shrink-0 self-start text-red-500"}),me("div",null,[z(E(bt),{text:i.value},null,8,["text"]),o.value?(N(),ae(E(So),{key:0,class:"text-sm text-red-700 opacity-50 hover:opacity-75 focus-visible:opacity-75",onClick:c[1]||(c[1]=f=>l.$errors.inspect(s.value))},{default:K(()=>[$e(xe(l.$td("errors.viewDetails","View details")),1)]),_:1})):We("",!0)])])):l.$cloud.ready?l.$cloud.dirty?(N(),_e("div",bB,[z(E(oa),{class:"mt-0.5 size-6 shrink-0 self-start text-yellow-500"}),z(E(bt),{"lang-key":"cloud.info.changes","lang-default":"Everything is up to date. | There is one local change. | There are {n} local changes.","lang-params":l.$cloud.localChanges},null,8,["lang-params"])])):l.$cloud.online||l.$cloud.offline?(N(),_e("div",vB,[z(E(JU),{class:Ye(["mt-0.5 size-6 shrink-0 self-start",{"text-green-500":l.$cloud.online,"text-gray-700":l.$cloud.offline}])},null,8,["class"]),l.$cloud.online?(N(),ae(E(bt),{key:0,"lang-key":"cloud.info.changes","lang-default":"Everything is up to date.","lang-params":0})):(N(),ae(E(bt),{key:1,"lang-key":"cloud.info.offline","lang-default":"Everything is up to date, but you're currently offline."}))])):(N(),_e("div",wB,[z(E(oa),{class:"mt-0.5 size-6 shrink-0 self-start text-yellow-500"}),z(E(bt),{"lang-key":"cloud.info.disconnected","lang-default":"You are disconnected from your Solid account, all the changes you make will remain in your device."})])):(N(),_e("div",yB,[z(E(oa),{class:"mt-0.5 size-6 shrink-0 self-start text-yellow-500"}),z(E(bt),{"lang-key":"cloud.info.setup","lang-default":"Your data is not backed up yet."})])),z(E(hF),{class:"mt-2"},{default:K(()=>[me("ul",_B,[me("li",null,[z(E(xa),{modelValue:l.$solid.autoReconnect,"onUpdate:modelValue":c[2]||(c[2]=f=>l.$solid.autoReconnect=f),"label-class":"text-base",label:l.$td("cloud.advanced.reconnect","Reconnect on startup")},null,8,["modelValue","label"])]),me("li",null,[z(E(xa),{modelValue:l.$cloud.startupSync,"onUpdate:modelValue":c[3]||(c[3]=f=>l.$cloud.startupSync=f),"label-class":"text-base",label:l.$td("cloud.advanced.startupSync","Synchronize on startup")},null,8,["modelValue","label"])]),me("li",null,[z(E(xa),{modelValue:l.$cloud.pollingEnabled,"onUpdate:modelValue":c[5]||(c[5]=f=>l.$cloud.pollingEnabled=f),"label-class":"text-base"},{default:K(()=>[me("div",xB,[me("span",EB,xe(E(r)[0]),1),z(E(wF),{type:"number",text:`${l.$cloud.pollingMinutes}`,"aria-label":l.$td("cloud.advanced.pollingMinutes","Synchronization interval (in minutes)"),class:"focus-within:border-primary-600 mx-1 -mb-px border-b",onUpdate:c[4]||(c[4]=f=>l.$cloud.pollingMinutes=f)},{default:K(()=>[$e(xe(l.$cloud.pollingMinutes),1)]),_:1},8,["text","aria-label"]),E(r).length>1?(N(),_e("span",SB,xe(E(r)[1]),1)):We("",!0)])]),_:1},8,["modelValue"])])])]),_:1})]),l.$solid.loginOngoing?We("",!0):(N(),_e("div",AB,[l.$cloud.syncing?(N(),ae(E(st),{key:0,variant:"secondary",disabled:n.value,onClick:c[6]||(c[6]=f=>a())},{default:K(()=>[z(E(lB),{class:"size-5"}),me("span",null,xe(n.value?l.$td("cloud.stopping","Stopping..."):l.$td("cloud.stop","Stop synchronization")),1)]),_:1},8,["disabled"])):l.$solid.isLoggedIn()?l.$cloud.ready?(N(),ae(E(st),{key:2,disabled:l.$cloud.offline,onClick:c[8]||(c[8]=f=>l.$cloud.sync({refreshUserProfile:!0}))},{default:K(()=>[z(E(Ml),{class:"size-5"}),me("span",null,xe(l.$td("cloud.sync","Synchronize")),1)]),_:1},8,["disabled"])):(N(),ae(E(st),{key:3,onClick:c[9]||(c[9]=f=>{var h;return l.$cloud.setupDismissed=!1,(h=e.value)==null||h.close(),l.$cloud.manualSetup||l.$cloud.setup()})},{default:K(()=>[z(E(QU),{class:"size-5"}),me("span",null,xe(l.$td("cloud.setup.submit","Back up now")),1)]),_:1})):(N(),ae(E(st),{key:1,onClick:c[7]||(c[7]=f=>l.$solid.reconnect({force:!0}))},{default:K(()=>[z(E(Ml),{class:"size-5"}),me("span",null,xe(l.$td("cloud.reconnect","Reconnect")),1)]),_:1})),l.$cloud.syncing?We("",!0):(N(),ae(E(st),{key:4,variant:"secondary",onClick:c[10]||(c[10]=f=>l.$solid.logout())},{default:K(()=>[z(E(rB),{class:"size-5"}),me("span",null,xe(l.$cloud.ready?l.$td("cloud.logOut","Log out"):l.$td("cloud.disconnect","Disconnect")),1)]),_:1}))]))]}),_:1},8,["title"]))}}),CB={class:"relative size-12"},RB=["aria-label","title"],TB={key:0,class:"absolute -inset-1 animate-spin rounded-full border-2 border-[currentColor_transparent] text-green-500"},kB={class:"sr-only"},$B=fe({__name:"AccountLoggedIn",setup(t){const e=re(()=>or.syncing||at.loginOngoing?{loading:!0,classes:"bg-green-500 sr-only",message:n()??""}:at.error||or.syncError?{classes:"bg-red-500",message:Ne("account.error","There has been an error connecting with your account.")}:!at.isLoggedIn()||or.dirty||!or.ready?{classes:"bg-yellow-500",message:Ne("account.dirty","There are local changes that haven't been synchronized yet.")}:{classes:or.status===Ot.Online?"bg-green-500":"bg-gray-500",message:n()??""});function n(){switch(or.status){case Ot.Syncing:return Ne("cloud.status.syncing","Synchronization in progress");case Ot.Migrating:return Ne("cloud.status.migrating","Migration in progress");case Ot.Online:return Ne("cloud.status.online","Online");case Ot.Offline:return Ne("cloud.status.offline","Offline");case Ot.Disconnected:return Ne("cloud.status.disconnected","Disconnected")}}return(r,s)=>(N(),_e("div",CB,[me("button",{class:"clickable focus-visible:outline-primary-600 flex size-full rounded-full focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",type:"button","aria-label":r.$td("account.open","Open account"),title:r.$td("account.open","Open account"),onClick:s[0]||(s[0]=i=>r.$ui.modal(IB))},[z(E(dE),{class:"size-full"}),e.value.loading?(N(),_e("div",TB)):We("",!0)],8,RB),me("div",{class:Ye(["pointer-events-none absolute right-0 bottom-0 size-3 rounded-full border-2 border-white",e.value.classes])},[me("span",kB,xe(e.value.message),1)],2)]))}}),DB=fe({__name:"AccountLoggedOut",setup(t){return(e,n)=>(N(),ae(E(yF),{align:"start",options:[{label:e.$td("user.logIn","Connect account"),click:()=>e.$ui.modal(EE)},{label:e.$td("user.settings","Settings"),click:()=>e.$ui.modal(E(Lx))}]},{default:K(()=>[z(E(st),{size:"icon",variant:"ghost","aria-label":e.$td("user.menu","Configuration"),title:e.$td("user.menu","Configuration")},{default:K(()=>[z(E(SE),{class:"size-5"})]),_:1},8,["aria-label","title"])]),_:1},8,["options"]))}}),OB=fe({__name:"Account",setup(t){return(e,n)=>e.$solid.hasLoggedIn()?(N(),ae($B,{key:0})):(N(),ae(DB,{key:1}))}}),PB={$cloud:or};function LB(t={}){return{name:"@aerogel/local-first",async install(e){KU.forEach(n=>lt.addSetting(n)),typeof t.manualSetup=="boolean"&&(xE.manualSetup=t.manualSetup,or.manualSetup=t.manualSetup),await Fi(e,PB)}}}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const eo=typeof document<"u";function AE(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function MB(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&AE(t.default)}const dt=Object.assign;function bf(t,e){const n={};for(const r in e){const s=e[r];n[r]=Lr(s)?s.map(t):t(s)}return n}const Sa=()=>{},Lr=Array.isArray,IE=/#/g,NB=/&/g,FB=/\//g,jB=/=/g,UB=/\?/g,CE=/\+/g,BB=/%5B/g,qB=/%5D/g,RE=/%5E/g,zB=/%60/g,TE=/%7B/g,VB=/%7C/g,kE=/%7D/g,HB=/%20/g;function Nm(t){return encodeURI(""+t).replace(VB,"|").replace(BB,"[").replace(qB,"]")}function KB(t){return Nm(t).replace(TE,"{").replace(kE,"}").replace(RE,"^")}function Uh(t){return Nm(t).replace(CE,"%2B").replace(HB,"+").replace(IE,"%23").replace(NB,"%26").replace(zB,"`").replace(TE,"{").replace(kE,"}").replace(RE,"^")}function WB(t){return Uh(t).replace(jB,"%3D")}function GB(t){return Nm(t).replace(IE,"%23").replace(UB,"%3F")}function JB(t){return t==null?"":GB(t).replace(FB,"%2F")}function ja(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const XB=/\/$/,YB=t=>t.replace(XB,"");function vf(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=t4(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:ja(o)}}function QB(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Hv(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function ZB(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Io(e.matched[r],n.matched[s])&&$E(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Io(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function $E(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!e4(t[n],e[n]))return!1;return!0}function e4(t,e){return Lr(t)?Kv(t,e):Lr(e)?Kv(e,t):t===e}function Kv(t,e){return Lr(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function t4(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Os={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ua;(function(t){t.pop="pop",t.push="push"})(Ua||(Ua={}));var Aa;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Aa||(Aa={}));function n4(t){if(!t)if(eo){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),YB(t)}const r4=/^[^#]+#/;function s4(t,e){return t.replace(r4,"#")+e}function i4(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const ku=()=>({left:window.scrollX,top:window.scrollY});function o4(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=i4(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Wv(t,e){return(history.state?history.state.position-e:-1)+t}const Bh=new Map;function a4(t,e){Bh.set(t,e)}function l4(t){const e=Bh.get(t);return Bh.delete(t),e}let c4=()=>location.protocol+"//"+location.host;function DE(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Hv(l,"")}return Hv(n,t)+r+s}function u4(t,e,n,r){let s=[],i=[],o=null;const a=({state:f})=>{const h=DE(t,location),m=n.value,y=e.value;let S=0;if(f){if(n.value=h,e.value=f,o&&o===m){o=null;return}S=y?f.position-y.position:0}else r(h);s.forEach(_=>{_(n.value,m,{delta:S,type:Ua.pop,direction:S?S>0?Aa.forward:Aa.back:Aa.unknown})})};function l(){o=n.value}function c(f){s.push(f);const h=()=>{const m=s.indexOf(f);m>-1&&s.splice(m,1)};return i.push(h),h}function u(){const{history:f}=window;f.state&&f.replaceState(dt({},f.state,{scroll:ku()}),"")}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function Gv(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?ku():null}}function d4(t){const{history:e,location:n}=window,r={value:DE(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const d=t.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:c4()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),s.value=c}catch(h){console.error(h),n[u?"replace":"assign"](f)}}function o(l,c){const u=dt({},e.state,Gv(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),r.value=l}function a(l,c){const u=dt({},s.value,e.state,{forward:l,scroll:ku()});i(u.current,u,!0);const d=dt({},Gv(r.value,l,null),{position:u.position+1},c);i(l,d,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function f4(t){t=n4(t);const e=d4(t),n=u4(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=dt({location:"",base:t,go:r,createHref:s4.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function h4(t){return typeof t=="string"||t&&typeof t=="object"}function OE(t){return typeof t=="string"||typeof t=="symbol"}const PE=Symbol("");var Jv;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Jv||(Jv={}));function Co(t,e){return dt(new Error,{type:t,[PE]:!0},e)}function as(t,e){return t instanceof Error&&PE in t&&(e==null||!!(t.type&e))}const Xv="[^/]+?",p4={sensitive:!1,strict:!1,start:!0,end:!0},m4=/[.+*?^${}()[\]/\\]/g;function g4(t,e){const n=dt({},p4,e),r=[];let s=n.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let d=0;d<c.length;d++){const f=c[d];let h=40+(n.sensitive?.25:0);if(f.type===0)d||(s+="/"),s+=f.value.replace(m4,"\\$&"),h+=40;else if(f.type===1){const{value:m,repeatable:y,optional:S,regexp:_}=f;i.push({name:m,repeatable:y,optional:S});const x=_||Xv;if(x!==Xv){h+=10;try{new RegExp(`(${x})`)}catch(p){throw new Error(`Invalid custom RegExp for param "${m}" (${x}): `+p.message)}}let w=y?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;d||(w=S&&c.length<2?`(?:/${w})`:"/"+w),S&&(w+="?"),s+=w,h+=20,S&&(h+=-8),y&&(h+=-20),x===".*"&&(h+=-50)}u.push(h)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const h=u[f]||"",m=i[f-1];d[m.name]=h&&m.repeatable?h.split("/"):h}return d}function l(c){let u="",d=!1;for(const f of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const h of f)if(h.type===0)u+=h.value;else if(h.type===1){const{value:m,repeatable:y,optional:S}=h,_=m in c?c[m]:"";if(Lr(_)&&!y)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const x=Lr(_)?_.join("/"):_;if(!x)if(S)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);u+=x}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function y4(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function LE(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=y4(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Yv(r))return 1;if(Yv(s))return-1}return s.length-r.length}function Yv(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const b4={type:0,value:""},v4=/[a-zA-Z0-9_]/;function w4(t){if(!t)return[[]];if(t==="/")return[[b4]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${n})/"${c}": ${h}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,c="",u="";function d(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),n=1):f();break;case 4:f(),n=r;break;case 1:l==="("?n=2:v4.test(l)?f():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),s}function _4(t,e,n){const r=g4(w4(t.path),n),s=dt(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function x4(t,e){const n=[],r=new Map;e=tw({strict:!1,end:!0,sensitive:!1},e);function s(d){return r.get(d)}function i(d,f,h){const m=!h,y=Zv(d);y.aliasOf=h&&h.record;const S=tw(e,d),_=[y];if("alias"in d){const p=typeof d.alias=="string"?[d.alias]:d.alias;for(const b of p)_.push(Zv(dt({},y,{components:h?h.record.components:y.components,path:b,aliasOf:h?h.record:y})))}let x,w;for(const p of _){const{path:b}=p;if(f&&b[0]!=="/"){const A=f.record.path,R=A[A.length-1]==="/"?"":"/";p.path=f.record.path+(b&&R+b)}if(x=_4(p,f,S),h?h.alias.push(x):(w=w||x,w!==x&&w.alias.push(x),m&&d.name&&!ew(x)&&o(d.name)),ME(x)&&l(x),y.children){const A=y.children;for(let R=0;R<A.length;R++)i(A[R],x,h&&h.children[R])}h=h||x}return w?()=>{o(w)}:Sa}function o(d){if(OE(d)){const f=r.get(d);f&&(r.delete(d),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(d);f>-1&&(n.splice(f,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const f=A4(d,n);n.splice(f,0,d),d.record.name&&!ew(d)&&r.set(d.record.name,d)}function c(d,f){let h,m={},y,S;if("name"in d&&d.name){if(h=r.get(d.name),!h)throw Co(1,{location:d});S=h.record.name,m=dt(Qv(f.params,h.keys.filter(w=>!w.optional).concat(h.parent?h.parent.keys.filter(w=>w.optional):[]).map(w=>w.name)),d.params&&Qv(d.params,h.keys.map(w=>w.name))),y=h.stringify(m)}else if(d.path!=null)y=d.path,h=n.find(w=>w.re.test(y)),h&&(m=h.parse(y),S=h.record.name);else{if(h=f.name?r.get(f.name):n.find(w=>w.re.test(f.path)),!h)throw Co(1,{location:d,currentLocation:f});S=h.record.name,m=dt({},f.params,d.params),y=h.stringify(m)}const _=[];let x=h;for(;x;)_.unshift(x.record),x=x.parent;return{name:S,path:y,params:m,matched:_,meta:S4(_)}}t.forEach(d=>i(d));function u(){n.length=0,r.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:s}}function Qv(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Zv(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:E4(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function E4(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function ew(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function S4(t){return t.reduce((e,n)=>dt(e,n.meta),{})}function tw(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function A4(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;LE(t,e[i])<0?r=i:n=i+1}const s=I4(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function I4(t){let e=t;for(;e=e.parent;)if(ME(e)&&LE(t,e)===0)return e}function ME({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function C4(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(CE," "),o=i.indexOf("="),a=ja(o<0?i:i.slice(0,o)),l=o<0?null:ja(i.slice(o+1));if(a in e){let c=e[a];Lr(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function nw(t){let e="";for(let n in t){const r=t[n];if(n=WB(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Lr(r)?r.map(i=>i&&Uh(i)):[r&&Uh(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function R4(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Lr(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const T4=Symbol(""),rw=Symbol(""),Fm=Symbol(""),jm=Symbol(""),qh=Symbol("");function ra(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Fs(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(Co(4,{from:n,to:e})):f instanceof Error?l(f):h4(f)?l(Co(2,{from:e,to:f})):(o&&r.enterCallbacks[s]===o&&typeof f=="function"&&o.push(f),a())},u=i(()=>t.call(r&&r.instances[s],e,n,c));let d=Promise.resolve(u);t.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function wf(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(AE(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Fs(u,n,r,o,a,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=MB(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const h=(d.__vccOpts||d)[e];return h&&Fs(h,n,r,o,a,s)()}))}}return i}function sw(t){const e=qt(Fm),n=qt(jm),r=re(()=>{const l=E(t.to);return e.resolve(l)}),s=re(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],d=n.matched;if(!u||!d.length)return-1;const f=d.findIndex(Io.bind(null,u));if(f>-1)return f;const h=iw(l[c-2]);return c>1&&iw(u)===h&&d[d.length-1].path!==h?d.findIndex(Io.bind(null,l[c-2])):f}),i=re(()=>s.value>-1&&O4(n.params,r.value.params)),o=re(()=>s.value>-1&&s.value===n.matched.length-1&&$E(n.params,r.value.params));function a(l={}){if(D4(l)){const c=e[E(t.replace)?"replace":"push"](E(t.to)).catch(Sa);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:re(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function k4(t){return t.length===1?t[0]:t}const $4=fe({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:sw,setup(t,{slots:e}){const n=kr(sw(t)),{options:r}=qt(Fm),s=re(()=>({[ow(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[ow(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&k4(e.default(n));return t.custom?i:Gn("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),NE=$4;function D4(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function O4(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Lr(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function iw(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const ow=(t,e,n)=>t??e??n,P4=fe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=qt(qh),s=re(()=>t.route||r.value),i=qt(rw,0),o=re(()=>{let c=E(i);const{matched:u}=s.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=re(()=>s.value.matched[o.value]);fr(rw,re(()=>o.value+1)),fr(T4,a),fr(qh,s);const l=Ee();return ut(()=>[l.value,a.value,t.name],([c,u,d],[f,h,m])=>{u&&(u.instances[d]=c,h&&h!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),c&&u&&(!h||!Io(u,h)||!f)&&(u.enterCallbacks[d]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,d=a.value,f=d&&d.components[u];if(!f)return aw(n.default,{Component:f,route:c});const h=d.props[u],m=h?h===!0?c.params:typeof h=="function"?h(c):h:null,S=Gn(f,dt({},m,e,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return aw(n.default,{Component:S,route:c})||S}}});function aw(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const L4=P4;function M4(t){const e=x4(t.routes,t),n=t.parseQuery||C4,r=t.stringifyQuery||nw,s=t.history,i=ra(),o=ra(),a=ra(),l=pr(Os);let c=Os;eo&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=bf.bind(null,O=>""+O),d=bf.bind(null,JB),f=bf.bind(null,ja);function h(O,Q){let ie,ne;return OE(O)?(ie=e.getRecordMatcher(O),ne=Q):ne=O,e.addRoute(ne,ie)}function m(O){const Q=e.getRecordMatcher(O);Q&&e.removeRoute(Q)}function y(){return e.getRoutes().map(O=>O.record)}function S(O){return!!e.getRecordMatcher(O)}function _(O,Q){if(Q=dt({},Q||l.value),typeof O=="string"){const V=vf(n,O,Q.path),pe=e.resolve({path:V.path},Q),be=s.createHref(V.fullPath);return dt(V,pe,{params:f(pe.params),hash:ja(V.hash),redirectedFrom:void 0,href:be})}let ie;if(O.path!=null)ie=dt({},O,{path:vf(n,O.path,Q.path).path});else{const V=dt({},O.params);for(const pe in V)V[pe]==null&&delete V[pe];ie=dt({},O,{params:d(V)}),Q.params=d(Q.params)}const ne=e.resolve(ie,Q),Ie=O.hash||"";ne.params=u(f(ne.params));const P=QB(r,dt({},O,{hash:KB(Ie),path:ne.path})),k=s.createHref(P);return dt({fullPath:P,hash:Ie,query:r===nw?R4(O.query):O.query||{}},ne,{redirectedFrom:void 0,href:k})}function x(O){return typeof O=="string"?vf(n,O,l.value.path):dt({},O)}function w(O,Q){if(c!==O)return Co(8,{from:Q,to:O})}function p(O){return R(O)}function b(O){return p(dt(x(O),{replace:!0}))}function A(O){const Q=O.matched[O.matched.length-1];if(Q&&Q.redirect){const{redirect:ie}=Q;let ne=typeof ie=="function"?ie(O):ie;return typeof ne=="string"&&(ne=ne.includes("?")||ne.includes("#")?ne=x(ne):{path:ne},ne.params={}),dt({query:O.query,hash:O.hash,params:ne.path!=null?{}:O.params},ne)}}function R(O,Q){const ie=c=_(O),ne=l.value,Ie=O.state,P=O.force,k=O.replace===!0,V=A(ie);if(V)return R(dt(x(V),{state:typeof V=="object"?dt({},Ie,V.state):Ie,force:P,replace:k}),Q||ie);const pe=ie;pe.redirectedFrom=Q;let be;return!P&&ZB(r,ne,ie)&&(be=Co(16,{to:pe,from:ne}),le(ne,ne,!0,!1)),(be?Promise.resolve(be):D(pe,ne)).catch(ge=>as(ge)?as(ge,2)?ge:q(ge):B(ge,pe,ne)).then(ge=>{if(ge){if(as(ge,2))return R(dt({replace:k},x(ge.to),{state:typeof ge.to=="object"?dt({},Ie,ge.to.state):Ie,force:P}),Q||pe)}else ge=J(pe,ne,!0,k,Ie);return U(pe,ne,ge),ge})}function I(O,Q){const ie=w(O,Q);return ie?Promise.reject(ie):Promise.resolve()}function T(O){const Q=Ce.values().next().value;return Q&&typeof Q.runWithContext=="function"?Q.runWithContext(O):O()}function D(O,Q){let ie;const[ne,Ie,P]=N4(O,Q);ie=wf(ne.reverse(),"beforeRouteLeave",O,Q);for(const V of ne)V.leaveGuards.forEach(pe=>{ie.push(Fs(pe,O,Q))});const k=I.bind(null,O,Q);return ie.push(k),G(ie).then(()=>{ie=[];for(const V of i.list())ie.push(Fs(V,O,Q));return ie.push(k),G(ie)}).then(()=>{ie=wf(Ie,"beforeRouteUpdate",O,Q);for(const V of Ie)V.updateGuards.forEach(pe=>{ie.push(Fs(pe,O,Q))});return ie.push(k),G(ie)}).then(()=>{ie=[];for(const V of P)if(V.beforeEnter)if(Lr(V.beforeEnter))for(const pe of V.beforeEnter)ie.push(Fs(pe,O,Q));else ie.push(Fs(V.beforeEnter,O,Q));return ie.push(k),G(ie)}).then(()=>(O.matched.forEach(V=>V.enterCallbacks={}),ie=wf(P,"beforeRouteEnter",O,Q,T),ie.push(k),G(ie))).then(()=>{ie=[];for(const V of o.list())ie.push(Fs(V,O,Q));return ie.push(k),G(ie)}).catch(V=>as(V,8)?V:Promise.reject(V))}function U(O,Q,ie){a.list().forEach(ne=>T(()=>ne(O,Q,ie)))}function J(O,Q,ie,ne,Ie){const P=w(O,Q);if(P)return P;const k=Q===Os,V=eo?history.state:{};ie&&(ne||k?s.replace(O.fullPath,dt({scroll:k&&V&&V.scroll},Ie)):s.push(O.fullPath,Ie)),l.value=O,le(O,Q,ie,k),q()}let H;function j(){H||(H=s.listen((O,Q,ie)=>{if(!X.listening)return;const ne=_(O),Ie=A(ne);if(Ie){R(dt(Ie,{replace:!0,force:!0}),ne).catch(Sa);return}c=ne;const P=l.value;eo&&a4(Wv(P.fullPath,ie.delta),ku()),D(ne,P).catch(k=>as(k,12)?k:as(k,2)?(R(dt(x(k.to),{force:!0}),ne).then(V=>{as(V,20)&&!ie.delta&&ie.type===Ua.pop&&s.go(-1,!1)}).catch(Sa),Promise.reject()):(ie.delta&&s.go(-ie.delta,!1),B(k,ne,P))).then(k=>{k=k||J(ne,P,!1),k&&(ie.delta&&!as(k,8)?s.go(-ie.delta,!1):ie.type===Ua.pop&&as(k,20)&&s.go(-1,!1)),U(ne,P,k)}).catch(Sa)}))}let se=ra(),$=ra(),W;function B(O,Q,ie){q(O);const ne=$.list();return ne.length?ne.forEach(Ie=>Ie(O,Q,ie)):console.error(O),Promise.reject(O)}function oe(){return W&&l.value!==Os?Promise.resolve():new Promise((O,Q)=>{se.add([O,Q])})}function q(O){return W||(W=!O,j(),se.list().forEach(([Q,ie])=>O?ie(O):Q()),se.reset()),O}function le(O,Q,ie,ne){const{scrollBehavior:Ie}=t;if(!eo||!Ie)return Promise.resolve();const P=!ie&&l4(Wv(O.fullPath,0))||(ne||!ie)&&history.state&&history.state.scroll||null;return Ft().then(()=>Ie(O,Q,P)).then(k=>k&&o4(k)).catch(k=>B(k,O,Q))}const de=O=>s.go(O);let ye;const Ce=new Set,X={currentRoute:l,listening:!0,addRoute:h,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:S,getRoutes:y,resolve:_,options:t,push:p,replace:b,go:de,back:()=>de(-1),forward:()=>de(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:$.add,isReady:oe,install(O){const Q=this;O.component("RouterLink",NE),O.component("RouterView",L4),O.config.globalProperties.$router=Q,Object.defineProperty(O.config.globalProperties,"$route",{enumerable:!0,get:()=>E(l)}),eo&&!ye&&l.value===Os&&(ye=!0,p(s.location).catch(Ie=>{}));const ie={};for(const Ie in Os)Object.defineProperty(ie,Ie,{get:()=>l.value[Ie],enumerable:!0});O.provide(Fm,Q),O.provide(jm,a_(ie)),O.provide(qh,l);const ne=O.unmount;Ce.add(O),O.unmount=function(){Ce.delete(O),Ce.size<1&&(c=Os,H&&H(),H=null,l.value=Os,ye=!1,W=!1),ne()}}};function G(O){return O.reduce((Q,ie)=>Q.then(()=>T(ie)),Promise.resolve())}return X}function N4(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>Io(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Io(c,l))||s.push(l))}return[n,r,s]}function F4(t){return qt(jm)}function j4(t,e){return Ap((n,r)=>{let s=vs(go.routesParams.value[t]??{},e);return ut(go.routesParams,()=>{const i=vs(go.routesParams.value[t]??{},e);for(const[o,a]of Object.entries(i))if(a===s[o]){s=i,r();return}}),{get:()=>je(s,()=>n()),set:()=>console.warn("Computed models ref was not set (it is immutable).")}})}const U4=di({name:"router",initialState:{flashRoute:null},persist:["flashRoute"]});class B4 extends U4{constructor(){super();Se(this,"currentRoute");Se(this,"routesParams");Se(this,"router");Se(this,"bindings");Se(this,"history");Se(this,"routesStopWatchers");this.router=pr(null),this.bindings={},this.history=[],this.routesStopWatchers={},this.routesParams=pr({}),this.currentRoute=re(()=>{const n=this.router.value,r=this.routesParams.value;if(!n)return null;const s=E(n.currentRoute);return{...s,params:r==null?void 0:r[s.path],rawParams:s.params}})}use(n,r={}){this.router.value=n,this.bindings=r.bindings??{},n.beforeEach(MS(()=>this.handleStatic404Redirect())),n.beforeEach(s=>this.onEnterRoute(s.path,s.params))}async boot(){He.on("auth:before-login",()=>this.storeFlashRoute()),He.on("auth:login",()=>this.restoreFlashRoute()),He.on("purge-storage",()=>this.push({name:"home"}))}__get(n){return this.router.value?super.__get(n)??Reflect.get(this.router.value,n):super.__get(n)}async onEnterRoute(n,r){var o;if(n in this.routesParams.value)return;const s={...r};for(const[a,l]of Object.entries(r)){const c=await this.resolveBinding(n,a,l);ut(c,u=>{this.routesParams.value={...this.routesParams.value,[n]:{...this.routesParams.value[n],[a]:u}}}),s[a]=c.value}this.history=this.history.slice(0,3),this.history.unshift(n);const i={...this.routesParams.value,[n]:{...s,...this.routesParams.value[n]??{}}};for(const a in i)this.history.includes(a)||(o=this.routesStopWatchers[a])==null||o.forEach(l=>l());this.routesParams.value=Us(i,this.history),this.routesStopWatchers=Us(this.routesStopWatchers,this.history)}handleStatic404Redirect(){const n=sr.pull("static-404-redirect");n&&this.replace(n)}storeFlashRoute(){this.flashRoute=Us(this.currentRoute.value,["path","query","hash"])}async restoreFlashRoute(){if(!this.flashRoute)return;const n=this.flashRoute;lt.whenReady(()=>this.replace(n)),this.flashRoute=null}async resolveBinding(n,r,s){const i=this.bindings[r];if(Array.isArray(s)||!i)return Ee(s);await lt.ready;const o=j4(n,r),a=b1(()=>Promise.resolve(i(s,o.value)));return Gj(()=>a.value)}}const go=Qn(B4);class q4{constructor(e){this.value=e}}const z4=fe({__name:"Page",props:{class:{}},setup(t){const e=re(()=>kt("mx-auto flex w-full max-w-screen-content grow flex-col px-edge py-8",t.class));return(n,r)=>(N(),_e("main",{class:Ye(e.value)},[Ae(n.$slots,"default")],2))}}),V4={class:"text-2xl font-bold"},FE=fe({__name:"NotFound",setup(t){return(e,n)=>(N(),ae(z4,{class:"items-center justify-center"},{default:K(()=>[me("h2",V4,xe(e.$td("notFound.title","404: Not Found")),1),z(E(So),{route:"home"},{default:K(()=>[$e(xe(e.$td("notFound.home","Go home")),1)]),_:1})]),_:1}))}});function H4(t,e){const n=F4(),r=re(()=>{var i;return(i=go.routesParams)==null?void 0:i.value[n.path]}),s=re(()=>!(e!=null&&e.title)||!r.value?null:typeof e.title=="string"?e.title:e.title(r.value));return Lt(()=>G4(s.value)),()=>Object.values(r.value??{}).some(i=>i instanceof q4)?Gn(FE):Gn(t,r.value)}function lw(t,e){return fe({setup:()=>H4(t,e)})}function K4(t){if(t.component){if(typeof t.component=="function"){const e=t.component;t.component=async()=>{const{default:n}=await e();return lw(n,t)};return}t.component=lw(t.component,t)}}function cw(t){return async function(...e){return await lt.ready,t.call(this,...e)}}function W4(t){if(t.beforeEnter){if(Array.isArray(t.beforeEnter)){t.beforeEnter=t.beforeEnter.map(cw);return}t.beforeEnter=cw(t.beforeEnter)}}function G4(t){if(globalThis.document){if(!t){globalThis.document.title=lt.name;return}globalThis.document.title=`${t} | ${lt.name}`}}function uw(t){return K4(t),W4(t),t}function J4(t){const e=t.map(uw);return e.some(n=>n.name==="not-found"||n.name==="404")||e.push(uw({name:"not-found",path:"/:path(.*)*",component:FE})),e}const X4={$router:go};function Y4(t){return{async install(e){const n=M4({routes:t.routes,history:f4(t.basePath??Sr.basePath)});It.registerComponent("router-link",NE),go.use(n,t),e.use(n),gO({resolve:r=>n.resolve({name:r}).href,visit:async r=>void await n.push({name:r})}),await Fi(e,X4)}}}const Q4={},Z4={class:"bg-gray-200 p-2"},e8={class:"m-auto flex max-w-(--breakpoint-lg) flex-row items-center justify-center gap-2"};function t8(t,e){const n=So;return N(),_e("footer",Z4,[me("div",e8,[z(n,{size:"small",class:"text-gray-700",href:"https://aerogel.js.org"},{default:K(()=>[$e(xe(t.$t("footer.about")),1)]),_:1}),e[0]||(e[0]=me("span",{class:"text-gray-600"},"|",-1)),z(n,{size:"small",class:"text-gray-700",href:"https://github.com/NoelDeMartin/aerogel/tree/main/playground"},{default:K(()=>[$e(xe(t.$t("footer.source")),1)]),_:1})])])}const n8=ks(Q4,[["render",t8]]),r8={viewBox:"0 0 128 128","aria-hidden":"true",width:"1.2em",height:"1.2em"};function s8(t,e){return N(),_e("svg",r8,e[0]||(e[0]=[H_('<circle cx="109.77" cy="11.02" r="4.66" fill="#00EDCD"></circle><path fill="#81D4FA" d="m11.43 91.09l72.66-72.66c.11-.11.21-.28.31-.45c.77-1.32.85-2.58.73-4.25c-.21-2.83.46-4.36 1.83-5.38c1.81-1.36 8.08-1.08 19.81 10.65s12 17.99 10.64 19.8c-1.02 1.37-2.55 2.03-5.38 1.83c-1.67-.12-2.93-.05-4.25.73c-.18.1-.34.2-.45.31l-72.66 72.66c-9.98 9.98-19.51 8.46-25.56 2.41l-.04-.04l-.04-.04c-6.07-6.06-7.59-15.59 2.4-25.57" opacity=".75"></path><path fill="#1D44B3" d="M99.79 23.22c-6.36-6.36-11.2-9.55-14.69-10.98c-.02.45-.02.95.02 1.49c.09 1.19.06 2.17-.23 3.11c3.17 1.71 7.14 4.55 12.01 9.11c7 6.56 10.34 11.51 11.73 15c.92-.34 1.86-.4 2.98-.35c-.67-3.5-3.62-9.19-11.82-17.38" opacity=".39"></path><path fill="#00BFA5" d="M54.15 48.51L11.67 90.94c-10.36 10.35-9.05 20.03-3.03 26.05c6.02 6.01 15.68 7.35 26.06-3.03L102 47.04z"></path><circle cx="45.06" cy="76.96" r="5.06" fill="#00937A"></circle><circle cx="96.58" cy="37.04" r="4.76" fill="#00BFA5"></circle><circle cx="73.27" cy="57.3" r="2.93" fill="#FFF" opacity=".69"></circle><circle cx="121.84" cy="12.01" r="2.17" fill="#00BFA5"></circle><circle cx="59.15" cy="72.54" r="4" fill="#00EDCD"></circle><circle cx="63.75" cy="61.12" r="1.54" fill="#00EDCD"></circle><path fill="none" stroke="#FFF" stroke-linecap="round" stroke-miterlimit="10" stroke-width="4.195" d="M93.2 14.66c3.21 2.08 6.13 4.6 8.65 7.46" opacity=".6"></path><path fill="#00EDCD" d="M102.02 46.96c-.84.74-3.57 1.23-10.75 2.35c-3.81.6-8.47 1.2-13.82 1.64c-16.77 1.39-28.08-.9-21.37-3.64c5.39-2.2 24.53-1.72 36.51-1.34c5.78.19 10.09.42 9.43.99"></path><path fill="#FFF" d="M11.63 103.5c-1.72-.71-1.02-2.68 0-3.71l67.5-69.29c4.1-4.24 7.85-7.12 9.95-5.12c2.35 2.23 1.6 6.23-7.61 14.49l-64.68 61.17c-.51.51-3.44 3.17-5.16 2.46" opacity=".6"></path>',13)]))}const i8=it({name:"noto-test-tube",render:s8}),o8={},a8={class:"border-b border-b-blue-200 bg-blue-100 p-8"},l8={class:"m-auto max-w-(--breakpoint-lg) text-center"},c8={class:"text-2xl font-medium"};function u8(t,e){const n=i8,r=Dp("RouterLink");return N(),_e("header",a8,[me("div",l8,[me("h1",c8,[z(r,{to:{name:"home"}},{default:K(()=>[z(n,{class:"inline size-6"}),$e(" "+xe(t.$t("app.title")),1)]),_:1})])])])}const d8=ks(o8,[["render",u8]]),f8={},h8={class:"flex grow p-4"},p8={class:"mx-auto flex w-full max-w-(--breakpoint-lg) grow flex-col"};function m8(t,e){const n=d8,r=Dp("RouterView"),s=n8,i=aF;return N(),ae(i,null,{default:K(()=>[z(n),me("main",h8,[me("div",p8,[z(r)])]),z(s)]),_:1})}const g8=ks(f8,[["render",m8]]),y8={class:"flex flex-row items-center gap-2"},b8={class:"text-xl"},gi=fe({__name:"PageTitle",props:{source:{}},setup(t){const e=re(()=>{if(t.source)return`https://github.com/noeldemartin/aerogel/blob/main/playground/${t.source}`});return(n,r)=>{const s=kx,i=st;return N(),_e("div",{class:Ye(["mb-4 flex flex-row items-center justify-between",{"w-full":n.source}])},[me("div",y8,[me("h2",b8,[Ae(n.$slots,"default")]),e.value?(N(),ae(i,{key:0,variant:"ghost",size:"icon",class:"p-0 text-gray-600 hover:text-gray-800",href:e.value,title:n.$t("app.viewPageSource"),"aria-label":n.$t("app.viewPageSource")},{default:K(()=>[z(s,{class:"size-5"})]),_:1},8,["href","title","aria-label"])):We("",!0)]),Ae(n.$slots,"end")],2)}}}),v8={viewBox:"0 0 36 36","aria-hidden":"true",width:"1.2em",height:"1.2em"};function w8(t,e){return N(),_e("svg",v8,e[0]||(e[0]=[me("path",{fill:"#FFCC4D",d:"M36 18c0 9.941-8.059 18-18 18c-9.94 0-18-8.059-18-18C0 8.06 8.06 0 18 0c9.941 0 18 8.06 18 18"},null,-1),me("path",{fill:"#66471B",d:"M6.001 20a1 1 0 0 1-.601-1.799c.143-.107 2.951-2.183 6.856-2.933C9.781 14.027 7.034 14 6.999 14A1.001 1.001 0 0 1 7 12c.221 0 5.452.038 8.707 3.293A1 1 0 0 1 15 17c-4.613 0-8.363 2.772-8.4 2.8a1 1 0 0 1-.599.2m23.998-.001a1 1 0 0 1-.598-.198C29.363 19.772 25.59 17 21 17a.999.999 0 0 1-.707-1.707C23.549 12.038 28.779 12 29 12a1 1 0 0 1 .002 2c-.036 0-2.783.027-5.258 1.268c3.905.75 6.713 2.825 6.855 2.933a1 1 0 0 1-.6 1.798M7 21.263c0 3.964 4.596 9 11 9s11-5 11-9c0 0-10.333 2.756-22 0"},null,-1),me("path",{fill:"#E8596E",d:"m18.545 23.604l-1.091-.005c-3.216-.074-5.454-.596-5.454-.596v6.961c0 3 2 6 6 6s6-3 6-6v-6.92a28.7 28.7 0 0 1-5.455.56"},null,-1),me("path",{fill:"#DD2F45",d:"M18 31.844a.545.545 0 0 0 .545-.545v-7.694l-1.091-.005v7.699a.546.546 0 0 0 .546.545"},null,-1)]))}const _8=it({name:"twemoji-squinting-face-with-tongue",render:w8}),x8={};function E8(t,e){const n=_8,r=st,s=Mr;return N(),ae(s,{title:t.$t("components.modals_customTitle"),description:t.$t("components.modals_customDescription"),persistent:"",class:"flex flex-col items-center gap-4"},{default:K(({close:i})=>[z(n,{class:"size-30"}),z(r,{onClick:o=>i()},{default:K(()=>[$e(xe(t.$t("components.modals_customClose")),1)]),_:2},1032,["onClick"])]),_:1},8,["title","description"])}const S8=ks(x8,[["render",E8]]),A8={viewBox:"0 0 36 36","aria-hidden":"true",width:"1.2em",height:"1.2em"};function I8(t,e){return N(),_e("svg",A8,e[0]||(e[0]=[H_('<path fill="#77B255" d="M9.842 19.922c0 9.842 6.575 9.673 5.158 10.078c-7 2-8.803-7.618-9.464-7.618c-2.378 0-5.536-.423-5.536-2.46C0 17.883 2.46 15 6.151 15c2.379 0 3.691 2.883 3.691 4.922M36 28.638c0 1.104-3.518-.741-5 0c-2 1-2-.896-2-2s1.343-1 3-1s4 1.895 4 3"></path><path fill="#77B255" d="M16.715 33.143c0 2.761-1.279 2.857-2.857 2.857S11 35.903 11 33.143c0-.489.085-1.029.234-1.587c.69-2.59 2.754-5.556 4.052-5.556c1.578 0 1.429 4.382 1.429 7.143m8.571 0c0 2.761 1.278 2.857 2.856 2.857C29.721 36 31 35.903 31 33.143a6.3 6.3 0 0 0-.234-1.587C30.075 28.966 28.012 26 26.714 26c-1.578 0-1.428 4.382-1.428 7.143"></path><path fill="#3E721D" d="M32 27c0 4-5.149 4-11.5 4S9 31 9 27c0-6.627 5.149-12 11.5-12S32 20.373 32 27"></path><circle cx="5" cy="18" r="1" fill="#292F33"></circle><path fill="#5C913B" d="M23.667 25.1c0 3.591-1.418 3.9-3.167 3.9s-3.167-.31-3.167-3.9S18.75 17 20.5 17s3.167 4.51 3.167 8.1M30 24c.871 3.482-.784 4-2.533 4s-2.533.69-2.533-2.9s-1.116-6.5.633-6.5C27.315 18.6 29 20 30 24m-13.933 1.1c0 3.591-.785 2.9-2.534 2.9s-3.404-.518-2.533-4c1-4 3.251-5.4 5-5.4s.067 2.91.067 6.5"></path>',5)]))}const C8=it({name:"twemoji-turtle",render:I8}),R8={class:"mt-3 flex flex-col items-center"},T8={class:"flex flex-wrap"},k8=fe({__name:"NestedModal",props:{count:{default:1}},setup(t){return(e,n)=>{const r=bt,s=Rx,i=C8,o=st,a=Mr;return N(),ae(a,null,{default:K(()=>[z(s,{class:"isolate z-10 text-base leading-6 font-semibold text-gray-900"},{default:K(()=>[z(r,{"lang-key":"components.modals_nestedTitle","lang-params":{count:e.count},inline:""},null,8,["lang-params"])]),_:1}),me("div",R8,[me("div",T8,[(N(!0),_e(Je,null,Ln(e.count,l=>(N(),ae(i,{key:l,class:"-mt-6 mb-4 size-20","aria-label":e.$t("components.modals_nestedTurtle"),title:e.$t("components.modals_nestedTurtle")},null,8,["aria-label","title"]))),128))]),z(r,{"lang-key":"components.modals_nestedMessage",class:"mb-4"}),z(o,{onClick:n[0]||(n[0]=l=>e.$events.emit("all-the-way-down",e.count+1))},{default:K(()=>[$e(xe(e.$t("components.modals_nestedButton")),1)]),_:1})])]),_:1})}}}),$8={class:"prose-sm"},D8={class:"mt-4 flex items-center gap-2"},O8={class:"mt-4 flex items-center gap-2"},P8={class:"mt-4 flex items-center gap-2"},L8={class:"mt-4"},M8={class:"mt-4"},N8={class:"mt-4"},F8={class:"mt-4"},j8={class:"mt-4"},U8={class:"mt-4"},B8={class:"mt-4"},q8={class:"mt-4 flex gap-2"},z8={class:"mt-4 flex gap-2"},V8={class:"mt-4 flex gap-2"},H8={class:"mt-4 flex gap-2"},K8={class:"mt-4 flex gap-2"},W8={class:"mt-4 flex gap-2"},G8={class:"mt-4 flex gap-2"},J8={class:"mt-4 flex gap-2"},X8=fe({__name:"Components",setup(t){const e=Ee(!1);async function n(){const r=Ee(0);It.loading({message:el("components.modals_loadingMessage"),progress:r},ln({seconds:3})),await ln({seconds:1}),r.value=.33,await ln({seconds:1}),r.value=.66,await ln({seconds:1}),r.value=1}return fu("all-the-way-down",r=>It.modal(k8,{count:r})),(r,s)=>{const i=gi,o=st,a=Ix,l=al,c=$F,u=bm,d=xa,f=Sx;return N(),_e(Je,null,[z(i,{source:"src/pages/Components.vue"},{default:K(()=>[$e(xe(r.$t("components.title")),1)]),_:1}),me("div",$8,[me("section",null,[me("h2",null,xe(r.$t("components.buttons")),1),me("div",D8,[me("span",null,xe(r.$t("components.buttons_variants"))+":",1),z(o,null,{default:K(()=>[$e(xe(r.$t("components.buttons_variants_default")),1)]),_:1}),z(o,{variant:"secondary"},{default:K(()=>[$e(xe(r.$t("components.buttons_variants_secondary")),1)]),_:1}),z(o,{variant:"danger"},{default:K(()=>[$e(xe(r.$t("components.buttons_variants_danger")),1)]),_:1}),z(o,{variant:"ghost"},{default:K(()=>[$e(xe(r.$t("components.buttons_variants_ghost")),1)]),_:1}),z(o,{variant:"outline"},{default:K(()=>[$e(xe(r.$t("components.buttons_variants_outline")),1)]),_:1}),z(o,{variant:"link"},{default:K(()=>[$e(xe(r.$t("components.buttons_variants_link")),1)]),_:1})]),me("div",O8,[me("span",null,xe(r.$t("components.buttons_sizes"))+":",1),z(o,{size:"small"},{default:K(()=>[$e(xe(r.$t("components.buttons_sizes_small")),1)]),_:1}),z(o,{size:"default"},{default:K(()=>[$e(xe(r.$t("components.buttons_sizes_default")),1)]),_:1}),z(o,{size:"large"},{default:K(()=>[$e(xe(r.$t("components.buttons_sizes_large")),1)]),_:1}),z(o,{size:"icon"},{default:K(()=>[z(a,{class:"size-4"})]),_:1})]),me("div",P8,[me("span",null,xe(r.$t("components.buttons_states"))+":",1),z(o,{size:"small",disabled:""},{default:K(()=>[$e(xe(r.$t("components.buttons_states_disabled")),1)]),_:1})])]),me("section",null,[me("h2",null,xe(r.$t("components.inputs")),1),me("div",L8,[z(l,{label:r.$t("components.inputs_text"),placeholder:r.$t("components.inputs_textPlaceholder")},null,8,["label","placeholder"])]),me("div",M8,[z(c,{label:r.$t("components.inputs_textarea"),placeholder:r.$t("components.inputs_textareaPlaceholder")},null,8,["label","placeholder"])]),me("div",N8,[z(l,{type:"number",label:r.$t("components.inputs_number"),placeholder:r.$t("components.inputs_numberPlaceholder")},null,8,["label","placeholder"])]),me("div",F8,[z(l,{type:"date",label:r.$t("components.inputs_date")},null,8,["label"])]),me("div",j8,[z(u,{label:r.$t("components.inputs_select"),options:r.$t("components.inputs_select_options").split(",").map(h=>h.trim())},null,8,["label","options"])]),me("div",U8,[z(d,{label:r.$t("components.inputs_checkbox")},null,8,["label"])]),me("div",B8,[z(f,{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=h=>e.value=h),label:r.$t("components.inputs_switch")},null,8,["modelValue","label"])])]),me("section",null,[me("h2",null,xe(r.$t("components.modals")),1),me("div",q8,[z(o,{onClick:s[1]||(s[1]=h=>r.$ui.alert(r.$t("components.modals_alertTitle"),r.$t("components.modals_alertMessage")))},{default:K(()=>[$e(xe(r.$t("components.modals_alert")),1)]),_:1})]),me("div",z8,[z(o,{onClick:s[2]||(s[2]=h=>{r.$ui.confirm(r.$t("components.modals_confirmTitle"),r.$t("components.modals_confirmMessage"),{acceptText:r.$t("components.modals_confirmAccept"),cancelText:r.$t("components.modals_confirmCancel")}).then(m=>{r.$ui.alert(m?r.$t("components.modals_confirmConfirmed"):r.$t("components.modals_confirmCancelled"))})})},{default:K(()=>[$e(xe(r.$t("components.modals_confirm")),1)]),_:1}),z(o,{onClick:s[3]||(s[3]=h=>{r.$ui.confirm(r.$t("components.modals_confirmTitle"),r.$t("components.modals_confirmMessage"),{checkboxes:{terms:{label:r.$t("components.modals_confirmConditions"),required:!0}},acceptText:r.$t("components.modals_confirmAccept"),cancelText:r.$t("components.modals_confirmCancel")}).then(([m])=>{r.$ui.alert(m?r.$t("components.modals_confirmConfirmed"):r.$t("components.modals_confirmCancelled"))})})},{default:K(()=>[$e(xe(r.$t("components.modals_confirmWithCheckboxes")),1)]),_:1})]),me("div",V8,[z(o,{onClick:s[4]||(s[4]=h=>r.$ui.loading(r.$t("components.modals_loadingMessage"),E(ln)({seconds:3})))},{default:K(()=>[$e(xe(r.$t("components.modals_loading")),1)]),_:1}),z(o,{onClick:s[5]||(s[5]=h=>n())},{default:K(()=>[$e(xe(r.$t("components.modals_loadingWithProgress")),1)]),_:1})]),me("div",H8,[z(o,{onClick:s[6]||(s[6]=h=>r.$ui.prompt(r.$t("components.modals_promptTitle"),{placeholder:r.$t("components.modals_promptPlaceholder")}).then(m=>m&&r.$ui.alert(r.$t("components.modals_promptResult",{name:m}))))},{default:K(()=>[$e(xe(r.$t("components.modals_prompt")),1)]),_:1})]),me("div",K8,[z(o,{onClick:s[7]||(s[7]=h=>r.$events.emit("all-the-way-down",1))},{default:K(()=>[$e(xe(r.$t("components.modals_nested")),1)]),_:1})]),me("div",W8,[z(o,{onClick:s[8]||(s[8]=h=>r.$ui.modal(S8))},{default:K(()=>[$e(xe(r.$t("components.modals_custom")),1)]),_:1})])]),me("section",null,[me("h2",null,xe(r.$t("components.toasts")),1),me("div",G8,[z(o,{onClick:s[9]||(s[9]=h=>r.$ui.toast(r.$t("components.toasts_message")))},{default:K(()=>[$e(xe(r.$t("components.toasts_default")),1)]),_:1}),z(o,{onClick:s[10]||(s[10]=h=>r.$ui.toast(r.$t("components.toasts_message"),{actions:[{label:r.$t("components.toasts_close"),dismiss:!0},{label:r.$t("components.toasts_greet"),click:()=>r.$ui.alert(r.$t("components.toasts_greetMessage"))}]}))},{default:K(()=>[$e(xe(r.$t("components.toasts_defaultWithActions")),1)]),_:1})]),me("div",J8,[z(o,{onClick:s[11]||(s[11]=h=>r.$ui.toast(r.$t("components.toasts_message"),{variant:"danger"}))},{default:K(()=>[$e(xe(r.$t("components.toasts_danger")),1)]),_:1}),z(o,{onClick:s[12]||(s[12]=h=>r.$ui.toast(r.$t("components.toasts_message"),{variant:"danger",actions:[{label:r.$t("components.toasts_close"),dismiss:!0},{label:r.$t("components.toasts_greet"),click:()=>r.$ui.alert(r.$t("components.toasts_greetMessage"))}]}))},{default:K(()=>[$e(xe(r.$t("components.toasts_dangerWithActions")),1)]),_:1})])])])],64)}}}),Y8={};function Q8(t,e){const n=gi,r=bt;return N(),_e(Je,null,[z(n,{source:"src/pages/Content.vue"},{default:K(()=>[$e(xe(t.$t("content.title")),1)]),_:1}),z(r,{"lang-key":"content.body"})],64)}const Z8=ks(Y8,[["render",Q8]]),e6={class:"flex w-full flex-wrap items-center justify-center gap-3"},t6=fe({__name:"Errors",setup(t){function e(){throw new Error(el("errors.throwMessage"))}return(n,r)=>{const s=TF,i=gi,o=st;return N(),_e(Je,null,[z(i,{source:"src/pages/Errors.vue"},{end:K(()=>[z(s)]),default:K(()=>[$e(xe(n.$t("errors.title"))+" ",1)]),_:1}),me("div",e6,[z(o,{onClick:r[0]||(r[0]=a=>e())},{default:K(()=>[$e(xe(n.$t("errors.throw")),1)]),_:1}),z(o,{onClick:r[1]||(r[1]=a=>n.$errors.report({name:n.$t("errors.throwWithoutTraceName"),message:n.$t("errors.throwMessage")}))},{default:K(()=>[$e(xe(n.$t("errors.throwWithoutTrace")),1)]),_:1}),z(o,{onClick:r[2]||(r[2]=a=>n.$app.reload({startupCrash:"true"}))},{default:K(()=>[$e(xe(n.$t("errors.startupCrash")),1)]),_:1})])],64)}}}),n6={class:"mt-8 flex flex-col items-center rounded-lg bg-gray-100 p-8 pb-4 shadow-2xs"},r6={class:"flex"},s6=fe({__name:"Forms",setup(t){const e=Qa({name:Au(),accept:SN(!0)});function n(){if(Ba(e.name)==="heisenberg"){It.alert("You're Goddamn Right!");return}It.alert(el("forms.greeting",{name:e.name})),e.reset()}return(r,s)=>{const i=gi,o=al,a=st,l=xa,c=ol;return N(),_e(Je,null,[z(i,{source:"src/pages/Forms.vue"},{default:K(()=>[$e(xe(r.$t("forms.title")),1)]),_:1}),z(c,{form:E(e),class:"flex grow flex-col items-center",onSubmit:s[0]||(s[0]=u=>n())},{default:K(()=>[me("div",n6,[me("div",r6,[z(o,{autofocus:"",name:"name",class:"h-full","input-class":"h-full","wrapper-class":"h-full","aria-label":r.$t("forms.name_label"),placeholder:r.$t("forms.name_placeholder")},null,8,["aria-label","placeholder"]),z(a,{submit:"",class:"ml-2 shrink-0"},{default:K(()=>[$e(xe(r.$t("forms.submit")),1)]),_:1})]),z(l,{name:"accept",class:"mt-4"},{default:K(()=>[$e(xe(r.$t("forms.conditions")),1)]),_:1})])]),_:1},8,["form"])],64)}}}),i6={class:"flex grow flex-col items-center"},o6={class:"mt-2 flex w-full max-w-prose flex-wrap justify-center gap-3"},a6=fe({__name:"Home",setup(t){const e=[{langKey:"home.components",route:"components"},{langKey:"home.content",route:"content"},{langKey:"home.errors",route:"errors"},{langKey:"home.forms",route:"forms"},{langKey:"home.storage",route:"storage"},{langKey:"home.solid",route:"solid"},{langKey:"home.localFirst",route:"local-first"}];return(n,r)=>{const s=gi,i=bt,o=Dp("RouterLink");return N(),_e("div",i6,[z(s,null,{default:K(()=>[$e(xe(n.$t("home.title")),1)]),_:1}),z(i,{"lang-key":"home.description",class:"text-center"}),me("ul",o6,[(N(),_e(Je,null,Ln(e,a=>me("li",{key:a.route},[z(o,{to:{name:a.route},class:"flex size-32 items-center justify-center rounded-lg bg-blue-200 text-center font-semibold hover:bg-blue-300"},{default:K(()=>[$e(xe(n.$t(a.langKey)),1)]),_:2},1032,["to"])])),64))])])}}}),l6={role:"list",class:"mt-4 space-y-3"},Um=fe({__name:"TasksList",props:{tasks:{}},emits:["create","delete"],setup(t){const e=Qa({draft:Au()});return(n,r)=>{const s=bt,i=st,o=al,a=ol;return N(),_e(Je,null,[me("ul",l6,[(N(!0),_e(Je,null,Ln(n.tasks,l=>(N(),_e("li",{key:l.id,class:"flex justify-between overflow-hidden rounded-md bg-gray-100 px-6 py-4 shadow-2xs"},[z(s,{text:l.name},null,8,["text"]),z(i,{small:"",color:"danger","aria-label":n.$t("storage.deleteTask_a11y",{task:l.name}),onClick:c=>n.$emit("delete",l)},{default:K(()=>[$e(xe(n.$t("storage.deleteTask")),1)]),_:2},1032,["aria-label","onClick"])]))),128))]),z(a,{class:"mt-5 flex justify-center",form:E(e),onSubmit:r[0]||(r[0]=l=>(n.$emit("create",E(e).draft),E(e).reset()))},{default:K(()=>[z(o,{name:"draft",class:"mr-2 h-full w-full sm:max-w-xs","input-class":"h-full","wrapper-class":"h-full","aria-label":n.$t("storage.taskName"),placeholder:n.$t("storage.newTask")},null,8,["aria-label","placeholder"]),z(i,{submit:""},{default:K(()=>[$e(xe(n.$t("storage.submit")),1)]),_:1})]),_:1},8,["form"])],64)}}}),c6=fe({__name:"LocalTasks",setup(t){const e=Om(lo);return(n,r)=>{const s=Um;return N(),ae(s,{tasks:E(e),onCreate:r[0]||(r[0]=i=>E(lo).create({name:i})),onDelete:r[1]||(r[1]=i=>i.delete())},null,8,["tasks"])}}}),u6={};function d6(t,e){const n=OB,r=gi,s=c6;return N(),_e(Je,null,[z(r,{source:"src/pages/local-first/LocalFirst.vue"},{end:K(()=>[z(n)]),default:K(()=>[$e(xe(t.$t("localFirst.title"))+" ",1)]),_:1}),z(s)],64)}const f6=ks(u6,[["render",d6]]),h6=fe({__name:"SolidTasks",setup(t){const e=Om(Vs);return(n,r)=>{const s=Um;return N(),ae(s,{tasks:E(e),onCreate:r[0]||(r[0]=i=>E(Vs).create({name:i})),onDelete:r[1]||(r[1]=i=>i.delete())},null,8,["tasks"])}}}),p6={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function m6(t,e){return N(),_e("svg",p6,e[0]||(e[0]=[me("path",{fill:"currentColor",d:"m17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5M4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"},null,-1)]))}const g6=it({name:"mdi-logout",render:m6}),y6={};function b6(t,e){var i,o,a;const n=bt,r=g6,s=st;return N(),_e("div",null,[z(n,{text:t.$t("solid.welcome",{name:((i=t.$solid.user)==null?void 0:i.name)??((o=t.$solid.user)==null?void 0:o.webId),url:(a=t.$solid.user)==null?void 0:a.webId})},null,8,["text"]),z(s,{small:"",color:"clear",class:"mt-1",onClick:e[0]||(e[0]=l=>t.$solid.logout())},{default:K(()=>[$e(xe(t.$t("solid.logout"))+" ",1),z(r,{class:"size-4"})]),_:1})])}const v6=ks(y6,[["render",b6]]),w6={},_6={key:0},x6={key:1,class:"mt-4 rounded-md border border-gray-200 p-4"},E6={key:1};function S6(t,e){var l;const n=gi,r=fE,s=bt,i=st,o=v6,a=h6;return N(),_e(Je,null,[z(n,{source:"src/pages/solid/Solid.vue"},{default:K(()=>[$e(xe(t.$t("solid.title")),1)]),_:1}),t.$solid.isLoggedIn()?t.$solidTasks.ready?(N(),_e(Je,{key:2},[z(o),z(a)],64)):(N(),_e("div",E6,xe(t.$t("ui.loading")),1)):(N(),_e(Je,{key:0},[z(r),!t.$solid.ignorePreviousSessionError&&((l=t.$solid.previousSession)!=null&&l.error)?(N(),_e("div",_6,[z(s,{"lang-key":"solid.loginError"})])):t.$solid.previousSession?(N(),_e("div",x6,[z(s,{text:t.$t("solid.previousSession",{name:t.$solid.previousSession.loginUrl,url:t.$solid.previousSession.loginUrl}),class:"max-w-none text-sm"},null,8,["text"]),z(i,{small:"",class:"mt-2",onClick:e[0]||(e[0]=c=>t.$solid.reconnect())},{default:K(()=>[$e(xe(t.$t("solid.reconnect")),1)]),_:1})])):We("",!0)],64))],64)}const A6=ks(w6,[["render",S6]]),I6=fe({__name:"Storage",setup(t){const e=Om(qf);return(n,r)=>{const s=gi,i=Um;return N(),_e(Je,null,[z(s,{source:"src/pages/Storage.vue"},{default:K(()=>[$e(xe(n.$t("storage.title")),1)]),_:1}),z(i,{tasks:E(e),onCreate:r[0]||(r[0]=o=>E(qf).create({name:o})),onDelete:r[1]||(r[1]=o=>o.delete())},null,8,["tasks"])],64)}}}),C6=J4([{name:"home",path:"/",component:a6},{name:"components",path:"/components",component:X8},{name:"content",path:"/content",component:Z8},{name:"errors",path:"/errors",component:t6},{name:"forms",path:"/forms",component:s6},{name:"storage",path:"/storage",component:I6},{name:"solid",path:"/solid",component:A6},{name:"local-first",path:"/local-first",component:f6}]),R6=di({name:"solid-tasks",initialState:()=>({tasksContainer:new Ir}),computed:{ready:({tasksContainer:t})=>t.isResolved()}});class T6 extends R6{async boot(){He.on("auth:login",async e=>{const n=await this.findOrCreateTasksContainer(e);Vs.setEngine(at.requireAuthenticator().engine),Vs.collection=n.url,this.tasksContainer.resolve(n),this.setState("tasksContainer",this.tasksContainer)})}async findOrCreateTasksContainer(e){const n=await at.findOrCreatePrivateTypeIndex(),[r]=await Wn.withEngine(e.authenticator.engine).fromTypeIndex(n.url,Vs);if(r)return r;const s="Tasks",i=ic(e.user.storageUrls[0],Ba(s));return at.createPrivateContainer({url:i,name:s,registerFor:Vs,reuseExisting:!0})}}const k6=Qn(T6);class $6 extends Ya{async boot(){if(Si("startupCrash"))throw new Error("This is an error caused during application startup, you can fix it by removing `startupCrash=true` from the url")}}const D6=Qn($6),O6={$solidTasks:k6,$startup:D6};tF(g8,{services:O6,plugins:[Y4({routes:C6}),Lj({messages:Object.assign({"/src/lang/en.yaml":()=>to(()=>import("./en-CLUAZJMr.js"),[])})}),Zj({models:Object.assign({"/src/models/ITask.ts":XE,"/src/models/LocalTask.ts":$R,"/src/models/SolidTask.schema.ts":TR,"/src/models/SolidTask.ts":kR,"/src/models/Task.schema.ts":DR,"/src/models/Task.ts":OR,"/src/models/index.ts":PR})}),mU(),LB()]});export{jA as g};
